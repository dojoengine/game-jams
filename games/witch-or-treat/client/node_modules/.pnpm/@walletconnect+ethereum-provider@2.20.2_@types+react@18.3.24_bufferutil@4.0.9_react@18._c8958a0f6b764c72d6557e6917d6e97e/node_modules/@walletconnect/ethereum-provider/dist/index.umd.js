(function(Vn,zt){typeof exports=="object"&&typeof module<"u"?zt(exports):typeof define=="function"&&define.amd?define(["exports"],zt):(Vn=typeof globalThis<"u"?globalThis:Vn||self,zt(Vn["@walletconnect/ethereum-provider"]={}))})(this,function(Vn){"use strict";var zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function h2(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var nt={exports:{}},Fa=typeof Reflect=="object"?Reflect:null,p2=Fa&&typeof Fa.apply=="function"?Fa.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Wh;Fa&&typeof Fa.ownKeys=="function"?Wh=Fa.ownKeys:Object.getOwnPropertySymbols?Wh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Wh=function(e){return Object.getOwnPropertyNames(e)};function K_(t){console&&console.warn&&console.warn(t)}var f2=Number.isNaN||function(e){return e!==e};function Qe(){Qe.init.call(this)}nt.exports=Qe,nt.exports.once=J_,Qe.EventEmitter=Qe,Qe.prototype._events=void 0,Qe.prototype._eventsCount=0,Qe.prototype._maxListeners=void 0;var g2=10;function Vh(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Qe,"defaultMaxListeners",{enumerable:!0,get:function(){return g2},set:function(t){if(typeof t!="number"||t<0||f2(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");g2=t}}),Qe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Qe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||f2(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function w2(t){return t._maxListeners===void 0?Qe.defaultMaxListeners:t._maxListeners}Qe.prototype.getMaxListeners=function(){return w2(this)},Qe.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")p2(c,this,r);else for(var l=c.length,u=E2(c,l),n=0;n<l;++n)p2(u[n],this,r);return!0};function m2(t,e,r,n){var i,s,o;if(Vh(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=w2(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,K_(a)}return t}Qe.prototype.addListener=function(e,r){return m2(this,e,r,!1)},Qe.prototype.on=Qe.prototype.addListener,Qe.prototype.prependListener=function(e,r){return m2(this,e,r,!0)};function G_(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b2(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=G_.bind(n);return i.listener=r,n.wrapFn=i,i}Qe.prototype.once=function(e,r){return Vh(r),this.on(e,b2(this,e,r)),this},Qe.prototype.prependOnceListener=function(e,r){return Vh(r),this.prependListener(e,b2(this,e,r)),this},Qe.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Vh(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():Z_(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},Qe.prototype.off=Qe.prototype.removeListener,Qe.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function y2(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Y_(i):E2(i,i.length)}Qe.prototype.listeners=function(e){return y2(this,e,!0)},Qe.prototype.rawListeners=function(e){return y2(this,e,!1)},Qe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):v2.call(t,e)},Qe.prototype.listenerCount=v2;function v2(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Qe.prototype.eventNames=function(){return this._eventsCount>0?Wh(this._events):[]};function E2(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Z_(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Y_(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function J_(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}C2(t,e,s,{once:!0}),e!=="error"&&X_(t,i,{once:!0})})}function X_(t,e,r){typeof t.on=="function"&&C2(t,"error",e,r)}function C2(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var x2=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Q_=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),eI=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),tI=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),rI=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),nI=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),iI=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,sI=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,$2=3,oI=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",iI]],_2=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function I2(t){return t?S2(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new nI:typeof navigator<"u"?S2(navigator.userAgent):lI()}function aI(t){return t!==""&&oI.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function S2(t){var e=aI(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new rI;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<$2&&(i=x2(x2([],i,!0),uI($2-i.length),!0)):i=[];var s=i.join("."),o=cI(t),a=sI.exec(t);return a&&a[1]?new tI(r,s,o,a[1]):new Q_(r,s,o)}function cI(t){for(var e=0,r=_2.length;e<r;e++){var n=_2[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function lI(){var t=typeof process<"u"&&process.version;return t?new eI(process.version.slice(1)):null}function uI(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var z={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var w1=function(t,e){return w1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},w1(t,e)};function dI(t,e){w1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var m1=function(){return m1=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},m1.apply(this,arguments)};function hI(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function pI(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function fI(t,e){return function(r,n){e(r,n,t)}}function gI(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function wI(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function mI(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function bI(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function yI(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function b1(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function A2(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function vI(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(A2(arguments[e]));return t}function EI(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Zl(t){return this instanceof Zl?(this.v=t,this):new Zl(t)}function CI(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(f){return new Promise(function(g,w){s.push([h,f,g,w])>1||a(h,f)})})}function a(h,f){try{c(n[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof Zl?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function xI(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Zl(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function $I(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof b1=="function"?b1(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function _I(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function II(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function SI(t){return t&&t.__esModule?t:{default:t}}function AI(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function PI(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var OI=Object.freeze({__proto__:null,__extends:dI,get __assign(){return m1},__rest:hI,__decorate:pI,__param:fI,__metadata:gI,__awaiter:wI,__generator:mI,__createBinding:bI,__exportStar:yI,__values:b1,__read:A2,__spread:vI,__spreadArrays:EI,__await:Zl,__asyncGenerator:CI,__asyncDelegator:xI,__asyncValues:$I,__makeTemplateObject:_I,__importStar:II,__importDefault:SI,__classPrivateFieldGet:AI,__classPrivateFieldSet:PI}),Kh=h2(OI),y1={},Yl={},P2;function NI(){if(P2)return Yl;P2=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Yl.delay=t,Yl}var _o={},v1={},Io={},O2;function TI(){return O2||(O2=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.ONE_THOUSAND=Io.ONE_HUNDRED=void 0,Io.ONE_HUNDRED=100,Io.ONE_THOUSAND=1e3),Io}var E1={},N2;function kI(){return N2||(N2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(E1)),E1}var T2;function k2(){return T2||(T2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Kh;e.__exportStar(TI(),t),e.__exportStar(kI(),t)}(v1)),v1}var R2;function RI(){if(R2)return _o;R2=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.fromMiliseconds=_o.toMiliseconds=void 0;const t=k2();function e(n){return n*t.ONE_THOUSAND}_o.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return _o.fromMiliseconds=r,_o}var D2;function DI(){return D2||(D2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Kh;e.__exportStar(NI(),t),e.__exportStar(RI(),t)}(y1)),y1}var Ma={},B2;function BI(){if(B2)return Ma;B2=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Ma.Watch=t,Ma.default=t,Ma}var C1={},Jl={},U2;function UI(){if(U2)return Jl;U2=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.IWatch=void 0;class t{}return Jl.IWatch=t,Jl}var L2;function LI(){return L2||(L2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Kh.__exportStar(UI(),t)}(C1)),C1}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Kh;e.__exportStar(DI(),t),e.__exportStar(BI(),t),e.__exportStar(LI(),t),e.__exportStar(k2(),t)})(z);var dt={};Object.defineProperty(dt,"__esModule",{value:!0}),dt.getLocalStorage=dt.getLocalStorageOrThrow=dt.getCrypto=dt.getCryptoOrThrow=x1=dt.getLocation=dt.getLocationOrThrow=Xl=dt.getNavigator=dt.getNavigatorOrThrow=Mi=dt.getDocument=dt.getDocumentOrThrow=dt.getFromWindowOrThrow=dt.getFromWindow=void 0;function So(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}dt.getFromWindow=So;function ja(t){const e=So(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}dt.getFromWindowOrThrow=ja;function FI(){return ja("document")}dt.getDocumentOrThrow=FI;function MI(){return So("document")}var Mi=dt.getDocument=MI;function jI(){return ja("navigator")}dt.getNavigatorOrThrow=jI;function zI(){return So("navigator")}var Xl=dt.getNavigator=zI;function qI(){return ja("location")}dt.getLocationOrThrow=qI;function HI(){return So("location")}var x1=dt.getLocation=HI;function WI(){return ja("crypto")}dt.getCryptoOrThrow=WI;function VI(){return So("crypto")}dt.getCrypto=VI;function KI(){return ja("localStorage")}dt.getLocalStorageOrThrow=KI;function GI(){return So("localStorage")}dt.getLocalStorage=GI;var $1={};Object.defineProperty($1,"__esModule",{value:!0});var _1=$1.getWindowMetadata=void 0;const F2=dt;function ZI(){let t,e;try{t=F2.getDocumentOrThrow(),e=F2.getLocationOrThrow()}catch{return null}function r(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const g=d[f],w=g.getAttribute("rel");if(w&&w.toLowerCase().indexOf("icon")>-1){const p=g.getAttribute("href");if(p)if(p.toLowerCase().indexOf("https:")===-1&&p.toLowerCase().indexOf("http:")===-1&&p.indexOf("//")!==0){let b=e.protocol+"//"+e.host;if(p.indexOf("/")===0)b+=p;else{const m=e.pathname.split("/");m.pop();const E=m.join("/");b+=E+"/"+p}h.push(b)}else if(p.indexOf("//")===0){const b=e.protocol+p;h.push(b)}else h.push(p)}}return h}function n(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const g=h[f],w=["itemprop","property","name"].map(p=>g.getAttribute(p)).filter(p=>p?d.includes(p):!1);if(w.length&&w){const p=g.getAttribute("content");if(p)return p}}return""}function i(){let d=n("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,l=r();return{description:a,url:c,icons:l,name:o}}_1=$1.getWindowMetadata=ZI;function Ql(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function M2(t){return Ql(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const j2="2.23.2";let I1={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${j2}`};class Ao extends Error{constructor(e,r={}){const n=r.cause instanceof Ao?r.cause.details:r.cause?.message?r.cause.message:r.details,i=r.cause instanceof Ao&&r.cause.docsPath||r.docsPath,s=I1.getDocsUrl?.({...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...I1.version?[`Version: ${I1.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=j2}walk(e){return z2(this,e)}}function z2(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?z2(t.cause,e):e?null:t}class q2 extends Ao{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function za(t,{dir:e,size:r=32}={}){return typeof t=="string"?YI(t,{dir:e,size:r}):JI(t,{dir:e,size:r})}function YI(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new q2({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function JI(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new q2({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class XI extends Ao{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class QI extends Ao{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function qa(t,{size:e}){if(M2(t)>e)throw new QI({givenSize:M2(t),maxSize:e})}function S1(t,e={}){const{signed:r}=e;e.size&&qa(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function eS(t,e={}){return Number(S1(t,e))}const tS=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function A1(t,e={}){return typeof t=="number"||typeof t=="bigint"?W2(t,e):typeof t=="string"?iS(t,e):typeof t=="boolean"?rS(t,e):H2(t,e)}function rS(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(qa(r,{size:e.size}),za(r,{size:e.size})):r}function H2(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=tS[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(qa(n,{size:e.size}),za(n,{dir:"right",size:e.size})):n}function W2(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new XI({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?za(a,{size:n}):a}const nS=new TextEncoder;function iS(t,e={}){const r=nS.encode(t);return H2(r,e)}const sS=new TextEncoder;function oS(t,e={}){return typeof t=="number"||typeof t=="bigint"?cS(t,e):typeof t=="boolean"?aS(t,e):Ql(t)?K2(t,e):G2(t,e)}function aS(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(qa(r,{size:e.size}),za(r,{size:e.size})):r}const ji={zero:48,nine:57,A:65,F:70,a:97,f:102};function V2(t){if(t>=ji.zero&&t<=ji.nine)return t-ji.zero;if(t>=ji.A&&t<=ji.F)return t-(ji.A-10);if(t>=ji.a&&t<=ji.f)return t-(ji.a-10)}function K2(t,e={}){let r=t;e.size&&(qa(r,{size:e.size}),r=za(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=V2(n.charCodeAt(a++)),l=V2(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Ao(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+l}return s}function cS(t,e){const r=W2(t,e);return K2(r)}function G2(t,e={}){const r=sS.encode(t);return typeof e.size=="number"?(qa(r,{size:e.size}),za(r,{dir:"right",size:e.size})):r}function Gh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function lS(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function eu(t,...e){if(!lS(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function uS(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Gh(t.outputLen),Gh(t.blockLen)}function Ha(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Z2(t,e){eu(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Zh=BigInt(2**32-1),Y2=BigInt(32);function dS(t,e=!1){return e?{h:Number(t&Zh),l:Number(t>>Y2&Zh)}:{h:Number(t>>Y2&Zh)|0,l:Number(t&Zh)|0}}function hS(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=dS(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const pS=(t,e,r)=>t<<r|e>>>32-r,fS=(t,e,r)=>e<<r|t>>>32-r,gS=(t,e,r)=>e<<r-32|t>>>64-r,wS=(t,e,r)=>t<<r-32|e>>>64-r,Wa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function mS(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function P1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function pi(t,e){return t<<32-e|t>>>e}const J2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function bS(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function X2(t){for(let e=0;e<t.length;e++)t[e]=bS(t[e])}function yS(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Yh(t){return typeof t=="string"&&(t=yS(t)),eu(t),t}function vS(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];eu(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class O1{clone(){return this._cloneInto()}}function Q2(t){const e=n=>t().update(Yh(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function ev(t=32){if(Wa&&typeof Wa.getRandomValues=="function")return Wa.getRandomValues(new Uint8Array(t));if(Wa&&typeof Wa.randomBytes=="function")return Wa.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const tv=[],rv=[],nv=[],ES=BigInt(0),tu=BigInt(1),CS=BigInt(2),xS=BigInt(7),$S=BigInt(256),_S=BigInt(113);for(let t=0,e=tu,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],tv.push(2*(5*n+r)),rv.push((t+1)*(t+2)/2%64);let i=ES;for(let s=0;s<7;s++)e=(e<<tu^(e>>xS)*_S)%$S,e&CS&&(i^=tu<<(tu<<BigInt(s))-tu);nv.push(i)}const[IS,SS]=hS(nv,!0),iv=(t,e,r)=>r>32?gS(t,e,r):pS(t,e,r),sv=(t,e,r)=>r>32?wS(t,e,r):fS(t,e,r);function AS(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],d=iv(l,u,1)^r[a],h=sv(l,u,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=rv[o],c=iv(i,s,a),l=sv(i,s,a),u=tv[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=IS[n],t[1]^=SS[n]}r.fill(0)}class N1 extends O1{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Gh(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=mS(this.state)}keccak(){J2||X2(this.state32),AS(this.state32,this.rounds),J2||X2(this.state32),this.posOut=0,this.pos=0}update(e){Ha(this);const{blockLen:r,state:n}=this;e=Yh(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Ha(this,!1),eu(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Gh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Z2(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new N1(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Po=((t,e,r)=>Q2(()=>new N1(e,t,r)))(1,136,256/8);function ov(t,e){const r=e||"hex",n=Po(Ql(t,{strict:!1})?oS(t):t);return r==="bytes"?n:A1(n)}class av extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const T1=new av(8192);function PS(t,e){if(T1.has(`${t}.${e}`))return T1.get(`${t}.${e}`);const r=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),n=ov(G2(r),"bytes"),i=(e?r.substring(`${e}0x`.length):r).split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return T1.set(`${t}.${e}`,s),s}function OS(t){const e=ov(`0x${t.substring(4)}`).substring(26);return PS(`0x${e}`)}async function NS({hash:t,signature:e}){const r=Ql(t)?t:A1(t),{secp256k1:n}=await Promise.resolve().then(function(){return Vv});return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),g=cv(f);return new n.Signature(S1(l),S1(u)).addRecoveryBit(g)}const o=Ql(e)?e:A1(e),a=eS(`0x${o.slice(130)}`),c=cv(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function cv(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function TS({hash:t,signature:e}){return OS(await NS({hash:t,signature:e}))}function kS(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function RS(t,e,r){return t&e^~t&r}function DS(t,e,r){return t&e^t&r^e&r}class BS extends O1{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=P1(this.buffer)}update(e){Ha(this);const{view:r,buffer:n,blockLen:i}=this;e=Yh(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=P1(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ha(this),Z2(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let d=o;d<i;d++)r[d]=0;kS(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=P1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const US=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ks=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rs=new Uint32Array(64);class LS extends BS{constructor(){super(64,32,8,!1),this.A=ks[0]|0,this.B=ks[1]|0,this.C=ks[2]|0,this.D=ks[3]|0,this.E=ks[4]|0,this.F=ks[5]|0,this.G=ks[6]|0,this.H=ks[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Rs[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=Rs[d-15],f=Rs[d-2],g=pi(h,7)^pi(h,18)^h>>>3,w=pi(f,17)^pi(f,19)^f>>>10;Rs[d]=w+Rs[d-7]+g+Rs[d-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=pi(a,6)^pi(a,11)^pi(a,25),f=u+h+RS(a,c,l)+US[d]+Rs[d]|0,w=(pi(n,2)^pi(n,13)^pi(n,22))+DS(n,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=n,n=f+w|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){Rs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ru=Q2(()=>new LS);new av(128);const FS=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),lv=new Uint8Array(new Array(16).fill(0).map((t,e)=>e)),MS=lv.map(t=>(9*t+5)%16);let jS=[lv],zS=[MS];for(let t=0;t<4;t++)for(let e of[jS,zS])e.push(e[t].map(r=>FS[r]));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jh=BigInt(0),Xh=BigInt(1),qS=BigInt(2);function Oo(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fi(t){if(!Oo(t))throw new Error("Uint8Array expected")}function Va(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const HS=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ka(t){fi(t);let e="";for(let r=0;r<t.length;r++)e+=HS[t[r]];return e}function Ga(t){const e=t.toString(16);return e.length&1?"0"+e:e}function k1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Jh:BigInt("0x"+t)}const zi={_0:48,_9:57,A:65,F:70,a:97,f:102};function uv(t){if(t>=zi._0&&t<=zi._9)return t-zi._0;if(t>=zi.A&&t<=zi.F)return t-(zi.A-10);if(t>=zi.a&&t<=zi.f)return t-(zi.a-10)}function Za(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=uv(t.charCodeAt(s)),a=uv(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function gi(t){return k1(Ka(t))}function R1(t){return fi(t),k1(Ka(Uint8Array.from(t).reverse()))}function Ds(t,e){return Za(t.toString(16).padStart(e*2,"0"))}function D1(t,e){return Ds(t,e).reverse()}function WS(t){return Za(Ga(t))}function $r(t,e,r){let n;if(typeof e=="string")try{n=Za(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Oo(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function nn(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];fi(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function VS(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Qh(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const B1=t=>typeof t=="bigint"&&Jh<=t;function Ya(t,e,r){return B1(t)&&B1(e)&&B1(r)&&e<=t&&t<r}function Bs(t,e,r,n){if(!Ya(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function dv(t){let e;for(e=0;t>Jh;t>>=Xh,e+=1);return e}function KS(t,e){return t>>BigInt(e)&Xh}function GS(t,e,r){return t|(r?Xh:Jh)<<BigInt(e)}const U1=t=>(qS<<BigInt(t-1))-Xh,L1=t=>new Uint8Array(t),hv=t=>Uint8Array.from(t);function pv(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=L1(t),i=L1(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...d)=>r(i,n,...d),c=(d=L1())=>{i=a(hv([0]),d),n=a(),d.length!==0&&(i=a(hv([1]),d),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){n=a();const f=n.slice();h.push(f),d+=n.length}return nn(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const ZS={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Oo(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Ja(t,e,r={}){const n=(i,s,o)=>{const a=ZS[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const YS=()=>{throw new Error("not implemented")};function F1(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}var JS=Object.freeze({__proto__:null,isBytes:Oo,abytes:fi,abool:Va,bytesToHex:Ka,numberToHexUnpadded:Ga,hexToNumber:k1,hexToBytes:Za,bytesToNumberBE:gi,bytesToNumberLE:R1,numberToBytesBE:Ds,numberToBytesLE:D1,numberToVarBytesBE:WS,ensureBytes:$r,concatBytes:nn,equalBytes:VS,utf8ToBytes:Qh,inRange:Ya,aInRange:Bs,bitLen:dv,bitGet:KS,bitSet:GS,bitMask:U1,createHmacDrbg:pv,validateObject:Ja,notImplemented:YS,memoized:F1});const XS="0.1.1";function QS(){return XS}class Pr extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof Pr){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause?.message?r.cause.message:r.details})(),i=r.cause instanceof Pr&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${QS()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return fv(this,e)}}function fv(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?fv(t.cause,e):e?null:t}function eA(t,e){if(mv(t)>e)throw new cA({givenSize:mv(t),maxSize:e})}const qi={zero:48,nine:57,A:65,F:70,a:97,f:102};function gv(t){if(t>=qi.zero&&t<=qi.nine)return t-qi.zero;if(t>=qi.A&&t<=qi.F)return t-(qi.A-10);if(t>=qi.a&&t<=qi.f)return t-(qi.a-10)}function tA(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new lA({size:t.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let s=0;s<n;s++){const o=r==="right";i[o?s:n-s-1]=t[o?s:t.length-s-1]}return i}function M1(t,e){if(z1(t)>e)throw new wA({givenSize:z1(t),maxSize:e})}function wv(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const i=t.replace("0x","");if(i.length>n*2)throw new mA({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const rA=new TextEncoder;function nA(t){return t instanceof Uint8Array?t:typeof t=="string"?sA(t):iA(t)}function iA(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function sA(t,e={}){const{size:r}=e;let n=t;r&&(M1(t,r),n=j1(t,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=gv(i.charCodeAt(c++)),u=gv(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new Pr(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function oA(t,e={}){const{size:r}=e,n=rA.encode(t);return typeof r=="number"?(eA(n,r),aA(n,r)):n}function aA(t,e){return tA(t,{dir:"right",size:e})}function mv(t){return t.length}class cA extends Pr{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class lA extends Pr{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const uA=new TextEncoder,dA=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bv(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function hA(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(M1(r,e.size),ep(r,e.size)):r}function yv(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=dA[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(M1(n,e.size),j1(n,e.size)):n}function pA(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const l=typeof t=="bigint"?"n":"";throw new gA({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:r,size:n,value:`${t}${l}`})}const c=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?ep(c,n):c}function fA(t,e={}){return yv(uA.encode(t),e)}function ep(t,e){return wv(t,{dir:"left",size:e})}function j1(t,e){return wv(t,{dir:"right",size:e})}function z1(t){return Math.ceil((t.length-2)/2)}class gA extends Pr{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class wA extends Pr{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class mA extends Pr{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function bA(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=Po(nA(t));return r==="Bytes"?n:yv(n)}class yA extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const q1={checksum:new yA(8192)}.checksum,vA=/^0x[a-fA-F0-9]{40}$/;function vv(t,e={}){const{strict:r=!0}=e;if(!vA.test(t))throw new Ev({address:t,cause:new CA});if(r){if(t.toLowerCase()===t)return;if(EA(t)!==t)throw new Ev({address:t,cause:new xA})}}function EA(t){if(q1.has(t))return q1.get(t);vv(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=bA(oA(e),{as:"Bytes"}),n=e.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());const i=`0x${n.join("")}`;return q1.set(t,i),i}class Ev extends Pr{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class CA extends Pr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class xA extends Pr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const $A=/^(.*)\[([0-9]*)\]$/,_A=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,IA=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function H1(t,e){if(t.length!==e.length)throw new AA({expectedLength:t.length,givenLength:e.length});const r=[];for(let n=0;n<t.length;n++){const i=t[n],s=e[n];r.push(H1.encode(i,s))}return bv(...r)}(function(t){function e(r,n,i=!1){if(r==="address"){const c=n;return vv(c),ep(c.toLowerCase(),i?32:0)}if(r==="string")return fA(n);if(r==="bytes")return n;if(r==="bool")return ep(hA(n),i?32:1);const s=r.match(IA);if(s){const[c,l,u="256"]=s,d=Number.parseInt(u)/8;return pA(n,{size:i?32:d,signed:l==="int"})}const o=r.match(_A);if(o){const[c,l]=o;if(Number.parseInt(l)!==(n.length-2)/2)throw new SA({expectedSize:Number.parseInt(l),value:n});return j1(n,i?32:0)}const a=r.match($A);if(a&&Array.isArray(n)){const[c,l]=a,u=[];for(let d=0;d<n.length;d++)u.push(e(l,n[d],!0));return u.length===0?"0x":bv(...u)}throw new PA(r)}t.encode=e})(H1||(H1={}));class SA extends Pr{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${z1(r)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class AA extends Pr{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class PA extends Pr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class Cv extends O1{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,uS(e);const n=Yh(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Ha(this),this.iHash.update(e),this}digestInto(e){Ha(this),eu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const xv=(t,e,r)=>new Cv(t,e).update(r).digest();xv.create=(t,e)=>new Cv(t,e);const qt=BigInt(0),xt=BigInt(1),No=BigInt(2),OA=BigInt(3),W1=BigInt(4),$v=BigInt(5),_v=BigInt(8);function Ht(t,e){const r=t%e;return r>=qt?r:e+r}function NA(t,e,r){if(e<qt)throw new Error("invalid exponent, negatives unsupported");if(r<=qt)throw new Error("invalid modulus");if(r===xt)return qt;let n=xt;for(;e>qt;)e&xt&&(n=n*t%r),t=t*t%r,e>>=xt;return n}function Pn(t,e,r){let n=t;for(;e-- >qt;)n*=n,n%=r;return n}function V1(t,e){if(t===qt)throw new Error("invert: expected non-zero number");if(e<=qt)throw new Error("invert: expected positive modulus, got "+e);let r=Ht(t,e),n=e,i=qt,s=xt;for(;r!==qt;){const a=n/r,c=n%r,l=i-s*a;n=r,r=c,i=s,s=l}if(n!==xt)throw new Error("invert: does not exist");return Ht(i,e)}function TA(t){const e=(t-xt)/No;let r,n,i;for(r=t-xt,n=0;r%No===qt;r/=No,n++);for(i=No;i<t&&NA(i,e,t)!==t-xt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+xt)/W1;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(r+xt)/No;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,u=a.pow(a.mul(a.ONE,i),r),d=a.pow(c,s),h=a.pow(c,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let w=a.sqr(h);f<l&&!a.eql(w,a.ONE);f++)w=a.sqr(w);const g=a.pow(u,xt<<BigInt(l-f-1));u=a.sqr(g),d=a.mul(d,g),h=a.mul(h,u),l=f}return d}}function kA(t){if(t%W1===OA){const e=(t+xt)/W1;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%_v===$v){const e=(t-$v)/_v;return function(n,i){const s=n.mul(i,No),o=n.pow(s,e),a=n.mul(i,o),c=n.mul(n.mul(a,No),o),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return TA(t)}const RA=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Iv(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=RA.reduce((n,i)=>(n[i]="function",n),e);return Ja(t,r)}function DA(t,e,r){if(r<qt)throw new Error("invalid exponent, negatives unsupported");if(r===qt)return t.ONE;if(r===xt)return e;let n=t.ONE,i=e;for(;r>qt;)r&xt&&(n=t.mul(n,i)),i=t.sqr(i),r>>=xt;return n}function BA(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function Sv(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Av(t,e,r=!1,n={}){if(t<=qt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Sv(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:U1(i),ZERO:qt,ONE:xt,create:c=>Ht(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return qt<=c&&c<t},is0:c=>c===qt,isOdd:c=>(c&xt)===xt,neg:c=>Ht(-c,t),eql:(c,l)=>c===l,sqr:c=>Ht(c*c,t),add:(c,l)=>Ht(c+l,t),sub:(c,l)=>Ht(c-l,t),mul:(c,l)=>Ht(c*l,t),pow:(c,l)=>DA(a,c,l),div:(c,l)=>Ht(c*V1(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>V1(c,t),sqrt:n.sqrt||(c=>(o||(o=kA(t)),o(a,c))),invertBatch:c=>BA(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?D1(c,s):Ds(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?R1(c):gi(c)}});return Object.freeze(a)}function Pv(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Ov(t){const e=Pv(t);return e+Math.ceil(e/2)}function UA(t,e,r=!1){const n=t.length,i=Pv(e),s=Ov(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?R1(t):gi(t),a=Ht(o,e-xt)+xt;return r?D1(a,i):Ds(a,i)}const Nv=BigInt(0),tp=BigInt(1);function K1(t,e){const r=e.negate();return t?r:e}function Tv(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function G1(t,e){Tv(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function LA(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function FA(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Z1=new WeakMap,kv=new WeakMap;function Y1(t){return kv.get(t)||1}function MA(t,e){return{constTimeNegate:K1,hasPrecomputes(r){return Y1(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>Nv;)n&tp&&(i=i.add(s)),s=s.double(),n>>=tp;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=G1(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=G1(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=tp);const w=f,p=f+Math.abs(g)-1,b=h%2!==0,m=g<0;g===0?c=c.add(K1(b,n[w])):a=a.add(K1(m,n[p]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=G1(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let d=0;d<o;d++){const h=d*a;if(i===Nv)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=tp),f===0)continue;let g=n[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(r,n,i){let s=Z1.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Z1.set(n,i(s))),s},wNAFCached(r,n,i){const s=Y1(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=Y1(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){Tv(n,e),kv.set(r,n),Z1.delete(r)}}}function jA(t,e,r,n){if(LA(r,t),FA(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=dv(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<n.length;f++){const g=n[f],w=Number(g>>BigInt(d)&BigInt(a));c[w]=c[w].add(r[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Rv(t){return Iv(t.Fp),Ja(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Sv(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function Dv(t){t.lowS!==void 0&&Va("lowS",t.lowS),t.prehash!==void 0&&Va("prehash",t.prehash)}function zA(t){const e=Rv(t);Ja(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:qA,hexToBytes:HA}=JS;class WA extends Error{constructor(e=""){super(e)}}const Hi={Err:WA,_tlv:{encode:(t,e)=>{const{Err:r}=Hi;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Ga(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Ga(i.length/2|128):"";return Ga(t)+s+i+e},decode(t,e){const{Err:r}=Hi;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Hi;if(t<Kn)throw new e("integer: negative integers are not allowed");let r=Ga(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Hi;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return qA(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Hi,i=typeof t=="string"?HA(t):t;fi(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=Hi,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},Kn=BigInt(0),et=BigInt(1),Us=BigInt(2),rp=BigInt(3),Bv=BigInt(4);function VA(t){const e=zA(t),{Fp:r}=e,n=Av(e.n,e.nBitLength),i=e.toBytes||((w,p,b)=>{const m=p.toAffine();return nn(Uint8Array.from([4]),r.toBytes(m.x),r.toBytes(m.y))}),s=e.fromBytes||(w=>{const p=w.subarray(1),b=r.fromBytes(p.subarray(0,r.BYTES)),m=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:b,y:m}});function o(w){const{a:p,b}=e,m=r.sqr(w),E=r.mul(m,w);return r.add(r.add(E,r.mul(w,p)),b)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(w){return Ya(w,et,e.n)}function c(w){const{allowedPrivateKeyLengths:p,nByteLength:b,wrapPrivateKey:m,n:E}=e;if(p&&typeof w!="bigint"){if(Oo(w)&&(w=Ka(w)),typeof w!="string"||!p.includes(w.length))throw new Error("invalid private key");w=w.padStart(b*2,"0")}let C;try{C=typeof w=="bigint"?w:gi($r("private key",w,b))}catch{throw new Error("invalid private key, expected hex or "+b+" bytes, got "+typeof w)}return m&&(C=Ht(C,E)),Bs("private key",C,et,E),C}function l(w){if(!(w instanceof h))throw new Error("ProjectivePoint expected")}const u=F1((w,p)=>{const{px:b,py:m,pz:E}=w;if(r.eql(E,r.ONE))return{x:b,y:m};const C=w.is0();p==null&&(p=C?r.ONE:r.inv(E));const P=r.mul(b,p),S=r.mul(m,p),I=r.mul(E,p);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:P,y:S}}),d=F1(w=>{if(w.is0()){if(e.allowInfinityPoint&&!r.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:p,y:b}=w.toAffine();if(!r.isValid(p)||!r.isValid(b))throw new Error("bad point: x or y not FE");const m=r.sqr(b),E=o(p);if(!r.eql(m,E))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(p,b,m){if(this.px=p,this.py=b,this.pz=m,p==null||!r.isValid(p))throw new Error("x required");if(b==null||!r.isValid(b))throw new Error("y required");if(m==null||!r.isValid(m))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:b,y:m}=p||{};if(!p||!r.isValid(b)||!r.isValid(m))throw new Error("invalid affine point");if(p instanceof h)throw new Error("projective point not allowed");const E=C=>r.eql(C,r.ZERO);return E(b)&&E(m)?h.ZERO:new h(b,m,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const b=r.invertBatch(p.map(m=>m.pz));return p.map((m,E)=>m.toAffine(b[E])).map(h.fromAffine)}static fromHex(p){const b=h.fromAffine(s($r("pointHex",p)));return b.assertValidity(),b}static fromPrivateKey(p){return h.BASE.multiply(c(p))}static msm(p,b){return jA(h,n,p,b)}_setWindowSize(p){g.setWindowSize(this,p)}assertValidity(){d(this)}hasEvenY(){const{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){l(p);const{px:b,py:m,pz:E}=this,{px:C,py:P,pz:S}=p,I=r.eql(r.mul(b,S),r.mul(C,E)),N=r.eql(r.mul(m,S),r.mul(P,E));return I&&N}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:p,b}=e,m=r.mul(b,rp),{px:E,py:C,pz:P}=this;let S=r.ZERO,I=r.ZERO,N=r.ZERO,$=r.mul(E,E),D=r.mul(C,C),T=r.mul(P,P),R=r.mul(E,C);return R=r.add(R,R),N=r.mul(E,P),N=r.add(N,N),S=r.mul(p,N),I=r.mul(m,T),I=r.add(S,I),S=r.sub(D,I),I=r.add(D,I),I=r.mul(S,I),S=r.mul(R,S),N=r.mul(m,N),T=r.mul(p,T),R=r.sub($,T),R=r.mul(p,R),R=r.add(R,N),N=r.add($,$),$=r.add(N,$),$=r.add($,T),$=r.mul($,R),I=r.add(I,$),T=r.mul(C,P),T=r.add(T,T),$=r.mul(T,R),S=r.sub(S,$),N=r.mul(T,D),N=r.add(N,N),N=r.add(N,N),new h(S,I,N)}add(p){l(p);const{px:b,py:m,pz:E}=this,{px:C,py:P,pz:S}=p;let I=r.ZERO,N=r.ZERO,$=r.ZERO;const D=e.a,T=r.mul(e.b,rp);let R=r.mul(b,C),M=r.mul(m,P),x=r.mul(E,S),y=r.add(b,m),v=r.add(C,P);y=r.mul(y,v),v=r.add(R,M),y=r.sub(y,v),v=r.add(b,E);let A=r.add(C,S);return v=r.mul(v,A),A=r.add(R,x),v=r.sub(v,A),A=r.add(m,E),I=r.add(P,S),A=r.mul(A,I),I=r.add(M,x),A=r.sub(A,I),$=r.mul(D,v),I=r.mul(T,x),$=r.add(I,$),I=r.sub(M,$),$=r.add(M,$),N=r.mul(I,$),M=r.add(R,R),M=r.add(M,R),x=r.mul(D,x),v=r.mul(T,v),M=r.add(M,x),x=r.sub(R,x),x=r.mul(D,x),v=r.add(v,x),R=r.mul(M,v),N=r.add(N,R),R=r.mul(A,v),I=r.mul(y,I),I=r.sub(I,R),R=r.mul(y,M),$=r.mul(A,$),$=r.add($,R),new h(I,N,$)}subtract(p){return this.add(p.negate())}is0(){return this.equals(h.ZERO)}wNAF(p){return g.wNAFCached(this,p,h.normalizeZ)}multiplyUnsafe(p){const{endo:b,n:m}=e;Bs("scalar",p,Kn,m);const E=h.ZERO;if(p===Kn)return E;if(this.is0()||p===et)return this;if(!b||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,p,h.normalizeZ);let{k1neg:C,k1:P,k2neg:S,k2:I}=b.splitScalar(p),N=E,$=E,D=this;for(;P>Kn||I>Kn;)P&et&&(N=N.add(D)),I&et&&($=$.add(D)),D=D.double(),P>>=et,I>>=et;return C&&(N=N.negate()),S&&($=$.negate()),$=new h(r.mul($.px,b.beta),$.py,$.pz),N.add($)}multiply(p){const{endo:b,n:m}=e;Bs("scalar",p,et,m);let E,C;if(b){const{k1neg:P,k1:S,k2neg:I,k2:N}=b.splitScalar(p);let{p:$,f:D}=this.wNAF(S),{p:T,f:R}=this.wNAF(N);$=g.constTimeNegate(P,$),T=g.constTimeNegate(I,T),T=new h(r.mul(T.px,b.beta),T.py,T.pz),E=$.add(T),C=D.add(R)}else{const{p:P,f:S}=this.wNAF(p);E=P,C=S}return h.normalizeZ([E,C])[0]}multiplyAndAddUnsafe(p,b,m){const E=h.BASE,C=(S,I)=>I===Kn||I===et||!S.equals(E)?S.multiplyUnsafe(I):S.multiply(I),P=C(this,b).add(C(p,m));return P.is0()?void 0:P}toAffine(p){return u(this,p)}isTorsionFree(){const{h:p,isTorsionFree:b}=e;if(p===et)return!0;if(b)return b(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:b}=e;return p===et?this:b?b(h,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return Va("isCompressed",p),this.assertValidity(),i(h,this,p)}toHex(p=!0){return Va("isCompressed",p),Ka(this.toRawBytes(p))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,g=MA(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function KA(t){const e=Rv(t);return Ja(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function GA(t){const e=KA(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(x){return Ht(x,n)}function a(x){return V1(x,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=VA({...e,toBytes(x,y,v){const A=y.toAffine(),O=r.toBytes(A.x),_=nn;return Va("isCompressed",v),v?_(Uint8Array.from([y.hasEvenY()?2:3]),O):_(Uint8Array.from([4]),O,r.toBytes(A.y))},fromBytes(x){const y=x.length,v=x[0],A=x.subarray(1);if(y===i&&(v===2||v===3)){const O=gi(A);if(!Ya(O,et,r.ORDER))throw new Error("Point is not on curve");const _=u(O);let k;try{k=r.sqrt(_)}catch(H){const q=H instanceof Error?": "+H.message:"";throw new Error("Point is not on curve"+q)}const L=(k&et)===et;return(v&1)===1!==L&&(k=r.neg(k)),{x:O,y:k}}else if(y===s&&v===4){const O=r.fromBytes(A.subarray(0,r.BYTES)),_=r.fromBytes(A.subarray(r.BYTES,2*r.BYTES));return{x:O,y:_}}else{const O=i,_=s;throw new Error("invalid Point, expected length of "+O+", or uncompressed "+_+", got "+y)}}}),h=x=>Ka(Ds(x,e.nByteLength));function f(x){const y=n>>et;return x>y}function g(x){return f(x)?o(-x):x}const w=(x,y,v)=>gi(x.slice(y,v));class p{constructor(y,v,A){this.r=y,this.s=v,this.recovery=A,this.assertValidity()}static fromCompact(y){const v=e.nByteLength;return y=$r("compactSignature",y,v*2),new p(w(y,0,v),w(y,v,2*v))}static fromDER(y){const{r:v,s:A}=Hi.toSig($r("DER",y));return new p(v,A)}assertValidity(){Bs("r",this.r,et,n),Bs("s",this.s,et,n)}addRecoveryBit(y){return new p(this.r,this.s,y)}recoverPublicKey(y){const{r:v,s:A,recovery:O}=this,_=S($r("msgHash",y));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const k=O===2||O===3?v+e.n:v;if(k>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=(O&1)===0?"02":"03",F=c.fromHex(L+h(k)),H=a(k),q=o(-_*H),W=o(A*H),Y=c.BASE.multiplyAndAddUnsafe(F,q,W);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Za(this.toDERHex())}toDERHex(){return Hi.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Za(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const b={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=Ov(e.n);return UA(e.randomBytes(x),e.n)},precompute(x=8,y=c.BASE){return y._setWindowSize(x),y.multiply(BigInt(3)),y}};function m(x,y=!0){return c.fromPrivateKey(x).toRawBytes(y)}function E(x){const y=Oo(x),v=typeof x=="string",A=(y||v)&&x.length;return y?A===i||A===s:v?A===2*i||A===2*s:x instanceof c}function C(x,y,v=!0){if(E(x))throw new Error("first arg must be private key");if(!E(y))throw new Error("second arg must be public key");return c.fromHex(y).multiply(l(x)).toRawBytes(v)}const P=e.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const y=gi(x),v=x.length*8-e.nBitLength;return v>0?y>>BigInt(v):y},S=e.bits2int_modN||function(x){return o(P(x))},I=U1(e.nBitLength);function N(x){return Bs("num < 2^"+e.nBitLength,x,Kn,I),Ds(x,e.nByteLength)}function $(x,y,v=D){if(["recovered","canonical"].some(re=>re in v))throw new Error("sign() legacy options not supported");const{hash:A,randomBytes:O}=e;let{lowS:_,prehash:k,extraEntropy:L}=v;_==null&&(_=!0),x=$r("msgHash",x),Dv(v),k&&(x=$r("prehashed msgHash",A(x)));const F=S(x),H=l(y),q=[N(H),N(F)];if(L!=null&&L!==!1){const re=L===!0?O(r.BYTES):L;q.push($r("extraEntropy",re))}const W=nn(...q),Y=F;function ae(re){const te=P(re);if(!d(te))return;const Ee=a(te),Ce=c.BASE.multiply(te).toAffine(),xe=o(Ce.x);if(xe===Kn)return;const _e=o(Ee*o(Y+xe*H));if(_e===Kn)return;let Ge=(Ce.x===xe?0:2)|Number(Ce.y&et),xr=_e;return _&&f(_e)&&(xr=g(_e),Ge^=1),new p(xe,xr,Ge)}return{seed:W,k2sig:ae}}const D={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function R(x,y,v=D){const{seed:A,k2sig:O}=$(x,y,v),_=e;return pv(_.hash.outputLen,_.nByteLength,_.hmac)(A,O)}c.BASE._setWindowSize(8);function M(x,y,v,A=T){const O=x;y=$r("msgHash",y),v=$r("publicKey",v);const{lowS:_,prehash:k,format:L}=A;if(Dv(A),"strict"in A)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const F=typeof O=="string"||Oo(O),H=!F&&!L&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!F&&!H)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,W;try{if(H&&(q=new p(O.r,O.s)),F){try{L!=="compact"&&(q=p.fromDER(O))}catch(Ge){if(!(Ge instanceof Hi.Err))throw Ge}!q&&L!=="der"&&(q=p.fromCompact(O))}W=c.fromHex(v)}catch{return!1}if(!q||_&&q.hasHighS())return!1;k&&(y=e.hash(y));const{r:Y,s:ae}=q,re=S(y),te=a(ae),Ee=o(re*te),Ce=o(Y*te),xe=c.BASE.multiplyAndAddUnsafe(W,Ee,Ce)?.toAffine();return xe?o(xe.x)===Y:!1}return{CURVE:e,getPublicKey:m,getSharedSecret:C,sign:R,verify:M,ProjectivePoint:c,Signature:p,utils:b}}function ZA(t,e){const r=t.ORDER;let n=Kn;for(let g=r-et;g%Us===Kn;g/=Us)n+=et;const i=n,s=Us<<i-et-et,o=s*Us,a=(r-et)/o,c=(a-et)/Us,l=o-et,u=s,d=t.pow(e,a),h=t.pow(e,(a+et)/Us);let f=(g,w)=>{let p=d,b=t.pow(w,l),m=t.sqr(b);m=t.mul(m,w);let E=t.mul(g,m);E=t.pow(E,c),E=t.mul(E,b),b=t.mul(E,w),m=t.mul(E,g);let C=t.mul(m,b);E=t.pow(C,u);let P=t.eql(E,t.ONE);b=t.mul(m,h),E=t.mul(C,p),m=t.cmov(b,m,P),C=t.cmov(E,C,P);for(let S=i;S>et;S--){let I=S-Us;I=Us<<I-et;let N=t.pow(C,I);const $=t.eql(N,t.ONE);b=t.mul(m,p),p=t.mul(p,p),N=t.mul(C,p),m=t.cmov(b,m,$),C=t.cmov(N,C,$)}return{isValid:P,value:m}};if(t.ORDER%Bv===rp){const g=(t.ORDER-rp)/Bv,w=t.sqrt(t.neg(e));f=(p,b)=>{let m=t.sqr(b);const E=t.mul(p,b);m=t.mul(m,E);let C=t.pow(m,g);C=t.mul(C,E);const P=t.mul(C,w),S=t.mul(t.sqr(C),b),I=t.eql(S,p);let N=t.cmov(P,C,I);return{isValid:I,value:N}}}return f}function YA(t,e){if(Iv(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=ZA(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,c,l,u,d;i=t.sqr(n),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),l=t.sqr(a),c=t.mul(l,e.A),s=t.add(s,c),s=t.mul(s,o),l=t.mul(l,a),c=t.mul(l,e.B),s=t.add(s,c),u=t.mul(i,o);const{isValid:h,value:f}=r(s,l);d=t.mul(i,n),d=t.mul(d,f),u=t.cmov(u,o,h),d=t.cmov(d,f,h);const g=t.isOdd(n)===t.isOdd(d);return d=t.cmov(t.neg(d),d,g),u=t.div(u,a),{x:u,y:d}}}function JA(t){return{hash:t,hmac:(e,...r)=>xv(t,e,vS(...r)),randomBytes:ev}}function XA(t,e){const r=n=>GA({...t,...JA(n)});return{...r(e),create:r}}const QA=gi;function Ls(t,e){if(nu(t),nu(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function eP(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function nu(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function tP(t,e,r,n){fi(t),fi(e),nu(r),e.length>255&&(e=n(nn(Qh("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:s}=n,o=Math.ceil(r/i);if(r>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=nn(e,Ls(e.length,1)),c=Ls(0,s),l=Ls(r,2),u=new Array(o),d=n(nn(c,t,l,Ls(0,1),a));u[0]=n(nn(d,Ls(1,1),a));for(let f=1;f<=o;f++){const g=[eP(d,u[f-1]),Ls(f+1,1),a];u[f]=n(nn(...g))}return nn(...u).slice(0,r)}function rP(t,e,r,n,i){if(fi(t),fi(e),nu(r),e.length>255){const s=Math.ceil(2*n/8);e=i.create({dkLen:s}).update(Qh("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(Ls(r,2)).update(e).update(Ls(e.length,1)).digest()}function Uv(t,e,r){Ja(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:s,hash:o,expand:a,DST:c}=r;fi(t),nu(e);const l=typeof c=="string"?Qh(c):c,u=n.toString(2).length,d=Math.ceil((u+i)/8),h=e*s*d;let f;if(a==="xmd")f=tP(t,l,h,o);else if(a==="xof")f=rP(t,l,h,i,o);else if(a==="_internal_pass")f=t;else throw new Error('expand must be "xmd" or "xof"');const g=new Array(e);for(let w=0;w<e;w++){const p=new Array(s);for(let b=0;b<s;b++){const m=d*(b+w*s),E=f.subarray(m,m+d);p[b]=Ht(QA(E),n)}g[w]=p}return g}function nP(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[s,o,a,c]=r.map(l=>l.reduce((u,d)=>t.add(t.mul(u,n),d)));return n=t.div(s,o),i=t.mul(i,t.div(a,c)),{x:n,y:i}}}function iP(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const s=Uv(n,2,{...r,DST:r.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,i){const s=Uv(n,1,{...r,DST:r.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const s of n)if(typeof s!="bigint")throw new Error("mapToCurve: expected array of bigints");const i=t.fromAffine(e(n)).clearCofactor();return i.assertValidity(),i}}}const iu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),np=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),su=BigInt(1),ip=BigInt(2),Lv=(t,e)=>(t+e/ip)/e;function Fv(t){const e=iu,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Pn(u,r,e)*u%e,h=Pn(d,r,e)*u%e,f=Pn(h,ip,e)*l%e,g=Pn(f,i,e)*f%e,w=Pn(g,s,e)*g%e,p=Pn(w,a,e)*w%e,b=Pn(p,c,e)*p%e,m=Pn(b,a,e)*w%e,E=Pn(m,r,e)*u%e,C=Pn(E,o,e)*g%e,P=Pn(C,n,e)*l%e,S=Pn(P,ip,e);if(!Fs.eql(Fs.sqr(S),t))throw new Error("Cannot find square root");return S}const Fs=Av(iu,void 0,void 0,{sqrt:Fv}),ou=XA({a:BigInt(0),b:BigInt(7),Fp:Fs,n:np,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=np,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-su*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Lv(s*t,e),c=Lv(-n*t,e);let l=Ht(t-a*r-c*i,e),u=Ht(-a*n-c*s,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},ru),Mv=BigInt(0),jv={};function sp(t,...e){let r=jv[t];if(r===void 0){const n=ru(Uint8Array.from(t,i=>i.charCodeAt(0)));r=nn(n,n),jv[t]=r}return ru(nn(r,...e))}const J1=t=>t.toRawBytes(!0).slice(1),X1=t=>Ds(t,32),Q1=t=>Ht(t,iu),au=t=>Ht(t,np),eg=ou.ProjectivePoint,sP=(t,e,r)=>eg.BASE.multiplyAndAddUnsafe(t,e,r);function tg(t){let e=ou.utils.normPrivateKeyToScalar(t),r=eg.fromPrivateKey(e);return{scalar:r.hasEvenY()?e:au(-e),bytes:J1(r)}}function zv(t){Bs("x",t,su,iu);const e=Q1(t*t),r=Q1(e*t+BigInt(7));let n=Fv(r);n%ip!==Mv&&(n=Q1(-n));const i=new eg(t,n,su);return i.assertValidity(),i}const Xa=gi;function qv(...t){return au(Xa(sp("BIP0340/challenge",...t)))}function oP(t){return tg(t).bytes}function aP(t,e,r=ev(32)){const n=$r("message",t),{bytes:i,scalar:s}=tg(e),o=$r("auxRand",r,32),a=X1(s^Xa(sp("BIP0340/aux",o))),c=sp("BIP0340/nonce",a,i,n),l=au(Xa(c));if(l===Mv)throw new Error("sign failed: k is zero");const{bytes:u,scalar:d}=tg(l),h=qv(u,i,n),f=new Uint8Array(64);if(f.set(u,0),f.set(X1(au(d+h*s)),32),!Hv(f,n,i))throw new Error("sign: Invalid signature produced");return f}function Hv(t,e,r){const n=$r("signature",t,64),i=$r("message",e),s=$r("publicKey",r,32);try{const o=zv(Xa(s)),a=Xa(n.subarray(0,32));if(!Ya(a,su,iu))return!1;const c=Xa(n.subarray(32,64));if(!Ya(c,su,np))return!1;const l=qv(X1(a),J1(o),i),u=sP(o,c,au(-l));return!(!u||!u.hasEvenY()||u.toAffine().x!==a)}catch{return!1}}const cP={getPublicKey:oP,sign:aP,verify:Hv,utils:{randomPrivateKey:ou.utils.randomPrivateKey,lift_x:zv,pointToBytes:J1,numberToBytesBE:Ds,bytesToNumberBE:gi,taggedHash:sp,mod:Ht}},lP=nP(Fs,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),uP=YA(Fs,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Fs.create(BigInt("-11"))}),Wv=iP(ou.ProjectivePoint,t=>{const{x:e,y:r}=uP(Fs.create(t[0]));return lP(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Fs.ORDER,m:1,k:128,expand:"xmd",hash:ru});var Vv=Object.freeze({__proto__:null,secp256k1:ou,schnorr:cP,hashToCurve:Wv.hashToCurve,encodeToCurve:Wv.encodeToCurve});function dP(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const g=(f-h)*s+1>>>0,w=new Uint8Array(g);for(;h!==f;){let m=l[h],E=0;for(let C=g-1;(m!==0||E<d)&&C!==-1;C--,E++)m+=256*w[C]>>>0,w[C]=m%r>>>0,m=m/r>>>0;if(m!==0)throw new Error("Non-zero carry");d=E,h++}let p=g-d;for(;p!==g&&w[p]===0;)p++;let b=n.repeat(u);for(;p<g;++p)b+=t.charAt(w[p]);return b}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===n;)d++,u++;const f=(l.length-u)*i+1>>>0,g=new Uint8Array(f);for(;u<l.length;){const m=l.charCodeAt(u);if(m>255)return;let E=e[m];if(E===255)return;let C=0;for(let P=f-1;(E!==0||C<h)&&P!==-1;P--,C++)E+=r*g[P]>>>0,g[P]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");h=C,u++}let w=f-h;for(;w!==f&&g[w]===0;)w++;const p=new Uint8Array(d+(f-w));let b=d;for(;w!==f;)p[b++]=g[w++];return p}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var hP="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",rg=dP(hP);const pP=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),fP=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Wi(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return fP(t)}catch{return t}}function wi(t){return typeof t=="string"?t:pP(t)||""}function gP(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Kv(t,...e){if(!gP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Gv(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function wP(t,e){Kv(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Qa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ng=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function mP(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Zv(t){return typeof t=="string"&&(t=mP(t)),Kv(t),t}class bP{clone(){return this._cloneInto()}}function yP(t){const e=n=>t().update(Zv(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Yv(t=32){if(Qa&&typeof Qa.getRandomValues=="function")return Qa.getRandomValues(new Uint8Array(t));if(Qa&&typeof Qa.randomBytes=="function")return Qa.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function vP(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}class EP extends bP{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ng(this.buffer)}update(e){Gv(this);const{view:r,buffer:n,blockLen:i}=this;e=Zv(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=ng(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Gv(this),wP(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let d=o;d<i;d++)r[d]=0;vP(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=ng(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const op=BigInt(2**32-1),ig=BigInt(32);function Jv(t,e=!1){return e?{h:Number(t&op),l:Number(t>>ig&op)}:{h:Number(t>>ig&op)|0,l:Number(t&op)|0}}function CP(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Jv(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const xP=(t,e)=>BigInt(t>>>0)<<ig|BigInt(e>>>0),$P=(t,e,r)=>t>>>r,_P=(t,e,r)=>t<<32-r|e>>>r,IP=(t,e,r)=>t>>>r|e<<32-r,SP=(t,e,r)=>t<<32-r|e>>>r,AP=(t,e,r)=>t<<64-r|e>>>r-32,PP=(t,e,r)=>t>>>r-32|e<<64-r,OP=(t,e)=>e,NP=(t,e)=>t,TP=(t,e,r)=>t<<r|e>>>32-r,kP=(t,e,r)=>e<<r|t>>>32-r,RP=(t,e,r)=>e<<r-32|t>>>64-r,DP=(t,e,r)=>t<<r-32|e>>>64-r;function BP(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const UP=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),LP=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,FP=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),MP=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,jP=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),zP=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,Ie={fromBig:Jv,split:CP,toBig:xP,shrSH:$P,shrSL:_P,rotrSH:IP,rotrSL:SP,rotrBH:AP,rotrBL:PP,rotr32H:OP,rotr32L:NP,rotlSH:TP,rotlSL:kP,rotlBH:RP,rotlBL:DP,add:BP,add3L:UP,add3H:LP,add4L:FP,add4H:MP,add5H:zP,add5L:jP},[qP,HP]=Ie.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ms=new Uint32Array(80),js=new Uint32Array(80);class WP extends EP{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:g,Hh:w,Hl:p}=this;return[e,r,n,i,s,o,a,c,l,u,d,h,f,g,w,p]}set(e,r,n,i,s,o,a,c,l,u,d,h,f,g,w,p){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=g|0,this.Hh=w|0,this.Hl=p|0}process(e,r){for(let E=0;E<16;E++,r+=4)Ms[E]=e.getUint32(r),js[E]=e.getUint32(r+=4);for(let E=16;E<80;E++){const C=Ms[E-15]|0,P=js[E-15]|0,S=Ie.rotrSH(C,P,1)^Ie.rotrSH(C,P,8)^Ie.shrSH(C,P,7),I=Ie.rotrSL(C,P,1)^Ie.rotrSL(C,P,8)^Ie.shrSL(C,P,7),N=Ms[E-2]|0,$=js[E-2]|0,D=Ie.rotrSH(N,$,19)^Ie.rotrBH(N,$,61)^Ie.shrSH(N,$,6),T=Ie.rotrSL(N,$,19)^Ie.rotrBL(N,$,61)^Ie.shrSL(N,$,6),R=Ie.add4L(I,T,js[E-7],js[E-16]),M=Ie.add4H(R,S,D,Ms[E-7],Ms[E-16]);Ms[E]=M|0,js[E]=R|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:g,Gh:w,Gl:p,Hh:b,Hl:m}=this;for(let E=0;E<80;E++){const C=Ie.rotrSH(d,h,14)^Ie.rotrSH(d,h,18)^Ie.rotrBH(d,h,41),P=Ie.rotrSL(d,h,14)^Ie.rotrSL(d,h,18)^Ie.rotrBL(d,h,41),S=d&f^~d&w,I=h&g^~h&p,N=Ie.add5L(m,P,I,HP[E],js[E]),$=Ie.add5H(N,b,C,S,qP[E],Ms[E]),D=N|0,T=Ie.rotrSH(n,i,28)^Ie.rotrBH(n,i,34)^Ie.rotrBH(n,i,39),R=Ie.rotrSL(n,i,28)^Ie.rotrBL(n,i,34)^Ie.rotrBL(n,i,39),M=n&s^n&a^s&a,x=i&o^i&c^o&c;b=w|0,m=p|0,w=f|0,p=g|0,f=d|0,g=h|0,{h:d,l:h}=Ie.add(l|0,u|0,$|0,D|0),l=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const y=Ie.add3L(D,R,x);n=Ie.add3H(y,$,T,M),i=y|0}({h:n,l:i}=Ie.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Ie.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Ie.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ie.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ie.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:g}=Ie.add(this.Fh|0,this.Fl|0,f|0,g|0),{h:w,l:p}=Ie.add(this.Gh|0,this.Gl|0,w|0,p|0),{h:b,l:m}=Ie.add(this.Hh|0,this.Hl|0,b|0,m|0),this.set(n,i,s,o,a,c,l,u,d,h,f,g,w,p,b,m)}roundClean(){Ms.fill(0),js.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const VP=yP(()=>new WP);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sg=BigInt(0),Xv=BigInt(1),KP=BigInt(2);function og(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ag(t){if(!og(t))throw new Error("Uint8Array expected")}function cg(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const GP=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function lg(t){ag(t);let e="";for(let r=0;r<t.length;r++)e+=GP[t[r]];return e}function Qv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?sg:BigInt("0x"+t)}const Vi={_0:48,_9:57,A:65,F:70,a:97,f:102};function e3(t){if(t>=Vi._0&&t<=Vi._9)return t-Vi._0;if(t>=Vi.A&&t<=Vi.F)return t-(Vi.A-10);if(t>=Vi.a&&t<=Vi.f)return t-(Vi.a-10)}function t3(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=e3(t.charCodeAt(s)),a=e3(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function ZP(t){return Qv(lg(t))}function ap(t){return ag(t),Qv(lg(Uint8Array.from(t).reverse()))}function r3(t,e){return t3(t.toString(16).padStart(e*2,"0"))}function ug(t,e){return r3(t,e).reverse()}function Ki(t,e,r){let n;if(typeof e=="string")try{n=t3(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(og(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function n3(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];ag(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}const dg=t=>typeof t=="bigint"&&sg<=t;function YP(t,e,r){return dg(t)&&dg(e)&&dg(r)&&e<=t&&t<r}function cu(t,e,r,n){if(!YP(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function JP(t){let e;for(e=0;t>sg;t>>=Xv,e+=1);return e}const XP=t=>(KP<<BigInt(t-1))-Xv,QP={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||og(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function hg(t,e,r={}){const n=(i,s,o)=>{const a=QP[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function i3(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const Wt=BigInt(0),$t=BigInt(1),To=BigInt(2),eO=BigInt(3),pg=BigInt(4),s3=BigInt(5),o3=BigInt(8);function kt(t,e){const r=t%e;return r>=Wt?r:e+r}function tO(t,e,r){if(e<Wt)throw new Error("invalid exponent, negatives unsupported");if(r<=Wt)throw new Error("invalid modulus");if(r===$t)return Wt;let n=$t;for(;e>Wt;)e&$t&&(n=n*t%r),t=t*t%r,e>>=$t;return n}function mi(t,e,r){let n=t;for(;e-- >Wt;)n*=n,n%=r;return n}function a3(t,e){if(t===Wt)throw new Error("invert: expected non-zero number");if(e<=Wt)throw new Error("invert: expected positive modulus, got "+e);let r=kt(t,e),n=e,i=Wt,s=$t;for(;r!==Wt;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==$t)throw new Error("invert: does not exist");return kt(i,e)}function rO(t){const e=(t-$t)/To;let r,n,i;for(r=t-$t,n=0;r%To===Wt;r/=To,n++);for(i=To;i<t&&tO(i,e,t)!==t-$t;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+$t)/pg;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+$t)/To;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let g=o.sqr(d);h<c&&!o.eql(g,o.ONE);h++)g=o.sqr(g);const f=o.pow(l,$t<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function nO(t){if(t%pg===eO){const e=(t+$t)/pg;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%o3===s3){const e=(t-s3)/o3;return function(r,n){const i=r.mul(n,To),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,To),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return rO(t)}const iO=(t,e)=>(kt(t,e)&$t)===$t,sO=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oO(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=sO.reduce((n,i)=>(n[i]="function",n),e);return hg(t,r)}function aO(t,e,r){if(r<Wt)throw new Error("invalid exponent, negatives unsupported");if(r===Wt)return t.ONE;if(r===$t)return e;let n=t.ONE,i=e;for(;r>Wt;)r&$t&&(n=t.mul(n,i)),i=t.sqr(i),r>>=$t;return n}function cO(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function c3(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function l3(t,e,r=!1,n={}){if(t<=Wt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=c3(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:XP(i),ZERO:Wt,ONE:$t,create:c=>kt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Wt<=c&&c<t},is0:c=>c===Wt,isOdd:c=>(c&$t)===$t,neg:c=>kt(-c,t),eql:(c,l)=>c===l,sqr:c=>kt(c*c,t),add:(c,l)=>kt(c+l,t),sub:(c,l)=>kt(c-l,t),mul:(c,l)=>kt(c*l,t),pow:(c,l)=>aO(a,c,l),div:(c,l)=>kt(c*a3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>a3(c,t),sqrt:n.sqrt||(c=>(o||(o=nO(t)),o(a,c))),invertBatch:c=>cO(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?ug(c,s):r3(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?ap(c):ZP(c)}});return Object.freeze(a)}const u3=BigInt(0),cp=BigInt(1);function fg(t,e){const r=e.negate();return t?r:e}function d3(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function gg(t,e){d3(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function lO(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function uO(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const wg=new WeakMap,h3=new WeakMap;function mg(t){return h3.get(t)||1}function dO(t,e){return{constTimeNegate:fg,hasPrecomputes(r){return mg(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>u3;)n&cp&&(i=i.add(s)),s=s.double(),n>>=cp;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=gg(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=gg(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=cp);const w=f,p=f+Math.abs(g)-1,b=h%2!==0,m=g<0;g===0?c=c.add(fg(b,n[w])):a=a.add(fg(m,n[p]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=gg(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let d=0;d<o;d++){const h=d*a;if(i===u3)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=cp),f===0)continue;let g=n[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(r,n,i){let s=wg.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&wg.set(n,i(s))),s},wNAFCached(r,n,i){const s=mg(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=mg(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){d3(n,e),h3.set(r,n),wg.delete(r)}}}function hO(t,e,r,n){if(lO(r,t),uO(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=JP(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<n.length;f++){const g=n[f],w=Number(g>>BigInt(d)&BigInt(a));c[w]=c[w].add(r[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function pO(t){return oO(t.Fp),hg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...c3(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Gn=BigInt(0),zr=BigInt(1),lp=BigInt(2),fO=BigInt(8),gO={zip215:!0};function wO(t){const e=pO(t);return hg(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function mO(t){const e=wO(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=lp<<BigInt(a*8)-zr,u=r.create,d=l3(e.n,e.nBitLength),h=e.uvRatio||((y,v)=>{try{return{isValid:!0,value:r.sqrt(y*r.inv(v))}}catch{return{isValid:!1,value:Gn}}}),f=e.adjustScalarBytes||(y=>y),g=e.domain||((y,v,A)=>{if(cg("phflag",A),v.length||A)throw new Error("Contexts/pre-hash are not supported");return y});function w(y,v){cu("coordinate "+y,v,Gn,l)}function p(y){if(!(y instanceof E))throw new Error("ExtendedPoint expected")}const b=i3((y,v)=>{const{ex:A,ey:O,ez:_}=y,k=y.is0();v==null&&(v=k?fO:r.inv(_));const L=u(A*v),F=u(O*v),H=u(_*v);if(k)return{x:Gn,y:zr};if(H!==zr)throw new Error("invZ was invalid");return{x:L,y:F}}),m=i3(y=>{const{a:v,d:A}=e;if(y.is0())throw new Error("bad point: ZERO");const{ex:O,ey:_,ez:k,et:L}=y,F=u(O*O),H=u(_*_),q=u(k*k),W=u(q*q),Y=u(F*v),ae=u(q*u(Y+H)),re=u(W+u(A*u(F*H)));if(ae!==re)throw new Error("bad point: equation left != right (1)");const te=u(O*_),Ee=u(k*L);if(te!==Ee)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(v,A,O,_){this.ex=v,this.ey=A,this.ez=O,this.et=_,w("x",v),w("y",A),w("z",O),w("t",_),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof E)throw new Error("extended point not allowed");const{x:A,y:O}=v||{};return w("x",A),w("y",O),new E(A,O,zr,u(A*O))}static normalizeZ(v){const A=r.invertBatch(v.map(O=>O.ez));return v.map((O,_)=>O.toAffine(A[_])).map(E.fromAffine)}static msm(v,A){return hO(E,d,v,A)}_setWindowSize(v){S.setWindowSize(this,v)}assertValidity(){m(this)}equals(v){p(v);const{ex:A,ey:O,ez:_}=this,{ex:k,ey:L,ez:F}=v,H=u(A*F),q=u(k*_),W=u(O*F),Y=u(L*_);return H===q&&W===Y}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:v}=e,{ex:A,ey:O,ez:_}=this,k=u(A*A),L=u(O*O),F=u(lp*u(_*_)),H=u(v*k),q=A+O,W=u(u(q*q)-k-L),Y=H+L,ae=Y-F,re=H-L,te=u(W*ae),Ee=u(Y*re),Ce=u(W*re),xe=u(ae*Y);return new E(te,Ee,xe,Ce)}add(v){p(v);const{a:A,d:O}=e,{ex:_,ey:k,ez:L,et:F}=this,{ex:H,ey:q,ez:W,et:Y}=v;if(A===BigInt(-1)){const F_=u((k-_)*(q+H)),M_=u((k+_)*(q-H)),d2=u(M_-F_);if(d2===Gn)return this.double();const j_=u(L*lp*Y),z_=u(F*lp*W),q_=z_+j_,H_=M_+F_,W_=z_-j_,ffe=u(q_*d2),gfe=u(H_*W_),wfe=u(q_*W_),mfe=u(d2*H_);return new E(ffe,gfe,mfe,wfe)}const ae=u(_*H),re=u(k*q),te=u(F*O*Y),Ee=u(L*W),Ce=u((_+k)*(H+q)-ae-re),xe=Ee-te,_e=Ee+te,Ge=u(re-A*ae),xr=u(Ce*xe),dfe=u(_e*Ge),hfe=u(Ce*Ge),pfe=u(xe*_e);return new E(xr,dfe,pfe,hfe)}subtract(v){return this.add(v.negate())}wNAF(v){return S.wNAFCached(this,v,E.normalizeZ)}multiply(v){const A=v;cu("scalar",A,zr,n);const{p:O,f:_}=this.wNAF(A);return E.normalizeZ([O,_])[0]}multiplyUnsafe(v,A=E.ZERO){const O=v;return cu("scalar",O,Gn,n),O===Gn?P:this.is0()||O===zr?this:S.wNAFCachedUnsafe(this,O,E.normalizeZ,A)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,n).is0()}toAffine(v){return b(this,v)}clearCofactor(){const{h:v}=e;return v===zr?this:this.multiplyUnsafe(v)}static fromHex(v,A=!1){const{d:O,a:_}=e,k=r.BYTES;v=Ki("pointHex",v,k),cg("zip215",A);const L=v.slice(),F=v[k-1];L[k-1]=F&-129;const H=ap(L),q=A?l:r.ORDER;cu("pointHex.y",H,Gn,q);const W=u(H*H),Y=u(W-zr),ae=u(O*W-_);let{isValid:re,value:te}=h(Y,ae);if(!re)throw new Error("Point.fromHex: invalid y coordinate");const Ee=(te&zr)===zr,Ce=(F&128)!==0;if(!A&&te===Gn&&Ce)throw new Error("Point.fromHex: x=0 and x_0=1");return Ce!==Ee&&(te=u(-te)),E.fromAffine({x:te,y:H})}static fromPrivateKey(v){return $(v).point}toRawBytes(){const{x:v,y:A}=this.toAffine(),O=ug(A,r.BYTES);return O[O.length-1]|=v&zr?128:0,O}toHex(){return lg(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,zr,u(e.Gx*e.Gy)),E.ZERO=new E(Gn,zr,zr,Gn);const{BASE:C,ZERO:P}=E,S=dO(E,a*8);function I(y){return kt(y,n)}function N(y){return I(ap(y))}function $(y){const v=r.BYTES;y=Ki("private key",y,v);const A=Ki("hashed private key",s(y),2*v),O=f(A.slice(0,v)),_=A.slice(v,2*v),k=N(O),L=C.multiply(k),F=L.toRawBytes();return{head:O,prefix:_,scalar:k,point:L,pointBytes:F}}function D(y){return $(y).pointBytes}function T(y=new Uint8Array,...v){const A=n3(...v);return N(s(g(A,Ki("context",y),!!i)))}function R(y,v,A={}){y=Ki("message",y),i&&(y=i(y));const{prefix:O,scalar:_,pointBytes:k}=$(v),L=T(A.context,O,y),F=C.multiply(L).toRawBytes(),H=T(A.context,F,k,y),q=I(L+H*_);cu("signature.s",q,Gn,n);const W=n3(F,ug(q,r.BYTES));return Ki("result",W,r.BYTES*2)}const M=gO;function x(y,v,A,O=M){const{context:_,zip215:k}=O,L=r.BYTES;y=Ki("signature",y,2*L),v=Ki("message",v),A=Ki("publicKey",A,L),k!==void 0&&cg("zip215",k),i&&(v=i(v));const F=ap(y.slice(L,2*L));let H,q,W;try{H=E.fromHex(A,k),q=E.fromHex(y.slice(0,L),k),W=C.multiplyUnsafe(F)}catch{return!1}if(!k&&H.isSmallOrder())return!1;const Y=T(_,q.toRawBytes(),H.toRawBytes(),v);return q.add(H.multiplyUnsafe(Y)).subtract(W).clearCofactor().equals(E.ZERO)}return C._setWindowSize(8),{CURVE:e,getPublicKey:D,sign:R,verify:x,ExtendedPoint:E,utils:{getExtendedPublicKey:$,randomPrivateKey:()=>o(r.BYTES),precompute(y=8,v=E.BASE){return v._setWindowSize(y),v.multiply(BigInt(3)),v}}}}BigInt(0),BigInt(1);const bg=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),p3=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const bO=BigInt(1),f3=BigInt(2);BigInt(3);const yO=BigInt(5),vO=BigInt(8);function EO(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=bg,o=t*t%s*t%s,a=mi(o,f3,s)*o%s,c=mi(a,bO,s)*t%s,l=mi(c,yO,s)*c%s,u=mi(l,e,s)*l%s,d=mi(u,r,s)*u%s,h=mi(d,n,s)*d%s,f=mi(h,i,s)*h%s,g=mi(f,i,s)*h%s,w=mi(g,e,s)*l%s;return{pow_p_5_8:mi(w,f3,s)*t%s,b2:o}}function CO(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function xO(t,e){const r=bg,n=kt(e*e*e,r),i=kt(n*n*e,r),s=EO(t*i).pow_p_5_8;let o=kt(t*n*s,r);const a=kt(e*o*o,r),c=o,l=kt(o*p3,r),u=a===t,d=a===kt(-t,r),h=a===kt(-t*p3,r);return u&&(o=c),(d||h)&&(o=l),iO(o,r)&&(o=kt(-o,r)),{isValid:u||d,value:o}}const $O=l3(bg,void 0,!0),_O={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:$O,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:vO,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:VP,randomBytes:Yv,adjustScalarBytes:CO,uvRatio:xO},g3=mO(_O),IO="EdDSA",SO="JWT",up=".",dp="base64url",w3="utf8",m3="utf8",AO=":",PO="did",OO="key",b3="base58btc",NO="z",TO="K36",kO=32;function yg(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function y3(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yg(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function v3(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=y3(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return yg(r)}function RO(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,p=0,b=0,m=g.length;b!==m&&g[b]===0;)b++,w++;for(var E=(m-b)*u+1>>>0,C=new Uint8Array(E);b!==m;){for(var P=g[b],S=0,I=E-1;(P!==0||S<p)&&I!==-1;I--,S++)P+=256*C[I]>>>0,C[I]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");p=S,b++}for(var N=E-p;N!==E&&C[N]===0;)N++;for(var $=c.repeat(w);N<E;++N)$+=t.charAt(C[N]);return $}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var w=0;if(g[w]!==" "){for(var p=0,b=0;g[w]===c;)p++,w++;for(var m=(g.length-w)*l+1>>>0,E=new Uint8Array(m);g[w];){var C=r[g.charCodeAt(w)];if(C===255)return;for(var P=0,S=m-1;(C!==0||P<b)&&S!==-1;S--,P++)C+=a*E[S]>>>0,E[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=P,w++}if(g[w]!==" "){for(var I=m-b;I!==m&&E[I]===0;)I++;for(var N=new Uint8Array(p+(m-I)),$=p;I!==m;)N[$++]=E[I++];return N}}}function f(g){var w=h(g);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var DO=RO,BO=DO;const E3=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},UO=t=>new TextEncoder().encode(t),LO=t=>new TextDecoder().decode(t);class FO{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class MO{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return C3(this,e)}}class jO{constructor(e){this.decoders=e}or(e){return C3(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const C3=(t,e)=>new jO({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class zO{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new FO(e,r,n),this.decoder=new MO(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const hp=({name:t,prefix:e,encode:r,decode:n})=>new zO(t,e,r,n),lu=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=BO(r,e);return hp({prefix:t,name:e,encode:n,decode:s=>E3(i(s))})},qO=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},HO=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},ar=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>hp({prefix:e,name:t,encode(i){return HO(i,n,r)},decode(i){return qO(i,n,r,t)}}),WO=hp({prefix:"\0",name:"identity",encode:t=>LO(t),decode:t=>UO(t)});var VO=Object.freeze({__proto__:null,identity:WO});const KO=ar({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var GO=Object.freeze({__proto__:null,base2:KO});const ZO=ar({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var YO=Object.freeze({__proto__:null,base8:ZO});const JO=lu({prefix:"9",name:"base10",alphabet:"0123456789"});var XO=Object.freeze({__proto__:null,base10:JO});const QO=ar({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eN=ar({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var tN=Object.freeze({__proto__:null,base16:QO,base16upper:eN});const rN=ar({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nN=ar({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iN=ar({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sN=ar({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oN=ar({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aN=ar({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cN=ar({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lN=ar({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uN=ar({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var dN=Object.freeze({__proto__:null,base32:rN,base32upper:nN,base32pad:iN,base32padupper:sN,base32hex:oN,base32hexupper:aN,base32hexpad:cN,base32hexpadupper:lN,base32z:uN});const hN=lu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pN=lu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var fN=Object.freeze({__proto__:null,base36:hN,base36upper:pN});const gN=lu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),wN=lu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mN=Object.freeze({__proto__:null,base58btc:gN,base58flickr:wN});const bN=ar({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yN=ar({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vN=ar({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),EN=ar({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var CN=Object.freeze({__proto__:null,base64:bN,base64pad:yN,base64url:vN,base64urlpad:EN});const x3=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),xN=x3.reduce((t,e,r)=>(t[r]=e,t),[]),$N=x3.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function _N(t){return t.reduce((e,r)=>(e+=xN[r],e),"")}function IN(t){const e=[];for(const r of t){const n=$N[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const SN=hp({prefix:"\u{1F680}",name:"base256emoji",encode:_N,decode:IN});var AN=Object.freeze({__proto__:null,base256emoji:SN}),PN=_3,$3=128,ON=127,NN=~ON,TN=Math.pow(2,31);function _3(t,e,r){e=e||[],r=r||0;for(var n=r;t>=TN;)e[r++]=t&255|$3,t/=128;for(;t&NN;)e[r++]=t&255|$3,t>>>=7;return e[r]=t|0,_3.bytes=r-n+1,e}var kN=vg,RN=128,I3=127;function vg(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw vg.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&I3)<<i:(o&I3)*Math.pow(2,i),i+=7}while(o>=RN);return vg.bytes=s-n,r}var DN=Math.pow(2,7),BN=Math.pow(2,14),UN=Math.pow(2,21),LN=Math.pow(2,28),FN=Math.pow(2,35),MN=Math.pow(2,42),jN=Math.pow(2,49),zN=Math.pow(2,56),qN=Math.pow(2,63),HN=function(t){return t<DN?1:t<BN?2:t<UN?3:t<LN?4:t<FN?5:t<MN?6:t<jN?7:t<zN?8:t<qN?9:10},WN={encode:PN,decode:kN,encodingLength:HN},S3=WN;const A3=(t,e,r=0)=>(S3.encode(t,e,r),e),P3=t=>S3.encodingLength(t),Eg=(t,e)=>{const r=e.byteLength,n=P3(t),i=n+P3(r),s=new Uint8Array(i+r);return A3(t,s,0),A3(r,s,n),s.set(e,i),new VN(t,r,e,s)};class VN{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const O3=({name:t,code:e,encode:r})=>new KN(t,e,r);class KN{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Eg(this.code,r):r.then(n=>Eg(this.code,n))}else throw Error("Unknown type, must be binary type")}}const N3=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),GN=O3({name:"sha2-256",code:18,encode:N3("SHA-256")}),ZN=O3({name:"sha2-512",code:19,encode:N3("SHA-512")});var YN=Object.freeze({__proto__:null,sha256:GN,sha512:ZN});const T3=0,JN="identity",k3=E3;var XN=Object.freeze({__proto__:null,identity:{code:T3,name:JN,encode:k3,digest:t=>Eg(T3,k3(t))}});new TextEncoder,new TextDecoder;const R3={...VO,...GO,...YO,...XO,...tN,...dN,...fN,...mN,...CN,...AN};({...YN,...XN});function D3(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const B3=D3("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Cg=D3("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=y3(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),U3={utf8:B3,"utf-8":B3,hex:R3.base16,latin1:Cg,ascii:Cg,binary:Cg,...R3};function pp(t,e="utf8"){const r=U3[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function ec(t,e="utf8"){const r=U3[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yg(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function L3(t){return Wi(pp(ec(t,dp),w3))}function fp(t){return pp(ec(wi(t),w3),dp)}function xg(t){const e=ec(TO,b3),r=NO+pp(v3([e,t]),b3);return[PO,OO,r].join(AO)}function QN(t){return pp(t,dp)}function eT(t){return ec(t,dp)}function tT(t){return ec([fp(t.header),fp(t.payload)].join(up),m3)}function rT(t){return[fp(t.header),fp(t.payload),QN(t.signature)].join(up)}function tc(t){const e=t.split(up),r=L3(e[0]),n=L3(e[1]),i=eT(e[2]),s=ec(e.slice(0,2).join(up),m3);return{header:r,payload:n,signature:i,data:s}}function gp(t=Yv(kO)){const e=g3.getPublicKey(t);return{secretKey:v3([t,e]),publicKey:e}}async function F3(t,e,r,n,i=z.fromMiliseconds(Date.now())){const s={alg:IO,typ:SO},o=xg(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},l=tT({header:s,payload:c}),u=g3.sign(l,n.secretKey.slice(0,32));return rT({header:s,payload:c,signature:u})}function M3(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function bi(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=M3(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function nT(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,p=0,b=0,m=g.length;b!==m&&g[b]===0;)b++,w++;for(var E=(m-b)*u+1>>>0,C=new Uint8Array(E);b!==m;){for(var P=g[b],S=0,I=E-1;(P!==0||S<p)&&I!==-1;I--,S++)P+=256*C[I]>>>0,C[I]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");p=S,b++}for(var N=E-p;N!==E&&C[N]===0;)N++;for(var $=c.repeat(w);N<E;++N)$+=t.charAt(C[N]);return $}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var w=0;if(g[w]!==" "){for(var p=0,b=0;g[w]===c;)p++,w++;for(var m=(g.length-w)*l+1>>>0,E=new Uint8Array(m);g[w];){var C=r[g.charCodeAt(w)];if(C===255)return;for(var P=0,S=m-1;(C!==0||P<b)&&S!==-1;S--,P++)C+=a*E[S]>>>0,E[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=P,w++}if(g[w]!==" "){for(var I=m-b;I!==m&&E[I]===0;)I++;for(var N=new Uint8Array(p+(m-I)),$=p;I!==m;)N[$++]=E[I++];return N}}}function f(g){var w=h(g);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var iT=nT,sT=iT;const j3=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},oT=t=>new TextEncoder().encode(t),aT=t=>new TextDecoder().decode(t);class cT{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class lT{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return z3(this,e)}}class uT{constructor(e){this.decoders=e}or(e){return z3(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const z3=(t,e)=>new uT({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class dT{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new cT(e,r,n),this.decoder=new lT(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const wp=({name:t,prefix:e,encode:r,decode:n})=>new dT(t,e,r,n),uu=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=sT(r,e);return wp({prefix:t,name:e,encode:n,decode:s=>j3(i(s))})},hT=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},pT=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},cr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>wp({prefix:e,name:t,encode(i){return pT(i,n,r)},decode(i){return hT(i,n,r,t)}}),fT=wp({prefix:"\0",name:"identity",encode:t=>aT(t),decode:t=>oT(t)});var gT=Object.freeze({__proto__:null,identity:fT});const wT=cr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var mT=Object.freeze({__proto__:null,base2:wT});const bT=cr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var yT=Object.freeze({__proto__:null,base8:bT});const vT=uu({prefix:"9",name:"base10",alphabet:"0123456789"});var ET=Object.freeze({__proto__:null,base10:vT});const CT=cr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xT=cr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var $T=Object.freeze({__proto__:null,base16:CT,base16upper:xT});const _T=cr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IT=cr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ST=cr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),AT=cr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),PT=cr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),OT=cr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),NT=cr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),TT=cr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),kT=cr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var RT=Object.freeze({__proto__:null,base32:_T,base32upper:IT,base32pad:ST,base32padupper:AT,base32hex:PT,base32hexupper:OT,base32hexpad:NT,base32hexpadupper:TT,base32z:kT});const DT=uu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),BT=uu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var UT=Object.freeze({__proto__:null,base36:DT,base36upper:BT});const LT=uu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),FT=uu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var MT=Object.freeze({__proto__:null,base58btc:LT,base58flickr:FT});const jT=cr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zT=cr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qT=cr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),HT=cr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var WT=Object.freeze({__proto__:null,base64:jT,base64pad:zT,base64url:qT,base64urlpad:HT});const q3=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),VT=q3.reduce((t,e,r)=>(t[r]=e,t),[]),KT=q3.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function GT(t){return t.reduce((e,r)=>(e+=VT[r],e),"")}function ZT(t){const e=[];for(const r of t){const n=KT[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const YT=wp({prefix:"\u{1F680}",name:"base256emoji",encode:GT,decode:ZT});var JT=Object.freeze({__proto__:null,base256emoji:YT}),XT=W3,H3=128,QT=127,ek=~QT,tk=Math.pow(2,31);function W3(t,e,r){e=e||[],r=r||0;for(var n=r;t>=tk;)e[r++]=t&255|H3,t/=128;for(;t&ek;)e[r++]=t&255|H3,t>>>=7;return e[r]=t|0,W3.bytes=r-n+1,e}var rk=$g,nk=128,V3=127;function $g(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw $g.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&V3)<<i:(o&V3)*Math.pow(2,i),i+=7}while(o>=nk);return $g.bytes=s-n,r}var ik=Math.pow(2,7),sk=Math.pow(2,14),ok=Math.pow(2,21),ak=Math.pow(2,28),ck=Math.pow(2,35),lk=Math.pow(2,42),uk=Math.pow(2,49),dk=Math.pow(2,56),hk=Math.pow(2,63),pk=function(t){return t<ik?1:t<sk?2:t<ok?3:t<ak?4:t<ck?5:t<lk?6:t<uk?7:t<dk?8:t<hk?9:10},fk={encode:XT,decode:rk,encodingLength:pk},K3=fk;const G3=(t,e,r=0)=>(K3.encode(t,e,r),e),Z3=t=>K3.encodingLength(t),_g=(t,e)=>{const r=e.byteLength,n=Z3(t),i=n+Z3(r),s=new Uint8Array(i+r);return G3(t,s,0),G3(r,s,n),s.set(e,i),new gk(t,r,e,s)};class gk{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Y3=({name:t,code:e,encode:r})=>new wk(t,e,r);class wk{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?_g(this.code,r):r.then(n=>_g(this.code,n))}else throw Error("Unknown type, must be binary type")}}const J3=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),mk=Y3({name:"sha2-256",code:18,encode:J3("SHA-256")}),bk=Y3({name:"sha2-512",code:19,encode:J3("SHA-512")});var yk=Object.freeze({__proto__:null,sha256:mk,sha512:bk});const X3=0,vk="identity",Q3=j3;var Ek=Object.freeze({__proto__:null,identity:{code:X3,name:vk,encode:Q3,digest:t=>_g(X3,Q3(t))}});new TextEncoder,new TextDecoder;const e5={...gT,...mT,...yT,...ET,...$T,...RT,...UT,...MT,...WT,...JT};({...yk,...Ek});function t5(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const r5=t5("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ig=t5("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=M3(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),n5={utf8:r5,"utf-8":r5,hex:e5.base16,latin1:Ig,ascii:Ig,binary:Ig,...e5};function mt(t,e="utf8"){const r=n5[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function tt(t,e="utf8"){const r=n5[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const i5={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Ck=Object.defineProperty,xk=Object.defineProperties,$k=Object.getOwnPropertyDescriptors,s5=Object.getOwnPropertySymbols,_k=Object.prototype.hasOwnProperty,Ik=Object.prototype.propertyIsEnumerable,o5=(t,e,r)=>e in t?Ck(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gi=(t,e)=>{for(var r in e||(e={}))_k.call(e,r)&&o5(t,r,e[r]);if(s5)for(var r of s5(e))Ik.call(e,r)&&o5(t,r,e[r]);return t},Sg=(t,e)=>xk(t,$k(e));const Sk=":";function rc(t){const[e,r]=t.split(Sk);return{namespace:e,reference:r}}function a5(t,e=[]){const r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;const i=t[n];r.push(...i.accounts)}),r}function c5(t,e){return t.includes(":")?[t]:e.chains||[]}var Ak=Object.defineProperty,Pk=Object.defineProperties,Ok=Object.getOwnPropertyDescriptors,l5=Object.getOwnPropertySymbols,Nk=Object.prototype.hasOwnProperty,Tk=Object.prototype.propertyIsEnumerable,u5=(t,e,r)=>e in t?Ak(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d5=(t,e)=>{for(var r in e||(e={}))Nk.call(e,r)&&u5(t,r,e[r]);if(l5)for(var r of l5(e))Tk.call(e,r)&&u5(t,r,e[r]);return t},kk=(t,e)=>Pk(t,Ok(e));const Rk="ReactNative",sn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Dk="js";function mp(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function zs(){return!Mi()&&!!Xl()&&navigator.product===Rk}function Bk(){return zs()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Uk(){return zs()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function du(){return!mp()&&!!Xl()&&!!Mi()}function hu(){return zs()?sn.reactNative:mp()?sn.node:du()?sn.browser:sn.unknown}function h5(){var t;try{return zs()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Lk(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function Fk(t){var e,r;const n=p5();try{return t!=null&&t.url&&n.url&&t.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),kk(d5(d5({},n),t),{url:t?.url||n.url,name:t?.name||n.name,description:t?.description||n.description,icons:(r=t?.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(i){return console.warn("Error populating app metadata",i),t||n}}function p5(){return _1()||{name:"",description:"",url:"",icons:[""]}}function Mk(){if(hu()===sn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=I2();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function jk(){var t;const e=hu();return e===sn.browser?[e,((t=x1())==null?void 0:t.host)||"unknown"].join(":"):e}function f5(t,e,r){const n=Mk(),i=jk();return[[t,e].join("-"),[Dk,r].join("-"),n,i].join("/")}function zk({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=f5(t,e,n),d={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=Lk(l[1]||"",d);return l[0]+"?"+h}function ko(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Ag(t){return Object.fromEntries(t.entries())}function Pg(t){return new Map(Object.entries(t))}function Ro(t=z.FIVE_MINUTES,e){const r=z.toMiliseconds(t||z.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),n=a,i=c})}}function qs(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function g5(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function qk(t){return g5("topic",t)}function Hk(t){return g5("id",t)}function w5(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Rt(t,e){return z.fromMiliseconds((e||Date.now())+z.toMiliseconds(t))}function Hs(t){return Date.now()>=z.toMiliseconds(t)}function He(t,e){return`${t}${e?`:${e}`:""}`}function bp(t=[],e=[]){return[...new Set([...t,...e])]}async function Wk({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i?.href;if(typeof s!="string")return;const o=Vk(s,t,e),a=hu();if(a===sn.browser){if(!((n=Mi())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Kk(o)}else a===sn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function Vk(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${Jk(n,!0)}`}else i=`${i}/wc?${n}`;return i}function Kk(t){let e="_self";Yk()?e="_top":(Zk()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Gk(t,e){let r="";try{if(du()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function m5(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function b5(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Og(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function Zk(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Yk(){try{return window.self!==window.top}catch{return!1}}function Jk(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function y5(t){return Buffer.from(t,"base64").toString("utf-8")}function Xk(t){return new Promise(e=>setTimeout(e,t))}function pu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Qk(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fu(t,...e){if(!Qk(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ng(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");pu(t.outputLen),pu(t.blockLen)}function nc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function v5(t,e){fu(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const yp=BigInt(2**32-1),E5=BigInt(32);function eR(t,e=!1){return e?{h:Number(t&yp),l:Number(t>>E5&yp)}:{h:Number(t>>E5&yp)|0,l:Number(t&yp)|0}}function tR(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=eR(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const rR=(t,e,r)=>t<<r|e>>>32-r,nR=(t,e,r)=>e<<r|t>>>32-r,iR=(t,e,r)=>e<<r-32|t>>>64-r,sR=(t,e,r)=>t<<r-32|e>>>64-r,ic=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function oR(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Tg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function yi(t,e){return t<<32-e|t>>>e}const C5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function aR(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function x5(t){for(let e=0;e<t.length;e++)t[e]=aR(t[e])}function cR(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function sc(t){return typeof t=="string"&&(t=cR(t)),fu(t),t}function lR(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];fu(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class kg{clone(){return this._cloneInto()}}function $5(t){const e=n=>t().update(sc(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function oc(t=32){if(ic&&typeof ic.getRandomValues=="function")return ic.getRandomValues(new Uint8Array(t));if(ic&&typeof ic.randomBytes=="function")return ic.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const _5=[],I5=[],S5=[],uR=BigInt(0),gu=BigInt(1),dR=BigInt(2),hR=BigInt(7),pR=BigInt(256),fR=BigInt(113);for(let t=0,e=gu,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],_5.push(2*(5*n+r)),I5.push((t+1)*(t+2)/2%64);let i=uR;for(let s=0;s<7;s++)e=(e<<gu^(e>>hR)*fR)%pR,e&dR&&(i^=gu<<(gu<<BigInt(s))-gu);S5.push(i)}const[gR,wR]=tR(S5,!0),A5=(t,e,r)=>r>32?iR(t,e,r):rR(t,e,r),P5=(t,e,r)=>r>32?sR(t,e,r):nR(t,e,r);function mR(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],d=A5(l,u,1)^r[a],h=P5(l,u,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=I5[o],c=A5(i,s,a),l=P5(i,s,a),u=_5[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=gR[n],t[1]^=wR[n]}r.fill(0)}class Rg extends kg{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,pu(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=oR(this.state)}keccak(){C5||x5(this.state32),mR(this.state32,this.rounds),C5||x5(this.state32),this.posOut=0,this.pos=0}update(e){nc(this);const{blockLen:r,state:n}=this;e=sc(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){nc(this,!1),fu(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return pu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(v5(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Rg(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const bR=(t,e,r)=>$5(()=>new Rg(e,t,r)),yR=bR(1,136,256/8),vR="https://rpc.walletconnect.org/v1";function O5(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(yR(r)).toString("hex")}async function ER(t,e,r,n,i,s){switch(r.t){case"eip191":return await CR(t,e,r.s);case"eip1271":return await xR(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function CR(t,e,r){return(await TS({hash:O5(e),signature:r})).toLowerCase()===t.toLowerCase()}async function xR(t,e,r,n,i,s){const o=rc(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),d=O5(e).substring(2),h=a+d+c+l+u,f=await fetch(`${s||vR}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:$R(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:g}=await f.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function $R(){return Date.now()+Math.floor(Math.random()*1e3)}function _R(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return rg.encode(s)}var IR=Object.defineProperty,SR=Object.defineProperties,AR=Object.getOwnPropertyDescriptors,N5=Object.getOwnPropertySymbols,PR=Object.prototype.hasOwnProperty,OR=Object.prototype.propertyIsEnumerable,T5=(t,e,r)=>e in t?IR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,NR=(t,e)=>{for(var r in e||(e={}))PR.call(e,r)&&T5(t,r,e[r]);if(N5)for(var r of N5(e))OR.call(e,r)&&T5(t,r,e[r]);return t},TR=(t,e)=>SR(t,AR(e));const kR="did:pkh:",Dg=t=>t?.split(":"),RR=t=>{const e=t&&Dg(t);if(e)return t.includes(kR)?e[3]:e[1]},Bg=t=>{const e=t&&Dg(t);if(e)return e[2]+":"+e[3]},vp=t=>{const e=t&&Dg(t);if(e)return e.pop()};async function k5(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=R5(i,i.iss),o=vp(i.iss);return await ER(o,s,n,Bg(i.iss),r)}const R5=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=vp(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${RR(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(w=>`
- ${w}`).join("")}`:void 0,g=Ep(t.resources);if(g){const w=wu(g);i=qR(i,w)}return[r,n,"",i,"",s,o,a,c,l,u,d,h,f].filter(w=>w!=null).join(`
`)};function DR(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function BR(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Do(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function UR(t,e,r,n={}){return r?.sort((i,s)=>i.localeCompare(s)),{att:{[t]:LR(e,r,n)}}}function LR(t,e,r={}){e=e?.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function D5(t){return Do(t),`urn:recap:${DR(t).replace(/=/g,"")}`}function wu(t){const e=BR(t.replace("urn:recap:",""));return Do(e),e}function FR(t,e,r){const n=UR(t,e,r);return D5(n)}function MR(t){return t&&t.includes("urn:recap:")}function jR(t,e){const r=wu(t),n=wu(e),i=zR(r,n);return D5(i)}function zR(t,e){Do(t),Do(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=TR(NR({},n.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function qR(t="",e){Do(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function B5(t){var e;const r=wu(t);Do(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function U5(t){const e=wu(t);Do(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function Ep(t){if(!t)return;const e=t?.[t.length-1];return MR(e)?e:void 0}function Ug(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function L5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function on(t,...e){if(!L5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function F5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function HR(t,e){on(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function M5(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Ws=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),WR=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function VR(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Lg(t){if(typeof t=="string")t=VR(t);else if(L5(t))t=Fg(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function KR(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function GR(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const ZR=(t,e)=>{function r(n,...i){if(on(n),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?on(l):on(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&on(i[1]);const o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");on(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,on(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(on(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function j5(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!YR(e))throw new Error("invalid output, must be aligned");return e}function z5(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function YR(t){return t.byteOffset%4===0}function Fg(t){return Uint8Array.from(t)}function ac(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const q5=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),JR=q5("expand 16-byte k"),XR=q5("expand 32-byte k"),QR=Ws(JR),eD=Ws(XR);function Be(t,e){return t<<e|t>>>32-e}function Mg(t){return t.byteOffset%4===0}const Cp=64,tD=16,H5=2**32-1,W5=new Uint32Array;function rD(t,e,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(Cp),u=Ws(l),d=Mg(i)&&Mg(s),h=d?Ws(i):W5,f=d?Ws(s):W5;for(let g=0;g<c;o++){if(t(e,r,n,u,o,a),o>=H5)throw new Error("arx: counter overflow");const w=Math.min(Cp,c-g);if(d&&w===Cp){const p=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let b=0,m;b<tD;b++)m=p+b,f[m]=h[m]^u[b];g+=Cp;continue}for(let p=0,b;p<w;p++)b=g+p,s[b]=i[b]^l[p];g+=w}}function nD(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=KR({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ug(i),Ug(o),M5(s),M5(r),(a,c,l,u,d=0)=>{on(a),on(c),on(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),on(u),Ug(d),d<0||d>=H5)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let g=a.length,w,p;if(g===32)f.push(w=Fg(a)),p=eD;else if(g===16&&r)w=new Uint8Array(32),w.set(a),w.set(a,16),p=QR,f.push(w);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);Mg(c)||f.push(c=Fg(c));const b=Ws(w);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(p,b,Ws(c.subarray(0,16)),b),c=c.subarray(16)}const m=16-i;if(m!==c.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(m!==12){const C=new Uint8Array(12);C.set(c,s?0:12-c.length),c=C,f.push(c)}const E=Ws(c);return rD(t,p,b,E,l,u,d,o),ac(...f),u}}const lr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class iD{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Lg(e),on(e,32);const r=lr(e,0),n=lr(e,2),i=lr(e,4),s=lr(e,6),o=lr(e,8),a=lr(e,10),c=lr(e,12),l=lr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=lr(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],g=o[7],w=o[8],p=o[9],b=lr(e,r+0),m=lr(e,r+2),E=lr(e,r+4),C=lr(e,r+6),P=lr(e,r+8),S=lr(e,r+10),I=lr(e,r+12),N=lr(e,r+14);let $=s[0]+(b&8191),D=s[1]+((b>>>13|m<<3)&8191),T=s[2]+((m>>>10|E<<6)&8191),R=s[3]+((E>>>7|C<<9)&8191),M=s[4]+((C>>>4|P<<12)&8191),x=s[5]+(P>>>1&8191),y=s[6]+((P>>>14|S<<2)&8191),v=s[7]+((S>>>11|I<<5)&8191),A=s[8]+((I>>>8|N<<8)&8191),O=s[9]+(N>>>5|i),_=0,k=_+$*a+D*(5*p)+T*(5*w)+R*(5*g)+M*(5*f);_=k>>>13,k&=8191,k+=x*(5*h)+y*(5*d)+v*(5*u)+A*(5*l)+O*(5*c),_+=k>>>13,k&=8191;let L=_+$*c+D*a+T*(5*p)+R*(5*w)+M*(5*g);_=L>>>13,L&=8191,L+=x*(5*f)+y*(5*h)+v*(5*d)+A*(5*u)+O*(5*l),_+=L>>>13,L&=8191;let F=_+$*l+D*c+T*a+R*(5*p)+M*(5*w);_=F>>>13,F&=8191,F+=x*(5*g)+y*(5*f)+v*(5*h)+A*(5*d)+O*(5*u),_+=F>>>13,F&=8191;let H=_+$*u+D*l+T*c+R*a+M*(5*p);_=H>>>13,H&=8191,H+=x*(5*w)+y*(5*g)+v*(5*f)+A*(5*h)+O*(5*d),_+=H>>>13,H&=8191;let q=_+$*d+D*u+T*l+R*c+M*a;_=q>>>13,q&=8191,q+=x*(5*p)+y*(5*w)+v*(5*g)+A*(5*f)+O*(5*h),_+=q>>>13,q&=8191;let W=_+$*h+D*d+T*u+R*l+M*c;_=W>>>13,W&=8191,W+=x*a+y*(5*p)+v*(5*w)+A*(5*g)+O*(5*f),_+=W>>>13,W&=8191;let Y=_+$*f+D*h+T*d+R*u+M*l;_=Y>>>13,Y&=8191,Y+=x*c+y*a+v*(5*p)+A*(5*w)+O*(5*g),_+=Y>>>13,Y&=8191;let ae=_+$*g+D*f+T*h+R*d+M*u;_=ae>>>13,ae&=8191,ae+=x*l+y*c+v*a+A*(5*p)+O*(5*w),_+=ae>>>13,ae&=8191;let re=_+$*w+D*g+T*f+R*h+M*d;_=re>>>13,re&=8191,re+=x*u+y*l+v*c+A*a+O*(5*p),_+=re>>>13,re&=8191;let te=_+$*p+D*w+T*g+R*f+M*h;_=te>>>13,te&=8191,te+=x*d+y*u+v*l+A*c+O*a,_+=te>>>13,te&=8191,_=(_<<2)+_|0,_=_+k|0,k=_&8191,_=_>>>13,L+=_,s[0]=k,s[1]=L,s[2]=F,s[3]=H,s[4]=q,s[5]=W,s[6]=Y,s[7]=ae,s[8]=re,s[9]=te}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;ac(n)}update(e){F5(this);const{buffer:r,blockLen:n}=this;e=Lg(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){ac(this.h,this.r,this.buffer,this.pad)}digestInto(e){F5(this),HR(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function sD(t){const e=(n,i)=>t(i).update(Lg(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const oD=sD(t=>new iD(t));function aD(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],g=e[4],w=e[5],p=e[6],b=e[7],m=i,E=r[0],C=r[1],P=r[2],S=o,I=a,N=c,$=l,D=u,T=d,R=h,M=f,x=g,y=w,v=p,A=b,O=m,_=E,k=C,L=P;for(let H=0;H<s;H+=2)S=S+D|0,O=Be(O^S,16),x=x+O|0,D=Be(D^x,12),S=S+D|0,O=Be(O^S,8),x=x+O|0,D=Be(D^x,7),I=I+T|0,_=Be(_^I,16),y=y+_|0,T=Be(T^y,12),I=I+T|0,_=Be(_^I,8),y=y+_|0,T=Be(T^y,7),N=N+R|0,k=Be(k^N,16),v=v+k|0,R=Be(R^v,12),N=N+R|0,k=Be(k^N,8),v=v+k|0,R=Be(R^v,7),$=$+M|0,L=Be(L^$,16),A=A+L|0,M=Be(M^A,12),$=$+M|0,L=Be(L^$,8),A=A+L|0,M=Be(M^A,7),S=S+T|0,L=Be(L^S,16),v=v+L|0,T=Be(T^v,12),S=S+T|0,L=Be(L^S,8),v=v+L|0,T=Be(T^v,7),I=I+R|0,O=Be(O^I,16),A=A+O|0,R=Be(R^A,12),I=I+R|0,O=Be(O^I,8),A=A+O|0,R=Be(R^A,7),N=N+M|0,_=Be(_^N,16),x=x+_|0,M=Be(M^x,12),N=N+M|0,_=Be(_^N,8),x=x+_|0,M=Be(M^x,7),$=$+D|0,k=Be(k^$,16),y=y+k|0,D=Be(D^y,12),$=$+D|0,k=Be(k^$,8),y=y+k|0,D=Be(D^y,7);let F=0;n[F++]=o+S|0,n[F++]=a+I|0,n[F++]=c+N|0,n[F++]=l+$|0,n[F++]=u+D|0,n[F++]=d+T|0,n[F++]=h+R|0,n[F++]=f+M|0,n[F++]=g+x|0,n[F++]=w+y|0,n[F++]=p+v|0,n[F++]=b+A|0,n[F++]=m+O|0,n[F++]=E+_|0,n[F++]=C+k|0,n[F++]=P+L|0}const cD=nD(aD,{counterRight:!1,counterLength:4,allowShortKeys:!1}),lD=new Uint8Array(16),V5=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(lD.subarray(r))},uD=new Uint8Array(32);function K5(t,e,r,n,i){const s=t(e,r,uD),o=oD.create(s);i&&V5(o,i),V5(o,n);const a=new Uint8Array(16),c=WR(a);z5(c,0,BigInt(i?i.length:0),!0),z5(c,8,BigInt(n.length),!0),o.update(a);const l=o.digest();return ac(s,a),l}const dD=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=j5(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=K5(t,e,r,a,n);return s.set(c,o),ac(c),s},decrypt(i,s){s=j5(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=K5(t,e,r,o,n);if(!GR(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),ac(c),s}}),G5=ZR({blockSize:64,nonceLength:12,tagLength:16},dD(cD));class Z5 extends kg{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Ng(e);const n=sc(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return nc(this),this.iHash.update(e),this}digestInto(e){nc(this),fu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const xp=(t,e,r)=>new Z5(t,e).update(r).digest();xp.create=(t,e)=>new Z5(t,e);function hD(t,e,r){return Ng(t),r===void 0&&(r=new Uint8Array(t.outputLen)),xp(t,sc(r),sc(e))}const jg=new Uint8Array([0]),Y5=new Uint8Array;function pD(t,e,r,n=32){if(Ng(t),pu(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=Y5);const s=new Uint8Array(i*t.outputLen),o=xp.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)jg[0]=l+1,a.update(l===0?Y5:c).update(r).update(jg).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),jg.fill(0),s.slice(0,n)}const fD=(t,e,r,n,i)=>pD(t,hD(t,e,r),n,i);function gD(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function wD(t,e,r){return t&e^~t&r}function mD(t,e,r){return t&e^t&r^e&r}class bD extends kg{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Tg(this.buffer)}update(e){nc(this);const{view:r,buffer:n,blockLen:i}=this;e=sc(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=Tg(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){nc(this),v5(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let d=o;d<i;d++)r[d]=0;gD(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Tg(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const yD=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ks=new Uint32Array(64);class vD extends bD{constructor(){super(64,32,8,!1),this.A=Vs[0]|0,this.B=Vs[1]|0,this.C=Vs[2]|0,this.D=Vs[3]|0,this.E=Vs[4]|0,this.F=Vs[5]|0,this.G=Vs[6]|0,this.H=Vs[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Ks[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=Ks[d-15],f=Ks[d-2],g=yi(h,7)^yi(h,18)^h>>>3,w=yi(f,17)^yi(f,19)^f>>>10;Ks[d]=w+Ks[d-7]+g+Ks[d-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=yi(a,6)^yi(a,11)^yi(a,25),f=u+h+wD(a,c,l)+yD[d]+Ks[d]|0,g=(yi(n,2)^yi(n,13)^yi(n,22))+mD(n,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=n,n=f+g|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){Ks.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const mu=$5(()=>new vD);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $p=BigInt(0),_p=BigInt(1),ED=BigInt(2);function Bo(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function bu(t){if(!Bo(t))throw new Error("Uint8Array expected")}function cc(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const CD=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function lc(t){bu(t);let e="";for(let r=0;r<t.length;r++)e+=CD[t[r]];return e}function uc(t){const e=t.toString(16);return e.length&1?"0"+e:e}function zg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?$p:BigInt("0x"+t)}const Zi={_0:48,_9:57,A:65,F:70,a:97,f:102};function J5(t){if(t>=Zi._0&&t<=Zi._9)return t-Zi._0;if(t>=Zi.A&&t<=Zi.F)return t-(Zi.A-10);if(t>=Zi.a&&t<=Zi.f)return t-(Zi.a-10)}function dc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=J5(t.charCodeAt(s)),a=J5(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function Uo(t){return zg(lc(t))}function yu(t){return bu(t),zg(lc(Uint8Array.from(t).reverse()))}function hc(t,e){return dc(t.toString(16).padStart(e*2,"0"))}function Ip(t,e){return hc(t,e).reverse()}function xD(t){return dc(uc(t))}function an(t,e,r){let n;if(typeof e=="string")try{n=dc(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Bo(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function vu(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];bu(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function $D(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function _D(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const qg=t=>typeof t=="bigint"&&$p<=t;function Sp(t,e,r){return qg(t)&&qg(e)&&qg(r)&&e<=t&&t<r}function Yi(t,e,r,n){if(!Sp(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function X5(t){let e;for(e=0;t>$p;t>>=_p,e+=1);return e}function ID(t,e){return t>>BigInt(e)&_p}function SD(t,e,r){return t|(r?_p:$p)<<BigInt(e)}const Hg=t=>(ED<<BigInt(t-1))-_p,Wg=t=>new Uint8Array(t),Q5=t=>Uint8Array.from(t);function e4(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Wg(t),i=Wg(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...u)=>r(i,n,...u),c=(u=Wg())=>{i=a(Q5([0]),u),n=a(),u.length!==0&&(i=a(Q5([1]),u),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){n=a();const h=n.slice();d.push(h),u+=n.length}return vu(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const AD={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Bo(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function pc(t,e,r={}){const n=(i,s,o)=>{const a=AD[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const PD=()=>{throw new Error("not implemented")};function Vg(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}var OD=Object.freeze({__proto__:null,isBytes:Bo,abytes:bu,abool:cc,bytesToHex:lc,numberToHexUnpadded:uc,hexToNumber:zg,hexToBytes:dc,bytesToNumberBE:Uo,bytesToNumberLE:yu,numberToBytesBE:hc,numberToBytesLE:Ip,numberToVarBytesBE:xD,ensureBytes:an,concatBytes:vu,equalBytes:$D,utf8ToBytes:_D,inRange:Sp,aInRange:Yi,bitLen:X5,bitGet:ID,bitSet:SD,bitMask:Hg,createHmacDrbg:e4,validateObject:pc,notImplemented:PD,memoized:Vg});const Vt=BigInt(0),_t=BigInt(1),Lo=BigInt(2),ND=BigInt(3),Kg=BigInt(4),t4=BigInt(5),r4=BigInt(8);function qr(t,e){const r=t%e;return r>=Vt?r:e+r}function n4(t,e,r){if(e<Vt)throw new Error("invalid exponent, negatives unsupported");if(r<=Vt)throw new Error("invalid modulus");if(r===_t)return Vt;let n=_t;for(;e>Vt;)e&_t&&(n=n*t%r),t=t*t%r,e>>=_t;return n}function Zn(t,e,r){let n=t;for(;e-- >Vt;)n*=n,n%=r;return n}function Gg(t,e){if(t===Vt)throw new Error("invert: expected non-zero number");if(e<=Vt)throw new Error("invert: expected positive modulus, got "+e);let r=qr(t,e),n=e,i=Vt,s=_t;for(;r!==Vt;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==_t)throw new Error("invert: does not exist");return qr(i,e)}function TD(t){const e=(t-_t)/Lo;let r,n,i;for(r=t-_t,n=0;r%Lo===Vt;r/=Lo,n++);for(i=Lo;i<t&&n4(i,e,t)!==t-_t;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+_t)/Kg;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+_t)/Lo;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let g=o.sqr(d);h<c&&!o.eql(g,o.ONE);h++)g=o.sqr(g);const f=o.pow(l,_t<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function kD(t){if(t%Kg===ND){const e=(t+_t)/Kg;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%r4===t4){const e=(t-t4)/r4;return function(r,n){const i=r.mul(n,Lo),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,Lo),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return TD(t)}const RD=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function DD(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=RD.reduce((n,i)=>(n[i]="function",n),e);return pc(t,r)}function BD(t,e,r){if(r<Vt)throw new Error("invalid exponent, negatives unsupported");if(r===Vt)return t.ONE;if(r===_t)return e;let n=t.ONE,i=e;for(;r>Vt;)r&_t&&(n=t.mul(n,i)),i=t.sqr(i),r>>=_t;return n}function UD(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function i4(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function s4(t,e,r=!1,n={}){if(t<=Vt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=i4(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:Hg(i),ZERO:Vt,ONE:_t,create:c=>qr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Vt<=c&&c<t},is0:c=>c===Vt,isOdd:c=>(c&_t)===_t,neg:c=>qr(-c,t),eql:(c,l)=>c===l,sqr:c=>qr(c*c,t),add:(c,l)=>qr(c+l,t),sub:(c,l)=>qr(c-l,t),mul:(c,l)=>qr(c*l,t),pow:(c,l)=>BD(a,c,l),div:(c,l)=>qr(c*Gg(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Gg(c,t),sqrt:n.sqrt||(c=>(o||(o=kD(t)),o(a,c))),invertBatch:c=>UD(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?Ip(c,s):hc(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?yu(c):Uo(c)}});return Object.freeze(a)}function o4(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function a4(t){const e=o4(t);return e+Math.ceil(e/2)}function LD(t,e,r=!1){const n=t.length,i=o4(e),s=a4(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?yu(t):Uo(t),a=qr(o,e-_t)+_t;return r?Ip(a,i):hc(a,i)}const c4=BigInt(0),Ap=BigInt(1);function Zg(t,e){const r=e.negate();return t?r:e}function l4(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Yg(t,e){l4(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function FD(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function MD(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Jg=new WeakMap,u4=new WeakMap;function Xg(t){return u4.get(t)||1}function jD(t,e){return{constTimeNegate:Zg,hasPrecomputes(r){return Xg(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>c4;)n&Ap&&(i=i.add(s)),s=s.double(),n>>=Ap;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=Yg(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=Yg(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=Ap);const w=f,p=f+Math.abs(g)-1,b=h%2!==0,m=g<0;g===0?c=c.add(Zg(b,n[w])):a=a.add(Zg(m,n[p]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=Yg(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let d=0;d<o;d++){const h=d*a;if(i===c4)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=Ap),f===0)continue;let g=n[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(r,n,i){let s=Jg.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Jg.set(n,i(s))),s},wNAFCached(r,n,i){const s=Xg(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=Xg(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){l4(n,e),u4.set(r,n),Jg.delete(r)}}}function zD(t,e,r,n){if(FD(r,t),MD(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=X5(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<n.length;f++){const g=n[f],w=Number(g>>BigInt(d)&BigInt(a));c[w]=c[w].add(r[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function d4(t){return DD(t.Fp),pc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(Sg(Gi(Gi({},i4(t.n,t.nBitLength)),t),{p:t.Fp.ORDER}))}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const fc=BigInt(0),Qg=BigInt(1);function qD(t){return pc(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(Gi({},t))}function HD(t){const e=qD(t),{P:r}=e,n=m=>qr(m,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(m=>m),c=e.powPminus2||(m=>n4(m,r-BigInt(2),r));function l(m,E,C){const P=n(m*(E-C));return E=n(E-P),C=n(C+P),[E,C]}const u=(e.a-BigInt(2))/BigInt(4);function d(m,E){Yi("u",m,fc,r),Yi("scalar",E,fc,r);const C=E,P=m;let S=Qg,I=fc,N=m,$=Qg,D=fc,T;for(let M=BigInt(i-1);M>=fc;M--){const x=C>>M&Qg;D^=x,T=l(D,S,N),S=T[0],N=T[1],T=l(D,I,$),I=T[0],$=T[1],D=x;const y=S+I,v=n(y*y),A=S-I,O=n(A*A),_=v-O,k=N+$,L=N-$,F=n(L*y),H=n(k*A),q=F+H,W=F-H;N=n(q*q),$=n(P*n(W*W)),S=n(v*O),I=n(_*(v+n(u*_)))}T=l(D,S,N),S=T[0],N=T[1],T=l(D,I,$),I=T[0],$=T[1];const R=c(I);return n(S*R)}function h(m){return Ip(n(m),s)}function f(m){const E=an("u coordinate",m,s);return o===32&&(E[31]&=127),yu(E)}function g(m){const E=an("scalar",m),C=E.length;if(C!==s&&C!==o){let P=""+s+" or "+o;throw new Error("invalid scalar, expected "+P+" bytes, got "+C)}return yu(a(E))}function w(m,E){const C=f(E),P=g(m),S=d(C,P);if(S===fc)throw new Error("invalid private or public key received");return h(S)}const p=h(e.Gu);function b(m){return w(m,p)}return{scalarMult:w,scalarMultBase:b,getSharedSecret:(m,E)=>w(m,E),getPublicKey:m=>b(m),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:p}}const ew=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const WD=BigInt(1),h4=BigInt(2),VD=BigInt(3),KD=BigInt(5);BigInt(8);function GD(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=ew,o=t*t%s*t%s,a=Zn(o,h4,s)*o%s,c=Zn(a,WD,s)*t%s,l=Zn(c,KD,s)*c%s,u=Zn(l,e,s)*l%s,d=Zn(u,r,s)*u%s,h=Zn(d,n,s)*d%s,f=Zn(h,i,s)*h%s,g=Zn(f,i,s)*h%s,w=Zn(g,e,s)*l%s;return{pow_p_5_8:Zn(w,h4,s)*t%s,b2:o}}function ZD(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const tw=HD({P:ew,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=ew,{pow_p_5_8:r,b2:n}=GD(t);return qr(Zn(r,VD,e)*n,e)},adjustScalarBytes:ZD,randomBytes:oc});function p4(t){t.lowS!==void 0&&cc("lowS",t.lowS),t.prehash!==void 0&&cc("prehash",t.prehash)}function YD(t){const e=d4(t);pc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze(Gi({},e))}const{bytesToNumberBE:JD,hexToBytes:XD}=OD;class QD extends Error{constructor(e=""){super(e)}}const Ji={Err:QD,_tlv:{encode:(t,e)=>{const{Err:r}=Ji;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=uc(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?uc(i.length/2|128):"";return uc(t)+s+i+e},decode(t,e){const{Err:r}=Ji;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Ji;if(t<Xi)throw new e("integer: negative integers are not allowed");let r=uc(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Ji;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return JD(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Ji,i=typeof t=="string"?XD(t):t;bu(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=Ji,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},Xi=BigInt(0),Kt=BigInt(1);BigInt(2);const f4=BigInt(3);BigInt(4);function eB(t){const e=YD(t),{Fp:r}=e,n=s4(e.n,e.nBitLength),i=e.toBytes||((w,p,b)=>{const m=p.toAffine();return vu(Uint8Array.from([4]),r.toBytes(m.x),r.toBytes(m.y))}),s=e.fromBytes||(w=>{const p=w.subarray(1),b=r.fromBytes(p.subarray(0,r.BYTES)),m=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:b,y:m}});function o(w){const{a:p,b}=e,m=r.sqr(w),E=r.mul(m,w);return r.add(r.add(E,r.mul(w,p)),b)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(w){return Sp(w,Kt,e.n)}function c(w){const{allowedPrivateKeyLengths:p,nByteLength:b,wrapPrivateKey:m,n:E}=e;if(p&&typeof w!="bigint"){if(Bo(w)&&(w=lc(w)),typeof w!="string"||!p.includes(w.length))throw new Error("invalid private key");w=w.padStart(b*2,"0")}let C;try{C=typeof w=="bigint"?w:Uo(an("private key",w,b))}catch{throw new Error("invalid private key, expected hex or "+b+" bytes, got "+typeof w)}return m&&(C=qr(C,E)),Yi("private key",C,Kt,E),C}function l(w){if(!(w instanceof h))throw new Error("ProjectivePoint expected")}const u=Vg((w,p)=>{const{px:b,py:m,pz:E}=w;if(r.eql(E,r.ONE))return{x:b,y:m};const C=w.is0();p==null&&(p=C?r.ONE:r.inv(E));const P=r.mul(b,p),S=r.mul(m,p),I=r.mul(E,p);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:P,y:S}}),d=Vg(w=>{if(w.is0()){if(e.allowInfinityPoint&&!r.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:p,y:b}=w.toAffine();if(!r.isValid(p)||!r.isValid(b))throw new Error("bad point: x or y not FE");const m=r.sqr(b),E=o(p);if(!r.eql(m,E))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(p,b,m){if(this.px=p,this.py=b,this.pz=m,p==null||!r.isValid(p))throw new Error("x required");if(b==null||!r.isValid(b))throw new Error("y required");if(m==null||!r.isValid(m))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:b,y:m}=p||{};if(!p||!r.isValid(b)||!r.isValid(m))throw new Error("invalid affine point");if(p instanceof h)throw new Error("projective point not allowed");const E=C=>r.eql(C,r.ZERO);return E(b)&&E(m)?h.ZERO:new h(b,m,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const b=r.invertBatch(p.map(m=>m.pz));return p.map((m,E)=>m.toAffine(b[E])).map(h.fromAffine)}static fromHex(p){const b=h.fromAffine(s(an("pointHex",p)));return b.assertValidity(),b}static fromPrivateKey(p){return h.BASE.multiply(c(p))}static msm(p,b){return zD(h,n,p,b)}_setWindowSize(p){g.setWindowSize(this,p)}assertValidity(){d(this)}hasEvenY(){const{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){l(p);const{px:b,py:m,pz:E}=this,{px:C,py:P,pz:S}=p,I=r.eql(r.mul(b,S),r.mul(C,E)),N=r.eql(r.mul(m,S),r.mul(P,E));return I&&N}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:p,b}=e,m=r.mul(b,f4),{px:E,py:C,pz:P}=this;let S=r.ZERO,I=r.ZERO,N=r.ZERO,$=r.mul(E,E),D=r.mul(C,C),T=r.mul(P,P),R=r.mul(E,C);return R=r.add(R,R),N=r.mul(E,P),N=r.add(N,N),S=r.mul(p,N),I=r.mul(m,T),I=r.add(S,I),S=r.sub(D,I),I=r.add(D,I),I=r.mul(S,I),S=r.mul(R,S),N=r.mul(m,N),T=r.mul(p,T),R=r.sub($,T),R=r.mul(p,R),R=r.add(R,N),N=r.add($,$),$=r.add(N,$),$=r.add($,T),$=r.mul($,R),I=r.add(I,$),T=r.mul(C,P),T=r.add(T,T),$=r.mul(T,R),S=r.sub(S,$),N=r.mul(T,D),N=r.add(N,N),N=r.add(N,N),new h(S,I,N)}add(p){l(p);const{px:b,py:m,pz:E}=this,{px:C,py:P,pz:S}=p;let I=r.ZERO,N=r.ZERO,$=r.ZERO;const D=e.a,T=r.mul(e.b,f4);let R=r.mul(b,C),M=r.mul(m,P),x=r.mul(E,S),y=r.add(b,m),v=r.add(C,P);y=r.mul(y,v),v=r.add(R,M),y=r.sub(y,v),v=r.add(b,E);let A=r.add(C,S);return v=r.mul(v,A),A=r.add(R,x),v=r.sub(v,A),A=r.add(m,E),I=r.add(P,S),A=r.mul(A,I),I=r.add(M,x),A=r.sub(A,I),$=r.mul(D,v),I=r.mul(T,x),$=r.add(I,$),I=r.sub(M,$),$=r.add(M,$),N=r.mul(I,$),M=r.add(R,R),M=r.add(M,R),x=r.mul(D,x),v=r.mul(T,v),M=r.add(M,x),x=r.sub(R,x),x=r.mul(D,x),v=r.add(v,x),R=r.mul(M,v),N=r.add(N,R),R=r.mul(A,v),I=r.mul(y,I),I=r.sub(I,R),R=r.mul(y,M),$=r.mul(A,$),$=r.add($,R),new h(I,N,$)}subtract(p){return this.add(p.negate())}is0(){return this.equals(h.ZERO)}wNAF(p){return g.wNAFCached(this,p,h.normalizeZ)}multiplyUnsafe(p){const{endo:b,n:m}=e;Yi("scalar",p,Xi,m);const E=h.ZERO;if(p===Xi)return E;if(this.is0()||p===Kt)return this;if(!b||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,p,h.normalizeZ);let{k1neg:C,k1:P,k2neg:S,k2:I}=b.splitScalar(p),N=E,$=E,D=this;for(;P>Xi||I>Xi;)P&Kt&&(N=N.add(D)),I&Kt&&($=$.add(D)),D=D.double(),P>>=Kt,I>>=Kt;return C&&(N=N.negate()),S&&($=$.negate()),$=new h(r.mul($.px,b.beta),$.py,$.pz),N.add($)}multiply(p){const{endo:b,n:m}=e;Yi("scalar",p,Kt,m);let E,C;if(b){const{k1neg:P,k1:S,k2neg:I,k2:N}=b.splitScalar(p);let{p:$,f:D}=this.wNAF(S),{p:T,f:R}=this.wNAF(N);$=g.constTimeNegate(P,$),T=g.constTimeNegate(I,T),T=new h(r.mul(T.px,b.beta),T.py,T.pz),E=$.add(T),C=D.add(R)}else{const{p:P,f:S}=this.wNAF(p);E=P,C=S}return h.normalizeZ([E,C])[0]}multiplyAndAddUnsafe(p,b,m){const E=h.BASE,C=(S,I)=>I===Xi||I===Kt||!S.equals(E)?S.multiplyUnsafe(I):S.multiply(I),P=C(this,b).add(C(p,m));return P.is0()?void 0:P}toAffine(p){return u(this,p)}isTorsionFree(){const{h:p,isTorsionFree:b}=e;if(p===Kt)return!0;if(b)return b(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:b}=e;return p===Kt?this:b?b(h,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return cc("isCompressed",p),this.assertValidity(),i(h,this,p)}toHex(p=!0){return cc("isCompressed",p),lc(this.toRawBytes(p))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,g=jD(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function tB(t){const e=d4(t);return pc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(Gi({lowS:!0},e))}function rB(t){const e=tB(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(x){return qr(x,n)}function a(x){return Gg(x,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=eB(Sg(Gi({},e),{toBytes(x,y,v){const A=y.toAffine(),O=r.toBytes(A.x),_=vu;return cc("isCompressed",v),v?_(Uint8Array.from([y.hasEvenY()?2:3]),O):_(Uint8Array.from([4]),O,r.toBytes(A.y))},fromBytes(x){const y=x.length,v=x[0],A=x.subarray(1);if(y===i&&(v===2||v===3)){const O=Uo(A);if(!Sp(O,Kt,r.ORDER))throw new Error("Point is not on curve");const _=u(O);let k;try{k=r.sqrt(_)}catch(F){const H=F instanceof Error?": "+F.message:"";throw new Error("Point is not on curve"+H)}const L=(k&Kt)===Kt;return(v&1)===1!==L&&(k=r.neg(k)),{x:O,y:k}}else if(y===s&&v===4){const O=r.fromBytes(A.subarray(0,r.BYTES)),_=r.fromBytes(A.subarray(r.BYTES,2*r.BYTES));return{x:O,y:_}}else{const O=i,_=s;throw new Error("invalid Point, expected length of "+O+", or uncompressed "+_+", got "+y)}}})),h=x=>lc(hc(x,e.nByteLength));function f(x){const y=n>>Kt;return x>y}function g(x){return f(x)?o(-x):x}const w=(x,y,v)=>Uo(x.slice(y,v));class p{constructor(y,v,A){this.r=y,this.s=v,this.recovery=A,this.assertValidity()}static fromCompact(y){const v=e.nByteLength;return y=an("compactSignature",y,v*2),new p(w(y,0,v),w(y,v,2*v))}static fromDER(y){const{r:v,s:A}=Ji.toSig(an("DER",y));return new p(v,A)}assertValidity(){Yi("r",this.r,Kt,n),Yi("s",this.s,Kt,n)}addRecoveryBit(y){return new p(this.r,this.s,y)}recoverPublicKey(y){const{r:v,s:A,recovery:O}=this,_=S(an("msgHash",y));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const k=O===2||O===3?v+e.n:v;if(k>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=(O&1)===0?"02":"03",F=c.fromHex(L+h(k)),H=a(k),q=o(-_*H),W=o(A*H),Y=c.BASE.multiplyAndAddUnsafe(F,q,W);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return dc(this.toDERHex())}toDERHex(){return Ji.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return dc(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const b={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=a4(e.n);return LD(e.randomBytes(x),e.n)},precompute(x=8,y=c.BASE){return y._setWindowSize(x),y.multiply(BigInt(3)),y}};function m(x,y=!0){return c.fromPrivateKey(x).toRawBytes(y)}function E(x){const y=Bo(x),v=typeof x=="string",A=(y||v)&&x.length;return y?A===i||A===s:v?A===2*i||A===2*s:x instanceof c}function C(x,y,v=!0){if(E(x))throw new Error("first arg must be private key");if(!E(y))throw new Error("second arg must be public key");return c.fromHex(y).multiply(l(x)).toRawBytes(v)}const P=e.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const y=Uo(x),v=x.length*8-e.nBitLength;return v>0?y>>BigInt(v):y},S=e.bits2int_modN||function(x){return o(P(x))},I=Hg(e.nBitLength);function N(x){return Yi("num < 2^"+e.nBitLength,x,Xi,I),hc(x,e.nByteLength)}function $(x,y,v=D){if(["recovered","canonical"].some(re=>re in v))throw new Error("sign() legacy options not supported");const{hash:A,randomBytes:O}=e;let{lowS:_,prehash:k,extraEntropy:L}=v;_==null&&(_=!0),x=an("msgHash",x),p4(v),k&&(x=an("prehashed msgHash",A(x)));const F=S(x),H=l(y),q=[N(H),N(F)];if(L!=null&&L!==!1){const re=L===!0?O(r.BYTES):L;q.push(an("extraEntropy",re))}const W=vu(...q),Y=F;function ae(re){const te=P(re);if(!d(te))return;const Ee=a(te),Ce=c.BASE.multiply(te).toAffine(),xe=o(Ce.x);if(xe===Xi)return;const _e=o(Ee*o(Y+xe*H));if(_e===Xi)return;let Ge=(Ce.x===xe?0:2)|Number(Ce.y&Kt),xr=_e;return _&&f(_e)&&(xr=g(_e),Ge^=1),new p(xe,xr,Ge)}return{seed:W,k2sig:ae}}const D={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function R(x,y,v=D){const{seed:A,k2sig:O}=$(x,y,v),_=e;return e4(_.hash.outputLen,_.nByteLength,_.hmac)(A,O)}c.BASE._setWindowSize(8);function M(x,y,v,A=T){var O;const _=x;y=an("msgHash",y),v=an("publicKey",v);const{lowS:k,prehash:L,format:F}=A;if(p4(A),"strict"in A)throw new Error("options.strict was renamed to lowS");if(F!==void 0&&F!=="compact"&&F!=="der")throw new Error("format must be compact or der");const H=typeof _=="string"||Bo(_),q=!H&&!F&&typeof _=="object"&&_!==null&&typeof _.r=="bigint"&&typeof _.s=="bigint";if(!H&&!q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,Y;try{if(q&&(W=new p(_.r,_.s)),H){try{F!=="compact"&&(W=p.fromDER(_))}catch(Ge){if(!(Ge instanceof Ji.Err))throw Ge}!W&&F!=="der"&&(W=p.fromCompact(_))}Y=c.fromHex(v)}catch{return!1}if(!W||k&&W.hasHighS())return!1;L&&(y=e.hash(y));const{r:ae,s:re}=W,te=S(y),Ee=a(re),Ce=o(te*Ee),xe=o(ae*Ee),_e=(O=c.BASE.multiplyAndAddUnsafe(Y,Ce,xe))==null?void 0:O.toAffine();return _e?o(_e.x)===ae:!1}return{CURVE:e,getPublicKey:m,getSharedSecret:C,sign:R,verify:M,ProjectivePoint:c,Signature:p,utils:b}}function nB(t){return{hash:t,hmac:(e,...r)=>xp(t,e,lR(...r)),randomBytes:oc}}function iB(t,e){const r=n=>rB(Gi(Gi({},t),nB(n)));return Sg(Gi({},r(e)),{create:r})}const g4=s4(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),sB=g4.create(BigInt("-3")),oB=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),aB=iB({a:sB,b:oB,Fp:g4,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},mu),w4="base10",Or="base16",Yn="base64pad",Gs="base64url",Eu="utf8",m4=0,Qi=1,Cu=2,cB=0,b4=1,xu=12,rw=32;function lB(){const t=tw.utils.randomPrivateKey(),e=tw.getPublicKey(t);return{privateKey:tt(t,Or),publicKey:tt(e,Or)}}function nw(){const t=oc(rw);return tt(t,Or)}function uB(t,e){const r=tw.getSharedSecret(mt(t,Or),mt(e,Or)),n=fD(mu,r,void 0,void 0,rw);return tt(n,Or)}function Pp(t){const e=mu(mt(t,Or));return tt(e,Or)}function vi(t){const e=mu(mt(t,Eu));return tt(e,Or)}function y4(t){return mt(`${t}`,w4)}function Fo(t){return Number(tt(t,w4))}function v4(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function E4(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function dB(t){const e=y4(typeof t.type<"u"?t.type:m4);if(Fo(e)===Qi&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?mt(t.senderPublicKey,Or):void 0,n=typeof t.iv<"u"?mt(t.iv,Or):oc(xu),i=mt(t.symKey,Or),s=G5(i,n).encrypt(mt(t.message,Eu)),o=C4({type:e,sealed:s,iv:n,senderPublicKey:r});return t.encoding===Gs?v4(o):o}function hB(t){const e=mt(t.symKey,Or),{sealed:r,iv:n}=$u({encoded:t.encoded,encoding:t.encoding}),i=G5(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return tt(i,Eu)}function pB(t,e){const r=y4(Cu),n=oc(xu),i=mt(t,Eu),s=C4({type:r,sealed:i,iv:n});return e===Gs?v4(s):s}function fB(t,e){const{sealed:r}=$u({encoded:t,encoding:e});return tt(r,Eu)}function C4(t){if(Fo(t.type)===Cu)return tt(bi([t.type,t.sealed]),Yn);if(Fo(t.type)===Qi){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return tt(bi([t.type,t.senderPublicKey,t.iv,t.sealed]),Yn)}return tt(bi([t.type,t.iv,t.sealed]),Yn)}function $u(t){const e=(t.encoding||Yn)===Gs?E4(t.encoded):t.encoded,r=mt(e,Yn),n=r.slice(cB,b4),i=b4;if(Fo(n)===Qi){const c=i+rw,l=c+xu,u=r.slice(i,c),d=r.slice(c,l),h=r.slice(l);return{type:n,sealed:h,iv:d,senderPublicKey:u}}if(Fo(n)===Cu){const c=r.slice(i),l=oc(xu);return{type:n,sealed:c,iv:l}}const s=i+xu,o=r.slice(i,s),a=r.slice(s);return{type:n,sealed:a,iv:o}}function gB(t,e){const r=$u({encoded:t,encoding:e?.encoding});return x4({type:Fo(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?tt(r.senderPublicKey,Or):void 0,receiverPublicKey:e?.receiverPublicKey})}function x4(t){const e=t?.type||m4;if(e===Qi){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function $4(t){return t.type===Qi&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function _4(t){return t.type===Cu}function wB(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return bi([new Uint8Array([4]),e,r])}function mB(t,e){const[r,n,i]=t.split("."),s=Buffer.from(E4(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${r}.${n}`,l=mu(c),u=wB(e);if(!aB.verify(bi([o,a]),l,u))throw new Error("Invalid signature");return tc(t).payload}const bB="irn";function Op(t){return t?.relay||{protocol:bB}}function _u(t){const e=i5[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function yB(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function I4(t){if(!t.includes("wc:")){const l=y5(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:vB(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:yB(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function vB(t){return t.startsWith("//")?t.substring(2):t}function EB(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function S4(t){const e=new URLSearchParams,r=EB(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Np(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function gc(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function CB(t){const e=[];return Object.values(t).forEach(r=>{e.push(...gc(r.accounts))}),e}function xB(t,e){const r=[];return Object.values(t).forEach(n=>{gc(n.accounts).includes(e)&&r.push(...n.methods)}),r}function $B(t,e){const r=[];return Object.values(t).forEach(n=>{gc(n.accounts).includes(e)&&r.push(...n.events)}),r}function iw(t){return t.includes(":")}function Iu(t){return iw(t)?t.split(":")[0]:t}function _B(t){const e={};return t?.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function A4(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=_B(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=bp(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const IB={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},SB={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function J(t,e){const{message:r,code:n}=SB[t];return{message:e?`${r} ${e}`:r,code:n}}function Ze(t,e){const{message:r,code:n}=IB[t];return{message:e?`${r} ${e}`:r,code:n}}function Jn(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Su(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ur(t){return typeof t>"u"}function Pt(t,e){return e&&ur(t)?!0:typeof t=="string"&&!!t.trim().length}function sw(t,e){return e&&ur(t)?!0:typeof t=="number"&&!isNaN(t)}function AB(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return ko(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=gc(a),d=r[o];(!ko(c5(o,d),u)||!ko(d.methods,c)||!ko(d.events,l))&&(s=!1)}),s):!1}function Tp(t){return Pt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function PB(t){if(Pt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Tp(r)}}return!1}function OB(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Pt(t,!1)){if(e(t))return!0;const r=y5(t);return e(r)}}catch{}return!1}function NB(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function TB(t){return t?.topic}function kB(t,e){let r=null;return Pt(t?.publicKey,!1)||(r=J("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function P4(t){let e=!0;return Jn(t)?t.length&&(e=t.every(r=>Pt(r,!1))):e=!1,e}function RB(t,e,r){let n=null;return Jn(e)&&e.length?e.forEach(i=>{n||Tp(i)||(n=Ze("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Tp(t)||(n=Ze("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function DB(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=RB(i,c5(i,s),`${e} ${r}`);o&&(n=o)}),n}function BB(t,e){let r=null;return Jn(t)?t.forEach(n=>{r||PB(n)||(r=Ze("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Ze("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function UB(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=BB(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function LB(t,e){let r=null;return P4(t?.methods)?P4(t?.events)||(r=Ze("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Ze("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function O4(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=LB(n,`${e}, namespace`);i&&(r=i)}),r}function FB(t,e,r){let n=null;if(t&&Su(t)){const i=O4(t,e);i&&(n=i);const s=DB(t,e,r);s&&(n=s)}else n=J("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function ow(t,e){let r=null;if(t&&Su(t)){const n=O4(t,e);n&&(r=n);const i=UB(t,e);i&&(r=i)}else r=J("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function N4(t){return Pt(t.protocol,!0)}function MB(t,e){let r=!1;return e&&!t?r=!0:t&&Jn(t)&&t.length&&t.forEach(n=>{r=N4(n)}),r}function jB(t){return typeof t=="number"}function Hr(t){return typeof t<"u"&&typeof t!==null}function zB(t){return!(!t||typeof t!="object"||!t.code||!sw(t.code,!1)||!t.message||!Pt(t.message,!1))}function qB(t){return!(ur(t)||!Pt(t.method,!1))}function HB(t){return!(ur(t)||ur(t.result)&&ur(t.error)||!sw(t.id,!1)||!Pt(t.jsonrpc,!1))}function WB(t){return!(ur(t)||!Pt(t.name,!1))}function T4(t,e){return!(!Tp(e)||!CB(t).includes(e))}function VB(t,e,r){return Pt(r,!1)?xB(t,e).includes(r):!1}function KB(t,e,r){return Pt(r,!1)?$B(t,e).includes(r):!1}function k4(t,e,r){let n=null;const i=GB(t),s=ZB(e),o=Object.keys(i),a=Object.keys(s),c=R4(Object.keys(t)),l=R4(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),ko(o,a)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const h=gc(e[d].accounts);h.includes(d)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{n||(ko(i[d].methods,s[d].methods)?ko(i[d].events,s[d].events)||(n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=J("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function GB(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function R4(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function ZB(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=gc(t[r].accounts);n?.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function YB(t,e){return sw(t,!1)&&t<=e.max&&t>=e.min}function D4(){const t=hu();return new Promise(e=>{switch(t){case sn.browser:e(JB());break;case sn.reactNative:e(XB());break;case sn.node:e(QB());break;default:e(!0)}})}function JB(){return du()&&navigator?.onLine}async function XB(){if(zs()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t?.isConnected}return!0}function QB(){return!0}function eU(t){switch(hu()){case sn.browser:tU(t);break;case sn.reactNative:rU(t);break}}function tU(t){!zs()&&du()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function rU(t){zs()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}const aw={};class Au{static get(e){return aw[e]}static set(e,r){aw[e]=r}static delete(e){delete aw[e]}}class cn{}class nU extends cn{constructor(e){super()}}const B4=z.FIVE_SECONDS,Xn={pulse:"heartbeat_pulse"};class kp extends nU{constructor(e){super(e),this.events=new nt.exports.EventEmitter,this.interval=B4,this.interval=e?.interval||B4}static async init(e){const r=new kp(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),z.toMiliseconds(this.interval))}pulse(){this.events.emit(Xn.pulse)}}const iU=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,sU=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,oU=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function aU(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){cU(t);return}return e}function cU(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Rp(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!oU.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(iU.test(t)||sU.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,aU)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function lU(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Gt(t,...e){try{return lU(t(...e))}catch(r){return Promise.reject(r)}}function uU(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function dU(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Dp(t){if(uU(t))return String(t);if(dU(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Dp(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const cw="base64:";function hU(t){return typeof t=="string"?t:cw+gU(t)}function pU(t){return typeof t!="string"||!t.startsWith(cw)?t:fU(t.slice(cw.length))}function fU(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function gU(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Wr(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function wU(...t){return Wr(t.join(":"))}function Bp(t){return t=Wr(t),t?t+":":""}function mU(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function bU(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}function Sfe(t){return t}const yU="memory",vU=()=>{const t=new Map;return{name:yU,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function EU(t={}){const e={mounts:{"":t.driver||vU()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),i=(l,u)=>{if(e.watching){u=Wr(u);for(const d of e.watchListeners)d(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await U4(e.mounts[l],i,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=g=>{let w=h.get(g.base);return w||(w={driver:g.driver,base:g.base,items:[]},h.set(g.base,w)),w};for(const g of l){const w=typeof g=="string",p=Wr(w?g:g.key),b=w?void 0:g.value,m=w||!g.options?u:{...u,...g.options},E=r(p);f(E).items.push({key:p,value:b,relativeKey:E.relativeKey,options:m})}return Promise.all([...h.values()].map(g=>d(g))).then(g=>g.flat())},c={hasItem(l,u={}){l=Wr(l);const{relativeKey:d,driver:h}=r(l);return Gt(h.hasItem,d,u)},getItem(l,u={}){l=Wr(l);const{relativeKey:d,driver:h}=r(l);return Gt(h.getItem,d,u).then(f=>Rp(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Gt(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:wU(d.base,f.key),value:Rp(f.value)}))):Promise.all(d.items.map(h=>Gt(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Rp(f)})))))},getItemRaw(l,u={}){l=Wr(l);const{relativeKey:d,driver:h}=r(l);return h.getItemRaw?Gt(h.getItemRaw,d,u):Gt(h.getItem,d,u).then(f=>pU(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Wr(l);const{relativeKey:h,driver:f}=r(l);f.setItem&&(await Gt(f.setItem,h,Dp(u),d),f.watch||i("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Gt(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Dp(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Gt(d.driver.setItem,h.relativeKey,Dp(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Wr(l);const{relativeKey:h,driver:f}=r(l);if(f.setItemRaw)await Gt(f.setItemRaw,h,u,d);else if(f.setItem)await Gt(f.setItem,h,hU(u),d);else return;f.watch||i("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Wr(l);const{relativeKey:d,driver:h}=r(l);h.removeItem&&(await Gt(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Gt(h.removeItem,d+"$",u),h.watch||i("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Wr(l);const{relativeKey:d,driver:h}=r(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Gt(h.getMeta,d,u)),!u.nativeOnly){const g=await Gt(h.getItem,d+"$",u).then(w=>Rp(w));g&&typeof g=="object"&&(typeof g.atime=="string"&&(g.atime=new Date(g.atime)),typeof g.mtime=="string"&&(g.mtime=new Date(g.mtime)),Object.assign(f,g))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){l=Bp(l);const d=n(l,!0);let h=[];const f=[];let g=!0;for(const p of d){p.driver.flags?.maxDepth||(g=!1);const b=await Gt(p.driver.getKeys,p.relativeBase,u);for(const m of b){const E=p.mountpoint+Wr(m);h.some(C=>E.startsWith(C))||f.push(E)}h=[p.mountpoint,...h.filter(m=>!m.startsWith(p.mountpoint))]}const w=u.maxDepth!==void 0&&!g;return f.filter(p=>(!w||mU(p,u.maxDepth))&&bU(p,l))},async clear(l,u={}){l=Bp(l),await Promise.all(n(l,!1).map(async d=>{if(d.driver.clear)return Gt(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>L4(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Bp(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(U4(u,i,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){l=Bp(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),u&&await L4(e.mounts[l]),e.mountpoints=e.mountpoints.filter(d=>d!==l),delete e.mounts[l])},getMount(l=""){l=Wr(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Wr(l),n(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function U4(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function L4(t){typeof t.dispose=="function"&&await Gt(t.dispose)}function Mo(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function F4(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=Mo(r);return(i,s)=>n.then(o=>s(o.transaction(e,i).objectStore(e)))}let lw;function Pu(){return lw||(lw=F4("keyval-store","keyval")),lw}function M4(t,e=Pu()){return e("readonly",r=>Mo(r.get(t)))}function CU(t,e,r=Pu()){return r("readwrite",n=>(n.put(e,t),Mo(n.transaction)))}function xU(t,e=Pu()){return e("readwrite",r=>(r.delete(t),Mo(r.transaction)))}function $U(t=Pu()){return t("readwrite",e=>(e.clear(),Mo(e.transaction)))}function _U(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Mo(t.transaction)}function IU(t=Pu()){return t("readonly",e=>{if(e.getAllKeys)return Mo(e.getAllKeys());const r=[];return _U(e,n=>r.push(n.key)).then(()=>r)})}const SU="idb-keyval";var AU=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=F4(t.dbName,t.storeName)),{name:SU,options:t,async hasItem(i){return!(typeof await M4(r(i),n)>"u")},async getItem(i){return await M4(r(i),n)??null},setItem(i,s){return CU(r(i),s,n)},removeItem(i){return xU(r(i),n)},getKeys(){return IU(n)},clear(){return $U(n)}}};const PU="WALLET_CONNECT_V2_INDEXED_DB",OU="keyvaluestorage";class NU{constructor(){this.indexedDb=EU({driver:AU({dbName:PU,storeName:OU})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,wi(r))}async removeItem(e){await this.indexedDb.removeItem(e)}}var uw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Up={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof uw<"u"&&uw.localStorage?Up.exports=uw.localStorage:typeof window<"u"&&window.localStorage?Up.exports=window.localStorage:Up.exports=new e})();function TU(t){var e;return[t[0],Wi((e=t[1])!=null?e:"")]}class kU{constructor(){this.localStorage=Up.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(TU)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Wi(r)}async setItem(e,r){this.localStorage.setItem(e,wi(r))}async removeItem(e){this.localStorage.removeItem(e)}}const RU="wc_storage_version",j4=1,DU=async(t,e,r)=>{const n=RU,i=await e.getItem(n);if(i&&i>=j4){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(n,j4),r(e),BU(t,o)},BU=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};class z4{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new kU;this.storage=e;try{const r=new NU;DU(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}function UU(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var LU=FU;function FU(t,e,r){var n=r&&r.stringify||UU,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-i,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var g=typeof e[u];if(g==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(g==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=n(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const q4=LU;var ln=Ei;const Ou=ZU().console||{},MU={mapHttpRequest:Fp,mapHttpResponse:Fp,wrapRequestSerializer:hw,wrapResponseSerializer:hw,wrapErrorSerializer:hw,req:Fp,res:Fp,err:WU};function jU(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ei(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||Ou;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=jU(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(r);c.log||(c.log=Nu),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:i,asObject:t.browser.asObject,levels:o,timestamp:VU(t)};c.levels=Ei.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Nu,c.serializers=n,c._serialize=i,c._stdErrSerialize=s,c.child=f,e&&(c._logEvent=dw());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(g){if(g!=="silent"&&!this.levels.values[g])throw Error("unknown level "+g);this._level=g,wc(l,c,"error","log"),wc(l,c,"fatal","error"),wc(l,c,"warn","error"),wc(l,c,"info","log"),wc(l,c,"debug","log"),wc(l,c,"trace","log")}function f(g,w){if(!g)throw new Error("missing bindings for child Pino");w=w||{},i&&g.serializers&&(w.serializers=g.serializers);const p=w.serializers;if(i&&p){var b=Object.assign({},n,p),m=t.browser.serialize===!0?Object.keys(b):i;delete g.serializers,Lp([g],m,b,this._stdErrSerialize)}function E(C){this._childLevel=(C._childLevel|0)+1,this.error=mc(C,g,"error"),this.fatal=mc(C,g,"fatal"),this.warn=mc(C,g,"warn"),this.info=mc(C,g,"info"),this.debug=mc(C,g,"debug"),this.trace=mc(C,g,"trace"),b&&(this.serializers=b,this._serialize=m),e&&(this._logEvent=dw([].concat(C._logEvent.bindings,g)))}return E.prototype=this,new E(this)}return c}Ei.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Ei.stdSerializers=MU,Ei.stdTimeFunctions=Object.assign({},{nullTime:H4,epochTime:W4,unixTime:KU,isoTime:GU});function wc(t,e,r,n){const i=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?Nu:i[r]?i[r]:Ou[r]||Ou[n]||Nu,zU(t,e,r)}function zU(t,e,r){!t.transmit&&e[r]===Nu||(e[r]=function(n){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Ou?Ou:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Lp(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?n.call(a,qU(this,r,o,s)):n.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Ei.levels.values[l],d=Ei.levels.values[r];if(d<u)return;HU(this,{ts:s,methodLevel:r,methodValue:d,transmitLevel:l,transmitValue:Ei.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function qU(t,e,r,n){t._serialize&&Lp(r,t._serialize,t.serializers,t._stdErrSerialize);const i=r.slice();let s=i[0];const o={};n&&(o.time=n),o.level=Ei.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof i[0]=="object";)Object.assign(o,i.shift());s=i.length?q4(i.shift(),i):void 0}else typeof s=="string"&&(s=q4(i.shift(),i));return s!==void 0&&(o.msg=s),o}function Lp(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=Ei.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i]))for(const s in t[i])e&&e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function mc(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function HU(t,e,r){const n=e.send,i=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Lp(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=i,t._logEvent.messages=r.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,n(s,t._logEvent,a),t._logEvent=dw(c)}function dw(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function WU(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function VU(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?H4:W4}function Fp(){return{}}function hw(t){return t}function Nu(){}function H4(){return!1}function W4(){return Date.now()}function KU(){return Math.round(Date.now()/1e3)}function GU(){return new Date(Date.now()).toISOString()}function ZU(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const YU={level:"info"},Tu="custom_context",pw=1e3*1024;class JU{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class V4{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new JU(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}}class K4{constructor(e,r=pw){this.level=e??"error",this.levelValue=ln.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new V4(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===ln.levels.values.error?console.error(e):r===ln.levels.values.warn?console.warn(e):r===ln.levels.values.debug?console.debug(e):r===ln.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(wi({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new V4(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(wi({extraMetadata:e})),new Blob(r,{type:"application/json"})}}class XU{constructor(e,r=pw){this.baseChunkLogger=new K4(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}}class QU{constructor(e,r=pw){this.baseChunkLogger=new K4(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var eL=Object.defineProperty,tL=Object.defineProperties,rL=Object.getOwnPropertyDescriptors,G4=Object.getOwnPropertySymbols,nL=Object.prototype.hasOwnProperty,iL=Object.prototype.propertyIsEnumerable,Z4=(t,e,r)=>e in t?eL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mp=(t,e)=>{for(var r in e||(e={}))nL.call(e,r)&&Z4(t,r,e[r]);if(G4)for(var r of G4(e))iL.call(e,r)&&Z4(t,r,e[r]);return t},jp=(t,e)=>tL(t,rL(e));function es(t){return jp(Mp({},t),{level:t?.level||YU.level})}function sL(t,e=Tu){return t[e]||""}function oL(t,e,r=Tu){return t[r]=e,t}function it(t,e=Tu){let r="";return typeof t.bindings>"u"?r=sL(t,e):r=t.bindings().context||"",r}function aL(t,e,r=Tu){const n=it(t,r);return n.trim()?`${n}/${e}`:e}function We(t,e,r=Tu){const n=aL(t,e,r),i=t.child({context:n});return oL(i,n,r)}function cL(t){var e,r;const n=new XU((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:ln(jp(Mp({},t.opts),{level:"trace",browser:jp(Mp({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function lL(t){var e;const r=new QU((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:ln(jp(Mp({},t.opts),{level:"trace"})),chunkLoggerController:r}}function fw(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?cL(t):lL(t)}var uL=Object.defineProperty,dL=(t,e,r)=>e in t?uL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Y4=(t,e,r)=>dL(t,typeof e!="symbol"?e+"":e,r);class hL extends cn{constructor(e){super(),this.opts=e,Y4(this,"protocol","wc"),Y4(this,"version",2)}}var pL=Object.defineProperty,fL=(t,e,r)=>e in t?pL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gL=(t,e,r)=>fL(t,typeof e!="symbol"?e+"":e,r);class wL extends cn{constructor(e,r){super(),this.core=e,this.logger=r,gL(this,"records",new Map)}}class mL{constructor(e,r){this.logger=e,this.core=r}}class bL extends cn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class yL extends cn{constructor(e){super()}}class vL{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}}class EL extends cn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class CL extends cn{constructor(e,r){super(),this.core=e,this.logger=r}}class xL{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}}class $L{constructor(e,r){this.projectId=e,this.logger=r}}class _L{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}}var IL=Object.defineProperty,SL=(t,e,r)=>e in t?IL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,J4=(t,e,r)=>SL(t,typeof e!="symbol"?e+"":e,r);class AL{constructor(e){this.opts=e,J4(this,"protocol","wc"),J4(this,"version",2)}}class PL{constructor(e){this.client=e}}const OL="PARSE_ERROR",NL="INVALID_REQUEST",TL="METHOD_NOT_FOUND",kL="INVALID_PARAMS",X4="INTERNAL_ERROR",gw="SERVER_ERROR",RL=[-32700,-32600,-32601,-32602,-32603],ku={[OL]:{code:-32700,message:"Parse error"},[NL]:{code:-32600,message:"Invalid Request"},[TL]:{code:-32601,message:"Method not found"},[kL]:{code:-32602,message:"Invalid params"},[X4]:{code:-32603,message:"Internal error"},[gw]:{code:-32e3,message:"Server error"}},Q4=gw;function DL(t){return RL.includes(t)}function e6(t){return Object.keys(ku).includes(t)?ku[t]:ku[Q4]}function BL(t){const e=Object.values(ku).find(r=>r.code===t);return e||ku[Q4]}function t6(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var r6={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var ww=function(t,e){return ww=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ww(t,e)};function UL(t,e){ww(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var mw=function(){return mw=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},mw.apply(this,arguments)};function LL(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function FL(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function ML(t,e){return function(r,n){e(r,n,t)}}function jL(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function zL(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(n.next(u))}catch(d){o(d)}}function c(u){try{l(n.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})}function qL(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function HL(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function WL(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function bw(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function n6(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function VL(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n6(arguments[e]));return t}function KL(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Ru(t){return this instanceof Ru?(this.v=t,this):new Ru(t)}function GL(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(f){return new Promise(function(g,w){s.push([h,f,g,w])>1||a(h,f)})})}function a(h,f){try{c(n[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof Ru?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function ZL(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Ru(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function YL(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof bw=="function"?bw(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function JL(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function XL(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function QL(t){return t&&t.__esModule?t:{default:t}}function eF(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function tF(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var rF=Object.freeze({__proto__:null,__extends:UL,get __assign(){return mw},__rest:LL,__decorate:FL,__param:ML,__metadata:jL,__awaiter:zL,__generator:qL,__createBinding:HL,__exportStar:WL,__values:bw,__read:n6,__spread:VL,__spreadArrays:KL,__await:Ru,__asyncGenerator:GL,__asyncDelegator:ZL,__asyncValues:YL,__makeTemplateObject:JL,__importStar:XL,__importDefault:QL,__classPrivateFieldGet:eF,__classPrivateFieldSet:tF}),nF=h2(rF),ts={},i6;function iF(){if(i6)return ts;i6=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.isBrowserCryptoAvailable=ts.getSubtleCrypto=ts.getBrowerCrypto=void 0;function t(){return zt?.crypto||zt?.msCrypto||{}}ts.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}ts.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return ts.isBrowserCryptoAvailable=r,ts}var rs={},s6;function sF(){if(s6)return rs;s6=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.isBrowser=rs.isNode=rs.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}rs.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}rs.isNode=e;function r(){return!t()&&!e()}return rs.isBrowser=r,rs}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=nF;e.__exportStar(iF(),t),e.__exportStar(sF(),t)})(r6);function Zt(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function un(t=6){return BigInt(Zt(t))}function Nr(t,e,r){return{id:r||Zt(),jsonrpc:"2.0",method:t,params:e}}function Zs(t,e){return{id:t,jsonrpc:"2.0",result:e}}function bc(t,e,r){return{id:t,jsonrpc:"2.0",error:oF(e,r)}}function oF(t,e){return typeof t>"u"?e6(X4):(typeof t=="string"&&(t=Object.assign(Object.assign({},e6(gw)),{message:t})),typeof e<"u"&&(t.data=e),DL(t.code)&&(t=BL(t.code)),t)}class aF{}class cF extends aF{constructor(){super()}}class lF extends cF{constructor(e){super()}}const uF="^https?:",dF="^wss?:";function hF(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function o6(t,e){const r=hF(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function a6(t){return o6(t,uF)}function c6(t){return o6(t,dF)}function pF(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function l6(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function yc(t){return l6(t)&&"method"in t}function jo(t){return l6(t)&&(Dt(t)||Et(t))}function Dt(t){return"result"in t}function Et(t){return"error"in t}class bt extends lF{constructor(e){super(e),this.events=new nt.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Nr(e.method,e.params||[],e.id||un().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Et(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),jo(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const fF=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),gF=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",u6=t=>t.split("?")[0],d6=10,wF=fF();class h6{constructor(e){if(this.url=e,this.events=new nt.exports.EventEmitter,this.registering=!1,!c6(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(wi(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!c6(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=r6.isReactNative()?void 0:{rejectUnauthorized:!pF(e)},s=new wF(e,[],i);gF()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Wi(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=bc(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return t6(e,u6(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>d6&&this.events.setMaxListeners(d6)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${u6(this.url)}`));return this.events.emit("register_error",r),r}}var mF=Object.defineProperty,p6=Object.getOwnPropertySymbols,bF=Object.prototype.hasOwnProperty,yF=Object.prototype.propertyIsEnumerable,f6=(t,e,r)=>e in t?mF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tr=(t,e)=>{for(var r in e||(e={}))bF.call(e,r)&&f6(t,r,e[r]);if(p6)for(var r of p6(e))yF.call(e,r)&&f6(t,r,e[r]);return t};const g6="wc",w6=2,zp="core",Ci=`${g6}@2:${zp}:`,vF={name:zp,logger:"error"},EF={database:":memory:"},CF="crypto",m6="client_ed25519_seed",xF=z.ONE_DAY,$F="keychain",_F="0.3",IF="messages",SF="0.3",b6=z.SIX_HOURS,AF="publisher",y6="irn",PF="error",v6="wss://relay.walletconnect.org",OF="relayer",Yt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},NF="_subscription",On={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},TF=.1,yw="2.20.2",gt={link_mode:"link_mode",relay:"relay"},qp={inbound:"inbound",outbound:"outbound"},kF="0.3",RF="WALLETCONNECT_CLIENT_ID",E6="WALLETCONNECT_LINK_MODE_APPS",dn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},DF="subscription",BF="0.3",UF="pairing",LF="0.3",Du={wc_pairingDelete:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:z.ONE_DAY,prompt:!1,tag:0},res:{ttl:z.ONE_DAY,prompt:!1,tag:0}}},zo={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Qn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},FF="history",MF="0.3",jF="expirer",Nn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},zF="0.3",qF="verify-api",HF="https://verify.walletconnect.com",C6="https://verify.walletconnect.org",Bu=C6,WF=`${Bu}/v3`,VF=[HF,C6],KF="echo",GF="https://echo.walletconnect.com",xi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ns={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ei={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},qo={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ho={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},Uu={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},ZF=.1,YF="event-client",JF=86400,XF="https://pulse.walletconnect.org/batch";function QF(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,p=0,b=0,m=g.length;b!==m&&g[b]===0;)b++,w++;for(var E=(m-b)*u+1>>>0,C=new Uint8Array(E);b!==m;){for(var P=g[b],S=0,I=E-1;(P!==0||S<p)&&I!==-1;I--,S++)P+=256*C[I]>>>0,C[I]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");p=S,b++}for(var N=E-p;N!==E&&C[N]===0;)N++;for(var $=c.repeat(w);N<E;++N)$+=t.charAt(C[N]);return $}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var w=0;if(g[w]!==" "){for(var p=0,b=0;g[w]===c;)p++,w++;for(var m=(g.length-w)*l+1>>>0,E=new Uint8Array(m);g[w];){var C=r[g.charCodeAt(w)];if(C===255)return;for(var P=0,S=m-1;(C!==0||P<b)&&S!==-1;S--,P++)C+=a*E[S]>>>0,E[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=P,w++}if(g[w]!==" "){for(var I=m-b;I!==m&&E[I]===0;)I++;for(var N=new Uint8Array(p+(m-I)),$=p;I!==m;)N[$++]=E[I++];return N}}}function f(g){var w=h(g);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var eM=QF,tM=eM;const x6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},rM=t=>new TextEncoder().encode(t),nM=t=>new TextDecoder().decode(t);class iM{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class sM{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $6(this,e)}}class oM{constructor(e){this.decoders=e}or(e){return $6(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $6=(t,e)=>new oM(Tr(Tr({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class aM{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new iM(e,r,n),this.decoder=new sM(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Hp=({name:t,prefix:e,encode:r,decode:n})=>new aM(t,e,r,n),Lu=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=tM(r,e);return Hp({prefix:t,name:e,encode:n,decode:s=>x6(i(s))})},cM=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},lM=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},dr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Hp({prefix:e,name:t,encode(i){return lM(i,n,r)},decode(i){return cM(i,n,r,t)}}),uM=Hp({prefix:"\0",name:"identity",encode:t=>nM(t),decode:t=>rM(t)});var dM=Object.freeze({__proto__:null,identity:uM});const hM=dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var pM=Object.freeze({__proto__:null,base2:hM});const fM=dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var gM=Object.freeze({__proto__:null,base8:fM});const wM=Lu({prefix:"9",name:"base10",alphabet:"0123456789"});var mM=Object.freeze({__proto__:null,base10:wM});const bM=dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),yM=dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var vM=Object.freeze({__proto__:null,base16:bM,base16upper:yM});const EM=dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),CM=dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xM=dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$M=dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_M=dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),IM=dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),SM=dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),AM=dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),PM=dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var OM=Object.freeze({__proto__:null,base32:EM,base32upper:CM,base32pad:xM,base32padupper:$M,base32hex:_M,base32hexupper:IM,base32hexpad:SM,base32hexpadupper:AM,base32z:PM});const NM=Lu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),TM=Lu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var kM=Object.freeze({__proto__:null,base36:NM,base36upper:TM});const RM=Lu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),DM=Lu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var BM=Object.freeze({__proto__:null,base58btc:RM,base58flickr:DM});const UM=dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),LM=dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),FM=dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),MM=dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var jM=Object.freeze({__proto__:null,base64:UM,base64pad:LM,base64url:FM,base64urlpad:MM});const _6=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),zM=_6.reduce((t,e,r)=>(t[r]=e,t),[]),qM=_6.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function HM(t){return t.reduce((e,r)=>(e+=zM[r],e),"")}function WM(t){const e=[];for(const r of t){const n=qM[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const VM=Hp({prefix:"\u{1F680}",name:"base256emoji",encode:HM,decode:WM});var KM=Object.freeze({__proto__:null,base256emoji:VM}),GM=S6,I6=128,ZM=127,YM=~ZM,JM=Math.pow(2,31);function S6(t,e,r){e=e||[],r=r||0;for(var n=r;t>=JM;)e[r++]=t&255|I6,t/=128;for(;t&YM;)e[r++]=t&255|I6,t>>>=7;return e[r]=t|0,S6.bytes=r-n+1,e}var XM=vw,QM=128,A6=127;function vw(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw vw.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&A6)<<i:(o&A6)*Math.pow(2,i),i+=7}while(o>=QM);return vw.bytes=s-n,r}var ej=Math.pow(2,7),tj=Math.pow(2,14),rj=Math.pow(2,21),nj=Math.pow(2,28),ij=Math.pow(2,35),sj=Math.pow(2,42),oj=Math.pow(2,49),aj=Math.pow(2,56),cj=Math.pow(2,63),lj=function(t){return t<ej?1:t<tj?2:t<rj?3:t<nj?4:t<ij?5:t<sj?6:t<oj?7:t<aj?8:t<cj?9:10},uj={encode:GM,decode:XM,encodingLength:lj},P6=uj;const O6=(t,e,r=0)=>(P6.encode(t,e,r),e),N6=t=>P6.encodingLength(t),Ew=(t,e)=>{const r=e.byteLength,n=N6(t),i=n+N6(r),s=new Uint8Array(i+r);return O6(t,s,0),O6(r,s,n),s.set(e,i),new dj(t,r,e,s)};class dj{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const T6=({name:t,code:e,encode:r})=>new hj(t,e,r);class hj{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Ew(this.code,r):r.then(n=>Ew(this.code,n))}else throw Error("Unknown type, must be binary type")}}const k6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),pj=T6({name:"sha2-256",code:18,encode:k6("SHA-256")}),fj=T6({name:"sha2-512",code:19,encode:k6("SHA-512")});var gj=Object.freeze({__proto__:null,sha256:pj,sha512:fj});const R6=0,wj="identity",D6=x6;var mj=Object.freeze({__proto__:null,identity:{code:R6,name:wj,encode:D6,digest:t=>Ew(R6,D6(t))}});new TextEncoder,new TextDecoder;const B6=Tr(Tr(Tr(Tr(Tr(Tr(Tr(Tr(Tr(Tr({},dM),pM),gM),mM),vM),OM),kM),BM),jM),KM);Tr(Tr({},gj),mj);function bj(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function U6(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const L6=U6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Cw=U6("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=bj(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),yj=Tr({utf8:L6,"utf-8":L6,hex:B6.base16,latin1:Cw,ascii:Cw,binary:Cw},B6);function vj(t,e="utf8"){const r=yj[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var Ej=Object.defineProperty,Cj=(t,e,r)=>e in t?Ej(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$i=(t,e,r)=>Cj(t,typeof e!="symbol"?e+"":e,r);class xj{constructor(e,r){this.core=e,this.logger=r,$i(this,"keychain",new Map),$i(this,"name",$F),$i(this,"version",_F),$i(this,"initialized",!1),$i(this,"storagePrefix",Ci),$i(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),$i(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),$i(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),$i(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=J("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),$i(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=We(r,this.name)}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Ag(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Pg(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $j=Object.defineProperty,_j=(t,e,r)=>e in t?$j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hr=(t,e,r)=>_j(t,typeof e!="symbol"?e+"":e,r);class Ij{constructor(e,r,n){this.core=e,this.logger=r,hr(this,"name",CF),hr(this,"keychain"),hr(this,"randomSessionIdentifier",nw()),hr(this,"initialized",!1),hr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),hr(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),hr(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=gp(i);return xg(s.publicKey)}),hr(this,"generateKeyPair",()=>{this.isInitialized();const i=lB();return this.setPrivateKey(i.publicKey,i.privateKey)}),hr(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=gp(s),a=this.randomSessionIdentifier;return await F3(a,i,xF,o)}),hr(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=uB(a,s);return this.setSymKey(c,o)}),hr(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Pp(i);return await this.keychain.set(o,i),o}),hr(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),hr(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),hr(this,"encode",async(i,s,o)=>{this.isInitialized();const a=x4(o),c=wi(s);if(_4(a))return pB(c,o?.encoding);if($4(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;i=await this.generateSharedKey(h,f)}const l=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return dB({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o?.encoding})}),hr(this,"decode",async(i,s,o)=>{this.isInitialized();const a=gB(s,o);if(_4(a)){const c=fB(s,o?.encoding);return Wi(c)}if($4(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=hB({symKey:c,encoded:s,encoding:o?.encoding});return Wi(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),hr(this,"getPayloadType",(i,s=Yn)=>{const o=$u({encoded:i,encoding:s});return Fo(o.type)}),hr(this,"getPayloadSenderPublicKey",(i,s=Yn)=>{const o=$u({encoded:i,encoding:s});return o.senderPublicKey?tt(o.senderPublicKey,Or):void 0}),this.core=e,this.logger=We(r,this.name),this.keychain=n||new xj(this.core,this.logger)}get context(){return it(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(m6)}catch{e=nw(),await this.keychain.set(m6,e)}return vj(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Sj=Object.defineProperty,Aj=Object.defineProperties,Pj=Object.getOwnPropertyDescriptors,F6=Object.getOwnPropertySymbols,Oj=Object.prototype.hasOwnProperty,Nj=Object.prototype.propertyIsEnumerable,xw=(t,e,r)=>e in t?Sj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tj=(t,e)=>{for(var r in e||(e={}))Oj.call(e,r)&&xw(t,r,e[r]);if(F6)for(var r of F6(e))Nj.call(e,r)&&xw(t,r,e[r]);return t},kj=(t,e)=>Aj(t,Pj(e)),hn=(t,e,r)=>xw(t,typeof e!="symbol"?e+"":e,r);class Rj extends mL{constructor(e,r){super(e,r),this.logger=e,this.core=r,hn(this,"messages",new Map),hn(this,"messagesWithoutClientAck",new Map),hn(this,"name",IF),hn(this,"version",SF),hn(this,"initialized",!1),hn(this,"storagePrefix",Ci),hn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),hn(this,"set",async(n,i,s)=>{this.isInitialized();const o=vi(i);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===qp.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,kj(Tj({},c),{[o]:i}))}return await this.persist(),o}),hn(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),hn(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),hn(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=vi(i);return typeof s[o]<"u"}),hn(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=vi(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),hn(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=We(e,this.name),this.core=r}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Ag(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Ag(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Pg(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Pg(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Dj=Object.defineProperty,Bj=Object.defineProperties,Uj=Object.getOwnPropertyDescriptors,M6=Object.getOwnPropertySymbols,Lj=Object.prototype.hasOwnProperty,Fj=Object.prototype.propertyIsEnumerable,$w=(t,e,r)=>e in t?Dj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wp=(t,e)=>{for(var r in e||(e={}))Lj.call(e,r)&&$w(t,r,e[r]);if(M6)for(var r of M6(e))Fj.call(e,r)&&$w(t,r,e[r]);return t},_w=(t,e)=>Bj(t,Uj(e)),ti=(t,e,r)=>$w(t,typeof e!="symbol"?e+"":e,r);class Mj extends bL{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,ti(this,"events",new nt.exports.EventEmitter),ti(this,"name",AF),ti(this,"queue",new Map),ti(this,"publishTimeout",z.toMiliseconds(z.ONE_MINUTE)),ti(this,"initialPublishTimeout",z.toMiliseconds(z.ONE_SECOND*15)),ti(this,"needsTransportRestart",!1),ti(this,"publish",async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=s?.ttl||b6,c=Op(s),l=s?.prompt||!1,u=s?.tag||0,d=s?.id||un().toString(),h={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const g=new Promise(async w=>{const p=({id:m})=>{h.opts.id===m&&(this.removeRequestFromQueue(m),this.relayer.events.removeListener(Yt.publish,p),w(h))};this.relayer.events.on(Yt.publish,p);const b=qs(new Promise((m,E)=>{this.rpcPublish({topic:n,message:i,ttl:a,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}).then(m).catch(C=>{this.logger.warn(C,C?.message),E(C)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await b,this.events.removeListener(Yt.publish,p)}catch(m){this.queue.set(d,_w(Wp({},h),{attempt:1})),this.logger.warn(m,m?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:n,message:i,opts:s}}),await qs(g,this.publishTimeout,f)}catch(g){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(g),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw g}finally{this.queue.delete(d)}}),ti(this,"on",(n,i)=>{this.events.on(n,i)}),ti(this,"once",(n,i)=>{this.events.once(n,i)}),ti(this,"off",(n,i)=>{this.events.off(n,i)}),ti(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=We(r,this.name),this.registerEventListeners()}get context(){return it(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:a,ttl:c=b6,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,g={method:_u(Op().protocol).publish,params:Wp({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};ur((r=g.params)==null?void 0:r.prompt)&&((n=g.params)==null||delete n.prompt),ur((i=g.params)==null?void 0:i.tag)&&((s=g.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g});const w=await this.relayer.request(g);return this.relayer.events.emit(Yt.publish,e),this.logger.debug("Successfully Published Payload"),w}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,_w(Wp({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(_w(Wp({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Xn.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Yt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Yt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var jj=Object.defineProperty,zj=(t,e,r)=>e in t?jj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vc=(t,e,r)=>zj(t,typeof e!="symbol"?e+"":e,r);class qj{constructor(){vc(this,"map",new Map),vc(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),vc(this,"get",e=>this.map.get(e)||[]),vc(this,"exists",(e,r)=>this.get(e).includes(r)),vc(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),vc(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Hj=Object.defineProperty,Wj=Object.defineProperties,Vj=Object.getOwnPropertyDescriptors,j6=Object.getOwnPropertySymbols,Kj=Object.prototype.hasOwnProperty,Gj=Object.prototype.propertyIsEnumerable,Iw=(t,e,r)=>e in t?Hj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fu=(t,e)=>{for(var r in e||(e={}))Kj.call(e,r)&&Iw(t,r,e[r]);if(j6)for(var r of j6(e))Gj.call(e,r)&&Iw(t,r,e[r]);return t},Sw=(t,e)=>Wj(t,Vj(e)),st=(t,e,r)=>Iw(t,typeof e!="symbol"?e+"":e,r);class Zj extends EL{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,st(this,"subscriptions",new Map),st(this,"topicMap",new qj),st(this,"events",new nt.exports.EventEmitter),st(this,"name",DF),st(this,"version",BF),st(this,"pending",new Map),st(this,"cached",[]),st(this,"initialized",!1),st(this,"storagePrefix",Ci),st(this,"subscribeTimeout",z.toMiliseconds(z.ONE_MINUTE)),st(this,"initialSubscribeTimeout",z.toMiliseconds(z.ONE_SECOND*15)),st(this,"clientId"),st(this,"batchSubscribeTopicsLimit",500),st(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),st(this,"subscribe",async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Op(i),o={topic:n,relay:s,transportType:i?.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),st(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),st(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),st(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),st(this,"on",(n,i)=>{this.events.on(n,i)}),st(this,"once",(n,i)=>{this.events.once(n,i)}),st(this,"off",(n,i)=>{this.events.off(n,i)}),st(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),st(this,"start",async()=>{await this.onConnect()}),st(this,"stop",async()=>{await this.onDisconnect()}),st(this,"restart",async()=>{await this.restore(),await this.onRestart()}),st(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),st(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Xn.pulse,async()=>{await this.checkPending()}),this.events.on(dn.created,async n=>{const i=dn.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(dn.deleted,async n=>{const i=dn.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=We(r,this.name),this.clientId=""}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Op(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=Ze("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(!n||n?.transportType===gt.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:_u(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n?.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if(n?.transportType===gt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},z.toMiliseconds(z.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(dn.created,d),u(h.id))};this.events.on(dn.created,d);try{const h=await qs(new Promise((f,g)=>{this.relayer.request(s).catch(w=>{this.logger.warn(w,w?.message),g(w)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(dn.created,d),u(h)}catch{}}),l=await qs(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Yt.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:_u(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await qs(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Yt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:_u(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await qs(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Yt.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:_u(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Sw(Fu({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Fu({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Fu({},r)),this.topicMap.set(r.topic,e),this.events.emit(dn.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(dn.deleted,Sw(Fu({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(dn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(dn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>Sw(Fu({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await Xk(z.toMiliseconds(z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return vi(e+await this.getClientId())}}var Yj=Object.defineProperty,z6=Object.getOwnPropertySymbols,Jj=Object.prototype.hasOwnProperty,Xj=Object.prototype.propertyIsEnumerable,Aw=(t,e,r)=>e in t?Yj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,q6=(t,e)=>{for(var r in e||(e={}))Jj.call(e,r)&&Aw(t,r,e[r]);if(z6)for(var r of z6(e))Xj.call(e,r)&&Aw(t,r,e[r]);return t},Ue=(t,e,r)=>Aw(t,typeof e!="symbol"?e+"":e,r);class Qj extends yL{constructor(e){super(e),Ue(this,"protocol","wc"),Ue(this,"version",2),Ue(this,"core"),Ue(this,"logger"),Ue(this,"events",new nt.exports.EventEmitter),Ue(this,"provider"),Ue(this,"messages"),Ue(this,"subscriber"),Ue(this,"publisher"),Ue(this,"name",OF),Ue(this,"transportExplicitlyClosed",!1),Ue(this,"initialized",!1),Ue(this,"connectionAttemptInProgress",!1),Ue(this,"relayUrl"),Ue(this,"projectId"),Ue(this,"packageName"),Ue(this,"bundleId"),Ue(this,"hasExperiencedNetworkDisruption",!1),Ue(this,"pingTimeout"),Ue(this,"heartBeatTimeout",z.toMiliseconds(z.THIRTY_SECONDS+z.FIVE_SECONDS)),Ue(this,"reconnectTimeout"),Ue(this,"connectPromise"),Ue(this,"reconnectInProgress",!1),Ue(this,"requestsInFlight",[]),Ue(this,"connectTimeout",z.toMiliseconds(z.ONE_SECOND*15)),Ue(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||un().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Ue(this,"resetPingTimeout",()=>{mp()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),Ue(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Ue(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \u{1F6DC}"),this.startPingTimeout(),this.events.emit(Yt.connect)}),Ue(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \u{1F6D1}"),this.requestsInFlight=[],this.onProviderDisconnect()}),Ue(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Yt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ue(this,"registerProviderListeners",()=>{this.provider.on(On.payload,this.onPayloadHandler),this.provider.on(On.connect,this.onConnectHandler),this.provider.on(On.disconnect,this.onDisconnectHandler),this.provider.on(On.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?We(e.logger,this.name):ln(es({level:e.logger||PF})),this.messages=new Rj(this.logger,e.core),this.subscriber=new Zj(this,this.logger),this.publisher=new Mj(this,this.logger),this.relayUrl=e?.relayUrl||v6,this.projectId=e.projectId,Bk()?this.packageName=h5():Uk()&&(this.bundleId=h5()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return it(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:gt.relay},qp.outbound)}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r?.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(dn.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(dn.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,q6({internal:{throwOnFailedPublish:o}},r)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await qs(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await D4())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=Rt(z.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Yt.message,e),await this.recordMessageEvent(e,qp.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(On.disconnect,s),await qs(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(On.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(On.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(On.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,z.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(mp())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new bt(new h6(zk({sdkVersion:yw,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:i}=e;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),yc(e)){if(!e.method.endsWith(NF))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:gt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(q6({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else jo(e)&&this.events.emit(Yt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,qp.inbound),this.events.emit(Yt.message,e))}async acknowledgePayload(e){const r=Zs(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(On.payload,this.onPayloadHandler),this.provider.off(On.connect,this.onConnectHandler),this.provider.off(On.disconnect,this.onDisconnectHandler),this.provider.off(On.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await D4();eU(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Yt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},z.toMiliseconds(TF)))))}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function ez(){}function H6(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function W6(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function V6(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const tz="[object RegExp]",rz="[object String]",nz="[object Number]",iz="[object Boolean]",K6="[object Arguments]",sz="[object Symbol]",oz="[object Date]",az="[object Map]",cz="[object Set]",lz="[object Array]",uz="[object Function]",dz="[object ArrayBuffer]",Pw="[object Object]",hz="[object Error]",pz="[object DataView]",fz="[object Uint8Array]",gz="[object Uint8ClampedArray]",wz="[object Uint16Array]",mz="[object Uint32Array]",bz="[object BigUint64Array]",yz="[object Int8Array]",vz="[object Int16Array]",Ez="[object Int32Array]",Cz="[object BigInt64Array]",xz="[object Float32Array]",$z="[object Float64Array]";function _z(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Iz(t,e,r){return Mu(t,e,void 0,void 0,void 0,void 0,r)}function Mu(t,e,r,n,i,s,o){const a=o(t,e,r,n,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return ju(t,e,s,o)}return ju(t,e,s,o)}function ju(t,e,r,n){if(Object.is(t,e))return!0;let i=V6(t),s=V6(e);if(i===K6&&(i=Pw),s===K6&&(s=Pw),i!==s)return!1;switch(i){case rz:return t.toString()===e.toString();case nz:{const c=t.valueOf(),l=e.valueOf();return _z(c,l)}case iz:case oz:case sz:return Object.is(t.valueOf(),e.valueOf());case tz:return t.source===e.source&&t.flags===e.flags;case uz:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(i){case az:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Mu(l,e.get(c),c,t,e,r,n))return!1;return!0}case cz:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Mu(d,f,void 0,t,e,r,n));if(h===-1)return!1;l.splice(h,1)}return!0}case lz:case fz:case gz:case wz:case mz:case bz:case yz:case vz:case Ez:case Cz:case xz:case $z:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Mu(t[c],e[c],c,t,e,r,n))return!1;return!0}case dz:return t.byteLength!==e.byteLength?!1:ju(new Uint8Array(t),new Uint8Array(e),r,n);case pz:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:ju(new Uint8Array(t),new Uint8Array(e),r,n);case hz:return t.name===e.name&&t.message===e.message;case Pw:{if(!(ju(t.constructor,e.constructor,r,n)||H6(t)&&H6(e)))return!1;const c=[...Object.keys(t),...W6(t)],l=[...Object.keys(e),...W6(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Mu(h,f,d,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function Sz(t,e){return Iz(t,e,ez)}var Az=Object.defineProperty,G6=Object.getOwnPropertySymbols,Pz=Object.prototype.hasOwnProperty,Oz=Object.prototype.propertyIsEnumerable,Ow=(t,e,r)=>e in t?Az(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Z6=(t,e)=>{for(var r in e||(e={}))Pz.call(e,r)&&Ow(t,r,e[r]);if(G6)for(var r of G6(e))Oz.call(e,r)&&Ow(t,r,e[r]);return t},Vr=(t,e,r)=>Ow(t,typeof e!="symbol"?e+"":e,r);class Wo extends vL{constructor(e,r,n,i=Ci,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,Vr(this,"map",new Map),Vr(this,"version",kF),Vr(this,"cached",[]),Vr(this,"initialized",!1),Vr(this,"getKey"),Vr(this,"storagePrefix",Ci),Vr(this,"recentlyDeleted",[]),Vr(this,"recentlyDeletedLimit",200),Vr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ur(o)?this.map.set(this.getKey(o),o):NB(o)?this.map.set(o.id,o):TB(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Vr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Vr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Vr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Sz(a[c],o[c]))):this.values)),Vr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Z6(Z6({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Vr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=We(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=J("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Nz=Object.defineProperty,Tz=(t,e,r)=>e in t?Nz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pe=(t,e,r)=>Tz(t,typeof e!="symbol"?e+"":e,r);class kz{constructor(e,r){this.core=e,this.logger=r,Pe(this,"name",UF),Pe(this,"version",LF),Pe(this,"events",new nt.exports),Pe(this,"pairings"),Pe(this,"initialized",!1),Pe(this,"storagePrefix",Ci),Pe(this,"ignoredPayloadTypes",[Qi]),Pe(this,"registeredMethods",[]),Pe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Pe(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),Pe(this,"create",async n=>{this.isInitialized();const i=nw(),s=await this.core.crypto.setSymKey(i),o=Rt(z.FIVE_MINUTES),a={protocol:y6},c={topic:s,expiry:o,relay:a,active:!1,methods:n?.methods},l=S4({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit(zo.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n?.transportType}),{topic:s,uri:l}}),Pe(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[xi.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=I4(n.uri);i.props.properties.topic=s,i.addTrace(xi.pairing_uri_validation_success),i.addTrace(xi.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(xi.existing_pairing),u.active)throw i.setError(ns.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(xi.pairing_not_expired)}const d=c||Rt(z.FIVE_MINUTES),h={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,h),i.addTrace(xi.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(zo.create,h),i.addTrace(xi.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(xi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(ns.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(f){throw i.setError(ns.subscribe_pairing_topic_failure),f}return i.addTrace(xi.subscribe_pairing_topic_success),h}),Pe(this,"activate",async({topic:n})=>{this.isInitialized();const i=Rt(z.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),Pe(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Ro();this.events.once(He("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),Pe(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),Pe(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),Pe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Pe(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Ze("USER_DISCONNECTED")),await this.deletePairing(i))}),Pe(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return S4({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),Pe(this,"sendRequest",async(n,i,s)=>{const o=Nr(i,s),a=await this.core.crypto.encode(n,o),c=Du[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),Pe(this,"sendResult",async(n,i,s)=>{const o=Zs(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=Du[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),Pe(this,"sendError",async(n,i,s)=>{const o=bc(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=Du[c]?Du[c].res:Du.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),Pe(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Ze("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),Pe(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>Hs(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),Pe(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),Pe(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),Pe(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(zo.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),Pe(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Dt(i)?this.events.emit(He("pairing_ping",s),{}):Et(i)&&this.events.emit(He("pairing_ping",s),{error:i.error})},500)}),Pe(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(zo.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),Pe(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=Ze("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),Pe(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(Ze("WC_METHOD_UNSUPPORTED",n))}),Pe(this,"isValidPair",(n,i)=>{var s;if(!Hr(n)){const{message:a}=J("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(ns.malformed_pairing_uri),new Error(a)}if(!OB(n.uri)){const{message:a}=J("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(ns.malformed_pairing_uri),new Error(a)}const o=I4(n?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(ns.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=J("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(ns.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&z.toMiliseconds(o?.expiryTimestamp)<Date.now()){i.setError(ns.pairing_expired);const{message:a}=J("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Pe(this,"isValidPing",async n=>{if(!Hr(n)){const{message:s}=J("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),Pe(this,"isValidDisconnect",async n=>{if(!Hr(n)){const{message:s}=J("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),Pe(this,"isValidPairingTopic",async n=>{if(!Pt(n,!1)){const{message:i}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Hs(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=J("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=We(r,this.name),this.pairings=new Wo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return it(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Yt.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(this.pairings.keys.includes(r)&&i!==gt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);yc(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):jo(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Nn.expired,async e=>{const{topic:r}=w5(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(zo.expire,{topic:r}))})}}var Rz=Object.defineProperty,Dz=(t,e,r)=>e in t?Rz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pr=(t,e,r)=>Dz(t,typeof e!="symbol"?e+"":e,r);class Bz extends wL{constructor(e,r){super(e,r),this.core=e,this.logger=r,pr(this,"records",new Map),pr(this,"events",new nt.exports.EventEmitter),pr(this,"name",FF),pr(this,"version",MF),pr(this,"cached",[]),pr(this,"initialized",!1),pr(this,"storagePrefix",Ci),pr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),pr(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Rt(z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Qn.created,o)}),pr(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Et(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(Qn.updated,i))}),pr(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),pr(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Qn.deleted,s)}}),this.persist()}),pr(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),pr(this,"on",(n,i)=>{this.events.on(n,i)}),pr(this,"once",(n,i)=>{this.events.once(n,i)}),pr(this,"off",(n,i)=>{this.events.off(n,i)}),pr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=We(r,this.name)}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Nr(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Qn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Qn.created,e=>{const r=Qn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Qn.updated,e=>{const r=Qn.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Qn.deleted,e=>{const r=Qn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Xn.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{z.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Qn.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Uz=Object.defineProperty,Lz=(t,e,r)=>e in t?Uz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_r=(t,e,r)=>Lz(t,typeof e!="symbol"?e+"":e,r);class Fz extends CL{constructor(e,r){super(e,r),this.core=e,this.logger=r,_r(this,"expirations",new Map),_r(this,"events",new nt.exports.EventEmitter),_r(this,"name",jF),_r(this,"version",zF),_r(this,"cached",[]),_r(this,"initialized",!1),_r(this,"storagePrefix",Ci),_r(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),_r(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),_r(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Nn.created,{target:s,expiration:o})}),_r(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),_r(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Nn.deleted,{target:i,expiration:s})}}),_r(this,"on",(n,i)=>{this.events.on(n,i)}),_r(this,"once",(n,i)=>{this.events.once(n,i)}),_r(this,"off",(n,i)=>{this.events.off(n,i)}),_r(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=We(r,this.name)}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return qk(e);if(typeof e=="number")return Hk(e);const{message:r}=J("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Nn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=J("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=J("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;z.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Nn.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Xn.pulse,()=>this.checkExpirations()),this.events.on(Nn.created,e=>{const r=Nn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Nn.expired,e=>{const r=Nn.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Nn.deleted,e=>{const r=Nn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Mz=Object.defineProperty,jz=(t,e,r)=>e in t?Mz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ot=(t,e,r)=>jz(t,typeof e!="symbol"?e+"":e,r);class zz extends xL{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,Ot(this,"name",qF),Ot(this,"abortController"),Ot(this,"isDevEnv"),Ot(this,"verifyUrlV3",WF),Ot(this,"storagePrefix",Ci),Ot(this,"version",w6),Ot(this,"publicKey"),Ot(this,"fetchPromise"),Ot(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&z.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Ot(this,"register",async i=>{if(!du()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Mi(),u=this.startAbortTimer(z.ONE_SECOND*5),d=await new Promise((h,f)=>{const g=()=>{window.removeEventListener("message",p),l.body.removeChild(w),f("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const w=l.createElement("iframe");w.src=c,w.style.display="none",w.addEventListener("error",g,{signal:this.abortController.signal});const p=b=>{if(b.data&&typeof b.data=="string")try{const m=JSON.parse(b.data);if(m.type==="verify_attestation"){if(tc(m.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(w),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",p),h(m.attestation===null?"":m.attestation)}}catch(m){this.logger.warn(m)}};l.body.appendChild(w),window.addEventListener("message",p,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Ot(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(tc(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,c)}),Ot(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(z.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Ot(this,"getVerifyUrl",i=>{let s=i||Bu;return VF.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Bu}`),s=Bu),s}),Ot(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(z.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),Ot(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Ot(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Ot(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Ot(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Ot(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Ot(this,"validateAttestation",(i,s)=>{const o=mB(i,s.publicKey),a={hasExpired:z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=We(r,this.name),this.abortController=new AbortController,this.isDevEnv=Og(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return it(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),z.toMiliseconds(e))}}var qz=Object.defineProperty,Hz=(t,e,r)=>e in t?qz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Y6=(t,e,r)=>Hz(t,typeof e!="symbol"?e+"":e,r);class Wz extends $L{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,Y6(this,"context",KF),Y6(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${GF}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=We(r,this.context)}}var Vz=Object.defineProperty,J6=Object.getOwnPropertySymbols,Kz=Object.prototype.hasOwnProperty,Gz=Object.prototype.propertyIsEnumerable,Nw=(t,e,r)=>e in t?Vz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zu=(t,e)=>{for(var r in e||(e={}))Kz.call(e,r)&&Nw(t,r,e[r]);if(J6)for(var r of J6(e))Gz.call(e,r)&&Nw(t,r,e[r]);return t},Jt=(t,e,r)=>Nw(t,typeof e!="symbol"?e+"":e,r);class Zz extends _L{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Jt(this,"context",YF),Jt(this,"storagePrefix",Ci),Jt(this,"storageVersion",ZF),Jt(this,"events",new Map),Jt(this,"shouldPersist",!1),Jt(this,"init",async()=>{if(!Og())try{const i={eventId:b5(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:f5(this.core.relayer.protocol,this.core.relayer.version,yw)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Jt(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=b5(),u=this.core.projectId||"",d=Date.now(),h=zu({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Jt(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return zu(zu({},a),this.setMethods(a.eventId))}),Jt(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Jt(this,"setEventListeners",()=>{this.core.heartbeat.on(Xn.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{z.fromMiliseconds(Date.now())-z.fromMiliseconds(i.timestamp)>JF&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Jt(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Jt(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Jt(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Jt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Jt(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,zu(zu({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Jt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Jt(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${XF}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${yw}${s}`,{method:"POST",body:JSON.stringify(i)})}),Jt(this,"getAppDomain",()=>p5().url),this.logger=We(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Yz=Object.defineProperty,X6=Object.getOwnPropertySymbols,Jz=Object.prototype.hasOwnProperty,Xz=Object.prototype.propertyIsEnumerable,Tw=(t,e,r)=>e in t?Yz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Q6=(t,e)=>{for(var r in e||(e={}))Jz.call(e,r)&&Tw(t,r,e[r]);if(X6)for(var r of X6(e))Xz.call(e,r)&&Tw(t,r,e[r]);return t},ht=(t,e,r)=>Tw(t,typeof e!="symbol"?e+"":e,r);class kw extends hL{constructor(e){var r;super(e),ht(this,"protocol",g6),ht(this,"version",w6),ht(this,"name",zp),ht(this,"relayUrl"),ht(this,"projectId"),ht(this,"customStoragePrefix"),ht(this,"events",new nt.exports.EventEmitter),ht(this,"logger"),ht(this,"heartbeat"),ht(this,"relayer"),ht(this,"crypto"),ht(this,"storage"),ht(this,"history"),ht(this,"expirer"),ht(this,"pairing"),ht(this,"verify"),ht(this,"echoClient"),ht(this,"linkModeSupportedApps"),ht(this,"eventClient"),ht(this,"initialized",!1),ht(this,"logChunkController"),ht(this,"on",(a,c)=>this.events.on(a,c)),ht(this,"once",(a,c)=>this.events.once(a,c)),ht(this,"off",(a,c)=>this.events.off(a,c)),ht(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),ht(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:gt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||v6,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=es({level:typeof e?.logger=="string"&&e.logger?e.logger:vF.logger,name:zp}),{logger:s,chunkLoggerController:o}=fw({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=We(s,this.name),this.heartbeat=new kp,this.crypto=new Ij(this,this.logger,e?.keychain),this.history=new Bz(this,this.logger),this.expirer=new Fz(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new z4(Q6(Q6({},EF),e?.storageOptions)),this.relayer=new Qj({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new kz(this,this.logger),this.verify=new zz(this,this.logger,this.storage),this.echoClient=new Wz(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Zz(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new kw(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(RF,n),r}get context(){return it(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(E6,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(E6)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&process.env.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}}const Qz=kw,e8="wc",t8=2,r8="client",Rw=`${e8}@${t8}:${r8}:`,Dw={name:r8,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},n8="WALLETCONNECT_DEEPLINK_CHOICE",eq="proposal",i8="Proposal expired",tq="session",Ec=z.SEVEN_DAYS,rq="engine",Xt={wc_sessionPropose:{req:{ttl:z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1119}}},Bw={min:z.FIVE_MINUTES,max:z.SEVEN_DAYS},_i={idle:"IDLE",active:"ACTIVE"},s8={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},nq="request",iq=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],sq="wc",oq="auth",aq="authKeys",cq="pairingTopics",lq="requests",Vp=`${sq}@${1.5}:${oq}:`,Kp=`${Vp}:PUB_KEY`;var uq=Object.defineProperty,dq=Object.defineProperties,hq=Object.getOwnPropertyDescriptors,o8=Object.getOwnPropertySymbols,pq=Object.prototype.hasOwnProperty,fq=Object.prototype.propertyIsEnumerable,Uw=(t,e,r)=>e in t?uq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ot=(t,e)=>{for(var r in e||(e={}))pq.call(e,r)&&Uw(t,r,e[r]);if(o8)for(var r of o8(e))fq.call(e,r)&&Uw(t,r,e[r]);return t},kr=(t,e)=>dq(t,hq(e)),V=(t,e,r)=>Uw(t,typeof e!="symbol"?e+"":e,r);class gq extends PL{constructor(e){super(e),V(this,"name",rq),V(this,"events",new nt.exports),V(this,"initialized",!1),V(this,"requestQueue",{state:_i.idle,queue:[]}),V(this,"sessionRequestQueue",{state:_i.idle,queue:[]}),V(this,"requestQueueDelay",z.ONE_SECOND),V(this,"expectedPairingMethodMap",new Map),V(this,"recentlyDeletedMap",new Map),V(this,"recentlyDeletedLimit",200),V(this,"relayMessageCache",[]),V(this,"pendingSessions",new Map),V(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Xt)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},z.toMiliseconds(this.requestQueueDelay)))}),V(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=kr(ot({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=n;let u=i,d,h=!1;try{if(u){const S=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=S.active}}catch(S){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),S}if(!u||!h){const{topic:S,uri:I}=await this.client.core.pairing.create();u=S,d=I}if(!u){const{message:S}=J("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(S)}const f=await this.client.core.crypto.generateKeyPair(),g=Xt.wc_sessionPropose.req.ttl||z.FIVE_MINUTES,w=Rt(g),p=kr(ot(ot({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:y6}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:w,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Zt()}),b=He("session_connect",p.id),{reject:m,resolve:E,done:C}=Ro(g,i8),P=({id:S})=>{S===p.id&&(this.client.events.off("proposal_expire",P),this.pendingSessions.delete(p.id),this.events.emit(b,{error:{message:i8,code:0}}))};return this.client.events.on("proposal_expire",P),this.events.once(b,({error:S,session:I})=>{this.client.events.off("proposal_expire",P),S?m(S):I&&E(I)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0,clientRpcId:p.id}),await this.setProposal(p.id,p),{uri:d,approval:C}}),V(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),V(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[ei.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch($){throw o.setError(qo.no_internet_connection),$}try{await this.isValidProposalId(r?.id)}catch($){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(qo.proposal_not_found),$}try{await this.isValidApprove(r)}catch($){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(qo.session_approve_namespace_validation_failure),$}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:w,requiredNamespaces:p,optionalNamespaces:b}=f;let m=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:g});m||(m=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:ei.session_approve_started,properties:{topic:g,trace:[ei.session_approve_started,ei.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),C=w.publicKey,P=await this.client.core.crypto.generateSharedKey(E,C),S=ot(ot(ot({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:E,metadata:this.client.metadata},expiry:Rt(Ec)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),I=gt.relay;m.addTrace(ei.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:I})}catch($){throw m.setError(qo.subscribe_session_topic_failure),$}m.addTrace(ei.subscribe_session_topic_success);const N=kr(ot({},S),{topic:P,requiredNamespaces:p,optionalNamespaces:b,pairingTopic:g,acknowledged:!1,self:S.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:E,transportType:gt.relay});await this.client.session.set(P,N),m.addTrace(ei.store_session);try{m.addTrace(ei.publishing_session_settle),await this.sendRequest({topic:P,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0}).catch($=>{throw m?.setError(qo.session_settle_publish_failure),$}),m.addTrace(ei.session_settle_publish_success),m.addTrace(ei.publishing_session_approve),await this.sendResult({id:a,topic:g,result:{relay:{protocol:c??"irn"},responderPublicKey:E},throwOnFailedPublish:!0}).catch($=>{throw m?.setError(qo.session_approve_publish_failure),$}),m.addTrace(ei.session_approve_publish_success)}catch($){throw this.client.logger.error($),this.client.session.delete(P,Ze("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),$}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:w.metadata}),await this.client.proposal.delete(a,Ze("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(P,Rt(Ec)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}}),V(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:Xt.wc_sessionPropose.reject}),await this.client.proposal.delete(n,Ze("USER_DISCONNECTED")))}),V(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=Ro(),c=Zt(),l=un().toString(),u=this.client.session.get(n).namespaces;return this.events.once(He("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:u}),a(d)}),{acknowledged:s}}),V(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=Zt(),{done:s,resolve:o,reject:a}=Ro();return this.events.once(He("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Rt(Ec)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),V(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(b){throw this.client.logger.error("request() -> isValidRequest() failed"),b}const{chainId:n,request:i,topic:s,expiry:o=Xt.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);a?.transportType===gt.relay&&await this.confirmOnlineStateOrThrow();const c=Zt(),l=un().toString(),{done:u,resolve:d,reject:h}=Ro(o,"Request expired. Please try again.");this.events.once(He("session_request",c),({error:b,result:m})=>{b?h(b):d(m)});const f="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:{request:kr(ot({},i),{expiryTimestamp:Rt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await u();const w={request:kr(ot({},i),{expiryTimestamp:Rt(o)}),chainId:n},p=this.shouldSetTVF(f,w);return await Promise.all([new Promise(async b=>{await this.sendRequest(ot({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:w,expiry:o,throwOnFailedPublish:!0},p&&{tvf:this.getTVFParams(c,w)})).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),b()}),new Promise(async b=>{var m;if(!((m=a.sessionConfig)!=null&&m.disableDeepLink)){const E=await Gk(this.client.core.storage,n8);await Wk({id:c,topic:s,wcDeepLink:E})}b()}),u()]).then(b=>b[2])}),V(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===gt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Dt(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):Et(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)}),V(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Zt(),s=un().toString(),{done:o,resolve:a,reject:c}=Ro();this.events.once(He("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),V(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=un().toString(),a=Zt();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),V(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Ze("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=J("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),V(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>AB(n,r)))),V(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),V(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?gt.link_mode:gt.relay;o===gt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:g,methods:w=[],expiry:p}=r,b=[...r.resources||[]],{topic:m,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:E}});const C=await this.client.core.crypto.generateKeyPair(),P=Pp(C);if(await Promise.all([this.client.auth.authKeys.set(Kp,{responseTopic:P,publicKey:C}),this.client.auth.pairingTopics.set(P,{topic:P,pairingTopic:m})]),await this.client.core.relayer.subscribe(P,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${m}`),w.length>0){const{namespace:_}=rc(a[0]);let k=FR(_,"request",w);Ep(b)&&(k=jR(k,b.pop())),b.push(k)}const S=p&&p>Xt.wc_sessionAuthenticate.req.ttl?p:Xt.wc_sessionAuthenticate.req.ttl,I={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:g,resources:b},requester:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:Rt(S)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...w])],events:["chainChanged","accountsChanged"]}},$={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:Rt(Xt.wc_sessionPropose.req.ttl),id:Zt()},{done:D,resolve:T,reject:R}=Ro(S,"Request expired"),M=Zt(),x=He("session_connect",$.id),y=He("session_request",M),v=async({error:_,session:k})=>{this.events.off(y,A),_?R(_):k&&T({session:k})},A=async _=>{var k,L,F;if(await this.deletePendingAuthRequest(M,{message:"fulfilled",code:0}),_.error){const te=Ze("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return _.error.code===te.code?void 0:(this.events.off(x,v),R(_.error.message))}await this.deleteProposal($.id),this.events.off(x,v);const{cacaos:H,responder:q}=_.result,W=[],Y=[];for(const te of H){await k5({cacao:te,projectId:this.client.core.projectId})||(this.client.logger.error(te,"Signature verification failed"),R(Ze("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ee}=te,Ce=Ep(Ee.resources),xe=[Bg(Ee.iss)],_e=vp(Ee.iss);if(Ce){const Ge=B5(Ce),xr=U5(Ce);W.push(...Ge),xe.push(...xr)}for(const Ge of xe)Y.push(`${Ge}:${_e}`)}const ae=await this.client.core.crypto.generateSharedKey(C,q.publicKey);let re;W.length>0&&(re={topic:ae,acknowledged:!0,self:{publicKey:C,metadata:this.client.metadata},peer:q,controller:q.publicKey,expiry:Rt(Ec),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:A4([...new Set(W)],[...new Set(Y)]),transportType:o},await this.client.core.relayer.subscribe(ae,{transportType:o}),await this.client.session.set(ae,re),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:q.metadata}),re=this.client.session.get(ae)),(k=this.client.metadata.redirect)!=null&&k.linkMode&&(L=q.metadata.redirect)!=null&&L.linkMode&&(F=q.metadata.redirect)!=null&&F.universal&&n&&(this.client.core.addLinkModeSupportedApp(q.metadata.redirect.universal),this.client.session.update(ae,{transportType:gt.link_mode})),T({auths:H,session:re})};this.events.once(x,v),this.events.once(y,A);let O;try{if(s){const _=Nr("wc_sessionAuthenticate",I,M);this.client.core.history.set(m,_);const k=await this.client.core.crypto.encode("",_,{type:Cu,encoding:Gs});O=Np(n,m,k)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:I,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:M}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:$,expiry:Xt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:$.id})])}catch(_){throw this.events.off(x,v),this.events.off(y,A),_}return await this.setProposal($.id,$),await this.setAuthRequest(M,{request:kr(ot({},I),{verifyContext:{}}),pairingTopic:m,transportType:o}),{uri:O??E,response:D}}),V(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Ho.authenticated_session_approve_started]}});try{this.isInitialized()}catch(p){throw s.setError(Uu.no_internet_connection),p}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(Uu.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||gt.relay;a===gt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Pp(c),d={type:Qi,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const p of i){if(!await k5({cacao:p,projectId:this.client.core.projectId})){s.setError(Uu.invalid_cacao);const P=Ze("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:P,encodeOpts:d}),new Error(P.message)}s.addTrace(Ho.cacaos_verified);const{p:b}=p,m=Ep(b.resources),E=[Bg(b.iss)],C=vp(b.iss);if(m){const P=B5(m),S=U5(m);h.push(...P),E.push(...S)}for(const P of E)f.push(`${P}:${C}`)}const g=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(Ho.create_authenticated_session_topic);let w;if(h?.length>0){w={topic:g,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Rt(Ec),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:A4([...new Set(h)],[...new Set(f)]),transportType:a},s.addTrace(Ho.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(p){throw s.setError(Uu.subscribe_authenticated_session_topic_failure),p}s.addTrace(Ho.subscribe_authenticated_session_topic_success),await this.client.session.set(g,w),s.addTrace(Ho.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Ho.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(p){throw s.setError(Uu.authenticated_session_approve_publish_failure),p}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:w}}),V(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===gt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Pp(o),l={type:Qi,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:Xt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,Ze("USER_DISCONNECTED"))}),V(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return R5(n,i)}),V(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),V(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),V(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,Ze("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(n8).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,Ze("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=_i.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),V(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s?.setError(qo.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Ze("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),V(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=_i.idle,this.client.events.emit("session_request_expire",{id:r}))}),V(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),V(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),V(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,Rt(Xt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),V(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=gt.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),V(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Rt(Xt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),V(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=r,h=Nr(i,s,c);let f;const g=!!u;try{const b=g?Gs:Yn;f=await this.client.core.crypto.encode(n,h,{encoding:b})}catch(b){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),b}let w;if(iq.includes(i)){const b=vi(JSON.stringify(h)),m=vi(f);w=await this.client.core.verify.register({id:m,decryptedId:b})}const p=Xt[i].req;if(p.attestation=w,o&&(p.ttl=o),a&&(p.id=a),this.client.core.history.set(n,h),g){const b=Np(u,n,f);await global.Linking.openURL(b,this.client.name)}else{const b=Xt[i].req;o&&(b.ttl=o),a&&(b.id=a),b.tvf=kr(ot({},d),{correlationId:h.id}),l?(b.internal=kr(ot({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,b)):this.client.core.relayer.publish(n,f,b).catch(m=>this.client.logger.error(m))}return h.id}),V(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=Zs(n,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?Gs:Yn;u=await this.client.core.crypto.encode(i,l,kr(ot({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),g}let h,f;try{h=await this.client.core.history.get(i,n);const g=h.request;try{this.shouldSetTVF(g.method,g.params)&&(f=this.getTVFParams(n,g.params,s))}catch(w){this.client.logger.warn("sendResult() -> getTVFParams() failed",w)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),g}if(d){const g=Np(c,i,u);await global.Linking.openURL(g,this.client.name)}else{const g=h.request.method,w=Xt[g].res;w.tvf=kr(ot({},f),{correlationId:n}),o?(w.internal=kr(ot({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,w)):this.client.core.relayer.publish(i,u,w).catch(p=>this.client.logger.error(p))}await this.client.core.history.resolve(l)}),V(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=bc(n,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Gs:Yn;u=await this.client.core.crypto.encode(i,l,kr(ot({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),f}let h;try{h=await this.client.core.history.get(i,n)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),f}if(d){const f=Np(c,i,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,g=a||Xt[f].res;this.client.core.relayer.publish(i,u,g)}await this.client.core.history.resolve(l)}),V(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Hs(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Hs(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),V(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),V(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),V(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===_i.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=_i.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=_i.idle}),V(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),V(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),V(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=J("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),V(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),V(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(ns.proposal_listener_not_found)),this.isValidConnect(ot({},i.params));const u=a.expiryTimestamp||Rt(Xt.wc_sessionPropose.req.ttl),d=ot({id:c,pairingTopic:n,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:s,hash:vi(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l?.addTrace(xi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:Xt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),V(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Dt(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(Et(n)){await this.client.proposal.delete(s,Ze("USER_DISCONNECTED"));const o=He("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),V(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n.params,f=[...this.pendingSessions.values()].find(p=>p.sessionTopic===r);if(!f)return this.client.logger.error(`Pending session not found for topic ${r}`);const g=this.client.proposal.get(f.proposalId),w=kr(ot(ot(ot({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:gt.relay});await this.client.session.set(w.topic,w),await this.setExpiry(w.topic,w.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:w.peer.metadata}),this.client.events.emit("session_connect",{session:w}),this.events.emit(He("session_connect",f.proposalId),{session:w}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(w),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),V(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Dt(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(He("session_approve",i),{})):Et(n)&&(await this.client.session.delete(r,Ze("USER_DISCONNECTED")),this.events.emit(He("session_approve",i),{error:n.error}))}),V(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=Au.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:Ze("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ot({topic:r},i));try{Au.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw Au.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),V(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),V(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=He("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Dt(n)?this.events.emit(He("session_update",i),{}):Et(n)&&this.events.emit(He("session_update",i),{error:n.error})}),V(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Rt(Ec)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),V(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=He("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Dt(n)?this.events.emit(He("session_extend",i),{}):Et(n)&&this.events.emit(He("session_extend",i),{error:n.error})}),V(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),V(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=He("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Dt(n)?this.events.emit(He("session_ping",i),{}):Et(n)&&this.events.emit(He("session_ping",i),{error:n.error})},500)}),V(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Yt.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Ze("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),V(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:d,params:h}=a;try{await this.isValidRequest(ot({topic:o},h));const f=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:vi(JSON.stringify(Nr("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),w={id:d,topic:o,params:h,verifyContext:g};await this.setPendingSessionRequest(w),u===gt.link_mode&&(n=f.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=f.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(w):(this.addSessionRequestToSessionRequestQueue(w),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),V(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=He("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Dt(n)?this.events.emit(He("session_request",i),{result:n.result}):Et(n)&&this.events.emit(He("session_request",i),{error:n.error})}),V(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=Au.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ot({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),Au.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),V(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Dt(n)?this.events.emit(He("session_request",i),{result:n.result}):Et(n)&&this.events.emit(He("session_request",i),{error:n.error})}),V(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,h=await this.getVerifyContext({attestationId:o,hash:vi(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:f,pairingTopic:i,transportType:c}),c===gt.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(s.params.requester.metadata,c),f={type:Qi,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:f,rpcOpts:Xt.wc_sessionAuthenticate.autoReject,appLink:h})}}),V(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),V(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=_i.idle,this.processSessionRequestQueue()},z.toMiliseconds(this.requestQueueDelay))}),V(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=He("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(He("session_request",s.request.id),{error:n})})}),V(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===_i.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=_i.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),V(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),V(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Nr("wc_sessionPropose",kr(ot({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),V(this,"isValidConnect",async r=>{if(!Hr(r)){const{message:l}=J("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=r;if(ur(n)||await this.isValidPairingTopic(n),!MB(c,!0)){const{message:l}=J("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!ur(i)&&Su(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!ur(s)&&Su(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),ur(o)||this.validateSessionProps(o,"sessionProperties"),!ur(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),V(this,"validateNamespaces",(r,n)=>{const i=FB(r,"connect()",n);if(i)throw new Error(i.message)}),V(this,"isValidApprove",async r=>{if(!Hr(r))throw new Error(J("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),l=ow(i,"approve()");if(l)throw new Error(l.message);const u=k4(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!Pt(s,!0)){const{message:d}=J("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(ur(o)||this.validateSessionProps(o,"sessionProperties"),!ur(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),V(this,"isValidReject",async r=>{if(!Hr(r)){const{message:s}=J("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!zB(i)){const{message:s}=J("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),V(this,"isValidSessionSettleRequest",r=>{if(!Hr(r)){const{message:l}=J("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!N4(n)){const{message:l}=J("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=kB(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=ow(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Hs(o)){const{message:l}=J("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),V(this,"isValidUpdate",async r=>{if(!Hr(r)){const{message:c}=J("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=ow(i,"update()");if(o)throw new Error(o.message);const a=k4(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),V(this,"isValidExtend",async r=>{if(!Hr(r)){const{message:i}=J("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),V(this,"isValidRequest",async r=>{if(!Hr(r)){const{message:c}=J("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!T4(a,s)){const{message:c}=J("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!qB(i)){const{message:c}=J("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!VB(a,s,i.method)){const{message:c}=J("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!YB(o,Bw)){const{message:c}=J("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Bw.min} and ${Bw.max}`);throw new Error(c)}}),V(this,"isValidRespond",async r=>{var n;if(!Hr(r)){const{message:o}=J("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!HB(s)){const{message:o}=J("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),V(this,"isValidPing",async r=>{if(!Hr(r)){const{message:i}=J("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),V(this,"isValidEmit",async r=>{if(!Hr(r)){const{message:a}=J("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!T4(o,s)){const{message:a}=J("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!WB(i)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!KB(o,s,i.name)){const{message:a}=J("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),V(this,"isValidDisconnect",async r=>{if(!Hr(r)){const{message:i}=J("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),V(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!Pt(i,!1))throw new Error("uri is required parameter");if(!Pt(s,!1))throw new Error("domain is required parameter");if(!Pt(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>rc(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=rc(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),V(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Bu,validation:"UNKNOWN",origin:o.url||""}};try{if(a===gt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),V(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=J("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),V(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),V(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),V(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=J("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),V(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,l,u,d,h;return!r||n!==gt.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r?.redirect)==null?void 0:u.universal)!==void 0&&((d=r?.redirect)==null?void 0:d.universal)!==""&&((h=r?.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),V(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r?.redirect)==null?void 0:i.universal:void 0}),V(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=m5(r,"topic")||"",i=decodeURIComponent(m5(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:gt.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),V(this,"registerLinkModeListeners",async()=>{var r;if(Og()||zs()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),V(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:i}=n;return Object.keys(s8).includes(i.method)}),V(this,"getTVFParams",(r,n,i)=>{var s,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,i);return kr(ot({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),V(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=r?.data||((n=r?.[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),V(this,"extractTxHashesFromResult",(r,n)=>{try{const i=s8[r];if(typeof n=="string")return[n];const s=n[i.key];if(Jn(s))return r==="solana_signAllTransactions"?s.map(o=>_R(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=J("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Yt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Kp)?this.client.auth.authKeys.get(Kp):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===gt.link_mode?Gs:Yn});yc(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:vi(n)})):jo(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Nn.expired,async e=>{const{topic:r,id:n}=w5(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,J("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,J("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(zo.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(zo.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Pt(e,!1)){const{message:r}=J("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=J("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Hs(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=J("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Pt(e,!1)){const{message:r}=J("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=J("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Hs(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=J("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=J("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Pt(e,!1)){const{message:r}=J("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=J("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!jB(e)){const{message:r}=J("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=J("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Hs(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=J("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class wq extends Wo{constructor(e,r){super(e,r,eq,Rw),this.core=e,this.logger=r}}class mq extends Wo{constructor(e,r){super(e,r,tq,Rw),this.core=e,this.logger=r}}class bq extends Wo{constructor(e,r){super(e,r,nq,Rw,n=>n.id),this.core=e,this.logger=r}}class yq extends Wo{constructor(e,r){super(e,r,aq,Vp,()=>Kp),this.core=e,this.logger=r}}class vq extends Wo{constructor(e,r){super(e,r,cq,Vp),this.core=e,this.logger=r}}class Eq extends Wo{constructor(e,r){super(e,r,lq,Vp,n=>n.id),this.core=e,this.logger=r}}var Cq=Object.defineProperty,xq=(t,e,r)=>e in t?Cq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lw=(t,e,r)=>xq(t,typeof e!="symbol"?e+"":e,r);class $q{constructor(e,r){this.core=e,this.logger=r,Lw(this,"authKeys"),Lw(this,"pairingTopics"),Lw(this,"requests"),this.authKeys=new yq(this.core,this.logger),this.pairingTopics=new vq(this.core,this.logger),this.requests=new Eq(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var _q=Object.defineProperty,Iq=(t,e,r)=>e in t?_q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Oe=(t,e,r)=>Iq(t,typeof e!="symbol"?e+"":e,r);class Fw extends AL{constructor(e){super(e),Oe(this,"protocol",e8),Oe(this,"version",t8),Oe(this,"name",Dw.name),Oe(this,"metadata"),Oe(this,"core"),Oe(this,"logger"),Oe(this,"events",new nt.exports.EventEmitter),Oe(this,"engine"),Oe(this,"session"),Oe(this,"proposal"),Oe(this,"pendingRequest"),Oe(this,"auth"),Oe(this,"signConfig"),Oe(this,"on",(n,i)=>this.events.on(n,i)),Oe(this,"once",(n,i)=>this.events.once(n,i)),Oe(this,"off",(n,i)=>this.events.off(n,i)),Oe(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),Oe(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Oe(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Oe(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||Dw.name,this.metadata=Fk(e?.metadata),this.signConfig=e?.signConfig;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:ln(es({level:e?.logger||Dw.logger}));this.core=e?.core||new Qz(e),this.logger=We(r,this.name),this.session=new mq(this.core,this.logger),this.proposal=new wq(this.core,this.logger),this.pendingRequest=new bq(this.core,this.logger),this.engine=new gq(this),this.auth=new $q(this.core,this.logger)}static async init(e){const r=new Fw(e);return await r.initialize(),r}get context(){return it(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},z.toMiliseconds(z.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Mw={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof zt<"u"&&zt,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof zt<"u"&&zt||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(y){return y&&DataView.prototype.isPrototypeOf(y)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(y){return y&&u.indexOf(Object.prototype.toString.call(y))>-1};function h(y){if(typeof y!="string"&&(y=String(y)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(y)||y==="")throw new TypeError('Invalid character in header field name: "'+y+'"');return y.toLowerCase()}function f(y){return typeof y!="string"&&(y=String(y)),y}function g(y){var v={next:function(){var A=y.shift();return{done:A===void 0,value:A}}};return c.iterable&&(v[Symbol.iterator]=function(){return v}),v}function w(y){this.map={},y instanceof w?y.forEach(function(v,A){this.append(A,v)},this):Array.isArray(y)?y.forEach(function(v){if(v.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+v.length);this.append(v[0],v[1])},this):y&&Object.getOwnPropertyNames(y).forEach(function(v){this.append(v,y[v])},this)}w.prototype.append=function(y,v){y=h(y),v=f(v);var A=this.map[y];this.map[y]=A?A+", "+v:v},w.prototype.delete=function(y){delete this.map[h(y)]},w.prototype.get=function(y){return y=h(y),this.has(y)?this.map[y]:null},w.prototype.has=function(y){return this.map.hasOwnProperty(h(y))},w.prototype.set=function(y,v){this.map[h(y)]=f(v)},w.prototype.forEach=function(y,v){for(var A in this.map)this.map.hasOwnProperty(A)&&y.call(v,this.map[A],A,this)},w.prototype.keys=function(){var y=[];return this.forEach(function(v,A){y.push(A)}),g(y)},w.prototype.values=function(){var y=[];return this.forEach(function(v){y.push(v)}),g(y)},w.prototype.entries=function(){var y=[];return this.forEach(function(v,A){y.push([A,v])}),g(y)},c.iterable&&(w.prototype[Symbol.iterator]=w.prototype.entries);function p(y){if(!y._noBody){if(y.bodyUsed)return Promise.reject(new TypeError("Already read"));y.bodyUsed=!0}}function b(y){return new Promise(function(v,A){y.onload=function(){v(y.result)},y.onerror=function(){A(y.error)}})}function m(y){var v=new FileReader,A=b(v);return v.readAsArrayBuffer(y),A}function E(y){var v=new FileReader,A=b(v),O=/charset=([A-Za-z0-9_-]+)/.exec(y.type),_=O?O[1]:"utf-8";return v.readAsText(y,_),A}function C(y){for(var v=new Uint8Array(y),A=new Array(v.length),O=0;O<v.length;O++)A[O]=String.fromCharCode(v[O]);return A.join("")}function P(y){if(y.slice)return y.slice(0);var v=new Uint8Array(y.byteLength);return v.set(new Uint8Array(y)),v.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(y){this.bodyUsed=this.bodyUsed,this._bodyInit=y,y?typeof y=="string"?this._bodyText=y:c.blob&&Blob.prototype.isPrototypeOf(y)?this._bodyBlob=y:c.formData&&FormData.prototype.isPrototypeOf(y)?this._bodyFormData=y:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)?this._bodyText=y.toString():c.arrayBuffer&&c.blob&&l(y)?(this._bodyArrayBuffer=P(y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(y)||d(y))?this._bodyArrayBuffer=P(y):this._bodyText=y=Object.prototype.toString.call(y):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof y=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var y=p(this);if(y)return y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var y=p(this);return y||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var y=p(this);if(y)return y;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(y){var v=y.toUpperCase();return I.indexOf(v)>-1?v:y}function $(y,v){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');v=v||{};var A=v.body;if(y instanceof $){if(y.bodyUsed)throw new TypeError("Already read");this.url=y.url,this.credentials=y.credentials,v.headers||(this.headers=new w(y.headers)),this.method=y.method,this.mode=y.mode,this.signal=y.signal,!A&&y._bodyInit!=null&&(A=y._bodyInit,y.bodyUsed=!0)}else this.url=String(y);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new w(v.headers)),this.method=N(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal||function(){if("AbortController"in a){var k=new AbortController;return k.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&A)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(A),(this.method==="GET"||this.method==="HEAD")&&(v.cache==="no-store"||v.cache==="no-cache")){var O=/([?&])_=[^&]*/;if(O.test(this.url))this.url=this.url.replace(O,"$1_="+new Date().getTime());else{var _=/\?/;this.url+=(_.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function D(y){var v=new FormData;return y.trim().split("&").forEach(function(A){if(A){var O=A.split("="),_=O.shift().replace(/\+/g," "),k=O.join("=").replace(/\+/g," ");v.append(decodeURIComponent(_),decodeURIComponent(k))}}),v}function T(y){var v=new w,A=y.replace(/\r?\n[\t ]+/g," ");return A.split("\r").map(function(O){return O.indexOf(`
`)===0?O.substr(1,O.length):O}).forEach(function(O){var _=O.split(":"),k=_.shift().trim();if(k){var L=_.join(":").trim();try{v.append(k,L)}catch(F){console.warn("Response "+F.message)}}}),v}S.call($.prototype);function R(y,v){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=v.statusText===void 0?"":""+v.statusText,this.headers=new w(v.headers),this.url=v.url||"",this._initBody(y)}S.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},R.error=function(){var y=new R(null,{status:200,statusText:""});return y.ok=!1,y.status=0,y.type="error",y};var M=[301,302,303,307,308];R.redirect=function(y,v){if(M.indexOf(v)===-1)throw new RangeError("Invalid status code");return new R(null,{status:v,headers:{location:y}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(v,A){this.message=v,this.name=A;var O=Error(v);this.stack=O.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function x(y,v){return new Promise(function(A,O){var _=new $(y,v);if(_.signal&&_.signal.aborted)return O(new o.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function L(){k.abort()}k.onload=function(){var q={statusText:k.statusText,headers:T(k.getAllResponseHeaders()||"")};_.url.indexOf("file://")===0&&(k.status<200||k.status>599)?q.status=200:q.status=k.status,q.url="responseURL"in k?k.responseURL:q.headers.get("X-Request-URL");var W="response"in k?k.response:k.responseText;setTimeout(function(){A(new R(W,q))},0)},k.onerror=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},k.ontimeout=function(){setTimeout(function(){O(new TypeError("Network request timed out"))},0)},k.onabort=function(){setTimeout(function(){O(new o.DOMException("Aborted","AbortError"))},0)};function F(q){try{return q===""&&a.location.href?a.location.href:q}catch{return q}}if(k.open(_.method,F(_.url),!0),_.credentials==="include"?k.withCredentials=!0:_.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&(c.blob?k.responseType="blob":c.arrayBuffer&&(k.responseType="arraybuffer")),v&&typeof v.headers=="object"&&!(v.headers instanceof w||a.Headers&&v.headers instanceof a.Headers)){var H=[];Object.getOwnPropertyNames(v.headers).forEach(function(q){H.push(h(q)),k.setRequestHeader(q,f(v.headers[q]))}),_.headers.forEach(function(q,W){H.indexOf(W)===-1&&k.setRequestHeader(W,q)})}else _.headers.forEach(function(q,W){k.setRequestHeader(W,q)});_.signal&&(_.signal.addEventListener("abort",L),k.onreadystatechange=function(){k.readyState===4&&_.signal.removeEventListener("abort",L)}),k.send(typeof _._bodyInit>"u"?null:_._bodyInit)})}return x.polyfill=!0,a.fetch||(a.fetch=x,a.Headers=w,a.Request=$,a.Response=R),o.Headers=w,o.Request=$,o.Response=R,o.fetch=x,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(Mw,Mw.exports);var a8=V_(Mw.exports),Sq=Object.defineProperty,Aq=Object.defineProperties,Pq=Object.getOwnPropertyDescriptors,c8=Object.getOwnPropertySymbols,Oq=Object.prototype.hasOwnProperty,Nq=Object.prototype.propertyIsEnumerable,l8=(t,e,r)=>e in t?Sq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,u8=(t,e)=>{for(var r in e||(e={}))Oq.call(e,r)&&l8(t,r,e[r]);if(c8)for(var r of c8(e))Nq.call(e,r)&&l8(t,r,e[r]);return t},d8=(t,e)=>Aq(t,Pq(e));const Tq={Accept:"application/json","Content-Type":"application/json"},kq="POST",h8={headers:Tq,method:kq},p8=10;class Ct{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new nt.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!a6(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=wi(e),n=await(await a8(this.url,d8(u8({},h8),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!a6(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=wi({id:1,jsonrpc:"2.0",method:"test",params:[]});await a8(e,d8(u8({},h8),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Wi(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=bc(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return t6(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>p8&&this.events.setMaxListeners(p8)}}var Rq=Object.defineProperty,f8=Object.getOwnPropertySymbols,Dq=Object.prototype.hasOwnProperty,Bq=Object.prototype.propertyIsEnumerable,g8=(t,e,r)=>e in t?Rq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,w8=(t,e)=>{for(var r in e||(e={}))Dq.call(e,r)&&g8(t,r,e[r]);if(f8)for(var r of f8(e))Bq.call(e,r)&&g8(t,r,e[r]);return t};const m8="error",Uq="wss://relay.walletconnect.org",Lq="wc",Fq="universal_provider",Gp=`${Lq}@2:${Fq}:`,b8="https://rpc.walletconnect.org/v1/",Cc="generic",Mq=`${b8}bundler`,Tn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function jq(){}function jw(t){return t==null||typeof t!="object"&&typeof t!="function"}function zw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zq(t){if(jw(t))return t;if(Array.isArray(t)||zw(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function y8(t){return typeof t=="object"&&t!==null}function v8(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function E8(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const qq="[object RegExp]",C8="[object String]",x8="[object Number]",$8="[object Boolean]",_8="[object Arguments]",Hq="[object Symbol]",Wq="[object Date]",Vq="[object Map]",Kq="[object Set]",Gq="[object Array]",Zq="[object ArrayBuffer]",Yq="[object Object]",Jq="[object DataView]",Xq="[object Uint8Array]",Qq="[object Uint8ClampedArray]",eH="[object Uint16Array]",tH="[object Uint32Array]",rH="[object Int8Array]",nH="[object Int16Array]",iH="[object Int32Array]",sH="[object Float32Array]",oH="[object Float64Array]";function aH(t,e){return xc(t,void 0,t,new Map,e)}function xc(t,e,r,n=new Map,i=void 0){const s=i?.(t,e,r,n);if(s!=null)return s;if(jw(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=xc(t[a],a,r,n,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,xc(c,a,r,n,i));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(xc(a,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(zw(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=xc(t[a],a,r,n,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),Vo(o,t,r,n,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),Vo(o,t,r,n,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),Vo(o,t,r,n,i),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Vo(o,t,r,n,i),o}if(typeof t=="object"&&cH(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),Vo(o,t,r,n,i),o}return t}function Vo(t,e,r=t,n,i){const s=[...Object.keys(e),...v8(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=xc(e[a],a,r,n,i))}}function cH(t){switch(E8(t)){case _8:case Gq:case Zq:case Jq:case $8:case Wq:case sH:case oH:case rH:case nH:case iH:case Vq:case x8:case Yq:case qq:case Kq:case C8:case Hq:case Xq:case Qq:case eH:case tH:return!0;default:return!1}}function lH(t,e){return aH(t,(r,n,i,s)=>{const o=e?.(r,n,i,s);if(o!=null)return o;if(typeof t=="object")switch(Object.prototype.toString.call(t)){case x8:case C8:case $8:{const a=new t.constructor(t?.valueOf());return Vo(a,t),a}case _8:{const a={};return Vo(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function I8(t){return lH(t)}function S8(t){return t!==null&&typeof t=="object"&&E8(t)==="[object Arguments]"}function uH(t){return zw(t)}function dH(t){var e;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((e=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&e.writable)?!1:t.toString()===`[object ${n}]`}let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}function hH(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let i=t;for(let s=0;s<r.length;s++){const o=r[s];i=qw(i,o,n,new Map)}return i}function qw(t,e,r,n){var i;if(jw(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return zq(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let o=0;o<e.length;o++)e[o]=(i=e[o])!=null?i:void 0}const s=[...Object.keys(e),...v8(e)];for(let o=0;o<s.length;o++){const a=s[o];let c=e[a],l=t[a];if(S8(c)&&(c=w8({},c)),S8(l)&&(l=w8({},l)),typeof Buffer<"u"&&Buffer.isBuffer(c)&&(c=I8(c)),Array.isArray(c))if(typeof l=="object"&&l!=null){const d=[],h=Reflect.ownKeys(l);for(let f=0;f<h.length;f++){const g=h[f];d[g]=l[g]}l=d}else l=[];const u=r(l,c,a,t,e,n);u!=null?t[a]=u:Array.isArray(c)||y8(l)&&y8(c)?t[a]=qw(l,c,r,n):l==null&&dH(c)?t[a]=qw({},c,r,n):l==null&&uH(c)?t[a]=I8(c):(l===void 0||c!==void 0)&&(t[a]=c)}return t}function pH(t,...e){return hH(t,...e,jq)}var fH=Object.defineProperty,gH=Object.defineProperties,wH=Object.getOwnPropertyDescriptors,A8=Object.getOwnPropertySymbols,mH=Object.prototype.hasOwnProperty,bH=Object.prototype.propertyIsEnumerable,P8=(t,e,r)=>e in t?fH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zp=(t,e)=>{for(var r in e||(e={}))mH.call(e,r)&&P8(t,r,e[r]);if(A8)for(var r of A8(e))bH.call(e,r)&&P8(t,r,e[r]);return t},yH=(t,e)=>gH(t,wH(e));function pn(t,e,r){var n;const i=rc(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${b8}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function Ko(t){return t.includes(":")?t.split(":")[1]:t}function O8(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function vH(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function Hw(t={},e={}){const r=N8(t),n=N8(e);return pH(r,n)}function N8(t){var e,r,n,i;const s={};if(!Su(t))return s;for(const[o,a]of Object.entries(t)){const c=iw(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],d=a.rpcMap||{},h=Iu(o);s[h]=yH(Zp(Zp({},s[h]),a),{chains:bp(c,(e=s[h])==null?void 0:e.chains),methods:bp(l,(r=s[h])==null?void 0:r.methods),events:bp(u,(n=s[h])==null?void 0:n.events),rpcMap:Zp(Zp({},d),(i=s[h])==null?void 0:i.rpcMap)})}return s}function T8(t){return t.includes(":")?t.split(":")[2]:t}function k8(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=iw(r)?[r]:n.chains?n.chains:O8(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function Ww(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const R8={},Le=t=>R8[t],Vw=(t,e)=>{R8[t]=e};var EH=Object.defineProperty,CH=(t,e,r)=>e in t?EH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$c=(t,e,r)=>CH(t,typeof e!="symbol"?e+"":e,r);class xH{constructor(e){$c(this,"name","polkadot"),$c(this,"client"),$c(this,"httpProviders"),$c(this,"events"),$c(this,"namespace"),$c(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ko(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||pn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,Le("disableProviderPing")))}}var $H=Object.defineProperty,_H=Object.defineProperties,IH=Object.getOwnPropertyDescriptors,D8=Object.getOwnPropertySymbols,SH=Object.prototype.hasOwnProperty,AH=Object.prototype.propertyIsEnumerable,Kw=(t,e,r)=>e in t?$H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,B8=(t,e)=>{for(var r in e||(e={}))SH.call(e,r)&&Kw(t,r,e[r]);if(D8)for(var r of D8(e))AH.call(e,r)&&Kw(t,r,e[r]);return t},U8=(t,e)=>_H(t,IH(e)),_c=(t,e,r)=>Kw(t,typeof e!="symbol"?e+"":e,r);class PH{constructor(e){_c(this,"name","eip155"),_c(this,"client"),_c(this,"chainId"),_c(this,"namespace"),_c(this,"httpProviders"),_c(this,"events"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||pn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,Le("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(Ko(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((i=o?.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a?.[s];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:U8(B8({},o.sessionProperties||{}),{capabilities:U8(B8({},a||{}),{[s]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nr("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${Mq}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var OH=Object.defineProperty,NH=(t,e,r)=>e in t?OH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ic=(t,e,r)=>NH(t,typeof e!="symbol"?e+"":e,r);class TH{constructor(e){Ic(this,"name","solana"),Ic(this,"client"),Ic(this,"httpProviders"),Ic(this,"events"),Ic(this,"namespace"),Ic(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ko(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||pn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,Le("disableProviderPing")))}}var kH=Object.defineProperty,RH=(t,e,r)=>e in t?kH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sc=(t,e,r)=>RH(t,typeof e!="symbol"?e+"":e,r);class DH{constructor(e){Sc(this,"name","cosmos"),Sc(this,"client"),Sc(this,"httpProviders"),Sc(this,"events"),Sc(this,"namespace"),Sc(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ko(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||pn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,Le("disableProviderPing")))}}var BH=Object.defineProperty,UH=(t,e,r)=>e in t?BH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ac=(t,e,r)=>UH(t,typeof e!="symbol"?e+"":e,r);class LH{constructor(e){Ac(this,"name","algorand"),Ac(this,"client"),Ac(this,"httpProviders"),Ac(this,"events"),Ac(this,"namespace"),Ac(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||pn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||pn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new bt(new Ct(n,Le("disableProviderPing")))}}var FH=Object.defineProperty,MH=(t,e,r)=>e in t?FH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pc=(t,e,r)=>MH(t,typeof e!="symbol"?e+"":e,r);class jH{constructor(e){Pc(this,"name","cip34"),Pc(this,"client"),Pc(this,"httpProviders"),Pc(this,"events"),Pc(this,"namespace"),Pc(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=Ko(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,Le("disableProviderPing")))}}var zH=Object.defineProperty,qH=(t,e,r)=>e in t?zH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Oc=(t,e,r)=>qH(t,typeof e!="symbol"?e+"":e,r);class HH{constructor(e){Oc(this,"name","elrond"),Oc(this,"client"),Oc(this,"httpProviders"),Oc(this,"events"),Oc(this,"namespace"),Oc(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ko(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||pn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,Le("disableProviderPing")))}}var WH=Object.defineProperty,VH=(t,e,r)=>e in t?WH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nc=(t,e,r)=>VH(t,typeof e!="symbol"?e+"":e,r);class KH{constructor(e){Nc(this,"name","multiversx"),Nc(this,"client"),Nc(this,"httpProviders"),Nc(this,"events"),Nc(this,"namespace"),Nc(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ko(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||pn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,Le("disableProviderPing")))}}var GH=Object.defineProperty,ZH=(t,e,r)=>e in t?GH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tc=(t,e,r)=>ZH(t,typeof e!="symbol"?e+"":e,r);class YH{constructor(e){Tc(this,"name","near"),Tc(this,"client"),Tc(this,"httpProviders"),Tc(this,"events"),Tc(this,"namespace"),Tc(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||pn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||pn(e,this.namespace);return typeof n>"u"?void 0:new bt(new Ct(n,Le("disableProviderPing")))}}var JH=Object.defineProperty,XH=(t,e,r)=>e in t?JH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kc=(t,e,r)=>XH(t,typeof e!="symbol"?e+"":e,r);class QH{constructor(e){kc(this,"name","tezos"),kc(this,"client"),kc(this,"httpProviders"),kc(this,"events"),kc(this,"namespace"),kc(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||pn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||pn(e,this.namespace);return typeof n>"u"?void 0:new bt(new Ct(n))}}var eW=Object.defineProperty,tW=(t,e,r)=>e in t?eW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rc=(t,e,r)=>tW(t,typeof e!="symbol"?e+"":e,r);class rW{constructor(e){Rc(this,"name",Cc),Rc(this,"client"),Rc(this,"httpProviders"),Rc(this,"events"),Rc(this,"namespace"),Rc(this,"chainId"),this.namespace=e.namespace,this.events=Le("events"),this.client=Le("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Tn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=rc(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||pn(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,Le("disableProviderPing")))}}var nW=Object.defineProperty,iW=Object.defineProperties,sW=Object.getOwnPropertyDescriptors,L8=Object.getOwnPropertySymbols,oW=Object.prototype.hasOwnProperty,aW=Object.prototype.propertyIsEnumerable,Gw=(t,e,r)=>e in t?nW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yp=(t,e)=>{for(var r in e||(e={}))oW.call(e,r)&&Gw(t,r,e[r]);if(L8)for(var r of L8(e))aW.call(e,r)&&Gw(t,r,e[r]);return t},Zw=(t,e)=>iW(t,sW(e)),kn=(t,e,r)=>Gw(t,typeof e!="symbol"?e+"":e,r);class Yw{constructor(e){kn(this,"client"),kn(this,"namespaces"),kn(this,"optionalNamespaces"),kn(this,"sessionProperties"),kn(this,"scopedProperties"),kn(this,"events",new nt.exports),kn(this,"rpcProviders",{}),kn(this,"session"),kn(this,"providerOpts"),kn(this,"logger"),kn(this,"uri"),kn(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:ln(es({level:e?.logger||m8})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new Yw(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Yp({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,Zs(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ze("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=k8(this.session.namespaces);this.namespaces=Hw(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=k8(i.namespaces);return this.namespaces=Hw(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===Cc?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Jn(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await Fw.init({core:this.providerOpts.core,logger:this.providerOpts.logger||m8,relayUrl:this.providerOpts.relayUrl||Uq,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Iu(r)))];Vw("client",this.client),Vw("events",this.events),Vw("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=vH(r,this.session),i=O8(n),s=Hw(this.namespaces,this.optionalNamespaces),o=Zw(Yp({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new PH({namespace:o});break;case"algorand":this.rpcProviders[r]=new LH({namespace:o});break;case"solana":this.rpcProviders[r]=new TH({namespace:o});break;case"cosmos":this.rpcProviders[r]=new DH({namespace:o});break;case"polkadot":this.rpcProviders[r]=new xH({namespace:o});break;case"cip34":this.rpcProviders[r]=new jH({namespace:o});break;case"elrond":this.rpcProviders[r]=new HH({namespace:o});break;case"multiversx":this.rpcProviders[r]=new KH({namespace:o});break;case"near":this.rpcProviders[r]=new YH({namespace:o});break;case"tezos":this.rpcProviders[r]=new QH({namespace:o});break;default:this.rpcProviders[Cc]?this.rpcProviders[Cc].updateNamespace(o):this.rpcProviders[Cc]=new rW({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:i}=e;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&Jn(o)&&this.events.emit("accountsChanged",o.map(T8))}else if(s.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=Iu(o),l=Ww(o)!==Ww(a)?`${c}:${Ww(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(e);this.session=Zw(Yp({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Zw(Yp({},Ze("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Tn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Cc]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[r,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Iu(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=Iu(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(n,i),this.events.emit("chainChanged",i);const s=this.getProvider(n).getDefaultChain();r||this.getProvider(n).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:s,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var i,s;try{if(r===n)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(T8);if(!Jn(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,i={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Gp}/${e}${i}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Gp}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Gp}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Gp)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}}const cW=Yw,lW="wc",uW="ethereum_provider",dW=`${lW}@2:${uW}:`,hW="https://rpc.walletconnect.org/v1/",Jp=["eth_sendTransaction","personal_sign"],F8=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],Xp=["chainChanged","accountsChanged"],M8=["chainChanged","accountsChanged","message","disconnect","connect"];var pW=Object.defineProperty,fW=Object.defineProperties,gW=Object.getOwnPropertyDescriptors,j8=Object.getOwnPropertySymbols,wW=Object.prototype.hasOwnProperty,mW=Object.prototype.propertyIsEnumerable,Jw=(t,e,r)=>e in t?pW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Go=(t,e)=>{for(var r in e||(e={}))wW.call(e,r)&&Jw(t,r,e[r]);if(j8)for(var r of j8(e))mW.call(e,r)&&Jw(t,r,e[r]);return t},qu=(t,e)=>fW(t,gW(e)),fn=(t,e,r)=>Jw(t,typeof e!="symbol"?e+"":e,r);function Qp(t){return Number(t[0].split(":")[1])}function ef(t){return`0x${t.toString(16)}`}function bW(t){const{chains:e,optionalChains:r,methods:n,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=t;if(!Jn(e))throw new Error("Invalid chains");const c={chains:e,methods:n||Jp,events:s||Xp,rpcMap:Go({},e.length?{[Qp(e)]:a[Qp(e)]}:{})},l=s?.filter(f=>!Xp.includes(f)),u=n?.filter(f=>!Jp.includes(f));if(!r&&!o&&!i&&!(l!=null&&l.length)&&!(u!=null&&u.length))return{required:e.length?c:void 0};const d=l?.length&&u?.length||!r,h={chains:[...new Set(d?c.chains.concat(r||[]):r)],methods:[...new Set(c.methods.concat(i!=null&&i.length?i:F8))],events:[...new Set(c.events.concat(o!=null&&o.length?o:M8))],rpcMap:a};return{required:e.length?c:void 0,optional:r.length?h:void 0}}class tf{constructor(){fn(this,"events",new nt.exports.EventEmitter),fn(this,"namespace","eip155"),fn(this,"accounts",[]),fn(this,"signer"),fn(this,"chainId",1),fn(this,"modal"),fn(this,"rpc"),fn(this,"STORAGE_KEY",dW),fn(this,"on",(e,r)=>(this.events.on(e,r),this)),fn(this,"once",(e,r)=>(this.events.once(e,r),this)),fn(this,"removeListener",(e,r)=>(this.events.removeListener(e,r),this)),fn(this,"off",(e,r)=>(this.events.off(e,r),this)),fn(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const r=new tf;return await r.initialize(e),r}async request(e,r){return await this.signer.request(e,this.formatChainId(this.chainId),r)}sendAsync(e,r,n){this.signer.sendAsync(e,r,this.formatChainId(this.chainId),n)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:n,optional:i}=bW(this.rpc);try{const s=await new Promise(async(a,c)=>{var l,u;this.rpc.showQrModal&&((l=this.modal)==null||l.open(),(u=this.modal)==null||u.subscribeState(h=>{!h.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))}));const d=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(qu(Go({namespaces:Go({},n&&{[this.namespace]:n})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic,scopedProperties:d})).then(h=>{a(h)}).catch(h=>{var f;(f=this.modal)==null||f.showErrorMessage("Unable to connect"),c(new Error(h.message))})});if(!s)return;const o=a5(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:ef(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{(r=this.modal)==null||r.close()}}async authenticate(e,r){var n;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const i=await new Promise(async(o,a)=>{var c,l;this.rpc.showQrModal&&((c=this.modal)==null||c.open(),(l=this.modal)==null||l.subscribeState(u=>{!u.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(qu(Go({},e),{chains:this.rpc.chains}),r).then(u=>{o(u)}).catch(u=>{var d;(d=this.modal)==null||d.showErrorMessage("Unable to connect"),a(new Error(u.message))})}),s=i.session;if(s){const o=a5(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:ef(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{(n=this.modal)==null||n.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:n}=r;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",ef(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",qu(Go({},Ze("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",ef(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,n,i]=e.split(":");return{chainId:`${r}:${n}`,address:i}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,n;const i=(r=e?.chains)!=null?r:[],s=(n=e?.optionalChains)!=null?n:[],o=i.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const a=i.length?e?.methods||Jp:[],c=i.length?e?.events||Xp:[],l=e?.optionalMethods||[],u=e?.optionalEvents||[],d=e?.rpcMap||this.buildRpcMap(o,e.projectId),h=e?.qrModalOptions||void 0;return{chains:i?.map(f=>this.formatChainId(f)),optionalChains:s.map(f=>this.formatChainId(f)),methods:a,events:c,optionalMethods:l,optionalEvents:u,rpcMap:d,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const n={};return e.forEach(i=>{n[i]=this.getRpcUrl(i,r)}),n}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Qp(this.rpc.chains):Qp(this.rpc.optionalChains),this.signer=await cW.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{createAppKit:n}=await Promise.resolve().then(function(){return Qce}),{convertWCMToAppKitOptions:i}=await Promise.resolve().then(function(){return ule}),s=i(qu(Go({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!s.networks.length)throw new Error("No networks found for WalletConnect\xB7");r=n(qu(Go({},s),{universalProvider:this.signer,manualWCControl:!0}))}catch{throw new Error("To use QR modal, please install @reown/appkit package")}if(r)try{this.modal=r}catch(n){throw this.signer.logger.error(n),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:n,rpcMap:i}=e;r&&Jn(r)&&(this.rpc.chains=r.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=i?.[s]||this.getRpcUrl(s)})),n&&Jn(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n?.map(s=>this.formatChainId(s)),n.forEach(s=>{this.rpc.rpcMap[s]=i?.[s]||this.getRpcUrl(s)}))}getRpcUrl(e,r){var n;return((n=this.rpc.rpcMap)==null?void 0:n[e])||`${hW}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r?.accounts),this.setAccounts(r?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(r=>this.signer.logger.warn(r))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const yW=tf;var z8={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(zt,function(){var r=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",c="hour",l="day",u="week",d="month",h="quarter",f="year",g="date",w="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(x){var y=["th","st","nd","rd"],v=x%100;return"["+x+(y[(v-20)%10]||y[v]||y[0])+"]"}},E=function(x,y,v){var A=String(x);return!A||A.length>=y?x:""+Array(y+1-A.length).join(v)+x},C={s:E,z:function(x){var y=-x.utcOffset(),v=Math.abs(y),A=Math.floor(v/60),O=v%60;return(y<=0?"+":"-")+E(A,2,"0")+":"+E(O,2,"0")},m:function x(y,v){if(y.date()<v.date())return-x(v,y);var A=12*(v.year()-y.year())+(v.month()-y.month()),O=y.clone().add(A,d),_=v-O<0,k=y.clone().add(A+(_?-1:1),d);return+(-(A+(v-O)/(_?O-k:k-O))||0)},a:function(x){return x<0?Math.ceil(x)||0:Math.floor(x)},p:function(x){return{M:d,y:f,w:u,d:l,D:g,h:c,m:a,s:o,ms:s,Q:h}[x]||String(x||"").toLowerCase().replace(/s$/,"")},u:function(x){return x===void 0}},P="en",S={};S[P]=m;var I="$isDayjsObject",N=function(x){return x instanceof R||!(!x||!x[I])},$=function x(y,v,A){var O;if(!y)return P;if(typeof y=="string"){var _=y.toLowerCase();S[_]&&(O=_),v&&(S[_]=v,O=_);var k=y.split("-");if(!O&&k.length>1)return x(k[0])}else{var L=y.name;S[L]=y,O=L}return!A&&O&&(P=O),O||!A&&P},D=function(x,y){if(N(x))return x.clone();var v=typeof y=="object"?y:{};return v.date=x,v.args=arguments,new R(v)},T=C;T.l=$,T.i=N,T.w=function(x,y){return D(x,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var R=function(){function x(v){this.$L=$(v.locale,null,!0),this.parse(v),this.$x=this.$x||v.x||{},this[I]=!0}var y=x.prototype;return y.parse=function(v){this.$d=function(A){var O=A.date,_=A.utc;if(O===null)return new Date(NaN);if(T.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var k=O.match(p);if(k){var L=k[2]-1||0,F=(k[7]||"0").substring(0,3);return _?new Date(Date.UTC(k[1],L,k[3]||1,k[4]||0,k[5]||0,k[6]||0,F)):new Date(k[1],L,k[3]||1,k[4]||0,k[5]||0,k[6]||0,F)}}return new Date(O)}(v),this.init()},y.init=function(){var v=this.$d;this.$y=v.getFullYear(),this.$M=v.getMonth(),this.$D=v.getDate(),this.$W=v.getDay(),this.$H=v.getHours(),this.$m=v.getMinutes(),this.$s=v.getSeconds(),this.$ms=v.getMilliseconds()},y.$utils=function(){return T},y.isValid=function(){return this.$d.toString()!==w},y.isSame=function(v,A){var O=D(v);return this.startOf(A)<=O&&O<=this.endOf(A)},y.isAfter=function(v,A){return D(v)<this.startOf(A)},y.isBefore=function(v,A){return this.endOf(A)<D(v)},y.$g=function(v,A,O){return T.u(v)?this[A]:this.set(O,v)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(v,A){var O=this,_=!!T.u(A)||A,k=T.p(v),L=function(te,Ee){var Ce=T.w(O.$u?Date.UTC(O.$y,Ee,te):new Date(O.$y,Ee,te),O);return _?Ce:Ce.endOf(l)},F=function(te,Ee){return T.w(O.toDate()[te].apply(O.toDate("s"),(_?[0,0,0,0]:[23,59,59,999]).slice(Ee)),O)},H=this.$W,q=this.$M,W=this.$D,Y="set"+(this.$u?"UTC":"");switch(k){case f:return _?L(1,0):L(31,11);case d:return _?L(1,q):L(0,q+1);case u:var ae=this.$locale().weekStart||0,re=(H<ae?H+7:H)-ae;return L(_?W-re:W+(6-re),q);case l:case g:return F(Y+"Hours",0);case c:return F(Y+"Minutes",1);case a:return F(Y+"Seconds",2);case o:return F(Y+"Milliseconds",3);default:return this.clone()}},y.endOf=function(v){return this.startOf(v,!1)},y.$set=function(v,A){var O,_=T.p(v),k="set"+(this.$u?"UTC":""),L=(O={},O[l]=k+"Date",O[g]=k+"Date",O[d]=k+"Month",O[f]=k+"FullYear",O[c]=k+"Hours",O[a]=k+"Minutes",O[o]=k+"Seconds",O[s]=k+"Milliseconds",O)[_],F=_===l?this.$D+(A-this.$W):A;if(_===d||_===f){var H=this.clone().set(g,1);H.$d[L](F),H.init(),this.$d=H.set(g,Math.min(this.$D,H.daysInMonth())).$d}else L&&this.$d[L](F);return this.init(),this},y.set=function(v,A){return this.clone().$set(v,A)},y.get=function(v){return this[T.p(v)]()},y.add=function(v,A){var O,_=this;v=Number(v);var k=T.p(A),L=function(q){var W=D(_);return T.w(W.date(W.date()+Math.round(q*v)),_)};if(k===d)return this.set(d,this.$M+v);if(k===f)return this.set(f,this.$y+v);if(k===l)return L(1);if(k===u)return L(7);var F=(O={},O[a]=n,O[c]=i,O[o]=r,O)[k]||1,H=this.$d.getTime()+v*F;return T.w(H,this)},y.subtract=function(v,A){return this.add(-1*v,A)},y.format=function(v){var A=this,O=this.$locale();if(!this.isValid())return O.invalidDate||w;var _=v||"YYYY-MM-DDTHH:mm:ssZ",k=T.z(this),L=this.$H,F=this.$m,H=this.$M,q=O.weekdays,W=O.months,Y=O.meridiem,ae=function(Ee,Ce,xe,_e){return Ee&&(Ee[Ce]||Ee(A,_))||xe[Ce].slice(0,_e)},re=function(Ee){return T.s(L%12||12,Ee,"0")},te=Y||function(Ee,Ce,xe){var _e=Ee<12?"AM":"PM";return xe?_e.toLowerCase():_e};return _.replace(b,function(Ee,Ce){return Ce||function(xe){switch(xe){case"YY":return String(A.$y).slice(-2);case"YYYY":return T.s(A.$y,4,"0");case"M":return H+1;case"MM":return T.s(H+1,2,"0");case"MMM":return ae(O.monthsShort,H,W,3);case"MMMM":return ae(W,H);case"D":return A.$D;case"DD":return T.s(A.$D,2,"0");case"d":return String(A.$W);case"dd":return ae(O.weekdaysMin,A.$W,q,2);case"ddd":return ae(O.weekdaysShort,A.$W,q,3);case"dddd":return q[A.$W];case"H":return String(L);case"HH":return T.s(L,2,"0");case"h":return re(1);case"hh":return re(2);case"a":return te(L,F,!0);case"A":return te(L,F,!1);case"m":return String(F);case"mm":return T.s(F,2,"0");case"s":return String(A.$s);case"ss":return T.s(A.$s,2,"0");case"SSS":return T.s(A.$ms,3,"0");case"Z":return k}return null}(Ee)||k.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(v,A,O){var _,k=this,L=T.p(A),F=D(v),H=(F.utcOffset()-this.utcOffset())*n,q=this-F,W=function(){return T.m(k,F)};switch(L){case f:_=W()/12;break;case d:_=W();break;case h:_=W()/3;break;case u:_=(q-H)/6048e5;break;case l:_=(q-H)/864e5;break;case c:_=q/i;break;case a:_=q/n;break;case o:_=q/r;break;default:_=q}return O?_:T.a(_)},y.daysInMonth=function(){return this.endOf(d).$D},y.$locale=function(){return S[this.$L]},y.locale=function(v,A){if(!v)return this.$L;var O=this.clone(),_=$(v,A,!0);return _&&(O.$L=_),O},y.clone=function(){return T.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},x}(),M=R.prototype;return D.prototype=M,[["$ms",s],["$s",o],["$m",a],["$H",c],["$W",l],["$M",d],["$y",f],["$D",g]].forEach(function(x){M[x[1]]=function(y){return this.$g(y,x[0],x[1])}}),D.extend=function(x,y){return x.$i||(x(y,R,D),x.$i=!0),D},D.locale=$,D.isDayjs=N,D.unix=function(x){return D(1e3*x)},D.en=S[P],D.Ls=S,D.p={},D})})(z8);var Xw=z8.exports,q8={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(zt,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(r){var n=["th","st","nd","rd"],i=r%100;return"["+r+(n[(i-20)%10]||n[i]||n[0])+"]"}}})})(q8);var vW=q8.exports,H8={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(zt,function(){return function(r,n,i){r=r||{};var s=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(l,u,d,h){return s.fromToBase(l,u,d,h)}i.en.relativeTime=o,s.fromToBase=function(l,u,d,h,f){for(var g,w,p,b=d.$locale().relativeTime||o,m=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],E=m.length,C=0;C<E;C+=1){var P=m[C];P.d&&(g=h?i(l).diff(d,P.d,!0):d.diff(l,P.d,!0));var S=(r.rounding||Math.round)(Math.abs(g));if(p=g>0,S<=P.r||!P.r){S<=1&&C>0&&(P=m[C-1]);var I=b[P.l];f&&(S=f(""+S)),w=typeof I=="string"?I.replace("%d",S):I(S,u,P.l,p);break}}if(u)return w;var N=p?b.future:b.past;return typeof N=="function"?N(w):N.replace("%s",w)},s.to=function(l,u){return a(l,u,this,!0)},s.from=function(l,u){return a(l,u,this)};var c=function(l){return l.$u?i.utc():i()};s.toNow=function(l){return this.to(c(this),l)},s.fromNow=function(l){return this.from(c(this),l)}}})})(H8);var EW=H8.exports,W8={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(zt,function(){return function(r,n,i){i.updateLocale=function(s,o){var a=i.Ls[s];if(a)return(o?Object.keys(o):[]).forEach(function(c){a[c]=o[c]}),a}}})})(W8);var CW=W8.exports;Xw.extend(EW),Xw.extend(CW);const xW={...vW,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}};Xw.locale("en-web3-modal",xW);const V8={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(r=>r.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]}};var $W=20,_W=1,Zo=1e6,K8=1e6,IW=-7,SW=21,AW=!1,Hu="[big.js] ",Yo=Hu+"Invalid ",rf=Yo+"decimal places",PW=Yo+"rounding mode",G8=Hu+"Division by zero",Ye={},Ii=void 0,OW=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Z8(){function t(e){var r=this;if(!(r instanceof t))return e===Ii?Z8():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Yo+"value");e=e===0&&1/e<0?"-0":String(e)}NW(r,e)}r.constructor=t}return t.prototype=Ye,t.DP=$W,t.RM=_W,t.NE=IW,t.PE=SW,t.strict=AW,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function NW(t,e){var r,n,i;if(!OW.test(e))throw Error(Yo+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),i=e.length,n=0;n<i&&e.charAt(n)=="0";)++n;if(n==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=i;)t.c[r++]=+e.charAt(n++)}return t}function Jo(t,e,r,n){var i=t.c;if(r===Ii&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(PW);if(e<1)n=r===3&&(n||!!i[0])||e===0&&(r===1&&i[0]>=5||r===2&&(i[0]>5||i[0]===5&&(n||i[1]!==Ii))),i.length=1,n?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(n=r===1&&i[e]>=5||r===2&&(i[e]>5||i[e]===5&&(n||i[e+1]!==Ii||i[e-1]&1))||r===3&&(n||!!i[0]),i.length=e,n){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function Xo(t,e,r){var n=t.e,i=t.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&r?"-"+i:i}Ye.abs=function(){var t=new this.constructor(this);return t.s=1,t},Ye.cmp=function(t){var e,r=this,n=r.c,i=(t=new r.constructor(t)).c,s=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=i.length)?a:c,s=-1;++s<o;)if(n[s]!=i[s])return n[s]>i[s]^e?1:-1;return a==c?0:a>c^e?1:-1},Ye.div=function(t){var e=this,r=e.constructor,n=e.c,i=(t=new r(t)).c,s=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>Zo)throw Error(rf);if(!i[0])throw Error(G8);if(!n[0])return t.s=s,t.c=[t.e=0],t;var a,c,l,u,d,h=i.slice(),f=a=i.length,g=n.length,w=n.slice(0,a),p=w.length,b=t,m=b.c=[],E=0,C=o+(b.e=e.e-t.e)+1;for(b.s=s,s=C<0?0:C,h.unshift(0);p++<a;)w.push(0);do{for(l=0;l<10;l++){if(a!=(p=w.length))u=a>p?1:-1;else for(d=-1,u=0;++d<a;)if(i[d]!=w[d]){u=i[d]>w[d]?1:-1;break}if(u<0){for(c=p==a?i:h;p;){if(w[--p]<c[p]){for(d=p;d&&!w[--d];)w[d]=9;--w[d],w[p]+=10}w[p]-=c[p]}for(;!w[0];)w.shift()}else break}m[E++]=u?l:++l,w[0]&&u?w[p]=n[f]||0:w=[n[f]]}while((f++<g||w[0]!==Ii)&&s--);return!m[0]&&E!=1&&(m.shift(),b.e--,C--),E>C&&Jo(b,C,r.RM,w[0]!==Ii),b},Ye.eq=function(t){return this.cmp(t)===0},Ye.gt=function(t){return this.cmp(t)>0},Ye.gte=function(t){return this.cmp(t)>-1},Ye.lt=function(t){return this.cmp(t)<0},Ye.lte=function(t){return this.cmp(t)<1},Ye.minus=Ye.sub=function(t){var e,r,n,i,s=this,o=s.constructor,a=s.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,s.plus(t);var l=s.c.slice(),u=s.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(s):t.s=1,t;if(a=u-h){for((i=a<0)?(a=-a,n=l):(h=u,n=d),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((i=l.length<d.length)?l:d).length,a=c=0;c<r;c++)if(l[c]!=d[c]){i=l[c]<d[c];break}if(i&&(n=l,l=d,d=n,t.s=-t.s),(c=(r=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;r>a;){if(l[--r]<d[r]){for(e=r;e&&!l[--e];)l[e]=9;--l[e],l[r]+=10}l[r]-=d[r]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t},Ye.mod=function(t){var e,r=this,n=r.constructor,i=r.s,s=(t=new n(t)).s;if(!t.c[0])throw Error(G8);return r.s=t.s=1,e=t.cmp(r)==1,r.s=i,t.s=s,e?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=i,n.RM=s,this.minus(r.times(t)))},Ye.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},Ye.plus=Ye.add=function(t){var e,r,n,i=this,s=i.constructor;if(t=new s(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var o=i.e,a=i.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new s(i):t.s=i.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=l):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-l.length<0&&(n=l,l=a,a=n),e=l.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+l[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t},Ye.pow=function(t){var e=this,r=new e.constructor("1"),n=r,i=t<0;if(t!==~~t||t<-K8||t>K8)throw Error(Yo+"exponent");for(i&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return i?r.div(n):n},Ye.prec=function(t,e){if(t!==~~t||t<1||t>Zo)throw Error(Yo+"precision");return Jo(new this.constructor(this),t,e)},Ye.round=function(t,e){if(t===Ii)t=0;else if(t!==~~t||t<-Zo||t>Zo)throw Error(rf);return Jo(new this.constructor(this),t+this.e+1,e)},Ye.sqrt=function(){var t,e,r,n=this,i=n.constructor,s=n.s,o=n.e,a=new i("0.5");if(!n.c[0])return new i(n);if(s<0)throw Error(Hu+"No square root");s=Math.sqrt(+Xo(n,!0,!0)),s===0||s===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):t=new i(s+""),o=t.e+(i.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Jo(t,(i.DP-=4)+t.e+1,i.RM)},Ye.times=Ye.mul=function(t){var e,r=this,n=r.constructor,i=r.c,s=(t=new n(t)).c,o=i.length,a=s.length,c=r.e,l=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!s[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=i,i=s,s=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+s[c]*i[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},Ye.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Ii){if(t!==~~t||t<0||t>Zo)throw Error(rf);for(r=Jo(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return Xo(r,!0,!!n)},Ye.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Ii){if(t!==~~t||t<0||t>Zo)throw Error(rf);for(r=Jo(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return Xo(r,!1,!!n)},Ye[Symbol.for("nodejs.util.inspect.custom")]=Ye.toJSON=Ye.toString=function(){var t=this,e=t.constructor;return Xo(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},Ye.toNumber=function(){var t=+Xo(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Hu+"Imprecise conversion");return t},Ye.toPrecision=function(t,e){var r=this,n=r.constructor,i=r.c[0];if(t!==Ii){if(t!==~~t||t<1||t>Zo)throw Error(Yo+"precision");for(r=Jo(new n(r),t,e);r.c.length<t;)r.c.push(0)}return Xo(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!i)},Ye.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Hu+"valueOf disallowed");return Xo(t,t.e<=e.NE||t.e>=e.PE,!0)};var Wu=Z8();const nf={bigNumber(t){return t?new Wu(t):new Wu(0)},multiply(t,e){if(t===void 0||e===void 0)return new Wu(0);const r=new Wu(t),n=new Wu(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},TW=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],kW=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],RW=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],de={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},DW={getERC20Abi:t=>de.USDT_CONTRACT_ADDRESSES.includes(t)?RW:TW,getSwapAbi:()=>kW},Ys={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,i]=e;if(!r||!n||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},Se={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types"};function Qw(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const $e={setItem(t,e){Vu()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Vu())return localStorage.getItem(t)||void 0},removeItem(t){Vu()&&localStorage.removeItem(t)},clear(){Vu()&&localStorage.clear()}};function Vu(){return typeof window<"u"&&typeof localStorage<"u"}function Js(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const BW=Symbol(),Y8=Object.getPrototypeOf,em=new WeakMap,UW=t=>t&&(em.has(t)?em.get(t):Y8(t)===Object.prototype||Y8(t)===Array.prototype),LW=t=>UW(t)&&t[BW]||null,J8=(t,e=!0)=>{em.set(t,e)},tm=t=>typeof t=="object"&&t!==null,Xs=new WeakMap,Ku=new WeakSet,FW=(t=Object.is,e=(l,u)=>new Proxy(l,u),r=l=>tm(l)&&!Ku.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),n=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},i=new WeakMap,s=(l,u,d=n)=>{const h=i.get(l);if(h?.[0]===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return J8(f,!0),i.set(l,[u,f]),Reflect.ownKeys(l).forEach(g=>{if(Object.getOwnPropertyDescriptor(f,g))return;const w=Reflect.get(l,g),{enumerable:p}=Reflect.getOwnPropertyDescriptor(l,g),b={value:w,enumerable:p,configurable:!0};if(Ku.has(w))J8(w,!1);else if(w instanceof Promise)delete b.value,b.get=()=>d(w);else if(Xs.has(w)){const[m,E]=Xs.get(w);b.value=s(m,E(),d)}Object.defineProperty(f,g,b)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!tm(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=($,D=++a[0])=>{d!==D&&(d=D,h.forEach(T=>T($,D)))};let g=a[1];const w=($=++a[1])=>(g!==$&&!h.size&&(g=$,b.forEach(([D])=>{const T=D[1]($);T>d&&(d=T)})),d),p=$=>(D,T)=>{const R=[...D];R[1]=[$,...R[1]],f(R,T)},b=new Map,m=($,D)=>{if(b.has($))throw new Error("prop listener already exists");if(h.size){const T=D[3](p($));b.set($,[D,T])}else b.set($,[D])},E=$=>{var D;const T=b.get($);T&&(b.delete($),(D=T[1])==null||D.call(T))},C=$=>(h.add($),h.size===1&&b.forEach(([T,R],M)=>{if(R)throw new Error("remove already exists");const x=T[3](p(M));b.set(M,[T,x])}),()=>{h.delete($),h.size===0&&b.forEach(([T,R],M)=>{R&&(R(),b.set(M,[T]))})}),P=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),I=e(P,{deleteProperty($,D){const T=Reflect.get($,D);E(D);const R=Reflect.deleteProperty($,D);return R&&f(["delete",[D],T]),R},set($,D,T,R){const M=Reflect.has($,D),x=Reflect.get($,D,R);if(M&&(t(x,T)||o.has(T)&&t(x,o.get(T))))return!0;E(D),tm(T)&&(T=LW(T)||T);let y=T;if(T instanceof Promise)T.then(v=>{T.status="fulfilled",T.value=v,f(["resolve",[D],v])}).catch(v=>{T.status="rejected",T.reason=v,f(["reject",[D],v])});else{!Xs.has(T)&&r(T)&&(y=c(T));const v=!Ku.has(y)&&Xs.get(y);v&&m(D,v)}return Reflect.set($,D,y,R),f(["set",[D],T,x]),!0}});o.set(l,I);const N=[P,w,s,C];return Xs.set(I,N),Reflect.ownKeys(l).forEach($=>{const D=Object.getOwnPropertyDescriptor(l,$);"value"in D&&(I[$]=l[$],delete D.value,delete D.writable),Object.defineProperty(P,$,D)}),I})=>[c,Xs,Ku,t,e,r,n,i,s,o,a],[MW]=FW();function at(t={}){return MW(t)}function Ir(t,e,r){const n=Xs.get(t);n||console.warn("Please use proxy object");let i;const s=[],o=n[3];let a=!1;const l=o(u=>{if(s.push(u),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Gu(t,e){const r=Xs.get(t);r||console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),e)}function Qo(t){return Ku.add(t),t}function Rr(t,e,r,n){let i=t[e];return Ir(t,()=>{const s=t[e];Object.is(i,s)||r(i=s)},n)}function jW(t){const e=at({data:Array.from(t||[]),has(r){return this.data.some(n=>n[0]===r)},set(r,n){const i=this.data.find(s=>s[0]===r);return i?i[1]=n:this.data.push([r,n]),this},get(r){var n;return(n=this.data.find(i=>i[0]===r))==null?void 0:n[1]},delete(r){const n=this.data.findIndex(i=>i[0]===r);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(r){this.data.forEach(n=>{r(n[1],n[0],this)})},keys(){return this.data.map(r=>r[0]).values()},values(){return this.data.map(r=>r[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}const rm=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",zW=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Bt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:rm,SECURE_SITE_DASHBOARD:`${rm}/dashboard`,SECURE_SITE_FAVICON:`${rm}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},he={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=he.getActiveNamespace(),e=he.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{$e.setItem(Se.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=$e.getItem(Se.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{$e.removeItem(Se.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{$e.setItem(Se.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{$e.setItem(Se.ACTIVE_CAIP_NETWORK_ID,t),he.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return $e.getItem(Se.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{$e.removeItem(Se.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Qw(t);$e.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=he.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),$e.setItem(Se.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=$e.getItem(Se.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=Qw(t);$e.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return $e.getItem(Se.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Qw(t);return $e.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{$e.setItem(Se.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return $e.getItem(Se.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{$e.removeItem(Se.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return $e.getItem(Se.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return $e.getItem(Se.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{$e.setItem(Se.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return $e.getItem(Se.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=$e.getItem(Se.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));$e.setItem(Se.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=he.getConnectedNamespaces();e.includes(t)||(e.push(t),he.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=he.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),he.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return $e.getItem(Se.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{$e.setItem(Se.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{$e.removeItem(Se.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=$e.getItem(Se.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=he.getBalanceCache();$e.setItem(Se.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=he.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;he.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=he.getBalanceCache();e[t.caipAddress]=t,$e.setItem(Se.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=$e.getItem(Se.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=he.getBalanceCache();$e.setItem(Se.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=he.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),he.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=he.getNativeBalanceCache();e[t.caipAddress]=t,$e.setItem(Se.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=$e.getItem(Se.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=he.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;he.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=he.getEnsCache();e[t.address]=t,$e.setItem(Se.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=he.getEnsCache();$e.setItem(Se.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=$e.getItem(Se.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=he.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;he.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=he.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},$e.setItem(Se.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=he.getIdentityCache();$e.setItem(Se.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{$e.removeItem(Se.PORTFOLIO_CACHE),$e.removeItem(Se.NATIVE_BALANCE_CACHE),$e.removeItem(Se.ENS_CACHE),$e.removeItem(Se.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{$e.setItem(Se.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=$e.getItem(Se.PREFERRED_ACCOUNT_TYPES);return JSON.parse(t)}catch{console.info("Unable to get preferred account types")}}},X={isMobile(){return this.isClient()?!!(window?.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return X.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Bt.TEN_SEC_MS:!0},isAllowedRetry(t,e=Bt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},getPairingExpiry(){return Date.now()+Bt.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e){if(X.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},formatUniversalUrl(t,e){if(!X.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?he.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,X.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const i=Math.floor(n*1e3)/1e3;i&&(r=i.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){let r;if(t==="0")r="0";else if(typeof t=="string"){const n=Number(t);n&&(r=n.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return de.W3M_API_URL},getBlockchainApiUrl(){return de.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return de.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,i)=>{r[n]=i}),e.sort((n,i)=>{const s=r[n.id],o=r[i.id];return s!==void 0&&o!==void 0?s-o:s!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const i=n[e];return r.has(i)?!1:(r.add(i),!0)})},generateSdkVersion(t,e,r){const i=t.length===0?Bt.ADAPTER_TYPES.UNIVERSAL:t.map(s=>s.adapterType).join(",");return`${e}-${i}-${r}`},createAccount(t,e,r,n,i){return{namespace:t,address:e,type:r,publicKey:n,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in de.CHAIN_NAME_MAP},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",s=t.substring(t.indexOf(i)+i.length),o=this.injectIntoUrl(decodeURIComponent(s),r,e);return t.replace(s,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",n),s=e.length,o=i!==-1?i:t.length,a=t.substring(0,n+s),c=t.substring(n+s,o),l=t.substring(i),u=c+r;return a+u+l}};async function Zu(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class sf{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...i}){const s=this.createUrl(i);return(await Zu(s,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const i=this.createUrl(n);return(await Zu(i,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await Zu(s,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await Zu(s,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await Zu(s,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,s)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const qW={handleSolanaDeeplinkRedirect(t){if(B.state.activeChain===de.CHAIN.SOLANA){const e=window.location.href,r=encodeURIComponent(e);if(t==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",i=e.split("/")[2],s=encodeURIComponent(`${n}://${i}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${s}`}t==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}},gn=at({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Kr={state:gn,subscribeNetworkImages(t){return Ir(gn.networkImages,()=>t(gn.networkImages))},subscribeKey(t,e){return Rr(gn,t,e)},subscribe(t){return Ir(gn,()=>t(gn))},setWalletImage(t,e){gn.walletImages[t]=e},setNetworkImage(t,e){gn.networkImages[t]=e},setChainImage(t,e){gn.chainImages[t]=e},setConnectorImage(t,e){gn.connectorImages={...gn.connectorImages,[t]:e}},setTokenImage(t,e){gn.tokenImages[t]=e},setCurrencyImage(t,e){gn.currencyImages[t]=e}},HW={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},nm=at({networkImagePromises:{}}),Ut={async fetchWalletImage(t){if(t)return await se._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(nm.networkImagePromises[t]||(nm.networkImagePromises[t]=se._fetchNetworkImage(t)),await nm.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Kr.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return Kr.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return Kr.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Kr.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.imageId)return Kr.state.connectorImages[t.imageId]},getChainImage(t){return Kr.state.networkImages[HW[t]]}},WW={getFeatureValue(t,e){const r=e?.[t];return r===void 0?Bt.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(X.isTelegram()){if(X.isIos())return t.filter(e=>e!=="google");if(X.isMac())return t.filter(e=>e!=="x");if(X.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},be=at({features:Bt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:{solana:"eoa",bip122:"payment",polkadot:"eoa",eip155:"smartAccount"},enableNetworkSwitch:!0}),G={state:be,subscribeKey(t,e){return Rr(be,t,e)},setOptions(t){Object.assign(be,t)},setFeatures(t){if(!t)return;be.features||(be.features=Bt.DEFAULT_FEATURES);const e={...be.features,...t};be.features=e,be.features.socials&&(be.features.socials=WW.filterSocialsByPlatform(be.features.socials))},setProjectId(t){be.projectId=t},setCustomRpcUrls(t){be.customRpcUrls=t},setAllWallets(t){be.allWallets=t},setIncludeWalletIds(t){be.includeWalletIds=t},setExcludeWalletIds(t){be.excludeWalletIds=t},setFeaturedWalletIds(t){be.featuredWalletIds=t},setTokens(t){be.tokens=t},setTermsConditionsUrl(t){be.termsConditionsUrl=t},setPrivacyPolicyUrl(t){be.privacyPolicyUrl=t},setCustomWallets(t){be.customWallets=t},setIsSiweEnabled(t){be.isSiweEnabled=t},setIsUniversalProvider(t){be.isUniversalProvider=t},setSdkVersion(t){be.sdkVersion=t},setMetadata(t){be.metadata=t},setDisableAppend(t){be.disableAppend=t},setEIP6963Enabled(t){be.enableEIP6963=t},setDebug(t){be.debug=t},setEnableWalletConnect(t){be.enableWalletConnect=t},setEnableWalletGuide(t){be.enableWalletGuide=t},setEnableAuthLogger(t){be.enableAuthLogger=t},setEnableWallets(t){be.enableWallets=t},setHasMultipleAddresses(t){be.hasMultipleAddresses=t},setSIWX(t){be.siwx=t},setConnectMethodsOrder(t){be.features={...be.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){be.features={...be.features,walletFeaturesOrder:t}},setSocialsOrder(t){be.features={...be.features,socials:t}},setCollapseWallets(t){be.features={...be.features,collapseWallets:t}},setEnableEmbedded(t){be.enableEmbedded=t},setAllowUnsupportedChain(t){be.allowUnsupportedChain=t},setManualWCControl(t){be.manualWCControl=t},setEnableNetworkSwitch(t){be.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(be.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){be.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return be.universalProviderConfigOverride},getSnapshot(){return Gu(be)}},Qs=at({message:"",variant:"info",open:!1}),eo={state:Qs,subscribeKey(t,e){return Rr(Qs,t,e)},open(t,e){const{debug:r}=G.state,{shortMessage:n,longMessage:i}=t;r&&(Qs.message=n,Qs.variant=e,Qs.open=!0),i&&console.error(typeof i=="function"?i():i)},close(){Qs.open=!1,Qs.message="",Qs.variant="info"}},VW=X.getAnalyticsUrl(),KW=new sf({baseUrl:VW,clientId:null}),GW=["MODAL_CREATED"],is=at({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Ae={state:is,subscribe(t){return Ir(is,()=>t(is))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=G.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=ge.state.address;if(GW.includes(t.data.event)||typeof window>"u")return;await KW.post({path:"/e",params:Ae.getSdkProperties(),body:{eventId:X.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),is.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===de.HTTP_STATUS_CODES.FORBIDDEN&&!is.reportedErrors.FORBIDDEN&&(eo.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Vu()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),is.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){is.timestamp=Date.now(),is.data=t,G.state.features?.analytics&&Ae._sendAnalyticsEvent(is)}},ZW=["1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79","fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa","a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"],YW=X.getApiUrl(),Rn=new sf({baseUrl:YW,clientId:null}),JW=40,X8=4,XW=20,Je=at({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),se={state:Je,subscribeKey(t,e){return Rr(Je,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=G.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return G.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Rn.baseUrl}/getWalletImage/${t}`,r=await Rn.getBlob({path:e,params:se._getSdkProperties()});Kr.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Rn.baseUrl}/public/getAssetImage/${t}`,r=await Rn.getBlob({path:e,params:se._getSdkProperties()});Kr.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Rn.baseUrl}/public/getAssetImage/${t}`,r=await Rn.getBlob({path:e,params:se._getSdkProperties()});Kr.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Rn.baseUrl}/public/getCurrencyImage/${t}`,r=await Rn.getBlob({path:e,params:se._getSdkProperties()});Kr.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Rn.baseUrl}/public/getTokenImage/${t}`,r=await Rn.getBlob({path:e,params:se._getSdkProperties()});Kr.setTokenImage(t,URL.createObjectURL(r))},async fetchNetworkImages(){const e=B.getAllRequestedCaipNetworks()?.map(({assets:r})=>r?.imageId).filter(Boolean).filter(r=>!Ut.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>se._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=oe.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>se._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>se._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>se._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];return se._getSdkProperties().sv.startsWith("html-core-")&&e.push(...ZW),await Rn.get({path:"/getWallets",params:{...se._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:t.exclude?.join(",")}})},async fetchFeaturedWallets(){const{featuredWalletIds:t}=G.state;if(t?.length){const e={...se._getSdkProperties(),page:1,entries:t?.length??X8,include:t},{data:r}=await se.fetchWallets(e);r.sort((i,s)=>t.indexOf(i.id)-t.indexOf(s.id));const n=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(n.map(i=>se._fetchWalletImage(i))),Je.featured=r,Je.allFeatured=r}},async fetchRecommendedWallets(){try{Je.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=G.state,n=[...e??[],...r??[]].filter(Boolean),i=B.getRequestedCaipNetworkIds().join(","),s={page:1,entries:X8,include:t,exclude:n,chains:i},{data:o,count:a}=await se.fetchWallets(s),c=he.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>se._fetchWalletImage(d))),Je.recommended=o,Je.allRecommended=o,Je.count=a??0}catch{}finally{Je.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=G.state,i=B.getRequestedCaipNetworkIds().join(","),s=[...Je.recommended.map(({id:u})=>u),...r??[],...n??[]].filter(Boolean),o={page:t,entries:JW,include:e,exclude:s,chains:i},{data:a,count:c}=await se.fetchWallets(o),l=a.slice(0,XW).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>se._fetchWalletImage(u))),Je.wallets=X.uniqueBy([...Je.wallets,...se._filterOutExtensions(a)],"id"),Je.count=c>Je.count?c:Je.count,Je.page=t},async initializeExcludedWallets({ids:t}){const e=B.getRequestedCaipNetworkIds().join(","),r={page:1,entries:t.length,include:t,chains:e},{data:n}=await se.fetchWallets(r);n&&n.forEach(i=>{Je.excludedWallets.push({rdns:i.rdns,name:i.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=G.state,i=B.getRequestedCaipNetworkIds().join(",");Je.search=[];const s={page:1,entries:100,search:t?.trim(),badge_type:e,include:r,exclude:n,chains:i},{data:o}=await se.fetchWallets(s);Ae.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>se._fetchWalletImage(c)),X.wait(300)]),Je.search=se._filterOutExtensions(o)},initPromise(t,e){const r=Je.promises[t];return r||(Je.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const i=[t&&se.initPromise("connectorImages",se.fetchConnectorImages),e&&se.initPromise("featuredWallets",se.fetchFeaturedWallets),r&&se.initPromise("recommendedWallets",se.fetchRecommendedWallets),n&&se.initPromise("networkImages",se.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){G.state.features?.analytics&&se.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Rn.get({path:"/getAnalyticsConfig",params:se._getSdkProperties()});G.setFeatures({analytics:t})}catch{G.setFeatures({analytics:!1})}},setFilterByNamespace(t){if(!t){Je.featured=Je.allFeatured,Je.recommended=Je.allRecommended;return}const e=B.getRequestedCaipNetworkIds().join(",");Je.featured=Je.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Je.recommended=Je.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n)))}},Ve=at({view:"Connect",history:["Connect"],transactionStack:[]}),ne={state:Ve,subscribeKey(t,e){return Rr(Ve,t,e)},pushTransactionStack(t){Ve.transactionStack.push(t)},popTransactionStack(t){const e=Ve.transactionStack.pop();if(e)if(t)this.goBack(),e?.onCancel?.();else{if(e.goBack)this.goBack();else if(e.replace){const n=Ve.history.indexOf("ConnectingSiwe");n>0?this.goBackToIndex(n-1):(De.close(),Ve.history=[])}else e.view&&this.reset(e.view);e?.onSuccess?.()}},push(t,e){t!==Ve.view&&(Ve.view=t,Ve.history.push(t),Ve.data=e)},reset(t,e){Ve.view=t,Ve.history=[t],Ve.data=e},replace(t,e){Ve.history.at(-1)===t||(Ve.view=t,Ve.history[Ve.history.length-1]=t,Ve.data=e)},goBack(){const t=!B.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(Ve.history.length>1&&!Ve.history.includes("UnsupportedChain")){Ve.history.pop();const[e]=Ve.history.slice(-1);e&&(Ve.view=e)}else De.close();Ve.data?.wallet&&(Ve.data.wallet=void 0),setTimeout(()=>{if(t){ge.setFarcasterUrl(void 0,B.state.activeChain);const e=oe.getAuthConnector();e?.provider?.reload();const r=Gu(G.state);e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType})}},100)},goBackToIndex(t){if(Ve.history.length>1){Ve.history=Ve.history.slice(0,t+1);const[e]=Ve.history.slice(-1);e&&(Ve.view=e)}}},ss=at({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Lt={state:ss,subscribe(t){return Ir(ss,()=>t(ss))},setThemeMode(t){ss.themeMode=t;try{const e=oe.getAuthConnector();if(e){const r=Lt.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:Js(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){ss.themeVariables={...ss.themeVariables,...t};try{const e=oe.getAuthConnector();if(e){const r=Lt.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:Js(ss.themeVariables,ss.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Gu(ss)}},Q8={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Xe=at({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Q8}}),oe={state:Xe,subscribe(t){return Ir(Xe,()=>{t(Xe)})},subscribeKey(t,e){return Rr(Xe,t,e)},initialize(t){t.forEach(e=>{const r=he.getConnectedConnectorId(e);r&&this.setConnectorId(r,e)})},setActiveConnector(t){t&&(Xe.activeConnector=Qo(t))},setConnectors(t){t.filter(r=>!Xe.allConnectors.some(n=>n.id===r.id&&this.getConnectorName(n.name)===this.getConnectorName(r.name)&&n.chain===r.chain)).forEach(r=>{r.type!=="MULTI_CHAIN"&&Xe.allConnectors.push(Qo(r))}),Xe.connectors=this.mergeMultiChainConnectors(Xe.allConnectors)},removeAdapter(t){Xe.allConnectors=Xe.allConnectors.filter(e=>e.chain!==t),Xe.connectors=this.mergeMultiChainConnectors(Xe.allConnectors)},mergeMultiChainConnectors(t){const e=this.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const i=n[0],s=i?.id===de.CONNECTOR_ID.AUTH;n.length>1&&i?r.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...n],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:i?.id||""}):i&&r.push(i)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,i=this.getConnectorName(n);if(!i)return;const s=e.get(i)||[];s.find(a=>a.chain===r.chain)||s.push(r),e.set(i,s)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){if(t.id===de.CONNECTOR_ID.AUTH){const e=t,r=Gu(G.state),n=Lt.getSnapshot().themeMode,i=Lt.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e?.provider?.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:Js(i,n)}),this.setConnectors([t])}else this.setConnectors([t])},getAuthConnector(t){const e=t||B.state.activeChain,r=Xe.connectors.find(n=>n.id===de.CONNECTOR_ID.AUTH);if(r)return r?.connectors?.length?r.connectors.find(i=>i.chain===e):r},getAnnouncedConnectorRdns(){return Xe.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return Xe.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Xe.allConnectors.filter(n=>n.chain===B.state.activeChain).find(n=>n.explorerId===t||n.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,r=Gu(G.state),n=Lt.getSnapshot().themeMode,i=Lt.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:Js(i,n)})},getConnectorsByNamespace(t){const e=Xe.allConnectors.filter(r=>r.chain===t);return this.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=oe.getConnector(t.id,t.rdns);B.state.activeChain===de.CHAIN.SOLANA&&qW.handleSolanaDeeplinkRedirect(e?.name||t.name||""),e?ne.push("ConnectingExternal",{connector:e}):ne.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?this.getConnectorsByNamespace(t):this.mergeMultiChainConnectors(Xe.allConnectors)},setFilterByNamespace(t){Xe.filterByNamespace=t,Xe.connectors=this.getConnectors(t),se.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Xe.activeConnectorIds={...Xe.activeConnectorIds,[e]:t},he.setConnectedConnectorId(e,t))},removeConnectorId(t){Xe.activeConnectorIds={...Xe.activeConnectorIds,[t]:void 0},he.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Xe.activeConnectorIds[t]},isConnected(t){return t?!!Xe.activeConnectorIds[t]:Object.values(Xe.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Xe.activeConnectorIds={...Q8}}};function of(t,e){return oe.getConnectorId(t)===e}function QW(t){const e=Array.from(B.state.chains.keys());let r=[];return t?(r.push([t,B.state.chains.get(t)]),of(t,de.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==t&&of(n,de.CONNECTOR_ID.WALLET_CONNECT)&&r.push([n,B.state.chains.get(n)])}):of(t,de.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==t&&of(n,de.CONNECTOR_ID.AUTH)&&r.push([n,B.state.chains.get(n)])})):r=Array.from(B.state.chains.entries()),r}class eV extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}new eV(128);const tV="0.1.1";function rV(){return tV}class Dr extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof Dr){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause?.message?r.cause.message:r.details})(),i=r.cause instanceof Dr&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${rV()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return eE(this,e)}}function eE(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?eE(t.cause,e):e?null:t}function nV(t,e){if(nE(t)>e)throw new dV({givenSize:nE(t),maxSize:e})}const os={zero:48,nine:57,A:65,F:70,a:97,f:102};function tE(t){if(t>=os.zero&&t<=os.nine)return t-os.zero;if(t>=os.A&&t<=os.F)return t-(os.A-10);if(t>=os.a&&t<=os.f)return t-(os.a-10)}function iV(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new hV({size:t.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let s=0;s<n;s++){const o=r==="right";i[o?s:n-s-1]=t[o?s:t.length-s-1]}return i}function im(t,e){if(om(t)>e)throw new yV({givenSize:om(t),maxSize:e})}function rE(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const i=t.replace("0x","");if(i.length>n*2)throw new vV({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const sV=new TextEncoder;function oV(t){return t instanceof Uint8Array?t:typeof t=="string"?cV(t):aV(t)}function aV(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function cV(t,e={}){const{size:r}=e;let n=t;r&&(im(t,r),n=sm(t,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=tE(i.charCodeAt(c++)),u=tE(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new Dr(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function lV(t,e={}){const{size:r}=e,n=sV.encode(t);return typeof r=="number"?(nV(n,r),uV(n,r)):n}function uV(t,e){return iV(t,{dir:"right",size:e})}function nE(t){return t.length}class dV extends Dr{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class hV extends Dr{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const pV=new TextEncoder,fV=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function iE(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function gV(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(im(r,e.size),af(r,e.size)):r}function sE(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=fV[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(im(n,e.size),sm(n,e.size)):n}function wV(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const l=typeof t=="bigint"?"n":"";throw new bV({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:r,size:n,value:`${t}${l}`})}const c=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?af(c,n):c}function mV(t,e={}){return sE(pV.encode(t),e)}function af(t,e){return rE(t,{dir:"left",size:e})}function sm(t,e){return rE(t,{dir:"right",size:e})}function om(t){return Math.ceil((t.length-2)/2)}class bV extends Dr{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class yV extends Dr{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class vV extends Dr{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function EV(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=Po(oV(t));return r==="Bytes"?n:sE(n)}class CV extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const am={checksum:new CV(8192)}.checksum,xV=/^0x[a-fA-F0-9]{40}$/;function oE(t,e={}){const{strict:r=!0}=e;if(!xV.test(t))throw new aE({address:t,cause:new _V});if(r){if(t.toLowerCase()===t)return;if($V(t)!==t)throw new aE({address:t,cause:new IV})}}function $V(t){if(am.has(t))return am.get(t);oE(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=EV(lV(e),{as:"Bytes"}),n=e.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());const i=`0x${n.join("")}`;return am.set(t,i),i}class aE extends Dr{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class _V extends Dr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class IV extends Dr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const SV=/^(.*)\[([0-9]*)\]$/,AV=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,PV=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function cm(t,e){if(t.length!==e.length)throw new NV({expectedLength:t.length,givenLength:e.length});const r=[];for(let n=0;n<t.length;n++){const i=t[n],s=e[n];r.push(cm.encode(i,s))}return iE(...r)}(function(t){function e(r,n,i=!1){if(r==="address"){const c=n;return oE(c),af(c.toLowerCase(),i?32:0)}if(r==="string")return mV(n);if(r==="bytes")return n;if(r==="bool")return af(gV(n),i?32:1);const s=r.match(PV);if(s){const[c,l,u="256"]=s,d=Number.parseInt(u)/8;return wV(n,{size:i?32:d,signed:l==="int"})}const o=r.match(AV);if(o){const[c,l]=o;if(Number.parseInt(l)!==(n.length-2)/2)throw new OV({expectedSize:Number.parseInt(l),value:n});return sm(n,i?32:0)}const a=r.match(SV);if(a&&Array.isArray(n)){const[c,l]=a,u=[];for(let d=0;d<n.length;d++)u.push(e(l,n[d],!0));return u.length===0?"0x":iE(...u)}throw new TV(r)}t.encode=e})(cm||(cm={}));class OV extends Dr{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${om(r)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class NV extends Dr{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class TV extends Dr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function cf(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function kV(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Yu(t,...e){if(!kV(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function RV(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cf(t.outputLen),cf(t.blockLen)}function Dc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function cE(t,e){Yu(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const lf=BigInt(2**32-1),lE=BigInt(32);function DV(t,e=!1){return e?{h:Number(t&lf),l:Number(t>>lE&lf)}:{h:Number(t>>lE&lf)|0,l:Number(t&lf)|0}}function BV(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=DV(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const UV=(t,e,r)=>t<<r|e>>>32-r,LV=(t,e,r)=>e<<r|t>>>32-r,FV=(t,e,r)=>e<<r-32|t>>>64-r,MV=(t,e,r)=>t<<r-32|e>>>64-r,Bc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function jV(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function lm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Si(t,e){return t<<32-e|t>>>e}const uE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function zV(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function dE(t){for(let e=0;e<t.length;e++)t[e]=zV(t[e])}function qV(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function uf(t){return typeof t=="string"&&(t=qV(t)),Yu(t),t}function HV(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Yu(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class um{clone(){return this._cloneInto()}}function hE(t){const e=n=>t().update(uf(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function pE(t=32){if(Bc&&typeof Bc.getRandomValues=="function")return Bc.getRandomValues(new Uint8Array(t));if(Bc&&typeof Bc.randomBytes=="function")return Bc.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const fE=[],gE=[],wE=[],WV=BigInt(0),Ju=BigInt(1),VV=BigInt(2),KV=BigInt(7),GV=BigInt(256),ZV=BigInt(113);for(let t=0,e=Ju,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],fE.push(2*(5*n+r)),gE.push((t+1)*(t+2)/2%64);let i=WV;for(let s=0;s<7;s++)e=(e<<Ju^(e>>KV)*ZV)%GV,e&VV&&(i^=Ju<<(Ju<<BigInt(s))-Ju);wE.push(i)}const[YV,JV]=BV(wE,!0),mE=(t,e,r)=>r>32?FV(t,e,r):UV(t,e,r),bE=(t,e,r)=>r>32?MV(t,e,r):LV(t,e,r);function XV(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],d=mE(l,u,1)^r[a],h=bE(l,u,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=gE[o],c=mE(i,s,a),l=bE(i,s,a),u=fE[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=YV[n],t[1]^=JV[n]}r.fill(0)}class dm extends um{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,cf(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=jV(this.state)}keccak(){uE||dE(this.state32),XV(this.state32,this.rounds),uE||dE(this.state32),this.posOut=0,this.pos=0}update(e){Dc(this);const{blockLen:r,state:n}=this;e=uf(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Dc(this,!1),Yu(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return cf(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(cE(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new dm(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}((t,e,r)=>hE(()=>new dm(e,t,r)))(1,136,256/8);function hm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function yE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function wn(t,...e){if(!yE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function vE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function QV(t,e){wn(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function EE(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const to=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),eK=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function tK(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function pm(t){if(typeof t=="string")t=tK(t);else if(yE(t))t=fm(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function rK(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function nK(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const iK=(t,e)=>{function r(n,...i){if(wn(n),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?wn(l):wn(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&wn(i[1]);const o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");wn(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,wn(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(wn(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function CE(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!sK(e))throw new Error("invalid output, must be aligned");return e}function xE(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function sK(t){return t.byteOffset%4===0}function fm(t){return Uint8Array.from(t)}function Uc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const $E=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),oK=$E("expand 16-byte k"),aK=$E("expand 32-byte k"),cK=to(oK),lK=to(aK);function Fe(t,e){return t<<e|t>>>32-e}function gm(t){return t.byteOffset%4===0}const df=64,uK=16,_E=2**32-1,IE=new Uint32Array;function dK(t,e,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(df),u=to(l),d=gm(i)&&gm(s),h=d?to(i):IE,f=d?to(s):IE;for(let g=0;g<c;o++){if(t(e,r,n,u,o,a),o>=_E)throw new Error("arx: counter overflow");const w=Math.min(df,c-g);if(d&&w===df){const p=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let b=0,m;b<uK;b++)m=p+b,f[m]=h[m]^u[b];g+=df;continue}for(let p=0,b;p<w;p++)b=g+p,s[b]=i[b]^l[p];g+=w}}function hK(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=rK({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return hm(i),hm(o),EE(s),EE(r),(a,c,l,u,d=0)=>{wn(a),wn(c),wn(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),wn(u),hm(d),d<0||d>=_E)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let g=a.length,w,p;if(g===32)f.push(w=fm(a)),p=lK;else if(g===16&&r)w=new Uint8Array(32),w.set(a),w.set(a,16),p=cK,f.push(w);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);gm(c)||f.push(c=fm(c));const b=to(w);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(p,b,to(c.subarray(0,16)),b),c=c.subarray(16)}const m=16-i;if(m!==c.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(m!==12){const C=new Uint8Array(12);C.set(c,s?0:12-c.length),c=C,f.push(c)}const E=to(c);return dK(t,p,b,E,l,u,d,o),Uc(...f),u}}const fr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class pK{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=pm(e),wn(e,32);const r=fr(e,0),n=fr(e,2),i=fr(e,4),s=fr(e,6),o=fr(e,8),a=fr(e,10),c=fr(e,12),l=fr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=fr(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],g=o[7],w=o[8],p=o[9],b=fr(e,r+0),m=fr(e,r+2),E=fr(e,r+4),C=fr(e,r+6),P=fr(e,r+8),S=fr(e,r+10),I=fr(e,r+12),N=fr(e,r+14);let $=s[0]+(b&8191),D=s[1]+((b>>>13|m<<3)&8191),T=s[2]+((m>>>10|E<<6)&8191),R=s[3]+((E>>>7|C<<9)&8191),M=s[4]+((C>>>4|P<<12)&8191),x=s[5]+(P>>>1&8191),y=s[6]+((P>>>14|S<<2)&8191),v=s[7]+((S>>>11|I<<5)&8191),A=s[8]+((I>>>8|N<<8)&8191),O=s[9]+(N>>>5|i),_=0,k=_+$*a+D*(5*p)+T*(5*w)+R*(5*g)+M*(5*f);_=k>>>13,k&=8191,k+=x*(5*h)+y*(5*d)+v*(5*u)+A*(5*l)+O*(5*c),_+=k>>>13,k&=8191;let L=_+$*c+D*a+T*(5*p)+R*(5*w)+M*(5*g);_=L>>>13,L&=8191,L+=x*(5*f)+y*(5*h)+v*(5*d)+A*(5*u)+O*(5*l),_+=L>>>13,L&=8191;let F=_+$*l+D*c+T*a+R*(5*p)+M*(5*w);_=F>>>13,F&=8191,F+=x*(5*g)+y*(5*f)+v*(5*h)+A*(5*d)+O*(5*u),_+=F>>>13,F&=8191;let H=_+$*u+D*l+T*c+R*a+M*(5*p);_=H>>>13,H&=8191,H+=x*(5*w)+y*(5*g)+v*(5*f)+A*(5*h)+O*(5*d),_+=H>>>13,H&=8191;let q=_+$*d+D*u+T*l+R*c+M*a;_=q>>>13,q&=8191,q+=x*(5*p)+y*(5*w)+v*(5*g)+A*(5*f)+O*(5*h),_+=q>>>13,q&=8191;let W=_+$*h+D*d+T*u+R*l+M*c;_=W>>>13,W&=8191,W+=x*a+y*(5*p)+v*(5*w)+A*(5*g)+O*(5*f),_+=W>>>13,W&=8191;let Y=_+$*f+D*h+T*d+R*u+M*l;_=Y>>>13,Y&=8191,Y+=x*c+y*a+v*(5*p)+A*(5*w)+O*(5*g),_+=Y>>>13,Y&=8191;let ae=_+$*g+D*f+T*h+R*d+M*u;_=ae>>>13,ae&=8191,ae+=x*l+y*c+v*a+A*(5*p)+O*(5*w),_+=ae>>>13,ae&=8191;let re=_+$*w+D*g+T*f+R*h+M*d;_=re>>>13,re&=8191,re+=x*u+y*l+v*c+A*a+O*(5*p),_+=re>>>13,re&=8191;let te=_+$*p+D*w+T*g+R*f+M*h;_=te>>>13,te&=8191,te+=x*d+y*u+v*l+A*c+O*a,_+=te>>>13,te&=8191,_=(_<<2)+_|0,_=_+k|0,k=_&8191,_=_>>>13,L+=_,s[0]=k,s[1]=L,s[2]=F,s[3]=H,s[4]=q,s[5]=W,s[6]=Y,s[7]=ae,s[8]=re,s[9]=te}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Uc(n)}update(e){vE(this);const{buffer:r,blockLen:n}=this;e=pm(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Uc(this.h,this.r,this.buffer,this.pad)}digestInto(e){vE(this),QV(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function fK(t){const e=(n,i)=>t(i).update(pm(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const gK=fK(t=>new pK(t));function wK(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],g=e[4],w=e[5],p=e[6],b=e[7],m=i,E=r[0],C=r[1],P=r[2],S=o,I=a,N=c,$=l,D=u,T=d,R=h,M=f,x=g,y=w,v=p,A=b,O=m,_=E,k=C,L=P;for(let H=0;H<s;H+=2)S=S+D|0,O=Fe(O^S,16),x=x+O|0,D=Fe(D^x,12),S=S+D|0,O=Fe(O^S,8),x=x+O|0,D=Fe(D^x,7),I=I+T|0,_=Fe(_^I,16),y=y+_|0,T=Fe(T^y,12),I=I+T|0,_=Fe(_^I,8),y=y+_|0,T=Fe(T^y,7),N=N+R|0,k=Fe(k^N,16),v=v+k|0,R=Fe(R^v,12),N=N+R|0,k=Fe(k^N,8),v=v+k|0,R=Fe(R^v,7),$=$+M|0,L=Fe(L^$,16),A=A+L|0,M=Fe(M^A,12),$=$+M|0,L=Fe(L^$,8),A=A+L|0,M=Fe(M^A,7),S=S+T|0,L=Fe(L^S,16),v=v+L|0,T=Fe(T^v,12),S=S+T|0,L=Fe(L^S,8),v=v+L|0,T=Fe(T^v,7),I=I+R|0,O=Fe(O^I,16),A=A+O|0,R=Fe(R^A,12),I=I+R|0,O=Fe(O^I,8),A=A+O|0,R=Fe(R^A,7),N=N+M|0,_=Fe(_^N,16),x=x+_|0,M=Fe(M^x,12),N=N+M|0,_=Fe(_^N,8),x=x+_|0,M=Fe(M^x,7),$=$+D|0,k=Fe(k^$,16),y=y+k|0,D=Fe(D^y,12),$=$+D|0,k=Fe(k^$,8),y=y+k|0,D=Fe(D^y,7);let F=0;n[F++]=o+S|0,n[F++]=a+I|0,n[F++]=c+N|0,n[F++]=l+$|0,n[F++]=u+D|0,n[F++]=d+T|0,n[F++]=h+R|0,n[F++]=f+M|0,n[F++]=g+x|0,n[F++]=w+y|0,n[F++]=p+v|0,n[F++]=b+A|0,n[F++]=m+O|0,n[F++]=E+_|0,n[F++]=C+k|0,n[F++]=P+L|0}const mK=hK(wK,{counterRight:!1,counterLength:4,allowShortKeys:!1}),bK=new Uint8Array(16),SE=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(bK.subarray(r))},yK=new Uint8Array(32);function AE(t,e,r,n,i){const s=t(e,r,yK),o=gK.create(s);i&&SE(o,i),SE(o,n);const a=new Uint8Array(16),c=eK(a);xE(c,0,BigInt(i?i.length:0),!0),xE(c,8,BigInt(n.length),!0),o.update(a);const l=o.digest();return Uc(s,a),l}iK({blockSize:64,nonceLength:12,tagLength:16},(t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=CE(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=AE(t,e,r,a,n);return s.set(c,o),Uc(c),s},decrypt(i,s){s=CE(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=AE(t,e,r,o,n);if(!nK(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),Uc(c),s}}))(mK));class PE extends um{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,RV(e);const n=uf(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Dc(this),this.iHash.update(e),this}digestInto(e){Dc(this),Yu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const OE=(t,e,r)=>new PE(t,e).update(r).digest();OE.create=(t,e)=>new PE(t,e);function vK(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function EK(t,e,r){return t&e^~t&r}function CK(t,e,r){return t&e^t&r^e&r}class xK extends um{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=lm(this.buffer)}update(e){Dc(this);const{view:r,buffer:n,blockLen:i}=this;e=uf(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=lm(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Dc(this),cE(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let d=o;d<i;d++)r[d]=0;vK(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=lm(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const $K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ro=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),no=new Uint32Array(64);class _K extends xK{constructor(){super(64,32,8,!1),this.A=ro[0]|0,this.B=ro[1]|0,this.C=ro[2]|0,this.D=ro[3]|0,this.E=ro[4]|0,this.F=ro[5]|0,this.G=ro[6]|0,this.H=ro[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)no[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=no[d-15],f=no[d-2],g=Si(h,7)^Si(h,18)^h>>>3,w=Si(f,17)^Si(f,19)^f>>>10;no[d]=w+no[d-7]+g+no[d-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Si(a,6)^Si(a,11)^Si(a,25),f=u+h+EK(a,c,l)+$K[d]+no[d]|0,g=(Si(n,2)^Si(n,13)^Si(n,22))+CK(n,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=n,n=f+g|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){no.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const IK=hE(()=>new _K);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hf=BigInt(0),pf=BigInt(1),SK=BigInt(2);function ea(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xu(t){if(!ea(t))throw new Error("Uint8Array expected")}function Lc(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const AK=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Fc(t){Xu(t);let e="";for(let r=0;r<t.length;r++)e+=AK[t[r]];return e}function Mc(t){const e=t.toString(16);return e.length&1?"0"+e:e}function wm(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?hf:BigInt("0x"+t)}const as={_0:48,_9:57,A:65,F:70,a:97,f:102};function NE(t){if(t>=as._0&&t<=as._9)return t-as._0;if(t>=as.A&&t<=as.F)return t-(as.A-10);if(t>=as.a&&t<=as.f)return t-(as.a-10)}function jc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=NE(t.charCodeAt(s)),a=NE(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function ta(t){return wm(Fc(t))}function Qu(t){return Xu(t),wm(Fc(Uint8Array.from(t).reverse()))}function zc(t,e){return jc(t.toString(16).padStart(e*2,"0"))}function ff(t,e){return zc(t,e).reverse()}function PK(t){return jc(Mc(t))}function mn(t,e,r){let n;if(typeof e=="string")try{n=jc(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(ea(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function ed(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Xu(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function OK(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function NK(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const mm=t=>typeof t=="bigint"&&hf<=t;function gf(t,e,r){return mm(t)&&mm(e)&&mm(r)&&e<=t&&t<r}function cs(t,e,r,n){if(!gf(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function TE(t){let e;for(e=0;t>hf;t>>=pf,e+=1);return e}function TK(t,e){return t>>BigInt(e)&pf}function kK(t,e,r){return t|(r?pf:hf)<<BigInt(e)}const bm=t=>(SK<<BigInt(t-1))-pf,ym=t=>new Uint8Array(t),kE=t=>Uint8Array.from(t);function RE(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=ym(t),i=ym(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...u)=>r(i,n,...u),c=(u=ym())=>{i=a(kE([0]),u),n=a(),u.length!==0&&(i=a(kE([1]),u),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){n=a();const h=n.slice();d.push(h),u+=n.length}return ed(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const RK={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ea(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function qc(t,e,r={}){const n=(i,s,o)=>{const a=RK[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const DK=()=>{throw new Error("not implemented")};function vm(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}var BK=Object.freeze({__proto__:null,isBytes:ea,abytes:Xu,abool:Lc,bytesToHex:Fc,numberToHexUnpadded:Mc,hexToNumber:wm,hexToBytes:jc,bytesToNumberBE:ta,bytesToNumberLE:Qu,numberToBytesBE:zc,numberToBytesLE:ff,numberToVarBytesBE:PK,ensureBytes:mn,concatBytes:ed,equalBytes:OK,utf8ToBytes:NK,inRange:gf,aInRange:cs,bitLen:TE,bitGet:TK,bitSet:kK,bitMask:bm,createHmacDrbg:RE,validateObject:qc,notImplemented:DK,memoized:vm});const Qt=BigInt(0),It=BigInt(1),ra=BigInt(2),UK=BigInt(3),Em=BigInt(4),DE=BigInt(5),BE=BigInt(8);function Gr(t,e){const r=t%e;return r>=Qt?r:e+r}function UE(t,e,r){if(e<Qt)throw new Error("invalid exponent, negatives unsupported");if(r<=Qt)throw new Error("invalid modulus");if(r===It)return Qt;let n=It;for(;e>Qt;)e&It&&(n=n*t%r),t=t*t%r,e>>=It;return n}function ri(t,e,r){let n=t;for(;e-- >Qt;)n*=n,n%=r;return n}function Cm(t,e){if(t===Qt)throw new Error("invert: expected non-zero number");if(e<=Qt)throw new Error("invert: expected positive modulus, got "+e);let r=Gr(t,e),n=e,i=Qt,s=It;for(;r!==Qt;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==It)throw new Error("invert: does not exist");return Gr(i,e)}function LK(t){const e=(t-It)/ra;let r,n,i;for(r=t-It,n=0;r%ra===Qt;r/=ra,n++);for(i=ra;i<t&&UE(i,e,t)!==t-It;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+It)/Em;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+It)/ra;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let g=o.sqr(d);h<c&&!o.eql(g,o.ONE);h++)g=o.sqr(g);const f=o.pow(l,It<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function FK(t){if(t%Em===UK){const e=(t+It)/Em;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%BE===DE){const e=(t-DE)/BE;return function(r,n){const i=r.mul(n,ra),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,ra),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return LK(t)}const MK=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function jK(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=MK.reduce((n,i)=>(n[i]="function",n),e);return qc(t,r)}function zK(t,e,r){if(r<Qt)throw new Error("invalid exponent, negatives unsupported");if(r===Qt)return t.ONE;if(r===It)return e;let n=t.ONE,i=e;for(;r>Qt;)r&It&&(n=t.mul(n,i)),i=t.sqr(i),r>>=It;return n}function qK(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function LE(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function FE(t,e,r=!1,n={}){if(t<=Qt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=LE(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:bm(i),ZERO:Qt,ONE:It,create:c=>Gr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Qt<=c&&c<t},is0:c=>c===Qt,isOdd:c=>(c&It)===It,neg:c=>Gr(-c,t),eql:(c,l)=>c===l,sqr:c=>Gr(c*c,t),add:(c,l)=>Gr(c+l,t),sub:(c,l)=>Gr(c-l,t),mul:(c,l)=>Gr(c*l,t),pow:(c,l)=>zK(a,c,l),div:(c,l)=>Gr(c*Cm(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Cm(c,t),sqrt:n.sqrt||(c=>(o||(o=FK(t)),o(a,c))),invertBatch:c=>qK(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?ff(c,s):zc(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?Qu(c):ta(c)}});return Object.freeze(a)}function ME(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function jE(t){const e=ME(t);return e+Math.ceil(e/2)}function HK(t,e,r=!1){const n=t.length,i=ME(e),s=jE(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Qu(t):ta(t),a=Gr(o,e-It)+It;return r?ff(a,i):zc(a,i)}const zE=BigInt(0),wf=BigInt(1);function xm(t,e){const r=e.negate();return t?r:e}function qE(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function $m(t,e){qE(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function WK(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function VK(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const _m=new WeakMap,HE=new WeakMap;function Im(t){return HE.get(t)||1}function KK(t,e){return{constTimeNegate:xm,hasPrecomputes(r){return Im(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>zE;)n&wf&&(i=i.add(s)),s=s.double(),n>>=wf;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=$m(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=$m(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=wf);const w=f,p=f+Math.abs(g)-1,b=h%2!==0,m=g<0;g===0?c=c.add(xm(b,n[w])):a=a.add(xm(m,n[p]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=$m(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let d=0;d<o;d++){const h=d*a;if(i===zE)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=wf),f===0)continue;let g=n[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(r,n,i){let s=_m.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&_m.set(n,i(s))),s},wNAFCached(r,n,i){const s=Im(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=Im(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){qE(n,e),HE.set(r,n),_m.delete(r)}}}function GK(t,e,r,n){if(WK(r,t),VK(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=TE(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<n.length;f++){const g=n[f],w=Number(g>>BigInt(d)&BigInt(a));c[w]=c[w].add(r[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function WE(t){return jK(t.Fp),qc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...LE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Hc=BigInt(0),Sm=BigInt(1);function ZK(t){return qc(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function YK(t){const e=ZK(t),{P:r}=e,n=m=>Gr(m,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(m=>m),c=e.powPminus2||(m=>UE(m,r-BigInt(2),r));function l(m,E,C){const P=n(m*(E-C));return E=n(E-P),C=n(C+P),[E,C]}const u=(e.a-BigInt(2))/BigInt(4);function d(m,E){cs("u",m,Hc,r),cs("scalar",E,Hc,r);const C=E,P=m;let S=Sm,I=Hc,N=m,$=Sm,D=Hc,T;for(let M=BigInt(i-1);M>=Hc;M--){const x=C>>M&Sm;D^=x,T=l(D,S,N),S=T[0],N=T[1],T=l(D,I,$),I=T[0],$=T[1],D=x;const y=S+I,v=n(y*y),A=S-I,O=n(A*A),_=v-O,k=N+$,L=N-$,F=n(L*y),H=n(k*A),q=F+H,W=F-H;N=n(q*q),$=n(P*n(W*W)),S=n(v*O),I=n(_*(v+n(u*_)))}T=l(D,S,N),S=T[0],N=T[1],T=l(D,I,$),I=T[0],$=T[1];const R=c(I);return n(S*R)}function h(m){return ff(n(m),s)}function f(m){const E=mn("u coordinate",m,s);return o===32&&(E[31]&=127),Qu(E)}function g(m){const E=mn("scalar",m),C=E.length;if(C!==s&&C!==o){let P=""+s+" or "+o;throw new Error("invalid scalar, expected "+P+" bytes, got "+C)}return Qu(a(E))}function w(m,E){const C=f(E),P=g(m),S=d(C,P);if(S===Hc)throw new Error("invalid private or public key received");return h(S)}const p=h(e.Gu);function b(m){return w(m,p)}return{scalarMult:w,scalarMultBase:b,getSharedSecret:(m,E)=>w(m,E),getPublicKey:m=>b(m),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:p}}const Am=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const JK=BigInt(1),VE=BigInt(2),XK=BigInt(3),QK=BigInt(5);BigInt(8);function eG(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Am,o=t*t%s*t%s,a=ri(o,VE,s)*o%s,c=ri(a,JK,s)*t%s,l=ri(c,QK,s)*c%s,u=ri(l,e,s)*l%s,d=ri(u,r,s)*u%s,h=ri(d,n,s)*d%s,f=ri(h,i,s)*h%s,g=ri(f,i,s)*h%s,w=ri(g,e,s)*l%s;return{pow_p_5_8:ri(w,VE,s)*t%s,b2:o}}function tG(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}YK({P:Am,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Am,{pow_p_5_8:r,b2:n}=eG(t);return Gr(ri(r,XK,e)*n,e)},adjustScalarBytes:tG,randomBytes:pE});function KE(t){t.lowS!==void 0&&Lc("lowS",t.lowS),t.prehash!==void 0&&Lc("prehash",t.prehash)}function rG(t){const e=WE(t);qc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:nG,hexToBytes:iG}=BK;class sG extends Error{constructor(e=""){super(e)}}const ls={Err:sG,_tlv:{encode:(t,e)=>{const{Err:r}=ls;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Mc(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Mc(i.length/2|128):"";return Mc(t)+s+i+e},decode(t,e){const{Err:r}=ls;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=ls;if(t<us)throw new e("integer: negative integers are not allowed");let r=Mc(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=ls;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return nG(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=ls,i=typeof t=="string"?iG(t):t;Xu(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=ls,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},us=BigInt(0),er=BigInt(1);BigInt(2);const GE=BigInt(3);BigInt(4);function oG(t){const e=rG(t),{Fp:r}=e,n=FE(e.n,e.nBitLength),i=e.toBytes||((w,p,b)=>{const m=p.toAffine();return ed(Uint8Array.from([4]),r.toBytes(m.x),r.toBytes(m.y))}),s=e.fromBytes||(w=>{const p=w.subarray(1),b=r.fromBytes(p.subarray(0,r.BYTES)),m=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:b,y:m}});function o(w){const{a:p,b}=e,m=r.sqr(w),E=r.mul(m,w);return r.add(r.add(E,r.mul(w,p)),b)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(w){return gf(w,er,e.n)}function c(w){const{allowedPrivateKeyLengths:p,nByteLength:b,wrapPrivateKey:m,n:E}=e;if(p&&typeof w!="bigint"){if(ea(w)&&(w=Fc(w)),typeof w!="string"||!p.includes(w.length))throw new Error("invalid private key");w=w.padStart(b*2,"0")}let C;try{C=typeof w=="bigint"?w:ta(mn("private key",w,b))}catch{throw new Error("invalid private key, expected hex or "+b+" bytes, got "+typeof w)}return m&&(C=Gr(C,E)),cs("private key",C,er,E),C}function l(w){if(!(w instanceof h))throw new Error("ProjectivePoint expected")}const u=vm((w,p)=>{const{px:b,py:m,pz:E}=w;if(r.eql(E,r.ONE))return{x:b,y:m};const C=w.is0();p==null&&(p=C?r.ONE:r.inv(E));const P=r.mul(b,p),S=r.mul(m,p),I=r.mul(E,p);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:P,y:S}}),d=vm(w=>{if(w.is0()){if(e.allowInfinityPoint&&!r.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:p,y:b}=w.toAffine();if(!r.isValid(p)||!r.isValid(b))throw new Error("bad point: x or y not FE");const m=r.sqr(b),E=o(p);if(!r.eql(m,E))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(p,b,m){if(this.px=p,this.py=b,this.pz=m,p==null||!r.isValid(p))throw new Error("x required");if(b==null||!r.isValid(b))throw new Error("y required");if(m==null||!r.isValid(m))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:b,y:m}=p||{};if(!p||!r.isValid(b)||!r.isValid(m))throw new Error("invalid affine point");if(p instanceof h)throw new Error("projective point not allowed");const E=C=>r.eql(C,r.ZERO);return E(b)&&E(m)?h.ZERO:new h(b,m,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const b=r.invertBatch(p.map(m=>m.pz));return p.map((m,E)=>m.toAffine(b[E])).map(h.fromAffine)}static fromHex(p){const b=h.fromAffine(s(mn("pointHex",p)));return b.assertValidity(),b}static fromPrivateKey(p){return h.BASE.multiply(c(p))}static msm(p,b){return GK(h,n,p,b)}_setWindowSize(p){g.setWindowSize(this,p)}assertValidity(){d(this)}hasEvenY(){const{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){l(p);const{px:b,py:m,pz:E}=this,{px:C,py:P,pz:S}=p,I=r.eql(r.mul(b,S),r.mul(C,E)),N=r.eql(r.mul(m,S),r.mul(P,E));return I&&N}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:p,b}=e,m=r.mul(b,GE),{px:E,py:C,pz:P}=this;let S=r.ZERO,I=r.ZERO,N=r.ZERO,$=r.mul(E,E),D=r.mul(C,C),T=r.mul(P,P),R=r.mul(E,C);return R=r.add(R,R),N=r.mul(E,P),N=r.add(N,N),S=r.mul(p,N),I=r.mul(m,T),I=r.add(S,I),S=r.sub(D,I),I=r.add(D,I),I=r.mul(S,I),S=r.mul(R,S),N=r.mul(m,N),T=r.mul(p,T),R=r.sub($,T),R=r.mul(p,R),R=r.add(R,N),N=r.add($,$),$=r.add(N,$),$=r.add($,T),$=r.mul($,R),I=r.add(I,$),T=r.mul(C,P),T=r.add(T,T),$=r.mul(T,R),S=r.sub(S,$),N=r.mul(T,D),N=r.add(N,N),N=r.add(N,N),new h(S,I,N)}add(p){l(p);const{px:b,py:m,pz:E}=this,{px:C,py:P,pz:S}=p;let I=r.ZERO,N=r.ZERO,$=r.ZERO;const D=e.a,T=r.mul(e.b,GE);let R=r.mul(b,C),M=r.mul(m,P),x=r.mul(E,S),y=r.add(b,m),v=r.add(C,P);y=r.mul(y,v),v=r.add(R,M),y=r.sub(y,v),v=r.add(b,E);let A=r.add(C,S);return v=r.mul(v,A),A=r.add(R,x),v=r.sub(v,A),A=r.add(m,E),I=r.add(P,S),A=r.mul(A,I),I=r.add(M,x),A=r.sub(A,I),$=r.mul(D,v),I=r.mul(T,x),$=r.add(I,$),I=r.sub(M,$),$=r.add(M,$),N=r.mul(I,$),M=r.add(R,R),M=r.add(M,R),x=r.mul(D,x),v=r.mul(T,v),M=r.add(M,x),x=r.sub(R,x),x=r.mul(D,x),v=r.add(v,x),R=r.mul(M,v),N=r.add(N,R),R=r.mul(A,v),I=r.mul(y,I),I=r.sub(I,R),R=r.mul(y,M),$=r.mul(A,$),$=r.add($,R),new h(I,N,$)}subtract(p){return this.add(p.negate())}is0(){return this.equals(h.ZERO)}wNAF(p){return g.wNAFCached(this,p,h.normalizeZ)}multiplyUnsafe(p){const{endo:b,n:m}=e;cs("scalar",p,us,m);const E=h.ZERO;if(p===us)return E;if(this.is0()||p===er)return this;if(!b||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,p,h.normalizeZ);let{k1neg:C,k1:P,k2neg:S,k2:I}=b.splitScalar(p),N=E,$=E,D=this;for(;P>us||I>us;)P&er&&(N=N.add(D)),I&er&&($=$.add(D)),D=D.double(),P>>=er,I>>=er;return C&&(N=N.negate()),S&&($=$.negate()),$=new h(r.mul($.px,b.beta),$.py,$.pz),N.add($)}multiply(p){const{endo:b,n:m}=e;cs("scalar",p,er,m);let E,C;if(b){const{k1neg:P,k1:S,k2neg:I,k2:N}=b.splitScalar(p);let{p:$,f:D}=this.wNAF(S),{p:T,f:R}=this.wNAF(N);$=g.constTimeNegate(P,$),T=g.constTimeNegate(I,T),T=new h(r.mul(T.px,b.beta),T.py,T.pz),E=$.add(T),C=D.add(R)}else{const{p:P,f:S}=this.wNAF(p);E=P,C=S}return h.normalizeZ([E,C])[0]}multiplyAndAddUnsafe(p,b,m){const E=h.BASE,C=(S,I)=>I===us||I===er||!S.equals(E)?S.multiplyUnsafe(I):S.multiply(I),P=C(this,b).add(C(p,m));return P.is0()?void 0:P}toAffine(p){return u(this,p)}isTorsionFree(){const{h:p,isTorsionFree:b}=e;if(p===er)return!0;if(b)return b(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:b}=e;return p===er?this:b?b(h,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return Lc("isCompressed",p),this.assertValidity(),i(h,this,p)}toHex(p=!0){return Lc("isCompressed",p),Fc(this.toRawBytes(p))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,g=KK(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function aG(t){const e=WE(t);return qc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function cG(t){const e=aG(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(x){return Gr(x,n)}function a(x){return Cm(x,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=oG({...e,toBytes(x,y,v){const A=y.toAffine(),O=r.toBytes(A.x),_=ed;return Lc("isCompressed",v),v?_(Uint8Array.from([y.hasEvenY()?2:3]),O):_(Uint8Array.from([4]),O,r.toBytes(A.y))},fromBytes(x){const y=x.length,v=x[0],A=x.subarray(1);if(y===i&&(v===2||v===3)){const O=ta(A);if(!gf(O,er,r.ORDER))throw new Error("Point is not on curve");const _=u(O);let k;try{k=r.sqrt(_)}catch(F){const H=F instanceof Error?": "+F.message:"";throw new Error("Point is not on curve"+H)}const L=(k&er)===er;return(v&1)===1!==L&&(k=r.neg(k)),{x:O,y:k}}else if(y===s&&v===4){const O=r.fromBytes(A.subarray(0,r.BYTES)),_=r.fromBytes(A.subarray(r.BYTES,2*r.BYTES));return{x:O,y:_}}else{const O=i,_=s;throw new Error("invalid Point, expected length of "+O+", or uncompressed "+_+", got "+y)}}}),h=x=>Fc(zc(x,e.nByteLength));function f(x){const y=n>>er;return x>y}function g(x){return f(x)?o(-x):x}const w=(x,y,v)=>ta(x.slice(y,v));class p{constructor(y,v,A){this.r=y,this.s=v,this.recovery=A,this.assertValidity()}static fromCompact(y){const v=e.nByteLength;return y=mn("compactSignature",y,v*2),new p(w(y,0,v),w(y,v,2*v))}static fromDER(y){const{r:v,s:A}=ls.toSig(mn("DER",y));return new p(v,A)}assertValidity(){cs("r",this.r,er,n),cs("s",this.s,er,n)}addRecoveryBit(y){return new p(this.r,this.s,y)}recoverPublicKey(y){const{r:v,s:A,recovery:O}=this,_=S(mn("msgHash",y));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const k=O===2||O===3?v+e.n:v;if(k>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=(O&1)===0?"02":"03",F=c.fromHex(L+h(k)),H=a(k),q=o(-_*H),W=o(A*H),Y=c.BASE.multiplyAndAddUnsafe(F,q,W);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return jc(this.toDERHex())}toDERHex(){return ls.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return jc(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const b={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=jE(e.n);return HK(e.randomBytes(x),e.n)},precompute(x=8,y=c.BASE){return y._setWindowSize(x),y.multiply(BigInt(3)),y}};function m(x,y=!0){return c.fromPrivateKey(x).toRawBytes(y)}function E(x){const y=ea(x),v=typeof x=="string",A=(y||v)&&x.length;return y?A===i||A===s:v?A===2*i||A===2*s:x instanceof c}function C(x,y,v=!0){if(E(x))throw new Error("first arg must be private key");if(!E(y))throw new Error("second arg must be public key");return c.fromHex(y).multiply(l(x)).toRawBytes(v)}const P=e.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const y=ta(x),v=x.length*8-e.nBitLength;return v>0?y>>BigInt(v):y},S=e.bits2int_modN||function(x){return o(P(x))},I=bm(e.nBitLength);function N(x){return cs("num < 2^"+e.nBitLength,x,us,I),zc(x,e.nByteLength)}function $(x,y,v=D){if(["recovered","canonical"].some(re=>re in v))throw new Error("sign() legacy options not supported");const{hash:A,randomBytes:O}=e;let{lowS:_,prehash:k,extraEntropy:L}=v;_==null&&(_=!0),x=mn("msgHash",x),KE(v),k&&(x=mn("prehashed msgHash",A(x)));const F=S(x),H=l(y),q=[N(H),N(F)];if(L!=null&&L!==!1){const re=L===!0?O(r.BYTES):L;q.push(mn("extraEntropy",re))}const W=ed(...q),Y=F;function ae(re){const te=P(re);if(!d(te))return;const Ee=a(te),Ce=c.BASE.multiply(te).toAffine(),xe=o(Ce.x);if(xe===us)return;const _e=o(Ee*o(Y+xe*H));if(_e===us)return;let Ge=(Ce.x===xe?0:2)|Number(Ce.y&er),xr=_e;return _&&f(_e)&&(xr=g(_e),Ge^=1),new p(xe,xr,Ge)}return{seed:W,k2sig:ae}}const D={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function R(x,y,v=D){const{seed:A,k2sig:O}=$(x,y,v),_=e;return RE(_.hash.outputLen,_.nByteLength,_.hmac)(A,O)}c.BASE._setWindowSize(8);function M(x,y,v,A=T){const O=x;y=mn("msgHash",y),v=mn("publicKey",v);const{lowS:_,prehash:k,format:L}=A;if(KE(A),"strict"in A)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const F=typeof O=="string"||ea(O),H=!F&&!L&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!F&&!H)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,W;try{if(H&&(q=new p(O.r,O.s)),F){try{L!=="compact"&&(q=p.fromDER(O))}catch(_e){if(!(_e instanceof ls.Err))throw _e}!q&&L!=="der"&&(q=p.fromCompact(O))}W=c.fromHex(v)}catch{return!1}if(!q||_&&q.hasHighS())return!1;k&&(y=e.hash(y));const{r:Y,s:ae}=q,re=S(y),te=a(ae),Ee=o(re*te),Ce=o(Y*te),xe=c.BASE.multiplyAndAddUnsafe(W,Ee,Ce)?.toAffine();return xe?o(xe.x)===Y:!1}return{CURVE:e,getPublicKey:m,getSharedSecret:C,sign:R,verify:M,ProjectivePoint:c,Signature:p,utils:b}}function lG(t){return{hash:t,hmac:(e,...r)=>OE(t,e,HV(...r)),randomBytes:pE}}function uG(t,e){const r=n=>cG({...t,...lG(n)});return{...r(e),create:r}}const ZE=FE(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),dG=ZE.create(BigInt("-3")),hG=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b");uG({a:dG,b:hG,Fp:ZE,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},IK);function pG(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,p=0,b=0,m=g.length;b!==m&&g[b]===0;)b++,w++;for(var E=(m-b)*u+1>>>0,C=new Uint8Array(E);b!==m;){for(var P=g[b],S=0,I=E-1;(P!==0||S<p)&&I!==-1;I--,S++)P+=256*C[I]>>>0,C[I]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");p=S,b++}for(var N=E-p;N!==E&&C[N]===0;)N++;for(var $=c.repeat(w);N<E;++N)$+=t.charAt(C[N]);return $}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var w=0;if(g[w]!==" "){for(var p=0,b=0;g[w]===c;)p++,w++;for(var m=(g.length-w)*l+1>>>0,E=new Uint8Array(m);g[w];){var C=r[g.charCodeAt(w)];if(C===255)return;for(var P=0,S=m-1;(C!==0||P<b)&&S!==-1;S--,P++)C+=a*E[S]>>>0,E[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=P,w++}if(g[w]!==" "){for(var I=m-b;I!==m&&E[I]===0;)I++;for(var N=new Uint8Array(p+(m-I)),$=p;I!==m;)N[$++]=E[I++];return N}}}function f(g){var w=h(g);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var fG=pG,gG=fG;const YE=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},wG=t=>new TextEncoder().encode(t),mG=t=>new TextDecoder().decode(t);class bG{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class yG{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return JE(this,e)}}class vG{constructor(e){this.decoders=e}or(e){return JE(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const JE=(t,e)=>new vG({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class EG{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new bG(e,r,n),this.decoder=new yG(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const mf=({name:t,prefix:e,encode:r,decode:n})=>new EG(t,e,r,n),td=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=gG(r,e);return mf({prefix:t,name:e,encode:n,decode:s=>YE(i(s))})},CG=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},xG=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},gr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>mf({prefix:e,name:t,encode(i){return xG(i,n,r)},decode(i){return CG(i,n,r,t)}}),$G=mf({prefix:"\0",name:"identity",encode:t=>mG(t),decode:t=>wG(t)});var _G=Object.freeze({__proto__:null,identity:$G});const IG=gr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var SG=Object.freeze({__proto__:null,base2:IG});const AG=gr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var PG=Object.freeze({__proto__:null,base8:AG});const OG=td({prefix:"9",name:"base10",alphabet:"0123456789"});var NG=Object.freeze({__proto__:null,base10:OG});const TG=gr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kG=gr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var RG=Object.freeze({__proto__:null,base16:TG,base16upper:kG});const DG=gr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),BG=gr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),UG=gr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),LG=gr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),FG=gr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),MG=gr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jG=gr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zG=gr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qG=gr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var HG=Object.freeze({__proto__:null,base32:DG,base32upper:BG,base32pad:UG,base32padupper:LG,base32hex:FG,base32hexupper:MG,base32hexpad:jG,base32hexpadupper:zG,base32z:qG});const WG=td({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),VG=td({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var KG=Object.freeze({__proto__:null,base36:WG,base36upper:VG});const GG=td({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ZG=td({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var YG=Object.freeze({__proto__:null,base58btc:GG,base58flickr:ZG});const JG=gr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),XG=gr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),QG=gr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),eZ=gr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var tZ=Object.freeze({__proto__:null,base64:JG,base64pad:XG,base64url:QG,base64urlpad:eZ});const XE=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),rZ=XE.reduce((t,e,r)=>(t[r]=e,t),[]),nZ=XE.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function iZ(t){return t.reduce((e,r)=>(e+=rZ[r],e),"")}function sZ(t){const e=[];for(const r of t){const n=nZ[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const oZ=mf({prefix:"\u{1F680}",name:"base256emoji",encode:iZ,decode:sZ});var aZ=Object.freeze({__proto__:null,base256emoji:oZ}),cZ=eC,QE=128,lZ=127,uZ=~lZ,dZ=Math.pow(2,31);function eC(t,e,r){e=e||[],r=r||0;for(var n=r;t>=dZ;)e[r++]=t&255|QE,t/=128;for(;t&uZ;)e[r++]=t&255|QE,t>>>=7;return e[r]=t|0,eC.bytes=r-n+1,e}var hZ=Pm,pZ=128,tC=127;function Pm(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Pm.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&tC)<<i:(o&tC)*Math.pow(2,i),i+=7}while(o>=pZ);return Pm.bytes=s-n,r}var fZ=Math.pow(2,7),gZ=Math.pow(2,14),wZ=Math.pow(2,21),mZ=Math.pow(2,28),bZ=Math.pow(2,35),yZ=Math.pow(2,42),vZ=Math.pow(2,49),EZ=Math.pow(2,56),CZ=Math.pow(2,63),xZ=function(t){return t<fZ?1:t<gZ?2:t<wZ?3:t<mZ?4:t<bZ?5:t<yZ?6:t<vZ?7:t<EZ?8:t<CZ?9:10},$Z={encode:cZ,decode:hZ,encodingLength:xZ},rC=$Z;const nC=(t,e,r=0)=>(rC.encode(t,e,r),e),iC=t=>rC.encodingLength(t),Om=(t,e)=>{const r=e.byteLength,n=iC(t),i=n+iC(r),s=new Uint8Array(i+r);return nC(t,s,0),nC(r,s,n),s.set(e,i),new _Z(t,r,e,s)};class _Z{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const sC=({name:t,code:e,encode:r})=>new IZ(t,e,r);class IZ{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Om(this.code,r):r.then(n=>Om(this.code,n))}else throw Error("Unknown type, must be binary type")}}const oC=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),SZ=sC({name:"sha2-256",code:18,encode:oC("SHA-256")}),AZ=sC({name:"sha2-512",code:19,encode:oC("SHA-512")});var PZ=Object.freeze({__proto__:null,sha256:SZ,sha512:AZ});const aC=0,OZ="identity",cC=YE;var NZ=Object.freeze({__proto__:null,identity:{code:aC,name:OZ,encode:cC,digest:t=>Om(aC,cC(t))}});new TextEncoder,new TextDecoder,{..._G,...SG,...PG,...NG,...RG,...HG,...KG,...YG,...tZ,...aZ},{...PZ,...NZ};const TZ="https://secure.walletconnect.org/sdk";typeof process<"u"&&typeof process.env<"u"&&process.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL,typeof process<"u"&&typeof process.env<"u"&&process.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL,typeof process<"u"&&typeof process.env<"u"&&process.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION;const io={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},na=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Ft=at({...na}),ct={state:Ft,subscribeKey(t,e){return Rr(Ft,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=X.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Ft.message=na.message,Ft.variant=na.variant,Ft.svg=na.svg,Ft.open=na.open,Ft.autoClose=na.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=na.autoClose}){Ft.open?(Ft.open=!1,setTimeout(()=>{Ft.message=t,Ft.variant=r,Ft.svg=e,Ft.open=!0,Ft.autoClose=n},150)):(Ft.message=t,Ft.variant=r,Ft.svg=e,Ft.open=!0,Ft.autoClose=n)}},so={getSIWX(){return G.state.siwx},async initializeIfEnabled(){const t=G.state.siwx,e=B.getActiveCaipAddress();if(!(t&&e))return;const[r,n,i]=e.split(":");if(B.checkIfSupportedNetwork(r))try{if((await t.getSessions(`${r}:${n}`,i)).length)return;await De.open({view:"SIWXSignMessage"})}catch(s){console.error("SIWXUtil:initializeIfEnabled",s),Ae.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await pe._getClient()?.disconnect().catch(console.error),ne.reset("Connect"),ct.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=G.state.siwx,e=X.getPlainAddress(B.getActiveCaipAddress()),r=B.getActiveCaipNetwork(),n=pe._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),s=i.toString();oe.getConnectorId(r.chainNamespace)===de.CONNECTOR_ID.AUTH&&ne.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await n.signMessage(s);await t.addSession({data:i,message:s,signature:a}),De.close(),Ae.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const s=this.getSIWXEventProperties();(!De.state.open||ne.state.view==="ApproveTransaction")&&await De.open({view:"SIWXSignMessage"}),s.isSmartAccount?ct.showError("This application might not support Smart Accounts"):ct.showError("Signature declined"),Ae.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){try{this.getSIWX()?.getRequired?.()?await pe.disconnect():De.close(),ne.reset("Connect"),Ae.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getSessions(){const t=G.state.siwx,e=X.getPlainAddress(B.getActiveCaipAddress()),r=B.getActiveCaipNetwork();return t&&e&&r?t.getSessions(r.caipNetworkId,e):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=ne.state.view==="ApproveTransaction",r=ne.state.view==="SIWXSignMessage";if(e||r)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){const n=so.getSIWX(),i=new Set(e.map(a=>a.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const s=await n.createMessage({chainId:B.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),o=await t.authenticate({nonce:s.nonce,domain:s.domain,uri:s.uri,exp:s.expirationTime,iat:s.issuedAt,nbf:s.notBefore,requestId:s.requestId,version:s.version,resources:s.resources,statement:s.statement,chainId:s.chainId,methods:r,chains:[s.chainId,...e.filter(a=>a!==s.chainId)]});if(ct.showLoading("Authenticating...",{autoClose:!1}),ge.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:o.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),o?.auths?.length){const a=o.auths.map(c=>{const l=t.client.formatAuthMessage({request:c.p,iss:c.p.iss});return{data:{...c.p,accountAddress:c.p.iss.split(":").slice(-1).join(""),chainId:c.p.iss.split(":").slice(2,4).join(":"),uri:c.p.aud,version:c.p.version||s.version,expirationTime:c.p.exp,issuedAt:c.p.iat,notBefore:c.p.nbf},message:l,signature:c.s.s,cacao:c}});try{await n.setSessions(a),Ae.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:so.getSIWXEventProperties()})}catch(c){throw console.error("SIWX:universalProviderAuth - failed to set sessions",c),Ae.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:so.getSIWXEventProperties()}),await t.disconnect().catch(console.error),c}finally{ct.hide()}}return!0},getSIWXEventProperties(){const t=B.state.activeChain;return{network:B.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:ge.state.preferredAccountTypes?.[t]===io.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},pt=at({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),kZ={state:pt,subscribe(t){return Ir(pt,()=>t(pt))},setLastNetworkInView(t){pt.lastNetworkInView=t},async fetchTransactions(t,e){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");pt.loading=!0;try{const r=await ve.fetchTransactions({account:t,cursor:pt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:B.state.activeCaipNetwork?.caipNetworkId}),n=this.filterSpamTransactions(r.data),i=this.filterByConnectedChain(n),s=[...pt.transactions,...i];pt.loading=!1,e==="coinbase"?pt.coinbaseTransactions=this.groupTransactionsByYearAndMonth(pt.coinbaseTransactions,r.data):(pt.transactions=s,pt.transactionsByYear=this.groupTransactionsByYearAndMonth(pt.transactionsByYear,i)),pt.empty=s.length===0,pt.next=r.next?r.next:void 0}catch{const n=B.state.activeChain;Ae.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:G.state.projectId,cursor:pt.next,isSmartAccount:ge.state.preferredAccountTypes?.[n]===io.ACCOUNT_TYPES.SMART_ACCOUNT}}),ct.showError("Failed to fetch transactions"),pt.loading=!1,pt.empty=!0,pt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const i=new Date(n.metadata.minedAt).getFullYear(),s=new Date(n.metadata.minedAt).getMonth(),o=r[i]??{},c=(o[s]??[]).filter(l=>l.id!==n.id);r[i]={...o,[s]:[...c,n].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>n.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=B.state.activeCaipNetwork?.caipNetworkId;return t.filter(n=>n.metadata.chain===e)},clearCursor(){pt.next=void 0},resetTransactions(){pt.transactions=[],pt.transactionsByYear={},pt.lastNetworkInView=void 0,pt.loading=!1,pt.empty=!1,pt.next=void 0}},yt=at({wcError:!1,buffering:!1,status:"disconnected"});let Wc;const pe={state:yt,subscribeKey(t,e){return Rr(yt,t,e)},_getClient(){return yt._client},setClient(t){yt._client=Qo(t)},async connectWalletConnect(){if(X.isTelegram()||X.isSafari()&&X.isIos()){if(Wc){await Wc,Wc=void 0;return}if(!X.isPairingExpired(yt?.wcPairingExpiry)){const t=yt.wcUri;yt.wcUri=t;return}Wc=this._getClient()?.connectWalletConnect?.().catch(()=>{}),this.state.status="connecting",await Wc,Wc=void 0,yt.wcPairingExpiry=void 0,this.state.status="connected"}else await this._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,r=!0){await this._getClient()?.connectExternal?.(t),r&&B.setActiveNamespace(e)},async reconnectExternal(t){await this._getClient()?.reconnectExternal?.(t);const e=t.chain||B.state.activeChain;e&&oe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){De.setLoading(!0,B.state.activeChain);const r=oe.getAuthConnector();r&&(ge.setPreferredAccountType(t,e),await r.provider.setPreferredAccount(t),he.setPreferredAccountTypes(ge.state.preferredAccountTypes??{[e]:t}),await this.reconnectExternal(r),De.setLoading(!1,B.state.activeChain),Ae.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:B.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return this._getClient()?.signMessage(t)},parseUnits(t,e){return this._getClient()?.parseUnits(t,e)},formatUnits(t,e){return this._getClient()?.formatUnits(t,e)},async sendTransaction(t){return this._getClient()?.sendTransaction(t)},async getCapabilities(t){return this._getClient()?.getCapabilities(t)},async grantPermissions(t){return this._getClient()?.grantPermissions(t)},async walletGetAssets(t){return this._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return this._getClient()?.estimateGas(t)},async writeContract(t){return this._getClient()?.writeContract(t)},async getEnsAddress(t){return this._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return this._getClient()?.getEnsAvatar(t)},checkInstalled(t){return this._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){yt.wcUri=void 0,yt.wcPairingExpiry=void 0,yt.wcLinking=void 0,yt.recentWallet=void 0,yt.status="disconnected",kZ.resetTransactions(),he.deleteWalletConnectDeepLink()},resetUri(){yt.wcUri=void 0,yt.wcPairingExpiry=void 0},finalizeWcConnection(){const{wcLinking:t,recentWallet:e}=pe.state;t&&he.setWalletConnectDeepLink(t),e&&he.setAppKitRecent(e),Ae.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:ne.state.data?.wallet?.name||"Unknown"}})},setWcBasic(t){yt.wcBasic=t},setUri(t){yt.wcUri=t,yt.wcPairingExpiry=X.getPairingExpiry()},setWcLinking(t){yt.wcLinking=t},setWcError(t){yt.wcError=t,yt.buffering=!1},setRecentWallet(t){yt.recentWallet=t},setBuffering(t){yt.buffering=t},setStatus(t){yt.status=t},async disconnect(t){try{De.setLoading(!0,t),await so.clearSessions(),await B.disconnect(t),De.setLoading(!1,t),oe.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},Vc=at({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),ds={state:Vc,subscribe(t){return Ir(Vc,()=>t(Vc))},subscribeOpen(t){return Rr(Vc,"open",t)},set(t){Object.assign(Vc,{...Vc,...t})}};function rd(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function oo(t){return rd(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const lC="2.27.0";let Nm={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${lC}`};class Ne extends Error{constructor(e,r={}){const n=r.cause instanceof Ne?r.cause.details:r.cause?.message?r.cause.message:r.details,i=r.cause instanceof Ne&&r.cause.docsPath||r.docsPath,s=Nm.getDocsUrl?.({...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...Nm.version?[`Version: ${Nm.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=lC}walk(e){return uC(this,e)}}function uC(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?uC(t.cause,e):e?null:t}class dC extends Ne{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class hC extends Ne{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function Kc(t,{dir:e,size:r=32}={}){return typeof t=="string"?RZ(t,{dir:e,size:r}):DZ(t,{dir:e,size:r})}function RZ(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new hC({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function DZ(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new hC({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class BZ extends Ne{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class UZ extends Ne{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Gc(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let i=0;i<r.length-1&&r[e==="left"?i:r.length-i-1].toString()==="0";i++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function Zc(t,{size:e}){if(oo(t)>e)throw new UZ({givenSize:oo(t),maxSize:e})}function hs(t,e={}){const{signed:r}=e;e.size&&Zc(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function bf(t,e={}){return Number(hs(t,e))}const LZ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ye(t,e={}){return typeof t=="number"||typeof t=="bigint"?Br(t,e):typeof t=="string"?pC(t,e):typeof t=="boolean"?FZ(t,e):ps(t,e)}function FZ(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Zc(r,{size:e.size}),Kc(r,{size:e.size})):r}function ps(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=LZ[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(Zc(n,{size:e.size}),Kc(n,{dir:"right",size:e.size})):n}function Br(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new BZ({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Kc(a,{size:n}):a}const MZ=new TextEncoder;function pC(t,e={}){const r=MZ.encode(t);return ps(r,e)}const jZ=new TextEncoder;function fC(t,e={}){return typeof t=="number"||typeof t=="bigint"?qZ(t,e):typeof t=="boolean"?zZ(t,e):rd(t)?ia(t,e):wC(t,e)}function zZ(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Zc(r,{size:e.size}),Kc(r,{size:e.size})):r}const fs={zero:48,nine:57,A:65,F:70,a:97,f:102};function gC(t){if(t>=fs.zero&&t<=fs.nine)return t-fs.zero;if(t>=fs.A&&t<=fs.F)return t-(fs.A-10);if(t>=fs.a&&t<=fs.f)return t-(fs.a-10)}function ia(t,e={}){let r=t;e.size&&(Zc(r,{size:e.size}),r=Kc(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=gC(n.charCodeAt(a++)),l=gC(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new Ne(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+l}return s}function qZ(t,e){const r=Br(t,e);return ia(r)}function wC(t,e={}){const r=jZ.encode(t);return typeof e.size=="number"?(Zc(r,{size:e.size}),Kc(r,{dir:"right",size:e.size})):r}function HZ(t,e){const r=e||"hex",n=Po(rd(t,{strict:!1})?fC(t):t);return r==="bytes"?n:ye(n)}class ao extends Ne{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class yf extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const Tm=new yf(8192);function WZ(t,e){if(Tm.has(`${t}.${e}`))return Tm.get(`${t}.${e}`);const r=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),n=HZ(wC(r),"bytes"),i=(e?r.substring(`${e}0x`.length):r).split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return Tm.set(`${t}.${e}`,s),s}const VZ=/^0x[a-fA-F0-9]{40}$/,km=new yf(8192);function gs(t,e){const{strict:r=!0}=e??{},n=`${t}.${r}`;if(km.has(n))return km.get(n);const i=VZ.test(t)?t.toLowerCase()===t?!0:r?WZ(t)===t:!0:!1;return km.set(n,i),i}function Yc(t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function KZ(t,e,r,{strict:n}={}){return rd(t,{strict:!1})?ZZ(t,e,r,{strict:n}):GZ(t,e,r,{strict:n})}function mC(t,e){if(typeof e=="number"&&e>0&&e>oo(t)-1)throw new dC({offset:e,position:"start",size:oo(t)})}function bC(t,e,r){if(typeof e=="number"&&typeof r=="number"&&oo(t)!==r-e)throw new dC({offset:r,position:"end",size:oo(t)})}function GZ(t,e,r,{strict:n}={}){mC(t,e);const i=t.slice(e,r);return n&&bC(i,e,r),i}function ZZ(t,e,r,{strict:n}={}){mC(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return n&&bC(i,e,r),i}class yC extends Ne{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class YZ extends Ne{constructor({length:e,position:r}){super(`Position \`${r}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class JZ extends Ne{constructor({count:e,limit:r}){super(`Recursive read limit of \`${r}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const XZ={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new JZ({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new YZ({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new yC({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new yC({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const r=e??this.position;return this.assertPosition(r+t-1),this.bytes.subarray(r,r+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const r=this.inspectBytes(t);return this.position+=e??t,r},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function vC(t,{recursiveReadLimit:e=8192}={}){const r=Object.create(XZ);return r.bytes=t,r.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=e,r}const sa=(t,e,r)=>JSON.stringify(t,(n,i)=>{const s=typeof i=="bigint"?i.toString():i;return typeof e=="function"?e(n,s):s},r),QZ={ether:-9,wei:9};function EC(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[i,s]=[r.slice(0,r.length-e),r.slice(r.length-e)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}function Rm(t,e="wei"){return EC(t,QZ[e])}function eY(t){const e=Object.entries(t).map(([n,i])=>i===void 0||i===!1?null:[n,i]).filter(Boolean),r=e.reduce((n,[i])=>Math.max(n,i.length),0);return e.map(([n,i])=>`  ${`${n}:`.padEnd(r+1)}  ${i}`).join(`
`)}class tY extends Ne{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class rY extends Ne{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",eY(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class nY extends Ne{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}const Dm=t=>t;class nd extends Ne{constructor({body:e,cause:r,details:n,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${Dm(o)}`,e&&`Request body: ${sa(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class CC extends Ne{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${Dm(n)}`,`Request body: ${sa(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}class xC extends Ne{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Dm(r)}`,`Request body: ${sa(e)}`],name:"TimeoutError"})}}const iY=-1;class Zr extends Ne{constructor(e,{code:r,docsPath:n,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:i||e?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof CC?e.code:r??iY}}class bn extends Zr{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class id extends Zr{constructor(e){super(e,{code:id.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(id,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class sd extends Zr{constructor(e){super(e,{code:sd.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(sd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class od extends Zr{constructor(e,{method:r}={}){super(e,{code:od.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(od,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class ad extends Zr{constructor(e){super(e,{code:ad.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ad,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Jc extends Zr{constructor(e){super(e,{code:Jc.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Jc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class cd extends Zr{constructor(e){super(e,{code:cd.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(cd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class ld extends Zr{constructor(e){super(e,{code:ld.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(ld,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ud extends Zr{constructor(e){super(e,{code:ud.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(ud,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Xc extends Zr{constructor(e){super(e,{code:Xc.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Xc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class oa extends Zr{constructor(e,{method:r}={}){super(e,{code:oa.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(oa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Qc extends Zr{constructor(e){super(e,{code:Qc.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Qc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class dd extends Zr{constructor(e){super(e,{code:dd.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(dd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class aa extends bn{constructor(e){super(e,{code:aa.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(aa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class hd extends bn{constructor(e){super(e,{code:hd.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(hd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class pd extends bn{constructor(e,{method:r}={}){super(e,{code:pd.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(pd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class fd extends bn{constructor(e){super(e,{code:fd.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(fd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class gd extends bn{constructor(e){super(e,{code:gd.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(gd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class wd extends bn{constructor(e){super(e,{code:wd.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(wd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class md extends bn{constructor(e){super(e,{code:md.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(md,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class bd extends bn{constructor(e){super(e,{code:bd.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(bd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class yd extends bn{constructor(e){super(e,{code:yd.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(yd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class vd extends bn{constructor(e){super(e,{code:vd.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(vd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Ed extends bn{constructor(e){super(e,{code:Ed.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Ed,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Cd extends bn{constructor(e){super(e,{code:Cd.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Cd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class xd extends bn{constructor(e){super(e,{code:xd.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(xd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class sY extends Zr{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function co(t,e="hex"){const r=$C(t),n=vC(new Uint8Array(r.length));return r.encode(n),e==="hex"?ps(n.bytes):n.bytes}function $C(t){return Array.isArray(t)?oY(t.map(e=>$C(e))):aY(t)}function oY(t){const e=t.reduce((i,s)=>i+s.length,0),r=_C(e);return{length:e<=55?1+e:1+r+e,encode(i){e<=55?i.pushByte(192+e):(i.pushByte(247+r),r===1?i.pushUint8(e):r===2?i.pushUint16(e):r===3?i.pushUint24(e):i.pushUint32(e));for(const{encode:s}of t)s(i)}}}function aY(t){const e=typeof t=="string"?ia(t):t,r=_C(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+r+e.length,encode(i){e.length===1&&e[0]<128?i.pushBytes(e):e.length<=55?(i.pushByte(128+e.length),i.pushBytes(e)):(i.pushByte(183+r),r===1?i.pushUint8(e.length):r===2?i.pushUint16(e.length):r===3?i.pushUint24(e.length):i.pushUint32(e.length),i.pushBytes(e))}}}function _C(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new Ne("Length is too large.")}class Bm extends Ne{constructor({cause:e,message:r}={}){const n=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Bm,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Bm,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class $d extends Ne{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${Rm(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty($d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Um extends Ne{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${Rm(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${Rm(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Um,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});function vf(t,e){return({exclude:r,format:n})=>({exclude:r,format:i=>{const s=e(i);if(r)for(const o of r)delete s[o];return{...s,...n(i)}},type:t})}const cY={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function lY(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=dY(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(r=>ps(r)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Br(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Br(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Br(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Br(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Br(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Br(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=cY[t.type]),typeof t.value<"u"&&(e.value=Br(t.value)),e}const uY=vf("transactionRequest",lY);function dY(t){return t.map(e=>({address:e.address,r:e.r?Br(BigInt(e.r)):e.r,s:e.s?Br(BigInt(e.s)):e.s,chainId:Br(e.chainId),nonce:Br(e.nonce),...typeof e.yParity<"u"?{yParity:Br(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Br(e.v)}:{}}))}const Ef=2n**256n-1n,IC={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Cf(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?bf(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?bf(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?IC[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=hY(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const SC=vf("transaction",Cf);function hY(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function pY(t){const e=(t.transactions??[]).map(r=>typeof r=="string"?r:Cf(r));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const AC=vf("block",pY);function PC(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(s=>ia(s)):t.blobs,i=[];for(const s of n)i.push(Uint8Array.from(e.blobToKzgCommitment(s)));return r==="bytes"?i:i.map(s=>ps(s))}function OC(t){const{kzg:e}=t,r=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),n=typeof t.blobs[0]=="string"?t.blobs.map(o=>ia(o)):t.blobs,i=typeof t.commitments[0]=="string"?t.commitments.map(o=>ia(o)):t.commitments,s=[];for(let o=0;o<n.length;o++){const a=n[o],c=i[o];s.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return r==="bytes"?s:s.map(o=>ps(o))}function fY(t,e){const r=e||"hex",n=ru(rd(t,{strict:!1})?fC(t):t);return r==="bytes"?n:ye(n)}function gY(t){const{commitment:e,version:r=1}=t,n=t.to??(typeof e=="string"?"hex":"bytes"),i=fY(e,"bytes");return i.set([r],0),n==="bytes"?i:ps(i)}function wY(t){const{commitments:e,version:r}=t,n=t.to??(typeof e[0]=="string"?"hex":"bytes"),i=[];for(const s of e)i.push(gY({commitment:s,to:n,version:r}));return i}const NC=6,TC=32,Lm=4096,kC=TC*Lm,RC=kC*NC-1-1*Lm*NC,DC=1;class mY extends Ne{constructor({maxSize:e,size:r}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${r} bytes`],name:"BlobSizeTooLargeError"})}}class BC extends Ne{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class bY extends Ne{constructor({hash:e,size:r}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${r}`],name:"InvalidVersionedHashSizeError"})}}class yY extends Ne{constructor({hash:e,version:r}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${DC}`,`Received: ${r}`],name:"InvalidVersionedHashVersionError"})}}function vY(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),r=typeof t.data=="string"?ia(t.data):t.data,n=oo(r);if(!n)throw new BC;if(n>RC)throw new mY({maxSize:RC,size:n});const i=[];let s=!0,o=0;for(;s;){const a=vC(new Uint8Array(kC));let c=0;for(;c<Lm;){const l=r.slice(o,o+(TC-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),s=!1;break}c++,o+=31}i.push(a)}return e==="bytes"?i.map(a=>a.bytes):i.map(a=>ps(a.bytes))}function EY(t){const{data:e,kzg:r,to:n}=t,i=t.blobs??vY({data:e,to:n}),s=t.commitments??PC({blobs:i,kzg:r,to:n}),o=t.proofs??OC({blobs:i,commitments:s,kzg:r,to:n}),a=[];for(let c=0;c<i.length;c++)a.push({blob:i[c],commitment:s[c],proof:o[c]});return a}function CY(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new rY({transaction:t})}function xY(t,{args:e,eventName:r}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...r?{args:e,eventName:r}:{}}}class _d extends Ne{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function $Y(){let t=()=>{},e=()=>{};return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}const Fm=new Map;function _Y({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:i}){const s=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{i&&Array.isArray(h)&&h.sort(i);for(let f=0;f<u.length;f++){const{resolve:g}=u[f];g?.([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:g}=u[f];g?.(h)}})},o=()=>Fm.delete(e),a=()=>c().map(({args:u})=>u),c=()=>Fm.get(e)||[],l=u=>Fm.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=$Y();return r?.([...a(),u])&&s(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(s,n),d)}}}async function UC(t){return new Promise(e=>setTimeout(e,t))}new yf(128);const Mm=256;let xf=Mm,$f;function IY(t=11){if(!$f||xf+t>Mm*2){$f="",xf=0;for(let e=0;e<Mm;e++)$f+=(256+Math.random()*256|0).toString(16).substring(1)}return $f.substring(xf,xf+++t)}const _f=new yf(8192);function SY(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(_f.get(r))return _f.get(r);const n=t().finally(()=>_f.delete(r));return _f.set(r,n),n}function AY(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await UC(u),o({count:a+1})};try{const l=await t();i(l)}catch(l){if(a<r&&await n({count:a,error:l}))return c({error:l});s(l)}};o()})}function PY(t,e={}){return async(r,n={})=>{const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:l}=r;if(s?.exclude?.includes(l))throw new oa(new Error("method not supported"),{method:l});if(s?.include&&!s.include.includes(l))throw new oa(new Error("method not supported"),{method:l});const u=i?pC(`${c}.${sa(r)}`):void 0;return SY(()=>AY(async()=>{try{return await t(r)}catch(d){const h=d;switch(h.code){case id.code:throw new id(h);case sd.code:throw new sd(h);case od.code:throw new od(h,{method:r.method});case ad.code:throw new ad(h);case Jc.code:throw new Jc(h);case cd.code:throw new cd(h);case ld.code:throw new ld(h);case ud.code:throw new ud(h);case Xc.code:throw new Xc(h);case oa.code:throw new oa(h,{method:r.method});case Qc.code:throw new Qc(h);case dd.code:throw new dd(h);case aa.code:throw new aa(h);case hd.code:throw new hd(h);case pd.code:throw new pd(h);case fd.code:throw new fd(h);case gd.code:throw new gd(h);case wd.code:throw new wd(h);case md.code:throw new md(h);case bd.code:throw new bd(h);case yd.code:throw new yd(h);case vd.code:throw new vd(h);case Ed.code:throw new Ed(h);case Cd.code:throw new Cd(h);case xd.code:throw new xd(h);case 5e3:throw new aa(h);default:throw d instanceof Ne?d:new sY(h)}}},{delay:({count:d,error:h})=>{if(h&&h instanceof nd){const f=h?.headers?.get("Retry-After");if(f?.match(/\d/))return Number.parseInt(f)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>OY(d)}),{enabled:i,id:u})}}function OY(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Qc.code||t.code===Jc.code:t instanceof nd&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function LC({key:t,methods:e,name:r,request:n,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},c){const l=IY();return{config:{key:t,methods:e,name:r,request:n,retryCount:i,retryDelay:s,timeout:o,type:a},request:PY(n,{methods:e,retryCount:i,retryDelay:s,uid:l}),value:c}}function FC(t,e={}){const{key:r="fallback",name:n="Fallback",rank:i=!1,shouldThrow:s=NY,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const g=LC({key:r,name:n,async request({method:w,params:p}){let b;const m=async(E=0)=>{const C=h[E]({...d,chain:c,retryCount:0,timeout:u});try{const P=await C.request({method:w,params:p});return f({method:w,params:p,response:P,transport:C,status:"success"}),P}catch(P){if(f({error:P,method:w,params:p,transport:C,status:"error"}),s(P)||E===h.length-1||(b??=h.slice(E+1).some(S=>{const{include:I,exclude:N}=S({chain:c}).config.methods||{};return I?I.includes(w):N?!N.includes(w):!0}),!b))throw P;return m(E+1)}};return m()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:w=>f=w,transports:h.map(w=>w({chain:c,retryCount:0}))});if(i){const w=typeof i=="object"?i:{};TY({chain:c,interval:w.interval??l,onTransports:p=>h=p,ping:w.ping,sampleCount:w.sampleCount,timeout:w.timeout,transports:h,weights:w.weights})}return g}}function NY(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Xc.code||t.code===aa.code||Bm.nodeMessage.test(t.message)||t.code===5e3))}function TY({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:i=10,timeout:s=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async w=>{const p=w({chain:t,retryCount:0,timeout:s}),b=Date.now();let m,E;try{await(n?n({transport:p}):p.request({method:"net_listening"})),E=1}catch{E=0}finally{m=Date.now()}return{latency:m-b,success:E}}));u.push(h),u.length>i&&u.shift();const f=Math.max(...u.map(w=>Math.max(...w.map(({latency:p})=>p)))),g=o.map((w,p)=>{const b=u.map(S=>S[p].latency),E=1-b.reduce((S,I)=>S+I,0)/b.length/f,C=u.map(S=>S[p].success),P=C.reduce((S,I)=>S+I,0)/C.length;return P===0?[0,p]:[l*E+c*P,p]}).sort((w,p)=>p[0]-w[0]);r(g.map(([,w])=>o[w])),await UC(e),d()};d()}class kY extends Ne{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function RY(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((i,s)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n?a.abort():s(e)},r)),i(await t({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&s(e),s(a)}finally{clearTimeout(o)}})()})}function DY(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const MC=DY();function BY(t,e={}){return{async request(r){const{body:n,onRequest:i=e.onRequest,onResponse:s=e.onResponse,timeout:o=e.timeout??1e4}=r,a={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const d=await RY(async({signal:f})=>{const g={...a,body:Array.isArray(n)?sa(n.map(m=>({jsonrpc:"2.0",id:m.id??MC.take(),...m}))):sa({jsonrpc:"2.0",id:n.id??MC.take(),...n}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?f:null)},w=new Request(t,g),p=await i?.(w,g)??{...g,url:t};return await fetch(p.url??t,p)},{errorInstance:new xC({body:n,url:t}),timeout:o,signal:!0});s&&await s(d);let h;if(d.headers.get("Content-Type")?.startsWith("application/json"))h=await d.json();else{h=await d.text();try{h=JSON.parse(h||"{}")}catch(f){if(d.ok)throw f;h={error:h}}}if(!d.ok)throw new nd({body:n,details:sa(h.error)||d.statusText,headers:d.headers,status:d.status,url:t});return h}catch(d){throw d instanceof nd||d instanceof xC?d:new nd({body:n,cause:d,url:t})}}}}function If(t,e={}){const{batch:r,fetchOptions:n,key:i="http",methods:s,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:g=1e3,wait:w=0}=typeof r=="object"?r:{},p=e.retryCount??h,b=f??e.timeout??1e4,m=t||d?.rpcUrls.default.http[0];if(!m)throw new kY;const E=BY(m,{fetchOptions:n,onRequest:a,onResponse:c,timeout:b});return LC({key:i,methods:s,name:o,async request({method:C,params:P}){const S={method:C,params:P},{schedule:I}=_Y({id:m,wait:w,shouldSplitBatch(T){return T.length>g},fn:T=>E.request({body:T}),sort:(T,R)=>T.id-R.id}),N=async T=>r?I(T):[await E.request({body:T})],[{error:$,result:D}]=await N(S);if(u)return{error:$,result:D};if($)throw new CC({body:S,error:$,url:m});return D},retryCount:p,retryDelay:l,timeout:b,type:"http"},{fetchOptions:n,url:m})}}function fe(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function UY(t){const{authorizationList:e}=t;if(e)for(const r of e){const{chainId:n}=r,i=r.address;if(!gs(i))throw new ao({address:i});if(n<0)throw new _d({chainId:n})}jm(t)}function LY(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new BC;for(const r of e){const n=oo(r),i=bf(KZ(r,0,1));if(n!==32)throw new bY({hash:r,size:n});if(i!==DC)throw new yY({hash:r,version:i})}}jm(t)}function jm(t){const{chainId:e,maxPriorityFeePerGas:r,maxFeePerGas:n,to:i}=t;if(e<=0)throw new _d({chainId:e});if(i&&!gs(i))throw new ao({address:i});if(n&&n>Ef)throw new $d({maxFeePerGas:n});if(r&&n&&r>n)throw new Um({maxFeePerGas:n,maxPriorityFeePerGas:r})}function FY(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:i,to:s}=t;if(e<=0)throw new _d({chainId:e});if(s&&!gs(s))throw new ao({address:s});if(r||i)throw new Ne("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>Ef)throw new $d({maxFeePerGas:n})}function MY(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:i,to:s}=t;if(s&&!gs(s))throw new ao({address:s});if(typeof e<"u"&&e<=0)throw new _d({chainId:e});if(r||i)throw new Ne("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>Ef)throw new $d({maxFeePerGas:n})}function Id(t){if(!t||t.length===0)return[];const e=[];for(let r=0;r<t.length;r++){const{address:n,storageKeys:i}=t[r];for(let s=0;s<i.length;s++)if(i[s].length-2!==64)throw new nY({storageKey:i[s]});if(!gs(n,{strict:!1}))throw new ao({address:n});e.push([n,i])}return e}function jY(t,e){const r=CY(t);return r==="eip1559"?HY(t,e):r==="eip2930"?WY(t,e):r==="eip4844"?qY(t,e):r==="eip7702"?zY(t,e):VY(t,e)}function zY(t,e){const{authorizationList:r,chainId:n,gas:i,nonce:s,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;UY(t);const h=Id(u),f=KY(r);return Yc(["0x04",co([ye(n),s?ye(s):"0x",l?ye(l):"0x",c?ye(c):"0x",i?ye(i):"0x",o??"0x",a?ye(a):"0x",d??"0x",h,f,...el(t,e)])])}function qY(t,e){const{chainId:r,gas:n,nonce:i,to:s,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=t;LY(t);let h=t.blobVersionedHashes,f=t.sidecars;if(t.blobs&&(typeof h>"u"||typeof f>"u")){const E=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(S=>ps(S)),C=t.kzg,P=PC({blobs:E,kzg:C});if(typeof h>"u"&&(h=wY({commitments:P})),typeof f>"u"){const S=OC({blobs:E,commitments:P,kzg:C});f=EY({blobs:E,commitments:P,proofs:S})}}const g=Id(u),w=[ye(r),i?ye(i):"0x",l?ye(l):"0x",c?ye(c):"0x",n?ye(n):"0x",s??"0x",o?ye(o):"0x",d??"0x",g,a?ye(a):"0x",h??[],...el(t,e)],p=[],b=[],m=[];if(f)for(let E=0;E<f.length;E++){const{blob:C,commitment:P,proof:S}=f[E];p.push(C),b.push(P),m.push(S)}return Yc(["0x03",co(f?[w,p,b,m]:w)])}function HY(t,e){const{chainId:r,gas:n,nonce:i,to:s,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:u}=t;jm(t);const d=Id(l),h=[ye(r),i?ye(i):"0x",c?ye(c):"0x",a?ye(a):"0x",n?ye(n):"0x",s??"0x",o?ye(o):"0x",u??"0x",d,...el(t,e)];return Yc(["0x02",co(h)])}function WY(t,e){const{chainId:r,gas:n,data:i,nonce:s,to:o,value:a,accessList:c,gasPrice:l}=t;FY(t);const u=Id(c),d=[ye(r),s?ye(s):"0x",l?ye(l):"0x",n?ye(n):"0x",o??"0x",a?ye(a):"0x",i??"0x",u,...el(t,e)];return Yc(["0x01",co(d)])}function VY(t,e){const{chainId:r=0,gas:n,data:i,nonce:s,to:o,value:a,gasPrice:c}=t;MY(t);let l=[s?ye(s):"0x",c?ye(c):"0x",n?ye(n):"0x",o??"0x",a?ye(a):"0x",i??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(r>0)return BigInt(r*2)+BigInt(35n+e.v-27n);const f=27n+(e.v===27n?0n:1n);if(e.v!==f)throw new tY({v:e.v});return f})(),d=Gc(e.r),h=Gc(e.s);l=[...l,ye(u),d==="0x00"?"0x":d,h==="0x00"?"0x":h]}else r>0&&(l=[...l,ye(r),"0x","0x"]);return co(l)}function el(t,e){const r=e??t,{v:n,yParity:i}=r;if(typeof r.r>"u")return[];if(typeof r.s>"u")return[];if(typeof n>"u"&&typeof i>"u")return[];const s=Gc(r.r),o=Gc(r.s);return[typeof i=="number"?i?ye(1):"0x":n===0n?"0x":n===1n?ye(1):n===27n?"0x":ye(1),s==="0x00"?"0x":s,o==="0x00"?"0x":o]}function KY(t){if(!t||t.length===0)return[];const e=[];for(const r of t){const{chainId:n,nonce:i,...s}=r,o=r.address;e.push([n?ye(n):"0x",o,i?ye(i):"0x",...el({},s)])}return e}const GY={"0x0":"reverted","0x1":"success"};function ZY(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(r=>xY(r)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?bf(t.transactionIndex):null,status:t.status?GY[t.status]:null,type:t.type?IC[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const YY=vf("transactionReceipt",ZY),JY="0.1.1";function XY(){return JY}class Ur extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof Ur){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause?.message?r.cause.message:r.details})(),i=r.cause instanceof Ur&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${XY()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return jC(this,e)}}function jC(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?jC(t.cause,e):e?null:t}function QY(t,e){if(HC(t)>e)throw new aJ({givenSize:HC(t),maxSize:e})}const ws={zero:48,nine:57,A:65,F:70,a:97,f:102};function zC(t){if(t>=ws.zero&&t<=ws.nine)return t-ws.zero;if(t>=ws.A&&t<=ws.F)return t-(ws.A-10);if(t>=ws.a&&t<=ws.f)return t-(ws.a-10)}function eJ(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new cJ({size:t.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let s=0;s<n;s++){const o=r==="right";i[o?s:n-s-1]=t[o?s:t.length-s-1]}return i}function zm(t,e){if(Hm(t)>e)throw new gJ({givenSize:Hm(t),maxSize:e})}function qC(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const i=t.replace("0x","");if(i.length>n*2)throw new wJ({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const tJ=new TextEncoder;function rJ(t){return t instanceof Uint8Array?t:typeof t=="string"?iJ(t):nJ(t)}function nJ(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function iJ(t,e={}){const{size:r}=e;let n=t;r&&(zm(t,r),n=qm(t,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=zC(i.charCodeAt(c++)),u=zC(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new Ur(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function sJ(t,e={}){const{size:r}=e,n=tJ.encode(t);return typeof r=="number"?(QY(n,r),oJ(n,r)):n}function oJ(t,e){return eJ(t,{dir:"right",size:e})}function HC(t){return t.length}class aJ extends Ur{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class cJ extends Ur{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const lJ=new TextEncoder,uJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function WC(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function dJ(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(zm(r,e.size),Sf(r,e.size)):r}function VC(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=uJ[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(zm(n,e.size),qm(n,e.size)):n}function hJ(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const l=typeof t=="bigint"?"n":"";throw new fJ({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:r,size:n,value:`${t}${l}`})}const c=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Sf(c,n):c}function pJ(t,e={}){return VC(lJ.encode(t),e)}function Sf(t,e){return qC(t,{dir:"left",size:e})}function qm(t,e){return qC(t,{dir:"right",size:e})}function Hm(t){return Math.ceil((t.length-2)/2)}class fJ extends Ur{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class gJ extends Ur{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class wJ extends Ur{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function mJ(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=Po(rJ(t));return r==="Bytes"?n:VC(n)}class bJ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const Wm={checksum:new bJ(8192)}.checksum,yJ=/^0x[a-fA-F0-9]{40}$/;function KC(t,e={}){const{strict:r=!0}=e;if(!yJ.test(t))throw new GC({address:t,cause:new EJ});if(r){if(t.toLowerCase()===t)return;if(vJ(t)!==t)throw new GC({address:t,cause:new CJ})}}function vJ(t){if(Wm.has(t))return Wm.get(t);KC(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=mJ(sJ(e),{as:"Bytes"}),n=e.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());const i=`0x${n.join("")}`;return Wm.set(t,i),i}class GC extends Ur{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class EJ extends Ur{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class CJ extends Ur{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const xJ=/^(.*)\[([0-9]*)\]$/,$J=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_J=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Vm(t,e){if(t.length!==e.length)throw new SJ({expectedLength:t.length,givenLength:e.length});const r=[];for(let n=0;n<t.length;n++){const i=t[n],s=e[n];r.push(Vm.encode(i,s))}return WC(...r)}(function(t){function e(r,n,i=!1){if(r==="address"){const c=n;return KC(c),Sf(c.toLowerCase(),i?32:0)}if(r==="string")return pJ(n);if(r==="bytes")return n;if(r==="bool")return Sf(dJ(n),i?32:1);const s=r.match(_J);if(s){const[c,l,u="256"]=s,d=Number.parseInt(u)/8;return hJ(n,{size:i?32:d,signed:l==="int"})}const o=r.match($J);if(o){const[c,l]=o;if(Number.parseInt(l)!==(n.length-2)/2)throw new IJ({expectedSize:Number.parseInt(l),value:n});return qm(n,i?32:0)}const a=r.match(xJ);if(a&&Array.isArray(n)){const[c,l]=a,u=[];for(let d=0;d<n.length;d++)u.push(e(l,n[d],!0));return u.length===0?"0x":WC(...u)}throw new AJ(r)}t.encode=e})(Vm||(Vm={}));class IJ extends Ur{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${Hm(r)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class SJ extends Ur{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class AJ extends Ur{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}const Km={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return EC(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},ZC={async getMyTokensWithBalance(t){const e=ge.state.address,r=B.state.activeCaipNetwork;if(!e||!r)return[];if(r.chainNamespace==="eip155"){const i=await this.getEIP155Balances(e,r);if(i)return this.filterLowQualityTokens(i)}const n=await ve.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(t,e){try{const r=Km.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await pe.getCapabilities(t))?.[r]?.assetDiscovery?.supported)return null;const i=await pe.walletGetAssets({account:t,chainFilter:[r]});return Km.isWalletGetAssetsResponse(i)?(i[r]||[]).map(o=>Km.createBalance(o,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:B.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},Re=at({tokenBalances:[],loading:!1}),YC={state:Re,subscribe(t){return Ir(Re,()=>t(Re))},subscribeKey(t,e){return Rr(Re,t,e)},setToken(t){t&&(Re.token=Qo(t))},setTokenAmount(t){Re.sendTokenAmount=t},setReceiverAddress(t){Re.receiverAddress=t},setReceiverProfileImageUrl(t){Re.receiverProfileImageUrl=t},setReceiverProfileName(t){Re.receiverProfileName=t},setGasPrice(t){Re.gasPrice=t},setGasPriceInUsd(t){Re.gasPriceInUSD=t},setNetworkBalanceInUsd(t){Re.networkBalanceInUSD=t},setLoading(t){Re.loading=t},sendToken(){switch(B.state.activeCaipNetwork?.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){const t=B.state.activeChain,e=ge.state.preferredAccountTypes?.[t];this.state.token?.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(Ae.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===io.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:B.state.activeCaipNetwork?.caipNetworkId||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&this.state.token?.quantity.decimals&&(Ae.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===io.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol,amount:this.state.sendTokenAmount,network:B.state.activeCaipNetwork?.caipNetworkId||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(t){Re.loading=!0;const e=B.state.activeCaipNetwork?.caipNetworkId,r=B.state.activeCaipNetwork?.chainNamespace,n=B.state.activeCaipAddress,i=n?X.getPlainAddress(n):void 0;if(Re.lastRetry&&!X.isAllowedRetry(Re.lastRetry,30*Bt.ONE_SEC_MS))return Re.loading=!1,[];try{if(i&&e&&r){const s=await ZC.getMyTokensWithBalance();return Re.tokenBalances=s,Re.lastRetry=void 0,s}}catch(s){Re.lastRetry=Date.now(),t?.(s),ct.showError("Token Balance Unavailable")}finally{Re.loading=!1}return[]},fetchNetworkBalance(){if(Re.tokenBalances.length===0)return;const t=ZC.mapBalancesToSwapTokens(Re.tokenBalances);if(!t)return;const e=t.find(r=>r.address===B.getActiveNetworkTokenAddress());e&&(Re.networkBalanceInUSD=e?nf.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(t,e){const r=e||"0";return nf.bigNumber(t).eq(0)?!0:nf.bigNumber(nf.bigNumber(r)).gt(t)},hasInsufficientGasFunds(){const t=B.state.activeChain;let e=!0;return ge.state.preferredAccountTypes?.[t]===io.ACCOUNT_TYPES.SMART_ACCOUNT?e=!1:Re.networkBalanceInUSD&&(e=this.isInsufficientNetworkTokenForGas(Re.networkBalanceInUSD,Re.gasPriceInUSD)),e},async sendNativeToken(t){const e=B.state.activeChain;ne.pushTransactionStack({view:"Account",goBack:!1});const r=t.receiverAddress,n=ge.state.address,i=pe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),s="0x";try{await pe.sendTransaction({chainNamespace:"eip155",to:r,address:n,data:s,value:i??BigInt(0),gasPrice:t.gasPrice}),ct.showSuccess("Transaction started"),Ae.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:ge.state.preferredAccountTypes?.[e]===io.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:t.sendTokenAmount,network:B.state.activeCaipNetwork?.caipNetworkId||""}}),this.resetSend()}catch(o){console.error("SendController:sendERC20Token - failed to send native token",o);const a=o instanceof Error?o.message:"Unknown error";Ae.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:a,isSmartAccount:ge.state.preferredAccountTypes?.[e]===io.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:t.sendTokenAmount,network:B.state.activeCaipNetwork?.caipNetworkId||""}}),ct.showError("Something went wrong")}},async sendERC20Token(t){ne.pushTransactionStack({view:"Account",goBack:!1});const e=pe.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));try{if(ge.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const r=X.getPlainAddress(t.tokenAddress);await pe.writeContract({fromAddress:ge.state.address,tokenAddress:r,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:DW.getERC20Abi(r),chainNamespace:"eip155"}),ct.showSuccess("Transaction started"),this.resetSend()}}catch(r){console.error("SendController:sendERC20Token - failed to send erc20 token",r);const n=r instanceof Error?r.message:"Unknown error";Ae.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:n,isSmartAccount:ge.state.preferredAccountTypes?.eip155===io.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:t.sendTokenAmount,network:B.state.activeCaipNetwork?.caipNetworkId||""}}),ct.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){ct.showError("Please enter a valid amount and receiver address");return}ne.pushTransactionStack({view:"Account",goBack:!1}),pe.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),ge.fetchTokenBalance()}).catch(t=>{ct.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",t)})},resetSend(){Re.token=void 0,Re.sendTokenAmount=void 0,Re.receiverAddress=void 0,Re.receiverProfileImageUrl=void 0,Re.receiverProfileName=void 0,Re.loading=!1,Re.tokenBalances=[]}},Gm={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Af={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ie=at({chains:jW(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),B={state:ie,subscribe(t){return Ir(ie,()=>{t(ie)})},subscribeKey(t,e){return Rr(ie,t,e)},subscribeChainProp(t,e,r){let n;return Ir(ie.chains,()=>{const i=r||ie.activeChain;if(i){const s=ie.chains.get(i)?.[t];n!==s&&(n=s,e(s))}})},initialize(t,e,r){const{chainId:n,namespace:i}=he.getActiveNetworkProps(),s=e?.find(l=>l.id.toString()===n?.toString()),a=t.find(l=>l?.namespace===i)||t?.[0],c=new Set([...e?.map(l=>l.chainNamespace)??[]]);(t?.length===0||!a)&&(ie.noAdapters=!0),ie.noAdapters||(ie.activeChain=a?.namespace,ie.activeCaipNetwork=s,this.setChainNetworkData(a?.namespace,{caipNetwork:s}),ie.activeChain&&ds.set({activeChain:a?.namespace})),c.forEach(l=>{const u=e?.filter(d=>d.chainNamespace===l);B.state.chains.set(l,{namespace:l,networkState:at({...Af,caipNetwork:u?.[0]}),accountState:at(Gm),caipNetworks:u??[],...r}),this.setRequestedCaipNetworks(u??[],l)})},removeAdapter(t){if(ie.activeChain===t){const e=Array.from(ie.chains.entries()).find(([r])=>r!==t);if(e){const r=e[1]?.caipNetworks?.[0];r&&this.setActiveCaipNetwork(r)}}ie.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){ie.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Af,caipNetwork:n[0]},accountState:Gm,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),this.setRequestedCaipNetworks(n?.filter(i=>i.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=ie.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];e.caipNetworks?.find(n=>n.id===t.id)||r.push(t),ie.chains.set(t.chainNamespace,{...e,caipNetworks:r}),this.setRequestedCaipNetworks(r,t.chainNamespace)}},removeNetwork(t,e){const r=ie.chains.get(t);if(r){const n=ie.activeCaipNetwork?.id===e,i=[...r.caipNetworks?.filter(s=>s.id!==e)||[]];n&&r?.caipNetworks?.[0]&&this.setActiveCaipNetwork(r.caipNetworks[0]),ie.chains.set(t,{...r,caipNetworks:i}),this.setRequestedCaipNetworks(i||[],t)}},setAdapterNetworkState(t,e){const r=ie.chains.get(t);r&&(r.networkState={...r.networkState||Af,...e},ie.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=ie.chains.get(t);if(n){const i={...n.accountState||Gm,...e};ie.chains.set(t,{...n,accountState:i}),(ie.chains.size===1||ie.activeChain===t)&&(e.caipAddress&&(ie.activeCaipAddress=e.caipAddress),ge.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const r=ie.chains.get(t);if(r){const n={...r.networkState||Af,...e};ie.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){this.setChainAccountData(r,{[t]:e},n),t==="status"&&e==="disconnected"&&r&&oe.removeConnectorId(r)},setActiveNamespace(t){ie.activeChain=t;const e=t?ie.chains.get(t):void 0,r=e?.networkState?.caipNetwork;r?.id&&t&&(ie.activeCaipAddress=e?.accountState?.caipAddress,ie.activeCaipNetwork=r,this.setChainNetworkData(t,{caipNetwork:r}),he.setActiveCaipNetworkId(r?.caipNetworkId),ds.set({activeChain:t,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;ie.activeChain!==t.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=ie.chains.get(t.chainNamespace);ie.activeChain=t.chainNamespace,ie.activeCaipNetwork=t,this.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?ie.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:ie.activeCaipAddress=void 0,this.setAccountProp("caipAddress",ie.activeCaipAddress,t.chainNamespace),e&&ge.replaceState(e.accountState),YC.resetSend(),ds.set({activeChain:ie.activeChain,selectedNetworkId:ie.activeCaipNetwork?.caipNetworkId}),he.setActiveCaipNetworkId(t.caipNetworkId),!this.checkIfSupportedNetwork(t.chainNamespace)&&G.state.enableNetworkSwitch&&!G.state.allowUnsupportedChain&&!pe.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=ie.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==B.state.activeChain,r=B.getNetworkData(t)?.caipNetwork,n=B.getCaipNetworkByNamespace(t,r?.id);e&&n&&await B.switchActiveNetwork(n)},async switchActiveNetwork(t){!B.state.chains.get(B.state.activeChain)?.caipNetworks?.some(i=>i.id===ie.activeCaipNetwork?.id)&&ne.goBack();const n=this.getNetworkControllerClient(t.chainNamespace);n&&(await n.switchCaipNetwork(t),Ae.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}}))},getNetworkControllerClient(t){const e=t||ie.activeChain,r=ie.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||ie.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=ie.chains.get(e);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(t,e){let r=ie.activeChain;if(e&&(r=e),!r)return;const n=ie.chains.get(r)?.accountState;if(n)return n[t]},getNetworkProp(t,e){const r=ie.chains.get(e)?.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=ie.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=e?.networkState||{};return X.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const t=[];return ie.chains.forEach(e=>{const r=this.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:t})},getAllApprovedCaipNetworkIds(){const t=[];return ie.chains.forEach(e=>{const r=this.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(){return ie.activeCaipNetwork},getActiveCaipAddress(){return ie.activeCaipAddress},getApprovedCaipNetworkIds(t){return ie.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const r=await this.getNetworkControllerClient()?.getApprovedCaipNetworksData();this.setAdapterNetworkState(t,{approvedCaipNetworkIds:r?.approvedCaipNetworkIds,supportsAllNetworks:r?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||ie.activeCaipNetwork,n=this.getRequestedCaipNetworks(t);return n.length?n?.some(i=>i.id===r?.id):!0},checkIfSupportedChainId(t){return ie.activeChain?this.getRequestedCaipNetworks(ie.activeChain)?.some(r=>r.id===t):!0},setSmartAccountEnabledNetworks(t,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=V8.caipNetworkIdToNumber(ie.activeCaipNetwork?.caipNetworkId),e=ie.activeChain;return!e||!t?!1:!!this.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},getActiveNetworkTokenAddress(){const t=ie.activeCaipNetwork?.chainNamespace||"eip155",e=ie.activeCaipNetwork?.id||1,r=Bt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`},showUnsupportedChainUI(){De.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ie.activeCaipNetwork;return!!(t?.chainNamespace&&Bt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){this.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");ie.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),oe.removeConnectorId(e)},async disconnect(t){const e=QW(t);try{YC.resetSend();const r=await Promise.allSettled(e.map(async([i,s])=>{try{const{caipAddress:o}=this.getAccountData(i)||{};o&&s.connectionControllerClient?.disconnect&&await s.connectionControllerClient.disconnect(i),this.resetAccount(i),this.resetNetwork(i)}catch(o){throw new Error(`Failed to disconnect chain ${i}: ${o.message}`)}}));pe.resetWcConnection();const n=r.filter(i=>i.status==="rejected");if(n.length>0)throw new Error(n.map(i=>i.reason.message).join(", "));he.deleteConnectedSocialProvider(),t?oe.removeConnectorId(t):oe.resetConnectorIds(),Ae.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),Ae.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(t){ie.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(ie.chains.forEach(r=>{de.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(n=>n===r.namespace)&&r.namespace&&t.push(r.namespace)}),t.length>0){const r=t[0];return e=r?ie.chains.get(r)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){return t?B.state.chains.get(t)?.accountState:ge.state},getNetworkData(t){const e=t||ie.activeChain;if(e)return B.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const r=B.state.chains.get(t),n=r?.caipNetworks?.find(i=>i.id===e);return n||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=oe.state.filterByNamespace;return(t?[ie.chains.get(t)]:Array.from(ie.chains.values())).flatMap(r=>r?.caipNetworks||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?B.getRequestedCaipNetworks(t):B.getAllRequestedCaipNetworks()}},PJ={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},JC=X.getBlockchainApiUrl(),yn=at({clientId:null,api:new sf({baseUrl:JC,clientId:null}),supportedChains:{http:[],ws:[]}}),ve={state:yn,async get(t){const{st:e,sv:r}=ve.getSdkProperties(),n=G.state.projectId,i={...t.params||{},st:e,sv:r,projectId:n};return yn.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=G.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{yn.supportedChains.http.length||await ve.getSupportedNetworks()}catch{return!1}return yn.supportedChains.http.includes(t)},async getSupportedNetworks(){const t=await ve.get({path:"v1/supported-chains"});return yn.supportedChains=t,t},async fetchIdentity({address:t,caipNetworkId:e}){if(!await ve.isNetworkSupported(e))return{avatar:"",name:""};const n=he.getIdentityFromCacheForAddress(t);if(n)return n;const i=await ve.get({path:`/v1/identity/${t}`,params:{sender:B.state.activeCaipAddress?X.getPlainAddress(B.state.activeCaipAddress):void 0}});return he.updateIdentityCache({address:t,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:t,cursor:e,onramp:r,signal:n,cache:i,chainId:s}){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?ve.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:r,chainId:s},signal:n,cache:i}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:i}){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?ve.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?ve.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?yn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:G.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?ve.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:r}=ve.getSdkProperties();if(!await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return ve.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:i}){if(!await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return yn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Bt.CONVERT_SLIPPAGE_TOLERANCE},projectId:G.state.projectId,from:e,to:r,userAddress:n,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){const{st:n,sv:i}=ve.getSdkProperties();if(!await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return ve.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:i}})},async getBalance(t,e,r){const{st:n,sv:i}=ve.getSdkProperties();if(!await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId))return ct.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=he.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await ve.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:i}});return he.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?ve.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?ve.get({path:`/v1/profile/reverse/${t}`,params:{sender:ge.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?ve.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?yn.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:i}){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?(await yn.api.post({path:"/v1/generators/onrampurl",params:{projectId:G.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:i}})).url:""},async getOnrampOptions(){if(!await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await ve.get({path:"/v1/onramp/options"})}catch{return PJ}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){try{return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?await yn.api.post({path:"/v1/onramp/quote",params:{projectId:G.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{coinbaseFee:{amount:r,currency:e.id},networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?ve.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){return await ve.isNetworkSupported(B.state.activeCaipNetwork?.caipNetworkId)?yn.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:G.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){yn.clientId=t,yn.api=new sf({baseUrl:JC,clientId:t})}},Dn=at({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),ge={state:Dn,replaceState(t){t&&Object.assign(Dn,Qo(t))},subscribe(t){return B.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return B.subscribeChainProp("accountState",i=>{if(i){const s=i[t];n!==s&&(n=s,e(s))}},r)},setStatus(t,e){B.setAccountProp("status",t,e)},getCaipAddress(t){return B.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const r=t?X.getPlainAddress(t):void 0;e===B.state.activeChain&&(B.state.activeCaipAddress=t),B.setAccountProp("caipAddress",t,e),B.setAccountProp("address",r,e)},setBalance(t,e,r){B.setAccountProp("balance",t,r),B.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){B.setAccountProp("profileName",t,e)},setProfileImage(t,e){B.setAccountProp("profileImage",t,e)},setUser(t,e){B.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){B.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){B.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){B.setAccountProp("currentTab",t,B.state.activeChain)},setTokenBalance(t,e){t&&B.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){B.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){B.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,r){const n=B.getAccountProp("addressLabels",r)||new Map;n.set(t,e),B.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){const r=B.getAccountProp("addressLabels",e)||new Map;r.delete(t),B.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){B.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){B.setAccountProp("preferredAccountTypes",{...Dn.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Dn.preferredAccountTypes=t},setSocialProvider(t,e){t&&B.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){B.setAccountProp("socialWindow",t?Qo(t):void 0,e)},setFarcasterUrl(t,e){B.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){Dn.balanceLoading=!0;const e=B.state.activeCaipNetwork?.caipNetworkId,r=B.state.activeCaipNetwork?.chainNamespace,n=B.state.activeCaipAddress,i=n?X.getPlainAddress(n):void 0;if(Dn.lastRetry&&!X.isAllowedRetry(Dn.lastRetry,30*Bt.ONE_SEC_MS))return Dn.balanceLoading=!1,[];try{if(i&&e&&r){const o=(await ve.getBalance(i,e)).balances.filter(a=>a.quantity.decimals!=="0");return this.setTokenBalance(o,r),Dn.lastRetry=void 0,Dn.balanceLoading=!1,o}}catch(s){Dn.lastRetry=Date.now(),t?.(s),ct.showError("Token Balance Unavailable")}finally{Dn.balanceLoading=!1}return[]},resetAccount(t){B.resetAccount(t)}},Yr=at({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),De={state:Yr,subscribe(t){return Ir(Yr,()=>t(Yr))},subscribeKey(t,e){return Rr(Yr,t,e)},async open(t){const e=ge.state.status==="connected";pe.state.wcBasic?se.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await se.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),t?.namespace?(await B.switchActiveNamespace(t.namespace),De.setLoading(!0,t.namespace)):De.setLoading(!0),oe.setFilterByNamespace(t?.namespace);const r=B.getAccountData(t?.namespace)?.caipAddress;B.state.noAdapters&&!r?X.isMobile()?ne.reset("AllWallets"):ne.reset("ConnectingWalletConnectBasic"):t?.view?ne.reset(t.view,t.data):r?ne.reset("Account"):ne.reset("Connect"),Yr.open=!0,ds.set({open:!0}),Ae.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(){const t=G.state.enableEmbedded,e=!!B.state.activeCaipAddress;Yr.open&&Ae.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Yr.open=!1,De.clearLoading(),t?e?ne.replace("Account"):ne.push("Connect"):ds.set({open:!1}),pe.resetUri()},setLoading(t,e){e&&Yr.loadingNamespaceMap.set(e,t),Yr.loading=t,ds.set({loading:t})},clearLoading(){Yr.loadingNamespaceMap.clear(),Yr.loading=!1},shake(){Yr.shake||(Yr.shake=!0,setTimeout(()=>{Yr.shake=!1},500))}},XC={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]};at({providers:zW,selectedProvider:null,error:null,purchaseCurrency:XC,paymentCurrency:{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},purchaseCurrencies:[XC],paymentCurrencies:[],quotesLoading:!1});const OJ={initializing:!1,initialized:!1,loadingPrices:!1,loadingQuote:!1,loadingApprovalTransaction:!1,loadingBuildTransaction:!1,loadingTransaction:!1,fetchError:!1,approvalTransaction:void 0,swapTransaction:void 0,transactionError:void 0,sourceToken:void 0,sourceTokenAmount:"",sourceTokenPriceInUSD:0,toToken:void 0,toTokenAmount:"",toTokenPriceInUSD:0,networkPrice:"0",networkBalanceInUSD:"0",networkTokenSymbol:"",inputError:void 0,slippage:Bt.CONVERT_SLIPPAGE_TOLERANCE,tokens:void 0,popularTokens:void 0,suggestedTokens:void 0,foundTokens:void 0,myTokensWithBalance:void 0,tokensPriceMap:{},gasFee:"0",gasPriceInUSD:0,priceImpact:void 0,maxSlippage:void 0,providerFee:void 0};at(OJ);const ni=at({message:"",open:!1,triggerRect:{width:0,height:0,top:0,left:0},variant:"shade"}),tl={state:ni,subscribe(t){return Ir(ni,()=>t(ni))},subscribeKey(t,e){return Rr(ni,t,e)},showTooltip({message:t,triggerRect:e,variant:r}){ni.open=!0,ni.message=t,ni.triggerRect=e,ni.variant=r},hide(){ni.open=!1,ni.message="",ni.triggerRect={width:0,height:0,top:0,left:0}}},QC=2147483648,NJ={convertEVMChainIdToCoinType(t){if(t>=QC)throw new Error("Invalid chainId");return(QC|t)>>>0}},Bn=at({suggestions:[],loading:!1}),e9={state:Bn,subscribe(t){return Ir(Bn,()=>t(Bn))},subscribeKey(t,e){return Rr(Bn,t,e)},async resolveName(t){try{return await ve.lookupEnsName(t)}catch(e){const r=e;throw new Error(r?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await ve.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Bn.loading=!0,Bn.suggestions=[];const e=await ve.getEnsNameSuggestions(t);return Bn.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],Bn.suggestions}catch(e){const r=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{Bn.loading=!1}},async getNamesForAddress(t){try{if(!B.state.activeCaipNetwork)return[];const r=he.getEnsFromCacheForAddress(t);if(r)return r;const n=await ve.reverseLookupEnsName({address:t});return he.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=B.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const r=ge.state.address,n=oe.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");Bn.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ne.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){Bn.loading=!1}});const s=await pe.signMessage(i),o=e.id;if(!o)throw new Error("Network not found");const a=NJ.convertEVMChainIdToCoinType(Number(o));await ve.registerEnsName({coinType:a,address:r,signature:s,message:i}),ge.setProfileName(t,e.chainNamespace),ne.replace("RegisterAccountNameSuccess")}catch(i){const s=this.parseEnsApiError(i,`Error registering name ${t}`);throw ne.replace("RegisterAccountName"),new Error(s)}finally{Bn.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}};at({isLegalCheckboxChecked:!1});var TJ=Object.defineProperty,kJ=(t,e,r)=>e in t?TJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,t9=(t,e,r)=>kJ(t,typeof e!="symbol"?e+"":e,r);class RJ extends cn{constructor(e){super(),this.opts=e,t9(this,"protocol","wc"),t9(this,"version",2)}}var DJ=Object.defineProperty,BJ=(t,e,r)=>e in t?DJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,UJ=(t,e,r)=>BJ(t,typeof e!="symbol"?e+"":e,r);class LJ extends cn{constructor(e,r){super(),this.core=e,this.logger=r,UJ(this,"records",new Map)}}class FJ{constructor(e,r){this.logger=e,this.core=r}}class MJ extends cn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class jJ extends cn{constructor(e){super()}}class zJ{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}}class qJ extends cn{constructor(e,r){super(),this.relayer=e,this.logger=r}}class HJ extends cn{constructor(e,r){super(),this.core=e,this.logger=r}}class WJ{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}}class VJ{constructor(e,r){this.projectId=e,this.logger=r}}class KJ{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}}var GJ=Object.defineProperty,ZJ=(t,e,r)=>e in t?GJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,r9=(t,e,r)=>ZJ(t,typeof e!="symbol"?e+"":e,r);class YJ{constructor(e){this.opts=e,r9(this,"protocol","wc"),r9(this,"version",2)}}class JJ{constructor(e){this.client=e}}function Sd(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function n9(t){return Sd(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const i9="2.23.2";let Zm={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${i9}`};class ca extends Error{constructor(e,r={}){const n=r.cause instanceof ca?r.cause.details:r.cause?.message?r.cause.message:r.details,i=r.cause instanceof ca&&r.cause.docsPath||r.docsPath,s=Zm.getDocsUrl?.({...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...Zm.version?[`Version: ${Zm.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=i9}walk(e){return s9(this,e)}}function s9(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?s9(t.cause,e):e?null:t}class o9 extends ca{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function rl(t,{dir:e,size:r=32}={}){return typeof t=="string"?XJ(t,{dir:e,size:r}):QJ(t,{dir:e,size:r})}function XJ(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new o9({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function QJ(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new o9({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class eX extends ca{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class tX extends ca{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function nl(t,{size:e}){if(n9(t)>e)throw new tX({givenSize:n9(t),maxSize:e})}function Ym(t,e={}){const{signed:r}=e;e.size&&nl(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function rX(t,e={}){return Number(Ym(t,e))}const nX=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Jm(t,e={}){return typeof t=="number"||typeof t=="bigint"?c9(t,e):typeof t=="string"?oX(t,e):typeof t=="boolean"?iX(t,e):a9(t,e)}function iX(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(nl(r,{size:e.size}),rl(r,{size:e.size})):r}function a9(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=nX[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(nl(n,{size:e.size}),rl(n,{dir:"right",size:e.size})):n}function c9(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new eX({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?rl(a,{size:n}):a}const sX=new TextEncoder;function oX(t,e={}){const r=sX.encode(t);return a9(r,e)}const aX=new TextEncoder;function cX(t,e={}){return typeof t=="number"||typeof t=="bigint"?uX(t,e):typeof t=="boolean"?lX(t,e):Sd(t)?u9(t,e):d9(t,e)}function lX(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(nl(r,{size:e.size}),rl(r,{size:e.size})):r}const ms={zero:48,nine:57,A:65,F:70,a:97,f:102};function l9(t){if(t>=ms.zero&&t<=ms.nine)return t-ms.zero;if(t>=ms.A&&t<=ms.F)return t-(ms.A-10);if(t>=ms.a&&t<=ms.f)return t-(ms.a-10)}function u9(t,e={}){let r=t;e.size&&(nl(r,{size:e.size}),r=rl(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,a=0;o<i;o++){const c=l9(n.charCodeAt(a++)),l=l9(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new ca(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);s[o]=c*16+l}return s}function uX(t,e){const r=c9(t,e);return u9(r)}function d9(t,e={}){const r=aX.encode(t);return typeof e.size=="number"?(nl(r,{size:e.size}),rl(r,{dir:"right",size:e.size})):r}function h9(t,e){const r=e||"hex",n=Po(Sd(t,{strict:!1})?cX(t):t);return r==="bytes"?n:Jm(n)}class p9 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const Xm=new p9(8192);function dX(t,e){if(Xm.has(`${t}.${e}`))return Xm.get(`${t}.${e}`);const r=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),n=h9(d9(r),"bytes"),i=(e?r.substring(`${e}0x`.length):r).split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return Xm.set(`${t}.${e}`,s),s}function hX(t){const e=h9(`0x${t.substring(4)}`).substring(26);return dX(`0x${e}`)}async function pX({hash:t,signature:e}){const r=Sd(t)?t:Jm(t),{secp256k1:n}=await Promise.resolve().then(function(){return Vv});return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),g=f9(f);return new n.Signature(Ym(l),Ym(u)).addRecoveryBit(g)}const o=Sd(e)?e:Jm(e),a=rX(`0x${o.slice(130)}`),c=f9(a);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function f9(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function fX({hash:t,signature:e}){return hX(await pX({hash:t,signature:e}))}new p9(128);const gX="0.1.1";function wX(){return gX}class Lr extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof Lr){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause?.message?r.cause.message:r.details})(),i=r.cause instanceof Lr&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${wX()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return g9(this,e)}}function g9(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?g9(t.cause,e):e?null:t}function mX(t,e){if(b9(t)>e)throw new _X({givenSize:b9(t),maxSize:e})}const bs={zero:48,nine:57,A:65,F:70,a:97,f:102};function w9(t){if(t>=bs.zero&&t<=bs.nine)return t-bs.zero;if(t>=bs.A&&t<=bs.F)return t-(bs.A-10);if(t>=bs.a&&t<=bs.f)return t-(bs.a-10)}function bX(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new IX({size:t.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let s=0;s<n;s++){const o=r==="right";i[o?s:n-s-1]=t[o?s:t.length-s-1]}return i}function Qm(t,e){if(tb(t)>e)throw new kX({givenSize:tb(t),maxSize:e})}function m9(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const i=t.replace("0x","");if(i.length>n*2)throw new RX({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const yX=new TextEncoder;function vX(t){return t instanceof Uint8Array?t:typeof t=="string"?CX(t):EX(t)}function EX(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function CX(t,e={}){const{size:r}=e;let n=t;r&&(Qm(t,r),n=eb(t,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,c=0;a<s;a++){const l=w9(i.charCodeAt(c++)),u=w9(i.charCodeAt(c++));if(l===void 0||u===void 0)throw new Lr(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);o[a]=l*16+u}return o}function xX(t,e={}){const{size:r}=e,n=yX.encode(t);return typeof r=="number"?(mX(n,r),$X(n,r)):n}function $X(t,e){return bX(t,{dir:"right",size:e})}function b9(t){return t.length}class _X extends Lr{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class IX extends Lr{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}const SX=new TextEncoder,AX=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function y9(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function PX(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Qm(r,e.size),Pf(r,e.size)):r}function v9(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=AX[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(Qm(n,e.size),eb(n,e.size)):n}function OX(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const l=typeof t=="bigint"?"n":"";throw new TX({max:s?`${s}${l}`:void 0,min:`${o}${l}`,signed:r,size:n,value:`${t}${l}`})}const c=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?Pf(c,n):c}function NX(t,e={}){return v9(SX.encode(t),e)}function Pf(t,e){return m9(t,{dir:"left",size:e})}function eb(t,e){return m9(t,{dir:"right",size:e})}function tb(t){return Math.ceil((t.length-2)/2)}class TX extends Lr{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class kX extends Lr{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class RX extends Lr{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function DX(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=Po(vX(t));return r==="Bytes"?n:v9(n)}class BX extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const rb={checksum:new BX(8192)}.checksum,UX=/^0x[a-fA-F0-9]{40}$/;function E9(t,e={}){const{strict:r=!0}=e;if(!UX.test(t))throw new C9({address:t,cause:new FX});if(r){if(t.toLowerCase()===t)return;if(LX(t)!==t)throw new C9({address:t,cause:new MX})}}function LX(t){if(rb.has(t))return rb.get(t);E9(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=DX(xX(e),{as:"Bytes"}),n=e.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());const i=`0x${n.join("")}`;return rb.set(t,i),i}class C9 extends Lr{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class FX extends Lr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class MX extends Lr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const jX=/^(.*)\[([0-9]*)\]$/,zX=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,qX=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function nb(t,e){if(t.length!==e.length)throw new WX({expectedLength:t.length,givenLength:e.length});const r=[];for(let n=0;n<t.length;n++){const i=t[n],s=e[n];r.push(nb.encode(i,s))}return y9(...r)}(function(t){function e(r,n,i=!1){if(r==="address"){const c=n;return E9(c),Pf(c.toLowerCase(),i?32:0)}if(r==="string")return NX(n);if(r==="bytes")return n;if(r==="bool")return Pf(PX(n),i?32:1);const s=r.match(qX);if(s){const[c,l,u="256"]=s,d=Number.parseInt(u)/8;return OX(n,{size:i?32:d,signed:l==="int"})}const o=r.match(zX);if(o){const[c,l]=o;if(Number.parseInt(l)!==(n.length-2)/2)throw new HX({expectedSize:Number.parseInt(l),value:n});return eb(n,i?32:0)}const a=r.match(jX);if(a&&Array.isArray(n)){const[c,l]=a,u=[];for(let d=0;d<n.length;d++)u.push(e(l,n[d],!0));return u.length===0?"0x":y9(...u)}throw new VX(r)}t.encode=e})(nb||(nb={}));class HX extends Lr{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${tb(r)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class WX extends Lr{constructor({expectedLength:e,givenLength:r}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${r}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class VX extends Lr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}const KX=":";function il(t){const[e,r]=t.split(KX);return{namespace:e,reference:r}}function x9(t,e){return t.includes(":")?[t]:e.chains||[]}var GX=Object.defineProperty,ZX=Object.defineProperties,YX=Object.getOwnPropertyDescriptors,$9=Object.getOwnPropertySymbols,JX=Object.prototype.hasOwnProperty,XX=Object.prototype.propertyIsEnumerable,_9=(t,e,r)=>e in t?GX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,I9=(t,e)=>{for(var r in e||(e={}))JX.call(e,r)&&_9(t,r,e[r]);if($9)for(var r of $9(e))XX.call(e,r)&&_9(t,r,e[r]);return t},QX=(t,e)=>ZX(t,YX(e));const eQ="ReactNative",vn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},tQ="js";function Of(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function lo(){return!Mi()&&!!Xl()&&navigator.product===eQ}function rQ(){return lo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function nQ(){return lo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ad(){return!Of()&&!!Xl()&&!!Mi()}function Pd(){return lo()?vn.reactNative:Of()?vn.node:Ad()?vn.browser:vn.unknown}function S9(){var t;try{return lo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function iQ(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function sQ(t){var e,r;const n=A9();try{return t!=null&&t.url&&n.url&&t.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),QX(I9(I9({},n),t),{url:t?.url||n.url,name:t?.name||n.name,description:t?.description||n.description,icons:(r=t?.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(i){return console.warn("Error populating app metadata",i),t||n}}function A9(){return _1()||{name:"",description:"",url:"",icons:[""]}}function oQ(){if(Pd()===vn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=I2();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function aQ(){var t;const e=Pd();return e===vn.browser?[e,((t=x1())==null?void 0:t.host)||"unknown"].join(":"):e}function P9(t,e,r){const n=oQ(),i=aQ();return[[t,e].join("-"),[tQ,r].join("-"),n,i].join("/")}function cQ({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=P9(t,e,n),d={auth:i,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=iQ(l[1]||"",d);return l[0]+"?"+h}function la(t,e){return t.filter(r=>e.includes(r)).length===t.length}function ib(t){return Object.fromEntries(t.entries())}function sb(t){return new Map(Object.entries(t))}function ua(t=z.FIVE_MINUTES,e){const r=z.toMiliseconds(t||z.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),n=a,i=c})}}function uo(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function O9(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function lQ(t){return O9("topic",t)}function uQ(t){return O9("id",t)}function N9(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Mt(t,e){return z.fromMiliseconds((e||Date.now())+z.toMiliseconds(t))}function ho(t){return Date.now()>=z.toMiliseconds(t)}function Ke(t,e){return`${t}${e?`:${e}`:""}`}function Nf(t=[],e=[]){return[...new Set([...t,...e])]}async function dQ({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i?.href;if(typeof s!="string")return;const o=hQ(s,t,e),a=Pd();if(a===vn.browser){if(!((n=Mi())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}pQ(o)}else a===vn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function hQ(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${mQ(n,!0)}`}else i=`${i}/wc?${n}`;return i}function pQ(t){let e="_self";wQ()?e="_top":(gQ()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function fQ(t,e){let r="";try{if(Ad()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function T9(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function k9(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ob(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function gQ(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function wQ(){try{return window.self!==window.top}catch{return!1}}function mQ(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function R9(t){return Buffer.from(t,"base64").toString("utf-8")}function bQ(t){return new Promise(e=>setTimeout(e,t))}function Od(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function yQ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Nd(t,...e){if(!yQ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ab(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Od(t.outputLen),Od(t.blockLen)}function sl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function D9(t,e){Nd(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Tf=BigInt(2**32-1),B9=BigInt(32);function vQ(t,e=!1){return e?{h:Number(t&Tf),l:Number(t>>B9&Tf)}:{h:Number(t>>B9&Tf)|0,l:Number(t&Tf)|0}}function EQ(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=vQ(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const CQ=(t,e,r)=>t<<r|e>>>32-r,xQ=(t,e,r)=>e<<r|t>>>32-r,$Q=(t,e,r)=>e<<r-32|t>>>64-r,_Q=(t,e,r)=>t<<r-32|e>>>64-r,ol=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function IQ(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function cb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ai(t,e){return t<<32-e|t>>>e}const U9=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function SQ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function L9(t){for(let e=0;e<t.length;e++)t[e]=SQ(t[e])}function AQ(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function al(t){return typeof t=="string"&&(t=AQ(t)),Nd(t),t}function PQ(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Nd(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class lb{clone(){return this._cloneInto()}}function F9(t){const e=n=>t().update(al(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function cl(t=32){if(ol&&typeof ol.getRandomValues=="function")return ol.getRandomValues(new Uint8Array(t));if(ol&&typeof ol.randomBytes=="function")return ol.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const M9=[],j9=[],z9=[],OQ=BigInt(0),Td=BigInt(1),NQ=BigInt(2),TQ=BigInt(7),kQ=BigInt(256),RQ=BigInt(113);for(let t=0,e=Td,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],M9.push(2*(5*n+r)),j9.push((t+1)*(t+2)/2%64);let i=OQ;for(let s=0;s<7;s++)e=(e<<Td^(e>>TQ)*RQ)%kQ,e&NQ&&(i^=Td<<(Td<<BigInt(s))-Td);z9.push(i)}const[DQ,BQ]=EQ(z9,!0),q9=(t,e,r)=>r>32?$Q(t,e,r):CQ(t,e,r),H9=(t,e,r)=>r>32?_Q(t,e,r):xQ(t,e,r);function UQ(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],d=q9(l,u,1)^r[a],h=H9(l,u,1)^r[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=j9[o],c=q9(i,s,a),l=H9(i,s,a),u=M9[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=DQ[n],t[1]^=BQ[n]}r.fill(0)}class ub extends lb{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Od(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=IQ(this.state)}keccak(){U9||L9(this.state32),UQ(this.state32,this.rounds),U9||L9(this.state32),this.posOut=0,this.pos=0}update(e){sl(this);const{blockLen:r,state:n}=this;e=al(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){sl(this,!1),Nd(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Od(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(D9(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new ub(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const LQ=(t,e,r)=>F9(()=>new ub(e,t,r)),FQ=LQ(1,136,256/8),MQ="https://rpc.walletconnect.org/v1";function W9(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(FQ(r)).toString("hex")}async function jQ(t,e,r,n,i,s){switch(r.t){case"eip191":return await zQ(t,e,r.s);case"eip1271":return await qQ(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function zQ(t,e,r){return(await fX({hash:W9(e),signature:r})).toLowerCase()===t.toLowerCase()}async function qQ(t,e,r,n,i,s){const o=il(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),d=W9(e).substring(2),h=a+d+c+l+u,f=await fetch(`${s||MQ}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:HQ(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:g}=await f.json();return g?g.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function HQ(){return Date.now()+Math.floor(Math.random()*1e3)}function WQ(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return rg.encode(s)}var VQ=Object.defineProperty,KQ=Object.defineProperties,GQ=Object.getOwnPropertyDescriptors,V9=Object.getOwnPropertySymbols,ZQ=Object.prototype.hasOwnProperty,YQ=Object.prototype.propertyIsEnumerable,K9=(t,e,r)=>e in t?VQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,JQ=(t,e)=>{for(var r in e||(e={}))ZQ.call(e,r)&&K9(t,r,e[r]);if(V9)for(var r of V9(e))YQ.call(e,r)&&K9(t,r,e[r]);return t},XQ=(t,e)=>KQ(t,GQ(e));const QQ="did:pkh:",db=t=>t?.split(":"),eee=t=>{const e=t&&db(t);if(e)return t.includes(QQ)?e[3]:e[1]},hb=t=>{const e=t&&db(t);if(e)return e[2]+":"+e[3]},kf=t=>{const e=t&&db(t);if(e)return e.pop()};async function G9(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=Z9(i,i.iss),o=kf(i.iss);return await jQ(o,s,n,hb(i.iss),r)}const Z9=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=kf(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${eee(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(w=>`
- ${w}`).join("")}`:void 0,g=Rf(t.resources);if(g){const w=kd(g);i=lee(i,w)}return[r,n,"",i,"",s,o,a,c,l,u,d,h,f].filter(w=>w!=null).join(`
`)};function tee(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function ree(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function da(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function nee(t,e,r,n={}){return r?.sort((i,s)=>i.localeCompare(s)),{att:{[t]:iee(e,r,n)}}}function iee(t,e,r={}){e=e?.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function Y9(t){return da(t),`urn:recap:${tee(t).replace(/=/g,"")}`}function kd(t){const e=ree(t.replace("urn:recap:",""));return da(e),e}function see(t,e,r){const n=nee(t,e,r);return Y9(n)}function oee(t){return t&&t.includes("urn:recap:")}function aee(t,e){const r=kd(t),n=kd(e),i=cee(r,n);return Y9(i)}function cee(t,e){da(t),da(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;n.att[i]=XQ(JQ({},n.att[i]),{[a]:((c=t.att[i])==null?void 0:c[a])||((l=e.att[i])==null?void 0:l[a])})})}),n}function lee(t="",e){da(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(i++,`(${i}) '${d}': '${l[d].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function J9(t){var e;const r=kd(t);da(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function X9(t){const e=kd(t);da(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i?.[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function Rf(t){if(!t)return;const e=t?.[t.length-1];return oee(e)?e:void 0}function pb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Q9(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function En(t,...e){if(!Q9(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function e7(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function uee(t,e){En(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function t7(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const po=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),dee=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function hee(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function fb(t){if(typeof t=="string")t=hee(t);else if(Q9(t))t=gb(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function pee(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function fee(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const gee=(t,e)=>{function r(n,...i){if(En(n),t.nonceLength!==void 0){const l=i[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?En(l):En(l,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&En(i[1]);const o=e(n,...i),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");En(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,En(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(En(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function r7(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!wee(e))throw new Error("invalid output, must be aligned");return e}function n7(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function wee(t){return t.byteOffset%4===0}function gb(t){return Uint8Array.from(t)}function ll(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const i7=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),mee=i7("expand 16-byte k"),bee=i7("expand 32-byte k"),yee=po(mee),vee=po(bee);function Me(t,e){return t<<e|t>>>32-e}function wb(t){return t.byteOffset%4===0}const Df=64,Eee=16,s7=2**32-1,o7=new Uint32Array;function Cee(t,e,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(Df),u=po(l),d=wb(i)&&wb(s),h=d?po(i):o7,f=d?po(s):o7;for(let g=0;g<c;o++){if(t(e,r,n,u,o,a),o>=s7)throw new Error("arx: counter overflow");const w=Math.min(Df,c-g);if(d&&w===Df){const p=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let b=0,m;b<Eee;b++)m=p+b,f[m]=h[m]^u[b];g+=Df;continue}for(let p=0,b;p<w;p++)b=g+p,s[b]=i[b]^l[p];g+=w}}function xee(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=pee({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return pb(i),pb(o),t7(s),t7(r),(a,c,l,u,d=0)=>{En(a),En(c),En(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),En(u),pb(d),d<0||d>=s7)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let g=a.length,w,p;if(g===32)f.push(w=gb(a)),p=vee;else if(g===16&&r)w=new Uint8Array(32),w.set(a),w.set(a,16),p=yee,f.push(w);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);wb(c)||f.push(c=gb(c));const b=po(w);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(p,b,po(c.subarray(0,16)),b),c=c.subarray(16)}const m=16-i;if(m!==c.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(m!==12){const C=new Uint8Array(12);C.set(c,s?0:12-c.length),c=C,f.push(c)}const E=po(c);return Cee(t,p,b,E,l,u,d,o),ll(...f),u}}const wr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class $ee{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=fb(e),En(e,32);const r=wr(e,0),n=wr(e,2),i=wr(e,4),s=wr(e,6),o=wr(e,8),a=wr(e,10),c=wr(e,12),l=wr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=wr(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],g=o[7],w=o[8],p=o[9],b=wr(e,r+0),m=wr(e,r+2),E=wr(e,r+4),C=wr(e,r+6),P=wr(e,r+8),S=wr(e,r+10),I=wr(e,r+12),N=wr(e,r+14);let $=s[0]+(b&8191),D=s[1]+((b>>>13|m<<3)&8191),T=s[2]+((m>>>10|E<<6)&8191),R=s[3]+((E>>>7|C<<9)&8191),M=s[4]+((C>>>4|P<<12)&8191),x=s[5]+(P>>>1&8191),y=s[6]+((P>>>14|S<<2)&8191),v=s[7]+((S>>>11|I<<5)&8191),A=s[8]+((I>>>8|N<<8)&8191),O=s[9]+(N>>>5|i),_=0,k=_+$*a+D*(5*p)+T*(5*w)+R*(5*g)+M*(5*f);_=k>>>13,k&=8191,k+=x*(5*h)+y*(5*d)+v*(5*u)+A*(5*l)+O*(5*c),_+=k>>>13,k&=8191;let L=_+$*c+D*a+T*(5*p)+R*(5*w)+M*(5*g);_=L>>>13,L&=8191,L+=x*(5*f)+y*(5*h)+v*(5*d)+A*(5*u)+O*(5*l),_+=L>>>13,L&=8191;let F=_+$*l+D*c+T*a+R*(5*p)+M*(5*w);_=F>>>13,F&=8191,F+=x*(5*g)+y*(5*f)+v*(5*h)+A*(5*d)+O*(5*u),_+=F>>>13,F&=8191;let H=_+$*u+D*l+T*c+R*a+M*(5*p);_=H>>>13,H&=8191,H+=x*(5*w)+y*(5*g)+v*(5*f)+A*(5*h)+O*(5*d),_+=H>>>13,H&=8191;let q=_+$*d+D*u+T*l+R*c+M*a;_=q>>>13,q&=8191,q+=x*(5*p)+y*(5*w)+v*(5*g)+A*(5*f)+O*(5*h),_+=q>>>13,q&=8191;let W=_+$*h+D*d+T*u+R*l+M*c;_=W>>>13,W&=8191,W+=x*a+y*(5*p)+v*(5*w)+A*(5*g)+O*(5*f),_+=W>>>13,W&=8191;let Y=_+$*f+D*h+T*d+R*u+M*l;_=Y>>>13,Y&=8191,Y+=x*c+y*a+v*(5*p)+A*(5*w)+O*(5*g),_+=Y>>>13,Y&=8191;let ae=_+$*g+D*f+T*h+R*d+M*u;_=ae>>>13,ae&=8191,ae+=x*l+y*c+v*a+A*(5*p)+O*(5*w),_+=ae>>>13,ae&=8191;let re=_+$*w+D*g+T*f+R*h+M*d;_=re>>>13,re&=8191,re+=x*u+y*l+v*c+A*a+O*(5*p),_+=re>>>13,re&=8191;let te=_+$*p+D*w+T*g+R*f+M*h;_=te>>>13,te&=8191,te+=x*d+y*u+v*l+A*c+O*a,_+=te>>>13,te&=8191,_=(_<<2)+_|0,_=_+k|0,k=_&8191,_=_>>>13,L+=_,s[0]=k,s[1]=L,s[2]=F,s[3]=H,s[4]=q,s[5]=W,s[6]=Y,s[7]=ae,s[8]=re,s[9]=te}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;ll(n)}update(e){e7(this);const{buffer:r,blockLen:n}=this;e=fb(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){ll(this.h,this.r,this.buffer,this.pad)}digestInto(e){e7(this),uee(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function _ee(t){const e=(n,i)=>t(i).update(fb(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Iee=_ee(t=>new $ee(t));function See(t,e,r,n,i,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],g=e[4],w=e[5],p=e[6],b=e[7],m=i,E=r[0],C=r[1],P=r[2],S=o,I=a,N=c,$=l,D=u,T=d,R=h,M=f,x=g,y=w,v=p,A=b,O=m,_=E,k=C,L=P;for(let H=0;H<s;H+=2)S=S+D|0,O=Me(O^S,16),x=x+O|0,D=Me(D^x,12),S=S+D|0,O=Me(O^S,8),x=x+O|0,D=Me(D^x,7),I=I+T|0,_=Me(_^I,16),y=y+_|0,T=Me(T^y,12),I=I+T|0,_=Me(_^I,8),y=y+_|0,T=Me(T^y,7),N=N+R|0,k=Me(k^N,16),v=v+k|0,R=Me(R^v,12),N=N+R|0,k=Me(k^N,8),v=v+k|0,R=Me(R^v,7),$=$+M|0,L=Me(L^$,16),A=A+L|0,M=Me(M^A,12),$=$+M|0,L=Me(L^$,8),A=A+L|0,M=Me(M^A,7),S=S+T|0,L=Me(L^S,16),v=v+L|0,T=Me(T^v,12),S=S+T|0,L=Me(L^S,8),v=v+L|0,T=Me(T^v,7),I=I+R|0,O=Me(O^I,16),A=A+O|0,R=Me(R^A,12),I=I+R|0,O=Me(O^I,8),A=A+O|0,R=Me(R^A,7),N=N+M|0,_=Me(_^N,16),x=x+_|0,M=Me(M^x,12),N=N+M|0,_=Me(_^N,8),x=x+_|0,M=Me(M^x,7),$=$+D|0,k=Me(k^$,16),y=y+k|0,D=Me(D^y,12),$=$+D|0,k=Me(k^$,8),y=y+k|0,D=Me(D^y,7);let F=0;n[F++]=o+S|0,n[F++]=a+I|0,n[F++]=c+N|0,n[F++]=l+$|0,n[F++]=u+D|0,n[F++]=d+T|0,n[F++]=h+R|0,n[F++]=f+M|0,n[F++]=g+x|0,n[F++]=w+y|0,n[F++]=p+v|0,n[F++]=b+A|0,n[F++]=m+O|0,n[F++]=E+_|0,n[F++]=C+k|0,n[F++]=P+L|0}const Aee=xee(See,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Pee=new Uint8Array(16),a7=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(Pee.subarray(r))},Oee=new Uint8Array(32);function c7(t,e,r,n,i){const s=t(e,r,Oee),o=Iee.create(s);i&&a7(o,i),a7(o,n);const a=new Uint8Array(16),c=dee(a);n7(c,0,BigInt(i?i.length:0),!0),n7(c,8,BigInt(n.length),!0),o.update(a);const l=o.digest();return ll(s,a),l}const Nee=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=r7(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=c7(t,e,r,a,n);return s.set(c,o),ll(c),s},decrypt(i,s){s=r7(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),c=c7(t,e,r,o,n);if(!fee(a,c))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),ll(c),s}}),l7=gee({blockSize:64,nonceLength:12,tagLength:16},Nee(Aee));class u7 extends lb{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,ab(e);const n=al(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return sl(this),this.iHash.update(e),this}digestInto(e){sl(this),Nd(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Bf=(t,e,r)=>new u7(t,e).update(r).digest();Bf.create=(t,e)=>new u7(t,e);function Tee(t,e,r){return ab(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Bf(t,al(r),al(e))}const mb=new Uint8Array([0]),d7=new Uint8Array;function kee(t,e,r,n=32){if(ab(t),Od(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=d7);const s=new Uint8Array(i*t.outputLen),o=Bf.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<i;l++)mb[0]=l+1,a.update(l===0?d7:c).update(r).update(mb).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),mb.fill(0),s.slice(0,n)}const Ree=(t,e,r,n,i)=>kee(t,Tee(t,e,r),n,i);function Dee(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}function Bee(t,e,r){return t&e^~t&r}function Uee(t,e,r){return t&e^t&r^e&r}class Lee extends lb{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=cb(this.buffer)}update(e){sl(this);const{view:r,buffer:n,blockLen:i}=this;e=al(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=cb(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){sl(this),D9(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let d=o;d<i;d++)r[d]=0;Dee(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=cb(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const Fee=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),go=new Uint32Array(64);class Mee extends Lee{constructor(){super(64,32,8,!1),this.A=fo[0]|0,this.B=fo[1]|0,this.C=fo[2]|0,this.D=fo[3]|0,this.E=fo[4]|0,this.F=fo[5]|0,this.G=fo[6]|0,this.H=fo[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)go[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const h=go[d-15],f=go[d-2],g=Ai(h,7)^Ai(h,18)^h>>>3,w=Ai(f,17)^Ai(f,19)^f>>>10;go[d]=w+go[d-7]+g+go[d-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Ai(a,6)^Ai(a,11)^Ai(a,25),f=u+h+Bee(a,c,l)+Fee[d]+go[d]|0,g=(Ai(n,2)^Ai(n,13)^Ai(n,22))+Uee(n,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=n,n=f+g|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,l,u)}roundClean(){go.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Rd=F9(()=>new Mee);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uf=BigInt(0),Lf=BigInt(1),jee=BigInt(2);function ha(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Dd(t){if(!ha(t))throw new Error("Uint8Array expected")}function ul(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const zee=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function dl(t){Dd(t);let e="";for(let r=0;r<t.length;r++)e+=zee[t[r]];return e}function hl(t){const e=t.toString(16);return e.length&1?"0"+e:e}function bb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Uf:BigInt("0x"+t)}const ys={_0:48,_9:57,A:65,F:70,a:97,f:102};function h7(t){if(t>=ys._0&&t<=ys._9)return t-ys._0;if(t>=ys.A&&t<=ys.F)return t-(ys.A-10);if(t>=ys.a&&t<=ys.f)return t-(ys.a-10)}function pl(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=h7(t.charCodeAt(s)),a=h7(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function pa(t){return bb(dl(t))}function Bd(t){return Dd(t),bb(dl(Uint8Array.from(t).reverse()))}function fl(t,e){return pl(t.toString(16).padStart(e*2,"0"))}function Ff(t,e){return fl(t,e).reverse()}function qee(t){return pl(hl(t))}function Cn(t,e,r){let n;if(typeof e=="string")try{n=pl(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(ha(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function Ud(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Dd(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function Hee(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Wee(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const yb=t=>typeof t=="bigint"&&Uf<=t;function Mf(t,e,r){return yb(t)&&yb(e)&&yb(r)&&e<=t&&t<r}function vs(t,e,r,n){if(!Mf(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function p7(t){let e;for(e=0;t>Uf;t>>=Lf,e+=1);return e}function Vee(t,e){return t>>BigInt(e)&Lf}function Kee(t,e,r){return t|(r?Lf:Uf)<<BigInt(e)}const vb=t=>(jee<<BigInt(t-1))-Lf,Eb=t=>new Uint8Array(t),f7=t=>Uint8Array.from(t);function g7(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Eb(t),i=Eb(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...u)=>r(i,n,...u),c=(u=Eb())=>{i=a(f7([0]),u),n=a(),u.length!==0&&(i=a(f7([1]),u),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){n=a();const h=n.slice();d.push(h),u+=n.length}return Ud(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const Gee={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ha(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function gl(t,e,r={}){const n=(i,s,o)=>{const a=Gee[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Zee=()=>{throw new Error("not implemented")};function Cb(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}var Yee=Object.freeze({__proto__:null,isBytes:ha,abytes:Dd,abool:ul,bytesToHex:dl,numberToHexUnpadded:hl,hexToNumber:bb,hexToBytes:pl,bytesToNumberBE:pa,bytesToNumberLE:Bd,numberToBytesBE:fl,numberToBytesLE:Ff,numberToVarBytesBE:qee,ensureBytes:Cn,concatBytes:Ud,equalBytes:Hee,utf8ToBytes:Wee,inRange:Mf,aInRange:vs,bitLen:p7,bitGet:Vee,bitSet:Kee,bitMask:vb,createHmacDrbg:g7,validateObject:gl,notImplemented:Zee,memoized:Cb});const tr=BigInt(0),St=BigInt(1),fa=BigInt(2),Jee=BigInt(3),xb=BigInt(4),w7=BigInt(5),m7=BigInt(8);function Jr(t,e){const r=t%e;return r>=tr?r:e+r}function b7(t,e,r){if(e<tr)throw new Error("invalid exponent, negatives unsupported");if(r<=tr)throw new Error("invalid modulus");if(r===St)return tr;let n=St;for(;e>tr;)e&St&&(n=n*t%r),t=t*t%r,e>>=St;return n}function ii(t,e,r){let n=t;for(;e-- >tr;)n*=n,n%=r;return n}function $b(t,e){if(t===tr)throw new Error("invert: expected non-zero number");if(e<=tr)throw new Error("invert: expected positive modulus, got "+e);let r=Jr(t,e),n=e,i=tr,s=St;for(;r!==tr;){const o=n/r,a=n%r,c=i-s*o;n=r,r=a,i=s,s=c}if(n!==St)throw new Error("invert: does not exist");return Jr(i,e)}function Xee(t){const e=(t-St)/fa;let r,n,i;for(r=t-St,n=0;r%fa===tr;r/=fa,n++);for(i=fa;i<t&&b7(i,e,t)!==t-St;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+St)/xb;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+St)/fa;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,l=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let g=o.sqr(d);h<c&&!o.eql(g,o.ONE);h++)g=o.sqr(g);const f=o.pow(l,St<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Qee(t){if(t%xb===Jee){const e=(t+St)/xb;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%m7===w7){const e=(t-w7)/m7;return function(r,n){const i=r.mul(n,fa),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,fa),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return Xee(t)}const ete=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tte(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=ete.reduce((n,i)=>(n[i]="function",n),e);return gl(t,r)}function rte(t,e,r){if(r<tr)throw new Error("invalid exponent, negatives unsupported");if(r===tr)return t.ONE;if(r===St)return e;let n=t.ONE,i=e;for(;r>tr;)r&St&&(n=t.mul(n,i)),i=t.sqr(i),r>>=St;return n}function nte(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function y7(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function v7(t,e,r=!1,n={}){if(t<=tr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=y7(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:vb(i),ZERO:tr,ONE:St,create:c=>Jr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return tr<=c&&c<t},is0:c=>c===tr,isOdd:c=>(c&St)===St,neg:c=>Jr(-c,t),eql:(c,l)=>c===l,sqr:c=>Jr(c*c,t),add:(c,l)=>Jr(c+l,t),sub:(c,l)=>Jr(c-l,t),mul:(c,l)=>Jr(c*l,t),pow:(c,l)=>rte(a,c,l),div:(c,l)=>Jr(c*$b(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>$b(c,t),sqrt:n.sqrt||(c=>(o||(o=Qee(t)),o(a,c))),invertBatch:c=>nte(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?Ff(c,s):fl(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?Bd(c):pa(c)}});return Object.freeze(a)}function E7(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function C7(t){const e=E7(t);return e+Math.ceil(e/2)}function ite(t,e,r=!1){const n=t.length,i=E7(e),s=C7(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Bd(t):pa(t),a=Jr(o,e-St)+St;return r?Ff(a,i):fl(a,i)}const x7=BigInt(0),jf=BigInt(1);function _b(t,e){const r=e.negate();return t?r:e}function $7(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ib(t,e){$7(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function ste(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function ote(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Sb=new WeakMap,_7=new WeakMap;function Ab(t){return _7.get(t)||1}function ate(t,e){return{constTimeNegate:_b,hasPrecomputes(r){return Ab(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>x7;)n&jf&&(i=i.add(s)),s=s.double(),n>>=jf;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=Ib(n,e),o=[];let a=r,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=Ib(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,d=BigInt(r);for(let h=0;h<s;h++){const f=h*o;let g=Number(i&l);i>>=d,g>o&&(g-=u,i+=jf);const w=f,p=f+Math.abs(g)-1,b=h%2!==0,m=g<0;g===0?c=c.add(_b(b,n[w])):a=a.add(_b(m,n[p]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=Ib(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let d=0;d<o;d++){const h=d*a;if(i===x7)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=jf),f===0)continue;let g=n[h+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(r,n,i){let s=Sb.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Sb.set(n,i(s))),s},wNAFCached(r,n,i){const s=Ab(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=Ab(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){$7(n,e),_7.set(r,n),Sb.delete(r)}}}function cte(t,e,r,n){if(ste(r,t),ote(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=p7(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let d=l;d>=0;d-=o){c.fill(i);for(let f=0;f<n.length;f++){const g=n[f],w=Number(g>>BigInt(d)&BigInt(a));c[w]=c[w].add(r[f])}let h=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),h=h.add(g);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function I7(t){return tte(t.Fp),gl(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...y7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const wl=BigInt(0),Pb=BigInt(1);function lte(t){return gl(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function ute(t){const e=lte(t),{P:r}=e,n=m=>Jr(m,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,a=e.adjustScalarBytes||(m=>m),c=e.powPminus2||(m=>b7(m,r-BigInt(2),r));function l(m,E,C){const P=n(m*(E-C));return E=n(E-P),C=n(C+P),[E,C]}const u=(e.a-BigInt(2))/BigInt(4);function d(m,E){vs("u",m,wl,r),vs("scalar",E,wl,r);const C=E,P=m;let S=Pb,I=wl,N=m,$=Pb,D=wl,T;for(let M=BigInt(i-1);M>=wl;M--){const x=C>>M&Pb;D^=x,T=l(D,S,N),S=T[0],N=T[1],T=l(D,I,$),I=T[0],$=T[1],D=x;const y=S+I,v=n(y*y),A=S-I,O=n(A*A),_=v-O,k=N+$,L=N-$,F=n(L*y),H=n(k*A),q=F+H,W=F-H;N=n(q*q),$=n(P*n(W*W)),S=n(v*O),I=n(_*(v+n(u*_)))}T=l(D,S,N),S=T[0],N=T[1],T=l(D,I,$),I=T[0],$=T[1];const R=c(I);return n(S*R)}function h(m){return Ff(n(m),s)}function f(m){const E=Cn("u coordinate",m,s);return o===32&&(E[31]&=127),Bd(E)}function g(m){const E=Cn("scalar",m),C=E.length;if(C!==s&&C!==o){let P=""+s+" or "+o;throw new Error("invalid scalar, expected "+P+" bytes, got "+C)}return Bd(a(E))}function w(m,E){const C=f(E),P=g(m),S=d(C,P);if(S===wl)throw new Error("invalid private or public key received");return h(S)}const p=h(e.Gu);function b(m){return w(m,p)}return{scalarMult:w,scalarMultBase:b,getSharedSecret:(m,E)=>w(m,E),getPublicKey:m=>b(m),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:p}}const Ob=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const dte=BigInt(1),S7=BigInt(2),hte=BigInt(3),pte=BigInt(5);BigInt(8);function fte(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Ob,o=t*t%s*t%s,a=ii(o,S7,s)*o%s,c=ii(a,dte,s)*t%s,l=ii(c,pte,s)*c%s,u=ii(l,e,s)*l%s,d=ii(u,r,s)*u%s,h=ii(d,n,s)*d%s,f=ii(h,i,s)*h%s,g=ii(f,i,s)*h%s,w=ii(g,e,s)*l%s;return{pow_p_5_8:ii(w,S7,s)*t%s,b2:o}}function gte(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Nb=ute({P:Ob,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Ob,{pow_p_5_8:r,b2:n}=fte(t);return Jr(ii(r,hte,e)*n,e)},adjustScalarBytes:gte,randomBytes:cl});function A7(t){t.lowS!==void 0&&ul("lowS",t.lowS),t.prehash!==void 0&&ul("prehash",t.prehash)}function wte(t){const e=I7(t);gl(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:mte,hexToBytes:bte}=Yee;class yte extends Error{constructor(e=""){super(e)}}const Es={Err:yte,_tlv:{encode:(t,e)=>{const{Err:r}=Es;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=hl(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?hl(i.length/2|128):"";return hl(t)+s+i+e},decode(t,e){const{Err:r}=Es;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Es;if(t<Cs)throw new e("integer: negative integers are not allowed");let r=hl(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Es;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return mte(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Es,i=typeof t=="string"?bte(t):t;Dd(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(t){const{_tlv:e,_int:r}=Es,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},Cs=BigInt(0),rr=BigInt(1);BigInt(2);const P7=BigInt(3);BigInt(4);function vte(t){const e=wte(t),{Fp:r}=e,n=v7(e.n,e.nBitLength),i=e.toBytes||((w,p,b)=>{const m=p.toAffine();return Ud(Uint8Array.from([4]),r.toBytes(m.x),r.toBytes(m.y))}),s=e.fromBytes||(w=>{const p=w.subarray(1),b=r.fromBytes(p.subarray(0,r.BYTES)),m=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:b,y:m}});function o(w){const{a:p,b}=e,m=r.sqr(w),E=r.mul(m,w);return r.add(r.add(E,r.mul(w,p)),b)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(w){return Mf(w,rr,e.n)}function c(w){const{allowedPrivateKeyLengths:p,nByteLength:b,wrapPrivateKey:m,n:E}=e;if(p&&typeof w!="bigint"){if(ha(w)&&(w=dl(w)),typeof w!="string"||!p.includes(w.length))throw new Error("invalid private key");w=w.padStart(b*2,"0")}let C;try{C=typeof w=="bigint"?w:pa(Cn("private key",w,b))}catch{throw new Error("invalid private key, expected hex or "+b+" bytes, got "+typeof w)}return m&&(C=Jr(C,E)),vs("private key",C,rr,E),C}function l(w){if(!(w instanceof h))throw new Error("ProjectivePoint expected")}const u=Cb((w,p)=>{const{px:b,py:m,pz:E}=w;if(r.eql(E,r.ONE))return{x:b,y:m};const C=w.is0();p==null&&(p=C?r.ONE:r.inv(E));const P=r.mul(b,p),S=r.mul(m,p),I=r.mul(E,p);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:P,y:S}}),d=Cb(w=>{if(w.is0()){if(e.allowInfinityPoint&&!r.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:p,y:b}=w.toAffine();if(!r.isValid(p)||!r.isValid(b))throw new Error("bad point: x or y not FE");const m=r.sqr(b),E=o(p);if(!r.eql(m,E))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(p,b,m){if(this.px=p,this.py=b,this.pz=m,p==null||!r.isValid(p))throw new Error("x required");if(b==null||!r.isValid(b))throw new Error("y required");if(m==null||!r.isValid(m))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:b,y:m}=p||{};if(!p||!r.isValid(b)||!r.isValid(m))throw new Error("invalid affine point");if(p instanceof h)throw new Error("projective point not allowed");const E=C=>r.eql(C,r.ZERO);return E(b)&&E(m)?h.ZERO:new h(b,m,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const b=r.invertBatch(p.map(m=>m.pz));return p.map((m,E)=>m.toAffine(b[E])).map(h.fromAffine)}static fromHex(p){const b=h.fromAffine(s(Cn("pointHex",p)));return b.assertValidity(),b}static fromPrivateKey(p){return h.BASE.multiply(c(p))}static msm(p,b){return cte(h,n,p,b)}_setWindowSize(p){g.setWindowSize(this,p)}assertValidity(){d(this)}hasEvenY(){const{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){l(p);const{px:b,py:m,pz:E}=this,{px:C,py:P,pz:S}=p,I=r.eql(r.mul(b,S),r.mul(C,E)),N=r.eql(r.mul(m,S),r.mul(P,E));return I&&N}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:p,b}=e,m=r.mul(b,P7),{px:E,py:C,pz:P}=this;let S=r.ZERO,I=r.ZERO,N=r.ZERO,$=r.mul(E,E),D=r.mul(C,C),T=r.mul(P,P),R=r.mul(E,C);return R=r.add(R,R),N=r.mul(E,P),N=r.add(N,N),S=r.mul(p,N),I=r.mul(m,T),I=r.add(S,I),S=r.sub(D,I),I=r.add(D,I),I=r.mul(S,I),S=r.mul(R,S),N=r.mul(m,N),T=r.mul(p,T),R=r.sub($,T),R=r.mul(p,R),R=r.add(R,N),N=r.add($,$),$=r.add(N,$),$=r.add($,T),$=r.mul($,R),I=r.add(I,$),T=r.mul(C,P),T=r.add(T,T),$=r.mul(T,R),S=r.sub(S,$),N=r.mul(T,D),N=r.add(N,N),N=r.add(N,N),new h(S,I,N)}add(p){l(p);const{px:b,py:m,pz:E}=this,{px:C,py:P,pz:S}=p;let I=r.ZERO,N=r.ZERO,$=r.ZERO;const D=e.a,T=r.mul(e.b,P7);let R=r.mul(b,C),M=r.mul(m,P),x=r.mul(E,S),y=r.add(b,m),v=r.add(C,P);y=r.mul(y,v),v=r.add(R,M),y=r.sub(y,v),v=r.add(b,E);let A=r.add(C,S);return v=r.mul(v,A),A=r.add(R,x),v=r.sub(v,A),A=r.add(m,E),I=r.add(P,S),A=r.mul(A,I),I=r.add(M,x),A=r.sub(A,I),$=r.mul(D,v),I=r.mul(T,x),$=r.add(I,$),I=r.sub(M,$),$=r.add(M,$),N=r.mul(I,$),M=r.add(R,R),M=r.add(M,R),x=r.mul(D,x),v=r.mul(T,v),M=r.add(M,x),x=r.sub(R,x),x=r.mul(D,x),v=r.add(v,x),R=r.mul(M,v),N=r.add(N,R),R=r.mul(A,v),I=r.mul(y,I),I=r.sub(I,R),R=r.mul(y,M),$=r.mul(A,$),$=r.add($,R),new h(I,N,$)}subtract(p){return this.add(p.negate())}is0(){return this.equals(h.ZERO)}wNAF(p){return g.wNAFCached(this,p,h.normalizeZ)}multiplyUnsafe(p){const{endo:b,n:m}=e;vs("scalar",p,Cs,m);const E=h.ZERO;if(p===Cs)return E;if(this.is0()||p===rr)return this;if(!b||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,p,h.normalizeZ);let{k1neg:C,k1:P,k2neg:S,k2:I}=b.splitScalar(p),N=E,$=E,D=this;for(;P>Cs||I>Cs;)P&rr&&(N=N.add(D)),I&rr&&($=$.add(D)),D=D.double(),P>>=rr,I>>=rr;return C&&(N=N.negate()),S&&($=$.negate()),$=new h(r.mul($.px,b.beta),$.py,$.pz),N.add($)}multiply(p){const{endo:b,n:m}=e;vs("scalar",p,rr,m);let E,C;if(b){const{k1neg:P,k1:S,k2neg:I,k2:N}=b.splitScalar(p);let{p:$,f:D}=this.wNAF(S),{p:T,f:R}=this.wNAF(N);$=g.constTimeNegate(P,$),T=g.constTimeNegate(I,T),T=new h(r.mul(T.px,b.beta),T.py,T.pz),E=$.add(T),C=D.add(R)}else{const{p:P,f:S}=this.wNAF(p);E=P,C=S}return h.normalizeZ([E,C])[0]}multiplyAndAddUnsafe(p,b,m){const E=h.BASE,C=(S,I)=>I===Cs||I===rr||!S.equals(E)?S.multiplyUnsafe(I):S.multiply(I),P=C(this,b).add(C(p,m));return P.is0()?void 0:P}toAffine(p){return u(this,p)}isTorsionFree(){const{h:p,isTorsionFree:b}=e;if(p===rr)return!0;if(b)return b(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:b}=e;return p===rr?this:b?b(h,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return ul("isCompressed",p),this.assertValidity(),i(h,this,p)}toHex(p=!0){return ul("isCompressed",p),dl(this.toRawBytes(p))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,g=ate(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function Ete(t){const e=I7(t);return gl(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Cte(t){const e=Ete(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(x){return Jr(x,n)}function a(x){return $b(x,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=vte({...e,toBytes(x,y,v){const A=y.toAffine(),O=r.toBytes(A.x),_=Ud;return ul("isCompressed",v),v?_(Uint8Array.from([y.hasEvenY()?2:3]),O):_(Uint8Array.from([4]),O,r.toBytes(A.y))},fromBytes(x){const y=x.length,v=x[0],A=x.subarray(1);if(y===i&&(v===2||v===3)){const O=pa(A);if(!Mf(O,rr,r.ORDER))throw new Error("Point is not on curve");const _=u(O);let k;try{k=r.sqrt(_)}catch(F){const H=F instanceof Error?": "+F.message:"";throw new Error("Point is not on curve"+H)}const L=(k&rr)===rr;return(v&1)===1!==L&&(k=r.neg(k)),{x:O,y:k}}else if(y===s&&v===4){const O=r.fromBytes(A.subarray(0,r.BYTES)),_=r.fromBytes(A.subarray(r.BYTES,2*r.BYTES));return{x:O,y:_}}else{const O=i,_=s;throw new Error("invalid Point, expected length of "+O+", or uncompressed "+_+", got "+y)}}}),h=x=>dl(fl(x,e.nByteLength));function f(x){const y=n>>rr;return x>y}function g(x){return f(x)?o(-x):x}const w=(x,y,v)=>pa(x.slice(y,v));class p{constructor(y,v,A){this.r=y,this.s=v,this.recovery=A,this.assertValidity()}static fromCompact(y){const v=e.nByteLength;return y=Cn("compactSignature",y,v*2),new p(w(y,0,v),w(y,v,2*v))}static fromDER(y){const{r:v,s:A}=Es.toSig(Cn("DER",y));return new p(v,A)}assertValidity(){vs("r",this.r,rr,n),vs("s",this.s,rr,n)}addRecoveryBit(y){return new p(this.r,this.s,y)}recoverPublicKey(y){const{r:v,s:A,recovery:O}=this,_=S(Cn("msgHash",y));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const k=O===2||O===3?v+e.n:v;if(k>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=(O&1)===0?"02":"03",F=c.fromHex(L+h(k)),H=a(k),q=o(-_*H),W=o(A*H),Y=c.BASE.multiplyAndAddUnsafe(F,q,W);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return pl(this.toDERHex())}toDERHex(){return Es.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return pl(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const b={isValidPrivateKey(x){try{return l(x),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const x=C7(e.n);return ite(e.randomBytes(x),e.n)},precompute(x=8,y=c.BASE){return y._setWindowSize(x),y.multiply(BigInt(3)),y}};function m(x,y=!0){return c.fromPrivateKey(x).toRawBytes(y)}function E(x){const y=ha(x),v=typeof x=="string",A=(y||v)&&x.length;return y?A===i||A===s:v?A===2*i||A===2*s:x instanceof c}function C(x,y,v=!0){if(E(x))throw new Error("first arg must be private key");if(!E(y))throw new Error("second arg must be public key");return c.fromHex(y).multiply(l(x)).toRawBytes(v)}const P=e.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const y=pa(x),v=x.length*8-e.nBitLength;return v>0?y>>BigInt(v):y},S=e.bits2int_modN||function(x){return o(P(x))},I=vb(e.nBitLength);function N(x){return vs("num < 2^"+e.nBitLength,x,Cs,I),fl(x,e.nByteLength)}function $(x,y,v=D){if(["recovered","canonical"].some(re=>re in v))throw new Error("sign() legacy options not supported");const{hash:A,randomBytes:O}=e;let{lowS:_,prehash:k,extraEntropy:L}=v;_==null&&(_=!0),x=Cn("msgHash",x),A7(v),k&&(x=Cn("prehashed msgHash",A(x)));const F=S(x),H=l(y),q=[N(H),N(F)];if(L!=null&&L!==!1){const re=L===!0?O(r.BYTES):L;q.push(Cn("extraEntropy",re))}const W=Ud(...q),Y=F;function ae(re){const te=P(re);if(!d(te))return;const Ee=a(te),Ce=c.BASE.multiply(te).toAffine(),xe=o(Ce.x);if(xe===Cs)return;const _e=o(Ee*o(Y+xe*H));if(_e===Cs)return;let Ge=(Ce.x===xe?0:2)|Number(Ce.y&rr),xr=_e;return _&&f(_e)&&(xr=g(_e),Ge^=1),new p(xe,xr,Ge)}return{seed:W,k2sig:ae}}const D={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function R(x,y,v=D){const{seed:A,k2sig:O}=$(x,y,v),_=e;return g7(_.hash.outputLen,_.nByteLength,_.hmac)(A,O)}c.BASE._setWindowSize(8);function M(x,y,v,A=T){const O=x;y=Cn("msgHash",y),v=Cn("publicKey",v);const{lowS:_,prehash:k,format:L}=A;if(A7(A),"strict"in A)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const F=typeof O=="string"||ha(O),H=!F&&!L&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!F&&!H)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,W;try{if(H&&(q=new p(O.r,O.s)),F){try{L!=="compact"&&(q=p.fromDER(O))}catch(_e){if(!(_e instanceof Es.Err))throw _e}!q&&L!=="der"&&(q=p.fromCompact(O))}W=c.fromHex(v)}catch{return!1}if(!q||_&&q.hasHighS())return!1;k&&(y=e.hash(y));const{r:Y,s:ae}=q,re=S(y),te=a(ae),Ee=o(re*te),Ce=o(Y*te),xe=c.BASE.multiplyAndAddUnsafe(W,Ee,Ce)?.toAffine();return xe?o(xe.x)===Y:!1}return{CURVE:e,getPublicKey:m,getSharedSecret:C,sign:R,verify:M,ProjectivePoint:c,Signature:p,utils:b}}function xte(t){return{hash:t,hmac:(e,...r)=>Bf(t,e,PQ(...r)),randomBytes:cl}}function $te(t,e){const r=n=>Cte({...t,...xte(n)});return{...r(e),create:r}}const O7=v7(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),_te=O7.create(BigInt("-3")),Ite=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Ste=$te({a:_te,b:Ite,Fp:O7,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Rd),N7="base10",Fr="base16",si="base64pad",wo="base64url",Ld="utf8",T7=0,xs=1,Fd=2,Ate=0,k7=1,Md=12,Tb=32;function Pte(){const t=Nb.utils.randomPrivateKey(),e=Nb.getPublicKey(t);return{privateKey:tt(t,Fr),publicKey:tt(e,Fr)}}function kb(){const t=cl(Tb);return tt(t,Fr)}function Ote(t,e){const r=Nb.getSharedSecret(mt(t,Fr),mt(e,Fr)),n=Ree(Rd,r,void 0,void 0,Tb);return tt(n,Fr)}function zf(t){const e=Rd(mt(t,Fr));return tt(e,Fr)}function Pi(t){const e=Rd(mt(t,Ld));return tt(e,Fr)}function R7(t){return mt(`${t}`,N7)}function ga(t){return Number(tt(t,N7))}function D7(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function B7(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function Nte(t){const e=R7(typeof t.type<"u"?t.type:T7);if(ga(e)===xs&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?mt(t.senderPublicKey,Fr):void 0,n=typeof t.iv<"u"?mt(t.iv,Fr):cl(Md),i=mt(t.symKey,Fr),s=l7(i,n).encrypt(mt(t.message,Ld)),o=U7({type:e,sealed:s,iv:n,senderPublicKey:r});return t.encoding===wo?D7(o):o}function Tte(t){const e=mt(t.symKey,Fr),{sealed:r,iv:n}=jd({encoded:t.encoded,encoding:t.encoding}),i=l7(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return tt(i,Ld)}function kte(t,e){const r=R7(Fd),n=cl(Md),i=mt(t,Ld),s=U7({type:r,sealed:i,iv:n});return e===wo?D7(s):s}function Rte(t,e){const{sealed:r}=jd({encoded:t,encoding:e});return tt(r,Ld)}function U7(t){if(ga(t.type)===Fd)return tt(bi([t.type,t.sealed]),si);if(ga(t.type)===xs){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return tt(bi([t.type,t.senderPublicKey,t.iv,t.sealed]),si)}return tt(bi([t.type,t.iv,t.sealed]),si)}function jd(t){const e=(t.encoding||si)===wo?B7(t.encoded):t.encoded,r=mt(e,si),n=r.slice(Ate,k7),i=k7;if(ga(n)===xs){const c=i+Tb,l=c+Md,u=r.slice(i,c),d=r.slice(c,l),h=r.slice(l);return{type:n,sealed:h,iv:d,senderPublicKey:u}}if(ga(n)===Fd){const c=r.slice(i),l=cl(Md);return{type:n,sealed:c,iv:l}}const s=i+Md,o=r.slice(i,s),a=r.slice(s);return{type:n,sealed:a,iv:o}}function Dte(t,e){const r=jd({encoded:t,encoding:e?.encoding});return L7({type:ga(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?tt(r.senderPublicKey,Fr):void 0,receiverPublicKey:e?.receiverPublicKey})}function L7(t){const e=t?.type||T7;if(e===xs){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function F7(t){return t.type===xs&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function M7(t){return t.type===Fd}function Bte(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return bi([new Uint8Array([4]),e,r])}function Ute(t,e){const[r,n,i]=t.split("."),s=Buffer.from(B7(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=`${r}.${n}`,l=Rd(c),u=Bte(e);if(!Ste.verify(bi([o,a]),l,u))throw new Error("Invalid signature");return tc(t).payload}const Lte="irn";function qf(t){return t?.relay||{protocol:Lte}}function zd(t){const e=i5[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Fte(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function j7(t){if(!t.includes("wc:")){const l=R9(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:Mte(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:Fte(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Mte(t){return t.startsWith("//")?t.substring(2):t}function jte(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function z7(t){const e=new URLSearchParams,r=jte(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Hf(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function ml(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function zte(t){const e=[];return Object.values(t).forEach(r=>{e.push(...ml(r.accounts))}),e}function qte(t,e){const r=[];return Object.values(t).forEach(n=>{ml(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Hte(t,e){const r=[];return Object.values(t).forEach(n=>{ml(n.accounts).includes(e)&&r.push(...n.events)}),r}function Rb(t){return t.includes(":")}function qd(t){return Rb(t)?t.split(":")[0]:t}function Wte(t){const e={};return t?.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function q7(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=Wte(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=Nf(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const Vte={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Kte={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Q(t,e){const{message:r,code:n}=Kte[t];return{message:e?`${r} ${e}`:r,code:n}}function rt(t,e){const{message:r,code:n}=Vte[t];return{message:e?`${r} ${e}`:r,code:n}}function mo(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Hd(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function mr(t){return typeof t>"u"}function Nt(t,e){return e&&mr(t)?!0:typeof t=="string"&&!!t.trim().length}function Db(t,e){return e&&mr(t)?!0:typeof t=="number"&&!isNaN(t)}function Gte(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return la(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=ml(a),d=r[o];(!la(x9(o,d),u)||!la(d.methods,c)||!la(d.events,l))&&(s=!1)}),s):!1}function Wf(t){return Nt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Zte(t){if(Nt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Wf(r)}}return!1}function Yte(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Nt(t,!1)){if(e(t))return!0;const r=R9(t);return e(r)}}catch{}return!1}function Jte(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Xte(t){return t?.topic}function Qte(t,e){let r=null;return Nt(t?.publicKey,!1)||(r=Q("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function H7(t){let e=!0;return mo(t)?t.length&&(e=t.every(r=>Nt(r,!1))):e=!1,e}function ere(t,e,r){let n=null;return mo(e)&&e.length?e.forEach(i=>{n||Wf(i)||(n=rt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Wf(t)||(n=rt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function tre(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=ere(i,x9(i,s),`${e} ${r}`);o&&(n=o)}),n}function rre(t,e){let r=null;return mo(t)?t.forEach(n=>{r||Zte(n)||(r=rt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=rt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function nre(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=rre(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function ire(t,e){let r=null;return H7(t?.methods)?H7(t?.events)||(r=rt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=rt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function W7(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=ire(n,`${e}, namespace`);i&&(r=i)}),r}function sre(t,e,r){let n=null;if(t&&Hd(t)){const i=W7(t,e);i&&(n=i);const s=tre(t,e,r);s&&(n=s)}else n=Q("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Bb(t,e){let r=null;if(t&&Hd(t)){const n=W7(t,e);n&&(r=n);const i=nre(t,e);i&&(r=i)}else r=Q("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function V7(t){return Nt(t.protocol,!0)}function ore(t,e){let r=!1;return e&&!t?r=!0:t&&mo(t)&&t.length&&t.forEach(n=>{r=V7(n)}),r}function are(t){return typeof t=="number"}function Xr(t){return typeof t<"u"&&typeof t!==null}function cre(t){return!(!t||typeof t!="object"||!t.code||!Db(t.code,!1)||!t.message||!Nt(t.message,!1))}function lre(t){return!(mr(t)||!Nt(t.method,!1))}function ure(t){return!(mr(t)||mr(t.result)&&mr(t.error)||!Db(t.id,!1)||!Nt(t.jsonrpc,!1))}function dre(t){return!(mr(t)||!Nt(t.name,!1))}function K7(t,e){return!(!Wf(e)||!zte(t).includes(e))}function hre(t,e,r){return Nt(r,!1)?qte(t,e).includes(r):!1}function pre(t,e,r){return Nt(r,!1)?Hte(t,e).includes(r):!1}function G7(t,e,r){let n=null;const i=fre(t),s=gre(e),o=Object.keys(i),a=Object.keys(s),c=Z7(Object.keys(t)),l=Z7(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),la(o,a)||(n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const h=ml(e[d].accounts);h.includes(d)||(n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{n||(la(i[d].methods,s[d].methods)?la(i[d].events,s[d].events)||(n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function fre(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function Z7(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function gre(t){const e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:ml(t[r].accounts)?.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}),e}function wre(t,e){return Db(t,!1)&&t<=e.max&&t>=e.min}function Y7(){const t=Pd();return new Promise(e=>{switch(t){case vn.browser:e(mre());break;case vn.reactNative:e(bre());break;case vn.node:e(yre());break;default:e(!0)}})}function mre(){return Ad()&&navigator?.onLine}async function bre(){return lo()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function yre(){return!0}function vre(t){switch(Pd()){case vn.browser:Ere(t);break;case vn.reactNative:Cre(t);break}}function Ere(t){!lo()&&Ad()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Cre(t){lo()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}const Ub={};class Wd{static get(e){return Ub[e]}static set(e,r){Ub[e]=r}static delete(e){delete Ub[e]}}const J7="wc",X7=2,Vf="core",Oi=`${J7}@2:${Vf}:`,xre={name:Vf,logger:"error"},$re={database:":memory:"},_re="crypto",Q7="client_ed25519_seed",Ire=z.ONE_DAY,Sre="keychain",Are="0.3",Pre="messages",Ore="0.3",ex=z.SIX_HOURS,Nre="publisher",tx="irn",Tre="error",rx="wss://relay.walletconnect.org",kre="relayer",nr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Rre="_subscription",Un={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Dre=.1,Lb="2.19.2",wt={link_mode:"link_mode",relay:"relay"},Kf={inbound:"inbound",outbound:"outbound"},Bre="0.3",Ure="WALLETCONNECT_CLIENT_ID",nx="WALLETCONNECT_LINK_MODE_APPS",xn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Lre="subscription",Fre="0.3",Mre="pairing",jre="0.3",Vd={wc_pairingDelete:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:z.ONE_DAY,prompt:!1,tag:0},res:{ttl:z.ONE_DAY,prompt:!1,tag:0}}},wa={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},oi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},zre="history",qre="0.3",Hre="expirer",Ln={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Wre="0.3",Vre="verify-api",Kre="https://verify.walletconnect.com",ix="https://verify.walletconnect.org",Kd=ix,Gre=`${Kd}/v3`,Zre=[Kre,ix],Yre="echo",Jre="https://echo.walletconnect.com",Ni={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},$s={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ai={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ma={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},ba={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},Gd={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Xre=.1,Qre="event-client",ene=86400,tne="https://pulse.walletconnect.org/batch";function rne(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,p=0,b=0,m=g.length;b!==m&&g[b]===0;)b++,w++;for(var E=(m-b)*u+1>>>0,C=new Uint8Array(E);b!==m;){for(var P=g[b],S=0,I=E-1;(P!==0||S<p)&&I!==-1;I--,S++)P+=256*C[I]>>>0,C[I]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");p=S,b++}for(var N=E-p;N!==E&&C[N]===0;)N++;for(var $=c.repeat(w);N<E;++N)$+=t.charAt(C[N]);return $}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var w=0;if(g[w]!==" "){for(var p=0,b=0;g[w]===c;)p++,w++;for(var m=(g.length-w)*l+1>>>0,E=new Uint8Array(m);g[w];){var C=r[g.charCodeAt(w)];if(C===255)return;for(var P=0,S=m-1;(C!==0||P<b)&&S!==-1;S--,P++)C+=a*E[S]>>>0,E[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=P,w++}if(g[w]!==" "){for(var I=m-b;I!==m&&E[I]===0;)I++;for(var N=new Uint8Array(p+(m-I)),$=p;I!==m;)N[$++]=E[I++];return N}}}function f(g){var w=h(g);if(w)return w;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var nne=rne,ine=nne;const sx=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},sne=t=>new TextEncoder().encode(t),one=t=>new TextDecoder().decode(t);class ane{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class cne{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ox(this,e)}}class lne{constructor(e){this.decoders=e}or(e){return ox(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ox=(t,e)=>new lne({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class une{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new ane(e,r,n),this.decoder=new cne(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Gf=({name:t,prefix:e,encode:r,decode:n})=>new une(t,e,r,n),Zd=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=ine(r,e);return Gf({prefix:t,name:e,encode:n,decode:s=>sx(i(s))})},dne=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},hne=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},br=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Gf({prefix:e,name:t,encode(i){return hne(i,n,r)},decode(i){return dne(i,n,r,t)}}),pne=Gf({prefix:"\0",name:"identity",encode:t=>one(t),decode:t=>sne(t)});var fne=Object.freeze({__proto__:null,identity:pne});const gne=br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var wne=Object.freeze({__proto__:null,base2:gne});const mne=br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var bne=Object.freeze({__proto__:null,base8:mne});const yne=Zd({prefix:"9",name:"base10",alphabet:"0123456789"});var vne=Object.freeze({__proto__:null,base10:yne});const Ene=br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Cne=br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var xne=Object.freeze({__proto__:null,base16:Ene,base16upper:Cne});const $ne=br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_ne=br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ine=br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Sne=br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ane=br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Pne=br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),One=br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Nne=br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tne=br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var kne=Object.freeze({__proto__:null,base32:$ne,base32upper:_ne,base32pad:Ine,base32padupper:Sne,base32hex:Ane,base32hexupper:Pne,base32hexpad:One,base32hexpadupper:Nne,base32z:Tne});const Rne=Zd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Dne=Zd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Bne=Object.freeze({__proto__:null,base36:Rne,base36upper:Dne});const Une=Zd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Lne=Zd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Fne=Object.freeze({__proto__:null,base58btc:Une,base58flickr:Lne});const Mne=br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jne=br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zne=br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qne=br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Hne=Object.freeze({__proto__:null,base64:Mne,base64pad:jne,base64url:zne,base64urlpad:qne});const ax=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Wne=ax.reduce((t,e,r)=>(t[r]=e,t),[]),Vne=ax.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Kne(t){return t.reduce((e,r)=>(e+=Wne[r],e),"")}function Gne(t){const e=[];for(const r of t){const n=Vne[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Zne=Gf({prefix:"\u{1F680}",name:"base256emoji",encode:Kne,decode:Gne});var Yne=Object.freeze({__proto__:null,base256emoji:Zne}),Jne=lx,cx=128,Xne=127,Qne=~Xne,eie=Math.pow(2,31);function lx(t,e,r){e=e||[],r=r||0;for(var n=r;t>=eie;)e[r++]=t&255|cx,t/=128;for(;t&Qne;)e[r++]=t&255|cx,t>>>=7;return e[r]=t|0,lx.bytes=r-n+1,e}var tie=Fb,rie=128,ux=127;function Fb(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Fb.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&ux)<<i:(o&ux)*Math.pow(2,i),i+=7}while(o>=rie);return Fb.bytes=s-n,r}var nie=Math.pow(2,7),iie=Math.pow(2,14),sie=Math.pow(2,21),oie=Math.pow(2,28),aie=Math.pow(2,35),cie=Math.pow(2,42),lie=Math.pow(2,49),uie=Math.pow(2,56),die=Math.pow(2,63),hie=function(t){return t<nie?1:t<iie?2:t<sie?3:t<oie?4:t<aie?5:t<cie?6:t<lie?7:t<uie?8:t<die?9:10},pie={encode:Jne,decode:tie,encodingLength:hie},dx=pie;const hx=(t,e,r=0)=>(dx.encode(t,e,r),e),px=t=>dx.encodingLength(t),Mb=(t,e)=>{const r=e.byteLength,n=px(t),i=n+px(r),s=new Uint8Array(i+r);return hx(t,s,0),hx(r,s,n),s.set(e,i),new fie(t,r,e,s)};class fie{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const fx=({name:t,code:e,encode:r})=>new gie(t,e,r);class gie{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Mb(this.code,r):r.then(n=>Mb(this.code,n))}else throw Error("Unknown type, must be binary type")}}const gx=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),wie=fx({name:"sha2-256",code:18,encode:gx("SHA-256")}),mie=fx({name:"sha2-512",code:19,encode:gx("SHA-512")});var bie=Object.freeze({__proto__:null,sha256:wie,sha512:mie});const wx=0,yie="identity",mx=sx;var vie=Object.freeze({__proto__:null,identity:{code:wx,name:yie,encode:mx,digest:t=>Mb(wx,mx(t))}});new TextEncoder,new TextDecoder;const bx={...fne,...wne,...bne,...vne,...xne,...kne,...Bne,...Fne,...Hne,...Yne};({...bie,...vie});function Eie(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function yx(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const vx=yx("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),jb=yx("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Eie(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Cie={utf8:vx,"utf-8":vx,hex:bx.base16,latin1:jb,ascii:jb,binary:jb,...bx};function xie(t,e="utf8"){const r=Cie[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var $ie=Object.defineProperty,_ie=(t,e,r)=>e in t?$ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ti=(t,e,r)=>_ie(t,typeof e!="symbol"?e+"":e,r);class Iie{constructor(e,r){this.core=e,this.logger=r,Ti(this,"keychain",new Map),Ti(this,"name",Sre),Ti(this,"version",Are),Ti(this,"initialized",!1),Ti(this,"storagePrefix",Oi),Ti(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),Ti(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),Ti(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),Ti(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=Q("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),Ti(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=We(r,this.name)}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ib(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?sb(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Sie=Object.defineProperty,Aie=(t,e,r)=>e in t?Sie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yr=(t,e,r)=>Aie(t,typeof e!="symbol"?e+"":e,r);class Pie{constructor(e,r,n){this.core=e,this.logger=r,yr(this,"name",_re),yr(this,"keychain"),yr(this,"randomSessionIdentifier",kb()),yr(this,"initialized",!1),yr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),yr(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),yr(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=gp(i);return xg(s.publicKey)}),yr(this,"generateKeyPair",()=>{this.isInitialized();const i=Pte();return this.setPrivateKey(i.publicKey,i.privateKey)}),yr(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=gp(s),a=this.randomSessionIdentifier;return await F3(a,i,Ire,o)}),yr(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=Ote(a,s);return this.setSymKey(c,o)}),yr(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||zf(i);return await this.keychain.set(o,i),o}),yr(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),yr(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),yr(this,"encode",async(i,s,o)=>{this.isInitialized();const a=L7(o),c=wi(s);if(M7(a))return kte(c,o?.encoding);if(F7(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;i=await this.generateSharedKey(h,f)}const l=this.getSymKey(i),{type:u,senderPublicKey:d}=a;return Nte({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o?.encoding})}),yr(this,"decode",async(i,s,o)=>{this.isInitialized();const a=Dte(s,o);if(M7(a)){const c=Rte(s,o?.encoding);return Wi(c)}if(F7(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;i=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(i),l=Tte({symKey:c,encoded:s,encoding:o?.encoding});return Wi(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),yr(this,"getPayloadType",(i,s=si)=>{const o=jd({encoded:i,encoding:s});return ga(o.type)}),yr(this,"getPayloadSenderPublicKey",(i,s=si)=>{const o=jd({encoded:i,encoding:s});return o.senderPublicKey?tt(o.senderPublicKey,Fr):void 0}),this.core=e,this.logger=We(r,this.name),this.keychain=n||new Iie(this.core,this.logger)}get context(){return it(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Q7)}catch{e=kb(),await this.keychain.set(Q7,e)}return xie(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Oie=Object.defineProperty,Nie=Object.defineProperties,Tie=Object.getOwnPropertyDescriptors,Ex=Object.getOwnPropertySymbols,kie=Object.prototype.hasOwnProperty,Rie=Object.prototype.propertyIsEnumerable,zb=(t,e,r)=>e in t?Oie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Die=(t,e)=>{for(var r in e||(e={}))kie.call(e,r)&&zb(t,r,e[r]);if(Ex)for(var r of Ex(e))Rie.call(e,r)&&zb(t,r,e[r]);return t},Bie=(t,e)=>Nie(t,Tie(e)),$n=(t,e,r)=>zb(t,typeof e!="symbol"?e+"":e,r);class Uie extends FJ{constructor(e,r){super(e,r),this.logger=e,this.core=r,$n(this,"messages",new Map),$n(this,"messagesWithoutClientAck",new Map),$n(this,"name",Pre),$n(this,"version",Ore),$n(this,"initialized",!1),$n(this,"storagePrefix",Oi),$n(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),$n(this,"set",async(n,i,s)=>{this.isInitialized();const o=Pi(i);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===Kf.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,Bie(Die({},c),{[o]:i}))}return await this.persist(),o}),$n(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),$n(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),$n(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=Pi(i);return typeof s[o]<"u"}),$n(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=Pi(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),$n(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=We(e,this.name),this.core=r}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ib(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,ib(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?sb(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?sb(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Lie=Object.defineProperty,Fie=Object.defineProperties,Mie=Object.getOwnPropertyDescriptors,Cx=Object.getOwnPropertySymbols,jie=Object.prototype.hasOwnProperty,zie=Object.prototype.propertyIsEnumerable,qb=(t,e,r)=>e in t?Lie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zf=(t,e)=>{for(var r in e||(e={}))jie.call(e,r)&&qb(t,r,e[r]);if(Cx)for(var r of Cx(e))zie.call(e,r)&&qb(t,r,e[r]);return t},Hb=(t,e)=>Fie(t,Mie(e)),ci=(t,e,r)=>qb(t,typeof e!="symbol"?e+"":e,r);class qie extends MJ{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,ci(this,"events",new nt.exports.EventEmitter),ci(this,"name",Nre),ci(this,"queue",new Map),ci(this,"publishTimeout",z.toMiliseconds(z.ONE_MINUTE)),ci(this,"initialPublishTimeout",z.toMiliseconds(z.ONE_SECOND*15)),ci(this,"needsTransportRestart",!1),ci(this,"publish",async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const a=s?.ttl||ex,c=qf(s),l=s?.prompt||!1,u=s?.tag||0,d=s?.id||un().toString(),h={topic:n,message:i,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const g=new Promise(async w=>{const p=({id:m})=>{h.opts.id===m&&(this.removeRequestFromQueue(m),this.relayer.events.removeListener(nr.publish,p),w(h))};this.relayer.events.on(nr.publish,p);const b=uo(new Promise((m,E)=>{this.rpcPublish({topic:n,message:i,ttl:a,prompt:l,tag:u,id:d,attestation:s?.attestation,tvf:s?.tvf}).then(m).catch(C=>{this.logger.warn(C,C?.message),E(C)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await b,this.events.removeListener(nr.publish,p)}catch(m){this.queue.set(d,Hb(Zf({},h),{attempt:1})),this.logger.warn(m,m?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:n,message:i,opts:s}}),await uo(g,this.publishTimeout,f)}catch(g){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(g),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw g}finally{this.queue.delete(d)}}),ci(this,"on",(n,i)=>{this.events.on(n,i)}),ci(this,"once",(n,i)=>{this.events.once(n,i)}),ci(this,"off",(n,i)=>{this.events.off(n,i)}),ci(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=We(r,this.name),this.registerEventListeners()}get context(){return it(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:a,ttl:c=ex,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,g={method:zd(qf().protocol).publish,params:Zf({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};mr((r=g.params)==null?void 0:r.prompt)&&((n=g.params)==null||delete n.prompt),mr((i=g.params)==null?void 0:i.tag)&&((s=g.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g});const w=await this.relayer.request(g);return this.relayer.events.emit(nr.publish,e),this.logger.debug("Successfully Published Payload"),w}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,Hb(Zf({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(Hb(Zf({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Xn.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(nr.connection_stalled);return}this.checkQueue()}),this.relayer.on(nr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Hie=Object.defineProperty,Wie=(t,e,r)=>e in t?Hie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bl=(t,e,r)=>Wie(t,typeof e!="symbol"?e+"":e,r);class Vie{constructor(){bl(this,"map",new Map),bl(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),bl(this,"get",e=>this.map.get(e)||[]),bl(this,"exists",(e,r)=>this.get(e).includes(r)),bl(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),bl(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Kie=Object.defineProperty,Gie=Object.defineProperties,Zie=Object.getOwnPropertyDescriptors,xx=Object.getOwnPropertySymbols,Yie=Object.prototype.hasOwnProperty,Jie=Object.prototype.propertyIsEnumerable,Wb=(t,e,r)=>e in t?Kie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yd=(t,e)=>{for(var r in e||(e={}))Yie.call(e,r)&&Wb(t,r,e[r]);if(xx)for(var r of xx(e))Jie.call(e,r)&&Wb(t,r,e[r]);return t},Vb=(t,e)=>Gie(t,Zie(e)),lt=(t,e,r)=>Wb(t,typeof e!="symbol"?e+"":e,r);class Xie extends qJ{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,lt(this,"subscriptions",new Map),lt(this,"topicMap",new Vie),lt(this,"events",new nt.exports.EventEmitter),lt(this,"name",Lre),lt(this,"version",Fre),lt(this,"pending",new Map),lt(this,"cached",[]),lt(this,"initialized",!1),lt(this,"storagePrefix",Oi),lt(this,"subscribeTimeout",z.toMiliseconds(z.ONE_MINUTE)),lt(this,"initialSubscribeTimeout",z.toMiliseconds(z.ONE_SECOND*15)),lt(this,"clientId"),lt(this,"batchSubscribeTopicsLimit",500),lt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),lt(this,"subscribe",async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=qf(i),o={topic:n,relay:s,transportType:i?.transportType};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s,i);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),lt(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),lt(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),lt(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),lt(this,"on",(n,i)=>{this.events.on(n,i)}),lt(this,"once",(n,i)=>{this.events.once(n,i)}),lt(this,"off",(n,i)=>{this.events.off(n,i)}),lt(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),lt(this,"start",async()=>{await this.onConnect()}),lt(this,"stop",async()=>{await this.onDisconnect()}),lt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),lt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),lt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Xn.pulse,async()=>{await this.checkPending()}),this.events.on(xn.created,async n=>{const i=xn.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(xn.deleted,async n=>{const i=xn.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=We(r,this.name),this.clientId=""}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=qf(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=rt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(!n||n?.transportType===wt.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:zd(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n?.internal)==null?void 0:i.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if(n?.transportType===wt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},z.toMiliseconds(z.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(xn.created,d),u(h.id))};this.events.on(xn.created,d);try{const h=await uo(new Promise((f,g)=>{this.relayer.request(s).catch(w=>{this.logger.warn(w,w?.message),g(w)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(xn.created,d),u(h)}catch{}}),l=await uo(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(nr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:zd(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await uo(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(nr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:zd(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await uo(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(nr.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:zd(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Vb(Yd({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Yd({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Yd({},r)),this.topicMap.set(r.topic,e),this.events.emit(xn.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(xn.deleted,Vb(Yd({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(xn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(xn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>Vb(Yd({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await bQ(z.toMiliseconds(z.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Pi(e+await this.getClientId())}}var Qie=Object.defineProperty,$x=Object.getOwnPropertySymbols,ese=Object.prototype.hasOwnProperty,tse=Object.prototype.propertyIsEnumerable,Kb=(t,e,r)=>e in t?Qie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_x=(t,e)=>{for(var r in e||(e={}))ese.call(e,r)&&Kb(t,r,e[r]);if($x)for(var r of $x(e))tse.call(e,r)&&Kb(t,r,e[r]);return t},je=(t,e,r)=>Kb(t,typeof e!="symbol"?e+"":e,r);class rse extends jJ{constructor(e){super(e),je(this,"protocol","wc"),je(this,"version",2),je(this,"core"),je(this,"logger"),je(this,"events",new nt.exports.EventEmitter),je(this,"provider"),je(this,"messages"),je(this,"subscriber"),je(this,"publisher"),je(this,"name",kre),je(this,"transportExplicitlyClosed",!1),je(this,"initialized",!1),je(this,"connectionAttemptInProgress",!1),je(this,"relayUrl"),je(this,"projectId"),je(this,"packageName"),je(this,"bundleId"),je(this,"hasExperiencedNetworkDisruption",!1),je(this,"pingTimeout"),je(this,"heartBeatTimeout",z.toMiliseconds(z.THIRTY_SECONDS+z.FIVE_SECONDS)),je(this,"reconnectTimeout"),je(this,"connectPromise"),je(this,"reconnectInProgress",!1),je(this,"requestsInFlight",[]),je(this,"connectTimeout",z.toMiliseconds(z.ONE_SECOND*15)),je(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||un().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),je(this,"resetPingTimeout",()=>{Of()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),je(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),je(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \u{1F6DC}"),this.startPingTimeout(),this.events.emit(nr.connect)}),je(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \u{1F6D1}"),this.requestsInFlight=[],this.onProviderDisconnect()}),je(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(nr.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),je(this,"registerProviderListeners",()=>{this.provider.on(Un.payload,this.onPayloadHandler),this.provider.on(Un.connect,this.onConnectHandler),this.provider.on(Un.disconnect,this.onDisconnectHandler),this.provider.on(Un.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?We(e.logger,this.name):ln(es({level:e.logger||Tre})),this.messages=new Uie(this.logger,e.core),this.subscriber=new Xie(this,this.logger),this.publisher=new qie(this,this.logger),this.relayUrl=e?.relayUrl||rx,this.projectId=e.projectId,rQ()?this.packageName=S9():nQ()&&(this.bundleId=S9()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return it(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:wt.relay},Kf.outbound)}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r?.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(xn.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(xn.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,_x({internal:{throwOnFailedPublish:o}},r)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await uo(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Y7())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+i?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=Mt(z.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(nr.message,e),await this.recordMessageEvent(e,Kf.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Un.disconnect,s),await uo(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Un.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Un.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Un.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,z.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(Of())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new bt(new h6(cQ({sdkVersion:Lb,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:i}=e;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),yc(e)){if(!e.method.endsWith(Rre))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:wt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(_x({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else jo(e)&&this.events.emit(nr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Kf.inbound),this.events.emit(nr.message,e))}async acknowledgePayload(e){const r=Zs(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Un.payload,this.onPayloadHandler),this.provider.off(Un.connect,this.onConnectHandler),this.provider.off(Un.disconnect,this.onDisconnectHandler),this.provider.off(Un.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Y7();vre(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(nr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},z.toMiliseconds(Dre)))))}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function nse(){}function Ix(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Sx(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Ax(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ise="[object RegExp]",sse="[object String]",ose="[object Number]",ase="[object Boolean]",Px="[object Arguments]",cse="[object Symbol]",lse="[object Date]",use="[object Map]",dse="[object Set]",hse="[object Array]",pse="[object Function]",fse="[object ArrayBuffer]",Gb="[object Object]",gse="[object Error]",wse="[object DataView]",mse="[object Uint8Array]",bse="[object Uint8ClampedArray]",yse="[object Uint16Array]",vse="[object Uint32Array]",Ese="[object BigUint64Array]",Cse="[object Int8Array]",xse="[object Int16Array]",$se="[object Int32Array]",_se="[object BigInt64Array]",Ise="[object Float32Array]",Sse="[object Float64Array]";function Ase(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Pse(t,e,r){return Jd(t,e,void 0,void 0,void 0,void 0,r)}function Jd(t,e,r,n,i,s,o){const a=o(t,e,r,n,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Xd(t,e,s,o)}return Xd(t,e,s,o)}function Xd(t,e,r,n){if(Object.is(t,e))return!0;let i=Ax(t),s=Ax(e);if(i===Px&&(i=Gb),s===Px&&(s=Gb),i!==s)return!1;switch(i){case sse:return t.toString()===e.toString();case ose:{const c=t.valueOf(),l=e.valueOf();return Ase(c,l)}case ase:case lse:case cse:return Object.is(t.valueOf(),e.valueOf());case ise:return t.source===e.source&&t.flags===e.flags;case pse:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(i){case use:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Jd(l,e.get(c),c,t,e,r,n))return!1;return!0}case dse:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Jd(d,f,void 0,t,e,r,n));if(h===-1)return!1;l.splice(h,1)}return!0}case hse:case mse:case bse:case yse:case vse:case Ese:case Cse:case xse:case $se:case _se:case Ise:case Sse:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Jd(t[c],e[c],c,t,e,r,n))return!1;return!0}case fse:return t.byteLength!==e.byteLength?!1:Xd(new Uint8Array(t),new Uint8Array(e),r,n);case wse:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Xd(new Uint8Array(t),new Uint8Array(e),r,n);case gse:return t.name===e.name&&t.message===e.message;case Gb:{if(!(Xd(t.constructor,e.constructor,r,n)||Ix(t)&&Ix(e)))return!1;const c=[...Object.keys(t),...Sx(t)],l=[...Object.keys(e),...Sx(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Jd(h,f,d,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function Ose(t,e){return Pse(t,e,nse)}var Nse=Object.defineProperty,Ox=Object.getOwnPropertySymbols,Tse=Object.prototype.hasOwnProperty,kse=Object.prototype.propertyIsEnumerable,Zb=(t,e,r)=>e in t?Nse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nx=(t,e)=>{for(var r in e||(e={}))Tse.call(e,r)&&Zb(t,r,e[r]);if(Ox)for(var r of Ox(e))kse.call(e,r)&&Zb(t,r,e[r]);return t},Qr=(t,e,r)=>Zb(t,typeof e!="symbol"?e+"":e,r);class ya extends zJ{constructor(e,r,n,i=Oi,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,Qr(this,"map",new Map),Qr(this,"version",Bre),Qr(this,"cached",[]),Qr(this,"initialized",!1),Qr(this,"getKey"),Qr(this,"storagePrefix",Oi),Qr(this,"recentlyDeleted",[]),Qr(this,"recentlyDeletedLimit",200),Qr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!mr(o)?this.map.set(this.getKey(o),o):Jte(o)?this.map.set(o.id,o):Xte(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Qr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Qr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Qr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Ose(a[c],o[c]))):this.values)),Qr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Nx(Nx({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Qr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=We(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=Q("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Rse=Object.defineProperty,Dse=(t,e,r)=>e in t?Rse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Te=(t,e,r)=>Dse(t,typeof e!="symbol"?e+"":e,r);class Bse{constructor(e,r){this.core=e,this.logger=r,Te(this,"name",Mre),Te(this,"version",jre),Te(this,"events",new nt.exports),Te(this,"pairings"),Te(this,"initialized",!1),Te(this,"storagePrefix",Oi),Te(this,"ignoredPayloadTypes",[xs]),Te(this,"registeredMethods",[]),Te(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Te(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),Te(this,"create",async n=>{this.isInitialized();const i=kb(),s=await this.core.crypto.setSymKey(i),o=Mt(z.FIVE_MINUTES),a={protocol:tx},c={topic:s,expiry:o,relay:a,active:!1,methods:n?.methods},l=z7({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit(wa.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:n?.transportType}),{topic:s,uri:l}}),Te(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[Ni.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=j7(n.uri);i.props.properties.topic=s,i.addTrace(Ni.pairing_uri_validation_success),i.addTrace(Ni.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(Ni.existing_pairing),u.active)throw i.setError($s.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(Ni.pairing_not_expired)}const d=c||Mt(z.FIVE_MINUTES),h={topic:s,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(s,d),await this.pairings.set(s,h),i.addTrace(Ni.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(wa.create,h),i.addTrace(Ni.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(Ni.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError($s.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(f){throw i.setError($s.subscribe_pairing_topic_failure),f}return i.addTrace(Ni.subscribe_pairing_topic_success),h}),Te(this,"activate",async({topic:n})=>{this.isInitialized();const i=Mt(z.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),Te(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ua();this.events.once(Ke("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}}),Te(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),Te(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),Te(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Te(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",rt("USER_DISCONNECTED")),await this.deletePairing(i))}),Te(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(i);return z7({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:c,relay:s,expiryTimestamp:o,methods:a})}),Te(this,"sendRequest",async(n,i,s)=>{const o=Nr(i,s),a=await this.core.crypto.encode(n,o),c=Vd[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),Te(this,"sendResult",async(n,i,s)=>{const o=Zs(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=Vd[c].res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),Te(this,"sendError",async(n,i,s)=>{const o=bc(n,s),a=await this.core.crypto.encode(i,o),c=(await this.core.history.get(i,n)).request.method,l=Vd[c]?Vd[c].res:Vd.unregistered_method.res;await this.core.relayer.publish(i,a,l),await this.core.history.resolve(o)}),Te(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),Te(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>ho(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),Te(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),Te(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),Te(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(wa.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),Te(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Dt(i)?this.events.emit(Ke("pairing_ping",s),{}):Et(i)&&this.events.emit(Ke("pairing_ping",s),{error:i.error})},500)}),Te(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(wa.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),Te(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=rt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),Te(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(rt("WC_METHOD_UNSUPPORTED",n))}),Te(this,"isValidPair",(n,i)=>{var s;if(!Xr(n)){const{message:a}=Q("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError($s.malformed_pairing_uri),new Error(a)}if(!Yte(n.uri)){const{message:a}=Q("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError($s.malformed_pairing_uri),new Error(a)}const o=j7(n?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=Q("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError($s.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Q("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError($s.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&z.toMiliseconds(o?.expiryTimestamp)<Date.now()){i.setError($s.pairing_expired);const{message:a}=Q("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Te(this,"isValidPing",async n=>{if(!Xr(n)){const{message:s}=Q("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),Te(this,"isValidDisconnect",async n=>{if(!Xr(n)){const{message:s}=Q("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),Te(this,"isValidPairingTopic",async n=>{if(!Nt(n,!1)){const{message:i}=Q("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=Q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(ho(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=Q("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=We(r,this.name),this.pairings=new ya(this.core,this.logger,this.name,this.storagePrefix)}get context(){return it(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(nr.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(this.pairings.keys.includes(r)&&i!==wt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);yc(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):jo(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Ln.expired,async e=>{const{topic:r}=N9(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(wa.expire,{topic:r}))})}}var Use=Object.defineProperty,Lse=(t,e,r)=>e in t?Use(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vr=(t,e,r)=>Lse(t,typeof e!="symbol"?e+"":e,r);class Fse extends LJ{constructor(e,r){super(e,r),this.core=e,this.logger=r,vr(this,"records",new Map),vr(this,"events",new nt.exports.EventEmitter),vr(this,"name",zre),vr(this,"version",qre),vr(this,"cached",[]),vr(this,"initialized",!1),vr(this,"storagePrefix",Oi),vr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),vr(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Mt(z.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(oi.created,o)}),vr(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Et(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(oi.updated,i))}),vr(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),vr(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(oi.deleted,s)}}),this.persist()}),vr(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),vr(this,"on",(n,i)=>{this.events.on(n,i)}),vr(this,"once",(n,i)=>{this.events.once(n,i)}),vr(this,"off",(n,i)=>{this.events.off(n,i)}),vr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=We(r,this.name)}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Nr(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(oi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(oi.created,e=>{const r=oi.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(oi.updated,e=>{const r=oi.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(oi.deleted,e=>{const r=oi.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Xn.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{z.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(oi.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Mse=Object.defineProperty,jse=(t,e,r)=>e in t?Mse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sr=(t,e,r)=>jse(t,typeof e!="symbol"?e+"":e,r);class zse extends HJ{constructor(e,r){super(e,r),this.core=e,this.logger=r,Sr(this,"expirations",new Map),Sr(this,"events",new nt.exports.EventEmitter),Sr(this,"name",Hre),Sr(this,"version",Wre),Sr(this,"cached",[]),Sr(this,"initialized",!1),Sr(this,"storagePrefix",Oi),Sr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Sr(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),Sr(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Ln.created,{target:s,expiration:o})}),Sr(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),Sr(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Ln.deleted,{target:i,expiration:s})}}),Sr(this,"on",(n,i)=>{this.events.on(n,i)}),Sr(this,"once",(n,i)=>{this.events.once(n,i)}),Sr(this,"off",(n,i)=>{this.events.off(n,i)}),Sr(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=We(r,this.name)}get context(){return it(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return lQ(e);if(typeof e=="number")return uQ(e);const{message:r}=Q("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ln.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;z.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Ln.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Xn.pulse,()=>this.checkExpirations()),this.events.on(Ln.created,e=>{const r=Ln.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ln.expired,e=>{const r=Ln.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ln.deleted,e=>{const r=Ln.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qse=Object.defineProperty,Hse=(t,e,r)=>e in t?qse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tt=(t,e,r)=>Hse(t,typeof e!="symbol"?e+"":e,r);class Wse extends WJ{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,Tt(this,"name",Vre),Tt(this,"abortController"),Tt(this,"isDevEnv"),Tt(this,"verifyUrlV3",Gre),Tt(this,"storagePrefix",Oi),Tt(this,"version",X7),Tt(this,"publicKey"),Tt(this,"fetchPromise"),Tt(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&z.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Tt(this,"register",async i=>{if(!Ad()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=Mi(),u=this.startAbortTimer(z.ONE_SECOND*5),d=await new Promise((h,f)=>{const g=()=>{window.removeEventListener("message",p),l.body.removeChild(w),f("attestation aborted")};this.abortController.signal.addEventListener("abort",g);const w=l.createElement("iframe");w.src=c,w.style.display="none",w.addEventListener("error",g,{signal:this.abortController.signal});const p=b=>{if(b.data&&typeof b.data=="string")try{const m=JSON.parse(b.data);if(m.type==="verify_attestation"){if(tc(m.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(w),this.abortController.signal.removeEventListener("abort",g),window.removeEventListener("message",p),h(m.attestation===null?"":m.attestation)}}catch(m){this.logger.warn(m)}};l.body.appendChild(w),window.addEventListener("message",p,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Tt(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(tc(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(i?.verifyUrl);return this.fetchAttestation(o,c)}),Tt(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(z.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Tt(this,"getVerifyUrl",i=>{let s=i||Kd;return Zre.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Kd}`),s=Kd),s}),Tt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(z.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),Tt(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),Tt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Tt(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Tt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Tt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),Tt(this,"validateAttestation",(i,s)=>{const o=Ute(i,s.publicKey),a={hasExpired:z.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=We(r,this.name),this.abortController=new AbortController,this.isDevEnv=ob(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return it(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),z.toMiliseconds(e))}}var Vse=Object.defineProperty,Kse=(t,e,r)=>e in t?Vse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tx=(t,e,r)=>Kse(t,typeof e!="symbol"?e+"":e,r);class Gse extends VJ{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,Tx(this,"context",Yre),Tx(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,c=`${Jre}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=We(r,this.context)}}var Zse=Object.defineProperty,kx=Object.getOwnPropertySymbols,Yse=Object.prototype.hasOwnProperty,Jse=Object.prototype.propertyIsEnumerable,Yb=(t,e,r)=>e in t?Zse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qd=(t,e)=>{for(var r in e||(e={}))Yse.call(e,r)&&Yb(t,r,e[r]);if(kx)for(var r of kx(e))Jse.call(e,r)&&Yb(t,r,e[r]);return t},ir=(t,e,r)=>Yb(t,typeof e!="symbol"?e+"":e,r);class Xse extends KJ{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,ir(this,"context",Qre),ir(this,"storagePrefix",Oi),ir(this,"storageVersion",Xre),ir(this,"events",new Map),ir(this,"shouldPersist",!1),ir(this,"init",async()=>{if(!ob())try{const i={eventId:k9(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:P9(this.core.relayer.protocol,this.core.relayer.version,Lb)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),ir(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=i,l=k9(),u=this.core.projectId||"",d=Date.now(),h=Qd({eventId:l,timestamp:d,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),ir(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Qd(Qd({},a),this.setMethods(a.eventId))}),ir(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),ir(this,"setEventListeners",()=>{this.core.heartbeat.on(Xn.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{z.fromMiliseconds(Date.now())-z.fromMiliseconds(i.timestamp)>ene&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),ir(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),ir(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),ir(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),ir(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ir(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Qd(Qd({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),ir(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),ir(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${tne}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Lb}${s}`,{method:"POST",body:JSON.stringify(i)})}),ir(this,"getAppDomain",()=>A9().url),this.logger=We(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Qse=Object.defineProperty,Rx=Object.getOwnPropertySymbols,eoe=Object.prototype.hasOwnProperty,toe=Object.prototype.propertyIsEnumerable,Jb=(t,e,r)=>e in t?Qse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dx=(t,e)=>{for(var r in e||(e={}))eoe.call(e,r)&&Jb(t,r,e[r]);if(Rx)for(var r of Rx(e))toe.call(e,r)&&Jb(t,r,e[r]);return t},ft=(t,e,r)=>Jb(t,typeof e!="symbol"?e+"":e,r);class Xb extends RJ{constructor(e){var r;super(e),ft(this,"protocol",J7),ft(this,"version",X7),ft(this,"name",Vf),ft(this,"relayUrl"),ft(this,"projectId"),ft(this,"customStoragePrefix"),ft(this,"events",new nt.exports.EventEmitter),ft(this,"logger"),ft(this,"heartbeat"),ft(this,"relayer"),ft(this,"crypto"),ft(this,"storage"),ft(this,"history"),ft(this,"expirer"),ft(this,"pairing"),ft(this,"verify"),ft(this,"echoClient"),ft(this,"linkModeSupportedApps"),ft(this,"eventClient"),ft(this,"initialized",!1),ft(this,"logChunkController"),ft(this,"on",(a,c)=>this.events.on(a,c)),ft(this,"once",(a,c)=>this.events.once(a,c)),ft(this,"off",(a,c)=>this.events.off(a,c)),ft(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),ft(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:wt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||rx,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=es({level:typeof e?.logger=="string"&&e.logger?e.logger:xre.logger,name:Vf}),{logger:s,chunkLoggerController:o}=fw({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=We(s,this.name),this.heartbeat=new kp,this.crypto=new Pie(this,this.logger,e?.keychain),this.history=new Fse(this,this.logger),this.expirer=new zse(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new z4(Dx(Dx({},$re),e?.storageOptions)),this.relayer=new rse({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Bse(this,this.logger),this.verify=new Wse(this,this.logger,this.storage),this.echoClient=new Gse(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Xse(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new Xb(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Ure,n),r}get context(){return it(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(nx,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(nx)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&process.env.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}}const roe=Xb,Bx="wc",Ux=2,Lx="client",Qb=`${Bx}@${Ux}:${Lx}:`,ey={name:Lx,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},Fx="WALLETCONNECT_DEEPLINK_CHOICE",noe="proposal",Mx="Proposal expired",ioe="session",yl=z.SEVEN_DAYS,soe="engine",sr={wc_sessionPropose:{req:{ttl:z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:z.ONE_DAY,prompt:!1,tag:1114},res:{ttl:z.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:z.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:z.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:z.FIVE_MINUTES,prompt:!1,tag:1119}}},ty={min:z.FIVE_MINUTES,max:z.SEVEN_DAYS},ki={idle:"IDLE",active:"ACTIVE"},jx={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},ooe="request",aoe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],coe="wc",loe="auth",uoe="authKeys",doe="pairingTopics",hoe="requests",Yf=`${coe}@${1.5}:${loe}:`,Jf=`${Yf}:PUB_KEY`;var poe=Object.defineProperty,foe=Object.defineProperties,goe=Object.getOwnPropertyDescriptors,zx=Object.getOwnPropertySymbols,woe=Object.prototype.hasOwnProperty,moe=Object.prototype.propertyIsEnumerable,ry=(t,e,r)=>e in t?poe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ut=(t,e)=>{for(var r in e||(e={}))woe.call(e,r)&&ry(t,r,e[r]);if(zx)for(var r of zx(e))moe.call(e,r)&&ry(t,r,e[r]);return t},Mr=(t,e)=>foe(t,goe(e)),K=(t,e,r)=>ry(t,typeof e!="symbol"?e+"":e,r);class boe extends JJ{constructor(e){super(e),K(this,"name",soe),K(this,"events",new nt.exports),K(this,"initialized",!1),K(this,"requestQueue",{state:ki.idle,queue:[]}),K(this,"sessionRequestQueue",{state:ki.idle,queue:[]}),K(this,"requestQueueDelay",z.ONE_SECOND),K(this,"expectedPairingMethodMap",new Map),K(this,"recentlyDeletedMap",new Map),K(this,"recentlyDeletedLimit",200),K(this,"relayMessageCache",[]),K(this,"pendingSessions",new Map),K(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(sr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},z.toMiliseconds(this.requestQueueDelay)))}),K(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Mr(ut({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=n;let u=i,d,h=!1;try{if(u){const S=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=S.active}}catch(S){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),S}if(!u||!h){const{topic:S,uri:I}=await this.client.core.pairing.create();u=S,d=I}if(!u){const{message:S}=Q("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(S)}const f=await this.client.core.crypto.generateKeyPair(),g=sr.wc_sessionPropose.req.ttl||z.FIVE_MINUTES,w=Mt(g),p=Mr(ut(ut({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:tx}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:w,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Zt()}),b=Ke("session_connect",p.id),{reject:m,resolve:E,done:C}=ua(g,Mx),P=({id:S})=>{S===p.id&&(this.client.events.off("proposal_expire",P),this.pendingSessions.delete(p.id),this.events.emit(b,{error:{message:Mx,code:0}}))};return this.client.events.on("proposal_expire",P),this.events.once(b,({error:S,session:I})=>{this.client.events.off("proposal_expire",P),S?m(S):I&&E(I)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0,clientRpcId:p.id}),await this.setProposal(p.id,p),{uri:d,approval:C}}),K(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),K(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[ai.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch($){throw o.setError(ma.no_internet_connection),$}try{await this.isValidProposalId(r?.id)}catch($){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(ma.proposal_not_found),$}try{await this.isValidApprove(r)}catch($){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ma.session_approve_namespace_validation_failure),$}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:g,proposer:w,requiredNamespaces:p,optionalNamespaces:b}=f;let m=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:g});m||(m=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:ai.session_approve_started,properties:{topic:g,trace:[ai.session_approve_started,ai.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),C=w.publicKey,P=await this.client.core.crypto.generateSharedKey(E,C),S=ut(ut(ut({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:E,metadata:this.client.metadata},expiry:Mt(yl)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),I=wt.relay;m.addTrace(ai.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:I})}catch($){throw m.setError(ma.subscribe_session_topic_failure),$}m.addTrace(ai.subscribe_session_topic_success);const N=Mr(ut({},S),{topic:P,requiredNamespaces:p,optionalNamespaces:b,pairingTopic:g,acknowledged:!1,self:S.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:E,transportType:wt.relay});await this.client.session.set(P,N),m.addTrace(ai.store_session);try{m.addTrace(ai.publishing_session_settle),await this.sendRequest({topic:P,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0}).catch($=>{throw m?.setError(ma.session_settle_publish_failure),$}),m.addTrace(ai.session_settle_publish_success),m.addTrace(ai.publishing_session_approve),await this.sendResult({id:a,topic:g,result:{relay:{protocol:c??"irn"},responderPublicKey:E},throwOnFailedPublish:!0}).catch($=>{throw m?.setError(ma.session_approve_publish_failure),$}),m.addTrace(ai.session_approve_publish_success)}catch($){throw this.client.logger.error($),this.client.session.delete(P,rt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),$}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:g,metadata:w.metadata}),await this.client.proposal.delete(a,rt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:g}),await this.setExpiry(P,Mt(yl)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}}),K(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:sr.wc_sessionPropose.reject}),await this.client.proposal.delete(n,rt("USER_DISCONNECTED")))}),K(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=ua(),c=Zt(),l=un().toString(),u=this.client.session.get(n).namespaces;return this.events.once(Ke("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:u}),a(d)}),{acknowledged:s}}),K(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,i=Zt(),{done:s,resolve:o,reject:a}=ua();return this.events.once(Ke("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,Mt(yl)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}}),K(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(b){throw this.client.logger.error("request() -> isValidRequest() failed"),b}const{chainId:n,request:i,topic:s,expiry:o=sr.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);a?.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const c=Zt(),l=un().toString(),{done:u,resolve:d,reject:h}=ua(o,"Request expired. Please try again.");this.events.once(Ke("session_request",c),({error:b,result:m})=>{b?h(b):d(m)});const f="wc_sessionRequest",g=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(g)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:{request:Mr(ut({},i),{expiryTimestamp:Mt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:g}).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),await u();const w={request:Mr(ut({},i),{expiryTimestamp:Mt(o)}),chainId:n},p=this.shouldSetTVF(f,w);return await Promise.all([new Promise(async b=>{await this.sendRequest(ut({clientRpcId:c,relayRpcId:l,topic:s,method:f,params:w,expiry:o,throwOnFailedPublish:!0},p&&{tvf:this.getTVFParams(c,w)})).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:c}),b()}),new Promise(async b=>{var m;if(!((m=a.sessionConfig)!=null&&m.disableDeepLink)){const E=await fQ(this.client.core.storage,Fx);await dQ({id:c,topic:s,wcDeepLink:E})}b()}),u()]).then(b=>b[2])}),K(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Dt(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:a}):Et(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:a}),this.cleanupAfterResponse(r)}),K(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Zt(),s=un().toString(),{done:o,resolve:a,reject:c}=ua();this.events.once(Ke("session_ping",i),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),K(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=un().toString(),a=Zt();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),K(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:rt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=Q("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),K(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Gte(n,r)))),K(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),K(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?wt.link_mode:wt.relay;o===wt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:g,methods:w=[],expiry:p}=r,b=[...r.resources||[]],{topic:m,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:E}});const C=await this.client.core.crypto.generateKeyPair(),P=zf(C);if(await Promise.all([this.client.auth.authKeys.set(Jf,{responseTopic:P,publicKey:C}),this.client.auth.pairingTopics.set(P,{topic:P,pairingTopic:m})]),await this.client.core.relayer.subscribe(P,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${m}`),w.length>0){const{namespace:_}=il(a[0]);let k=see(_,"request",w);Rf(b)&&(k=aee(k,b.pop())),b.push(k)}const S=p&&p>sr.wc_sessionAuthenticate.req.ttl?p:sr.wc_sessionAuthenticate.req.ttl,I={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:g,resources:b},requester:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:Mt(S)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...w])],events:["chainChanged","accountsChanged"]}},$={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:C,metadata:this.client.metadata},expiryTimestamp:Mt(sr.wc_sessionPropose.req.ttl),id:Zt()},{done:D,resolve:T,reject:R}=ua(S,"Request expired"),M=Zt(),x=Ke("session_connect",$.id),y=Ke("session_request",M),v=async({error:_,session:k})=>{this.events.off(y,A),_?R(_):k&&T({session:k})},A=async _=>{var k,L,F;if(await this.deletePendingAuthRequest(M,{message:"fulfilled",code:0}),_.error){const te=rt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return _.error.code===te.code?void 0:(this.events.off(x,v),R(_.error.message))}await this.deleteProposal($.id),this.events.off(x,v);const{cacaos:H,responder:q}=_.result,W=[],Y=[];for(const te of H){await G9({cacao:te,projectId:this.client.core.projectId})||(this.client.logger.error(te,"Signature verification failed"),R(rt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Ee}=te,Ce=Rf(Ee.resources),xe=[hb(Ee.iss)],_e=kf(Ee.iss);if(Ce){const Ge=J9(Ce),xr=X9(Ce);W.push(...Ge),xe.push(...xr)}for(const Ge of xe)Y.push(`${Ge}:${_e}`)}const ae=await this.client.core.crypto.generateSharedKey(C,q.publicKey);let re;W.length>0&&(re={topic:ae,acknowledged:!0,self:{publicKey:C,metadata:this.client.metadata},peer:q,controller:q.publicKey,expiry:Mt(yl),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:q7([...new Set(W)],[...new Set(Y)]),transportType:o},await this.client.core.relayer.subscribe(ae,{transportType:o}),await this.client.session.set(ae,re),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:q.metadata}),re=this.client.session.get(ae)),(k=this.client.metadata.redirect)!=null&&k.linkMode&&(L=q.metadata.redirect)!=null&&L.linkMode&&(F=q.metadata.redirect)!=null&&F.universal&&n&&(this.client.core.addLinkModeSupportedApp(q.metadata.redirect.universal),this.client.session.update(ae,{transportType:wt.link_mode})),T({auths:H,session:re})};this.events.once(x,v),this.events.once(y,A);let O;try{if(s){const _=Nr("wc_sessionAuthenticate",I,M);this.client.core.history.set(m,_);const k=await this.client.core.crypto.encode("",_,{type:Fd,encoding:wo});O=Hf(n,m,k)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:I,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:M}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:$,expiry:sr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:$.id})])}catch(_){throw this.events.off(x,v),this.events.off(y,A),_}return await this.setProposal($.id,$),await this.setAuthRequest(M,{request:Mr(ut({},I),{verifyContext:{}}),pairingTopic:m,transportType:o}),{uri:O??E,response:D}}),K(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[ba.authenticated_session_approve_started]}});try{this.isInitialized()}catch(p){throw s.setError(Gd.no_internet_connection),p}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(Gd.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||wt.relay;a===wt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=zf(c),d={type:xs,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const p of i){if(!await G9({cacao:p,projectId:this.client.core.projectId})){s.setError(Gd.invalid_cacao);const P=rt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:P,encodeOpts:d}),new Error(P.message)}s.addTrace(ba.cacaos_verified);const{p:b}=p,m=Rf(b.resources),E=[hb(b.iss)],C=kf(b.iss);if(m){const P=J9(m),S=X9(m);h.push(...P),E.push(...S)}for(const P of E)f.push(`${P}:${C}`)}const g=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(ba.create_authenticated_session_topic);let w;if(h?.length>0){w={topic:g,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Mt(yl),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:q7([...new Set(h)],[...new Set(f)]),transportType:a},s.addTrace(ba.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(g,{transportType:a})}catch(p){throw s.setError(Gd.subscribe_authenticated_session_topic_failure),p}s.addTrace(ba.subscribe_authenticated_session_topic_success),await this.client.session.set(g,w),s.addTrace(ba.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(ba.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(p){throw s.setError(Gd.authenticated_session_approve_publish_failure),p}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:w}}),K(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=zf(o),l={type:xs,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:i,encodeOpts:l,rpcOpts:sr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,rt("USER_DISCONNECTED"))}),K(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return Z9(n,i)}),K(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),K(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),K(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,rt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(Fx).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===i&&this.deletePendingSessionRequest(l.id,rt("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=ki.idle),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),K(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r);this.client.core.eventClient.getEvent({topic:i.pairingTopic})?.setError(ma.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,rt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),K(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=ki.idle,this.client.events.emit("session_request_expire",{id:r}))}),K(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),K(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),K(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,Mt(sr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),K(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=wt.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),K(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Mt(sr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),K(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=r,h=Nr(i,s,c);let f;const g=!!u;try{const b=g?wo:si;f=await this.client.core.crypto.encode(n,h,{encoding:b})}catch(b){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),b}let w;if(aoe.includes(i)){const b=Pi(JSON.stringify(h)),m=Pi(f);w=await this.client.core.verify.register({id:m,decryptedId:b})}const p=sr[i].req;if(p.attestation=w,o&&(p.ttl=o),a&&(p.id=a),this.client.core.history.set(n,h),g){const b=Hf(u,n,f);await global.Linking.openURL(b,this.client.name)}else{const b=sr[i].req;o&&(b.ttl=o),a&&(b.id=a),b.tvf=Mr(ut({},d),{correlationId:h.id}),l?(b.internal=Mr(ut({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,f,b)):this.client.core.relayer.publish(n,f,b).catch(m=>this.client.logger.error(m))}return h.id}),K(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=Zs(n,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?wo:si;u=await this.client.core.crypto.encode(i,l,Mr(ut({},a||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),g}let h,f;try{h=await this.client.core.history.get(i,n);const g=h.request;try{this.shouldSetTVF(g.method,g.params)&&(f=this.getTVFParams(n,g.params,s))}catch(w){this.client.logger.warn("sendResult() -> getTVFParams() failed",w)}}catch(g){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),g}if(d){const g=Hf(c,i,u);await global.Linking.openURL(g,this.client.name)}else{const g=h.request.method,w=sr[g].res;w.tvf=Mr(ut({},f),{correlationId:n}),o?(w.internal=Mr(ut({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,w)):this.client.core.relayer.publish(i,u,w).catch(p=>this.client.logger.error(p))}await this.client.core.history.resolve(l)}),K(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=bc(n,s);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?wo:si;u=await this.client.core.crypto.encode(i,l,Mr(ut({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),f}let h;try{h=await this.client.core.history.get(i,n)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),f}if(d){const f=Hf(c,i,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,g=a||sr[f].res;this.client.core.relayer.publish(i,u,g)}await this.client.core.history.resolve(l)}),K(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;ho(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{ho(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),K(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),K(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),K(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ki.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ki.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=ki.idle}),K(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,c=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),K(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),K(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=Q("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),K(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),K(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:c}=i;try{const l=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError($s.proposal_listener_not_found)),this.isValidConnect(ut({},i.params));const u=a.expiryTimestamp||Mt(sr.wc_sessionPropose.req.ttl),d=ut({id:c,pairingTopic:n,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:s,hash:Pi(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});l?.addTrace(Ni.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:n,error:l,rpcOpts:sr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),K(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Dt(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(Et(n)){await this.client.proposal.delete(s,rt("USER_DISCONNECTED"));const o=Ke("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),K(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n.params,f=[...this.pendingSessions.values()].find(p=>p.sessionTopic===r);if(!f)return this.client.logger.error(`Pending session not found for topic ${r}`);const g=this.client.proposal.get(f.proposalId),w=Mr(ut(ut(ut({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:wt.relay});await this.client.session.set(w.topic,w),await this.setExpiry(w.topic,w.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:w.peer.metadata}),this.client.events.emit("session_connect",{session:w}),this.events.emit(Ke("session_connect",f.proposalId),{session:w}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(w),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),K(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Dt(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ke("session_approve",i),{})):Et(n)&&(await this.client.session.delete(r,rt("USER_DISCONNECTED")),this.events.emit(Ke("session_approve",i),{error:n.error}))}),K(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=Wd.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:rt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ut({topic:r},i));try{Wd.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw Wd.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),K(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),K(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=Ke("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Dt(n)?this.events.emit(Ke("session_update",i),{}):Et(n)&&this.events.emit(Ke("session_update",i),{error:n.error})}),K(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Mt(yl)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),K(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=Ke("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Dt(n)?this.events.emit(Ke("session_extend",i),{}):Et(n)&&this.events.emit(Ke("session_extend",i),{error:n.error})}),K(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),K(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=Ke("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Dt(n)?this.events.emit(Ke("session_ping",i),{}):Et(n)&&this.events.emit(Ke("session_ping",i),{error:n.error})},500)}),K(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(nr.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:rt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),K(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:d,params:h}=a;try{await this.isValidRequest(ut({topic:o},h));const f=this.client.session.get(o),g=await this.getVerifyContext({attestationId:c,hash:Pi(JSON.stringify(Nr("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),w={id:d,topic:o,params:h,verifyContext:g};await this.setPendingSessionRequest(w),u===wt.link_mode&&(n=f.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=f.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(w):(this.addSessionRequestToSessionRequestQueue(w),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),K(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=Ke("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Dt(n)?this.events.emit(Ke("session_request",i),{result:n.result}):Et(n)&&this.events.emit(Ke("session_request",i),{error:n.error})}),K(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=Wd.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ut({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),Wd.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),K(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Dt(n)?this.events.emit(Ke("session_request",i),{result:n.result}):Et(n)&&this.events.emit(Ke("session_request",i),{error:n.error})}),K(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:d}=s.params,h=await this.getVerifyContext({attestationId:o,hash:Pi(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:i,id:s.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(s.id,{request:f,pairingTopic:i,transportType:c}),c===wt.link_mode&&(n=l.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(s.params.requester.metadata,c),f={type:xs,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:s.id,topic:i,error:l,encodeOpts:f,rpcOpts:sr.wc_sessionAuthenticate.autoReject,appLink:h})}}),K(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),K(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ki.idle,this.processSessionRequestQueue()},z.toMiliseconds(this.requestQueueDelay))}),K(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Ke("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Ke("session_request",s.request.id),{error:n})})}),K(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ki.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ki.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),K(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),K(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Nr("wc_sessionPropose",Mr(ut({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),K(this,"isValidConnect",async r=>{if(!Xr(r)){const{message:l}=Q("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:c}=r;if(mr(n)||await this.isValidPairingTopic(n),!ore(c,!0)){const{message:l}=Q("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!mr(i)&&Hd(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!mr(s)&&Hd(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),mr(o)||this.validateSessionProps(o,"sessionProperties"),!mr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),K(this,"validateNamespaces",(r,n)=>{const i=sre(r,"connect()",n);if(i)throw new Error(i.message)}),K(this,"isValidApprove",async r=>{if(!Xr(r))throw new Error(Q("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),l=Bb(i,"approve()");if(l)throw new Error(l.message);const u=G7(c.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!Nt(s,!0)){const{message:d}=Q("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}if(mr(o)||this.validateSessionProps(o,"sessionProperties"),!mr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(i));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),K(this,"isValidReject",async r=>{if(!Xr(r)){const{message:s}=Q("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!cre(i)){const{message:s}=Q("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),K(this,"isValidSessionSettleRequest",r=>{if(!Xr(r)){const{message:l}=Q("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!V7(n)){const{message:l}=Q("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Qte(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Bb(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(ho(o)){const{message:l}=Q("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),K(this,"isValidUpdate",async r=>{if(!Xr(r)){const{message:c}=Q("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Bb(i,"update()");if(o)throw new Error(o.message);const a=G7(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),K(this,"isValidExtend",async r=>{if(!Xr(r)){const{message:i}=Q("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),K(this,"isValidRequest",async r=>{if(!Xr(r)){const{message:c}=Q("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!K7(a,s)){const{message:c}=Q("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!lre(i)){const{message:c}=Q("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!hre(a,s,i.method)){const{message:c}=Q("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!wre(o,ty)){const{message:c}=Q("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${ty.min} and ${ty.max}`);throw new Error(c)}}),K(this,"isValidRespond",async r=>{var n;if(!Xr(r)){const{message:o}=Q("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!ure(s)){const{message:o}=Q("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),K(this,"isValidPing",async r=>{if(!Xr(r)){const{message:i}=Q("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),K(this,"isValidEmit",async r=>{if(!Xr(r)){const{message:a}=Q("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!K7(o,s)){const{message:a}=Q("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!dre(i)){const{message:a}=Q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!pre(o,s,i.name)){const{message:a}=Q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),K(this,"isValidDisconnect",async r=>{if(!Xr(r)){const{message:i}=Q("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),K(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!Nt(i,!1))throw new Error("uri is required parameter");if(!Nt(s,!1))throw new Error("domain is required parameter");if(!Nt(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>il(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=il(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),K(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Kd,validation:"UNKNOWN",origin:o.url||""}};try{if(a===wt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),K(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=Q("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),K(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),K(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),K(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=Q("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),K(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,c,l,u,d,h;return!r||n!==wt.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r?.redirect)==null?void 0:u.universal)!==void 0&&((d=r?.redirect)==null?void 0:d.universal)!==""&&((h=r?.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),K(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r?.redirect)==null?void 0:i.universal:void 0}),K(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=T9(r,"topic")||"",i=decodeURIComponent(T9(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:wt.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),K(this,"registerLinkModeListeners",async()=>{var r;if(ob()||lo()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),K(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:i}=n;return Object.keys(jx).includes(i.method)}),K(this,"getTVFParams",(r,n,i)=>{var s,o;try{const a=n.request.method,c=this.extractTxHashesFromResult(a,i);return Mr(ut({correlationId:r,rpcMethods:[a],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),K(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=r?.data||((n=r?.[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),K(this,"extractTxHashesFromResult",(r,n)=>{try{const i=jx[r];if(typeof n=="string")return[n];const s=n[i.key];if(mo(s))return r==="solana_signAllTransactions"?s.map(o=>WQ(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(nr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Jf)?this.client.auth.authKeys.get(Jf):{responseTopic:void 0,publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===wt.link_mode?wo:si});yc(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:Pi(n)})):jo(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s}),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Ln.expired,async e=>{const{topic:r,id:n}=N9(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Q("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,Q("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(wa.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(wa.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Nt(e,!1)){const{message:r}=Q("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(ho(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Q("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Nt(e,!1)){const{message:r}=Q("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=Q("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(ho(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=Q("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=Q("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Nt(e,!1)){const{message:r}=Q("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Q("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!are(e)){const{message:r}=Q("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Q("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(ho(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=Q("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class yoe extends ya{constructor(e,r){super(e,r,noe,Qb),this.core=e,this.logger=r}}class voe extends ya{constructor(e,r){super(e,r,ioe,Qb),this.core=e,this.logger=r}}class Eoe extends ya{constructor(e,r){super(e,r,ooe,Qb,n=>n.id),this.core=e,this.logger=r}}class Coe extends ya{constructor(e,r){super(e,r,uoe,Yf,()=>Jf),this.core=e,this.logger=r}}class xoe extends ya{constructor(e,r){super(e,r,doe,Yf),this.core=e,this.logger=r}}class $oe extends ya{constructor(e,r){super(e,r,hoe,Yf,n=>n.id),this.core=e,this.logger=r}}var _oe=Object.defineProperty,Ioe=(t,e,r)=>e in t?_oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ny=(t,e,r)=>Ioe(t,typeof e!="symbol"?e+"":e,r);class Soe{constructor(e,r){this.core=e,this.logger=r,ny(this,"authKeys"),ny(this,"pairingTopics"),ny(this,"requests"),this.authKeys=new Coe(this.core,this.logger),this.pairingTopics=new xoe(this.core,this.logger),this.requests=new $oe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Aoe=Object.defineProperty,Poe=(t,e,r)=>e in t?Aoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ke=(t,e,r)=>Poe(t,typeof e!="symbol"?e+"":e,r);class iy extends YJ{constructor(e){super(e),ke(this,"protocol",Bx),ke(this,"version",Ux),ke(this,"name",ey.name),ke(this,"metadata"),ke(this,"core"),ke(this,"logger"),ke(this,"events",new nt.exports.EventEmitter),ke(this,"engine"),ke(this,"session"),ke(this,"proposal"),ke(this,"pendingRequest"),ke(this,"auth"),ke(this,"signConfig"),ke(this,"on",(n,i)=>this.events.on(n,i)),ke(this,"once",(n,i)=>this.events.once(n,i)),ke(this,"off",(n,i)=>this.events.off(n,i)),ke(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),ke(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),ke(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),ke(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),ke(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),ke(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=e?.name||ey.name,this.metadata=sQ(e?.metadata),this.signConfig=e?.signConfig;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:ln(es({level:e?.logger||ey.logger}));this.core=e?.core||new roe(e),this.logger=We(r,this.name),this.session=new voe(this.core,this.logger),this.proposal=new yoe(this.core,this.logger),this.pendingRequest=new Eoe(this.core,this.logger),this.engine=new boe(this),this.auth=new Soe(this.core,this.logger)}static async init(e){const r=new iy(e);return await r.initialize(),r}get context(){return it(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},z.toMiliseconds(z.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const qx="error",Ooe="wss://relay.walletconnect.org",Noe="wc",Toe="universal_provider",Xf=`${Noe}@2:${Toe}:`,Hx="https://rpc.walletconnect.org/v1/",vl="generic",koe=`${Hx}bundler`,Fn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Roe(){}function sy(t){return t==null||typeof t!="object"&&typeof t!="function"}function oy(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Doe(t){if(sy(t))return t;if(Array.isArray(t)||oy(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function Wx(t){return typeof t=="object"&&t!==null}function Vx(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Kx(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Boe="[object RegExp]",Gx="[object String]",Zx="[object Number]",Yx="[object Boolean]",Jx="[object Arguments]",Uoe="[object Symbol]",Loe="[object Date]",Foe="[object Map]",Moe="[object Set]",joe="[object Array]",zoe="[object ArrayBuffer]",qoe="[object Object]",Hoe="[object DataView]",Woe="[object Uint8Array]",Voe="[object Uint8ClampedArray]",Koe="[object Uint16Array]",Goe="[object Uint32Array]",Zoe="[object Int8Array]",Yoe="[object Int16Array]",Joe="[object Int32Array]",Xoe="[object Float32Array]",Qoe="[object Float64Array]";function eae(t,e){return El(t,void 0,t,new Map,e)}function El(t,e,r,n=new Map,i=void 0){const s=i?.(t,e,r,n);if(s!=null)return s;if(sy(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=El(t[a],a,r,n,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,El(c,a,r,n,i));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(El(a,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(oy(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=El(t[a],a,r,n,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),va(o,t,r,n,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),va(o,t,r,n,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),va(o,t,r,n,i),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,va(o,t,r,n,i),o}if(typeof t=="object"&&tae(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),va(o,t,r,n,i),o}return t}function va(t,e,r=t,n,i){const s=[...Object.keys(e),...Vx(e)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=El(e[a],a,r,n,i))}}function tae(t){switch(Kx(t)){case Jx:case joe:case zoe:case Hoe:case Yx:case Loe:case Xoe:case Qoe:case Zoe:case Yoe:case Joe:case Foe:case Zx:case qoe:case Boe:case Moe:case Gx:case Uoe:case Woe:case Voe:case Koe:case Goe:return!0;default:return!1}}function rae(t,e){return eae(t,(r,n,i,s)=>{const o=e?.(r,n,i,s);if(o!=null)return o;if(typeof t=="object")switch(Object.prototype.toString.call(t)){case Zx:case Gx:case Yx:{const a=new t.constructor(t?.valueOf());return va(a,t),a}case Jx:{const a={};return va(a,t),a.length=t.length,a[Symbol.iterator]=t[Symbol.iterator],a}default:return}})}function Xx(t){return rae(t)}function Qx(t){return t!==null&&typeof t=="object"&&Kx(t)==="[object Arguments]"}function nae(t){return oy(t)}function iae(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function sae(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let i=t;for(let s=0;s<r.length;s++){const o=r[s];i=ay(i,o,n,new Map)}return i}function ay(t,e,r,n){if(sy(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return Doe(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...Vx(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],c=t[o];if(Qx(a)&&(a={...a}),Qx(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Xx(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=r(c,a,o,t,e,n);l!=null?t[o]=l:Array.isArray(a)||Wx(c)&&Wx(a)?t[o]=ay(c,a,r,n):c==null&&iae(a)?t[o]=ay({},a,r,n):c==null&&nae(a)?t[o]=Xx(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function oae(t,...e){return sae(t,...e,Roe)}var aae=Object.defineProperty,cae=Object.defineProperties,lae=Object.getOwnPropertyDescriptors,e$=Object.getOwnPropertySymbols,uae=Object.prototype.hasOwnProperty,dae=Object.prototype.propertyIsEnumerable,t$=(t,e,r)=>e in t?aae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qf=(t,e)=>{for(var r in e||(e={}))uae.call(e,r)&&t$(t,r,e[r]);if(e$)for(var r of e$(e))dae.call(e,r)&&t$(t,r,e[r]);return t},hae=(t,e)=>cae(t,lae(e));function _n(t,e,r){var n;const i=il(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${Hx}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function Ea(t){return t.includes(":")?t.split(":")[1]:t}function r$(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function pae(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function cy(t={},e={}){const r=n$(t),n=n$(e);return oae(r,n)}function n$(t){var e,r,n,i;const s={};if(!Hd(t))return s;for(const[o,a]of Object.entries(t)){const c=Rb(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],d=a.rpcMap||{},h=qd(o);s[h]=hae(Qf(Qf({},s[h]),a),{chains:Nf(c,(e=s[h])==null?void 0:e.chains),methods:Nf(l,(r=s[h])==null?void 0:r.methods),events:Nf(u,(n=s[h])==null?void 0:n.events),rpcMap:Qf(Qf({},d),(i=s[h])==null?void 0:i.rpcMap)})}return s}function i$(t){return t.includes(":")?t.split(":")[2]:t}function s$(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=Rb(r)?[r]:n.chains?n.chains:r$(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function ly(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const o$={},ze=t=>o$[t],uy=(t,e)=>{o$[t]=e};var fae=Object.defineProperty,gae=(t,e,r)=>e in t?fae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cl=(t,e,r)=>gae(t,typeof e!="symbol"?e+"":e,r);class wae{constructor(e){Cl(this,"name","polkadot"),Cl(this,"client"),Cl(this,"httpProviders"),Cl(this,"events"),Cl(this,"namespace"),Cl(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ea(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||_n(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,ze("disableProviderPing")))}}var mae=Object.defineProperty,bae=Object.defineProperties,yae=Object.getOwnPropertyDescriptors,a$=Object.getOwnPropertySymbols,vae=Object.prototype.hasOwnProperty,Eae=Object.prototype.propertyIsEnumerable,dy=(t,e,r)=>e in t?mae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c$=(t,e)=>{for(var r in e||(e={}))vae.call(e,r)&&dy(t,r,e[r]);if(a$)for(var r of a$(e))Eae.call(e,r)&&dy(t,r,e[r]);return t},l$=(t,e)=>bae(t,yae(e)),xl=(t,e,r)=>dy(t,typeof e!="symbol"?e+"":e,r);class Cae{constructor(e){xl(this,"name","eip155"),xl(this,"client"),xl(this,"chainId"),xl(this,"namespace"),xl(this,"httpProviders"),xl(this,"events"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||_n(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,ze("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(Ea(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((i=o?.sessionProperties)==null?void 0:i.capabilities)||{};if(a!=null&&a[s])return a?.[s];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:l$(c$({},o.sessionProperties||{}),{capabilities:l$(c$({},a||{}),{[s]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nr("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${koe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var xae=Object.defineProperty,$ae=(t,e,r)=>e in t?xae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$l=(t,e,r)=>$ae(t,typeof e!="symbol"?e+"":e,r);class _ae{constructor(e){$l(this,"name","solana"),$l(this,"client"),$l(this,"httpProviders"),$l(this,"events"),$l(this,"namespace"),$l(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ea(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||_n(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,ze("disableProviderPing")))}}var Iae=Object.defineProperty,Sae=(t,e,r)=>e in t?Iae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_l=(t,e,r)=>Sae(t,typeof e!="symbol"?e+"":e,r);class Aae{constructor(e){_l(this,"name","cosmos"),_l(this,"client"),_l(this,"httpProviders"),_l(this,"events"),_l(this,"namespace"),_l(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ea(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||_n(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,ze("disableProviderPing")))}}var Pae=Object.defineProperty,Oae=(t,e,r)=>e in t?Pae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Il=(t,e,r)=>Oae(t,typeof e!="symbol"?e+"":e,r);class Nae{constructor(e){Il(this,"name","algorand"),Il(this,"client"),Il(this,"httpProviders"),Il(this,"events"),Il(this,"namespace"),Il(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||_n(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||_n(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new bt(new Ct(n,ze("disableProviderPing")))}}var Tae=Object.defineProperty,kae=(t,e,r)=>e in t?Tae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sl=(t,e,r)=>kae(t,typeof e!="symbol"?e+"":e,r);class Rae{constructor(e){Sl(this,"name","cip34"),Sl(this,"client"),Sl(this,"httpProviders"),Sl(this,"events"),Sl(this,"namespace"),Sl(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=Ea(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,ze("disableProviderPing")))}}var Dae=Object.defineProperty,Bae=(t,e,r)=>e in t?Dae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Al=(t,e,r)=>Bae(t,typeof e!="symbol"?e+"":e,r);class Uae{constructor(e){Al(this,"name","elrond"),Al(this,"client"),Al(this,"httpProviders"),Al(this,"events"),Al(this,"namespace"),Al(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ea(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||_n(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,ze("disableProviderPing")))}}var Lae=Object.defineProperty,Fae=(t,e,r)=>e in t?Lae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pl=(t,e,r)=>Fae(t,typeof e!="symbol"?e+"":e,r);class Mae{constructor(e){Pl(this,"name","multiversx"),Pl(this,"client"),Pl(this,"httpProviders"),Pl(this,"events"),Pl(this,"namespace"),Pl(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Ea(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||_n(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,ze("disableProviderPing")))}}var jae=Object.defineProperty,zae=(t,e,r)=>e in t?jae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ol=(t,e,r)=>zae(t,typeof e!="symbol"?e+"":e,r);class qae{constructor(e){Ol(this,"name","near"),Ol(this,"client"),Ol(this,"httpProviders"),Ol(this,"events"),Ol(this,"namespace"),Ol(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||_n(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||_n(e,this.namespace);return typeof n>"u"?void 0:new bt(new Ct(n,ze("disableProviderPing")))}}var Hae=Object.defineProperty,Wae=(t,e,r)=>e in t?Hae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nl=(t,e,r)=>Wae(t,typeof e!="symbol"?e+"":e,r);class Vae{constructor(e){Nl(this,"name","tezos"),Nl(this,"client"),Nl(this,"httpProviders"),Nl(this,"events"),Nl(this,"namespace"),Nl(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||_n(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||_n(e,this.namespace);return typeof n>"u"?void 0:new bt(new Ct(n))}}var Kae=Object.defineProperty,Gae=(t,e,r)=>e in t?Kae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tl=(t,e,r)=>Gae(t,typeof e!="symbol"?e+"":e,r);class Zae{constructor(e){Tl(this,"name",vl),Tl(this,"client"),Tl(this,"httpProviders"),Tl(this,"events"),Tl(this,"namespace"),Tl(this,"chainId"),this.namespace=e.namespace,this.events=ze("events"),this.client=ze("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=il(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||_n(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new bt(new Ct(n,ze("disableProviderPing")))}}var Yae=Object.defineProperty,Jae=Object.defineProperties,Xae=Object.getOwnPropertyDescriptors,u$=Object.getOwnPropertySymbols,Qae=Object.prototype.hasOwnProperty,ece=Object.prototype.propertyIsEnumerable,hy=(t,e,r)=>e in t?Yae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,e0=(t,e)=>{for(var r in e||(e={}))Qae.call(e,r)&&hy(t,r,e[r]);if(u$)for(var r of u$(e))ece.call(e,r)&&hy(t,r,e[r]);return t},py=(t,e)=>Jae(t,Xae(e)),Mn=(t,e,r)=>hy(t,typeof e!="symbol"?e+"":e,r);class fy{constructor(e){Mn(this,"client"),Mn(this,"namespaces"),Mn(this,"optionalNamespaces"),Mn(this,"sessionProperties"),Mn(this,"scopedProperties"),Mn(this,"events",new nt.exports),Mn(this,"rpcProviders",{}),Mn(this,"session"),Mn(this,"providerOpts"),Mn(this,"logger"),Mn(this,"uri"),Mn(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:ln(es({level:e?.logger||qx})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new fy(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:e0({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,Zs(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:rt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=s$(this.session.namespaces);this.namespaces=cy(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=s$(i.namespaces);return this.namespaces=cy(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===vl?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(mo(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await iy.init({core:this.providerOpts.core,logger:this.providerOpts.logger||qx,relayUrl:this.providerOpts.relayUrl||Ooe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>qd(r)))];uy("client",this.client),uy("events",this.events),uy("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=pae(r,this.session),i=r$(n),s=cy(this.namespaces,this.optionalNamespaces),o=py(e0({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new Cae({namespace:o});break;case"algorand":this.rpcProviders[r]=new Nae({namespace:o});break;case"solana":this.rpcProviders[r]=new _ae({namespace:o});break;case"cosmos":this.rpcProviders[r]=new Aae({namespace:o});break;case"polkadot":this.rpcProviders[r]=new wae({namespace:o});break;case"cip34":this.rpcProviders[r]=new Rae({namespace:o});break;case"elrond":this.rpcProviders[r]=new Uae({namespace:o});break;case"multiversx":this.rpcProviders[r]=new Mae({namespace:o});break;case"near":this.rpcProviders[r]=new qae({namespace:o});break;case"tezos":this.rpcProviders[r]=new Vae({namespace:o});break;default:this.rpcProviders[vl]?this.rpcProviders[vl].updateNamespace(o):this.rpcProviders[vl]=new Zae({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:i}=e;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&mo(o)&&this.events.emit("accountsChanged",o.map(i$))}else if(s.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=qd(o),l=ly(o)!==ly(a)?`${c}:${ly(a)}`:o;this.onChainChanged(l)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(e);this.session=py(e0({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",py(e0({},rt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Fn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[vl]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[r,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>qd(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=qd(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(n,i),this.events.emit("chainChanged",i);const s=this.getProvider(n).getDefaultChain();r||this.getProvider(n).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:n,previousChainId:s,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:r,newChainId:n}){var i,s;try{if(r===n)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${n}:`)).map(i$);if(!mo(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,i={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Xf}/${e}${i}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Xf}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Xf}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Xf)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}}const jt={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},t0={ConnectorExplorerIds:{[de.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[de.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[de.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[de.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[de.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[jt.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[jt.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[jt.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[jt.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[jt.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[jt.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[jt.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[jt.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[jt.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[jt.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[jt.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[de.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[de.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[de.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[de.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[de.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[de.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[de.CONNECTOR_ID.INJECTED]:"Browser Wallet",[de.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[de.CONNECTOR_ID.COINBASE]:"Coinbase",[de.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[de.CONNECTOR_ID.LEDGER]:"Ledger",[de.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[de.CONNECTOR_ID.INJECTED]:"INJECTED",[de.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[de.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[de.CONNECTOR_ID.AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]},gy={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${jt.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()}},r0={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${tce()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function tce(){return typeof window<"u"}const rce={createLogger(t,e="error"){const r=es({level:e}),{logger:n}=fw({opts:r});return n.error=(...i)=>{for(const s of i)if(s instanceof Error){t(s,...i);return}t(void 0,...i)},n}},nce="rpc.walletconnect.org";function d$(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const wy=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],kl={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===nce}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:de.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${de.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){const n=t.rpcUrls?.default?.http?.[0];return wy.includes(e)?d$(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){const i=this.getChainNamespace(t),s=this.getCaipNetworkId(t),o=t.rpcUrls.default.http?.[0],a=this.getDefaultRpcUrl(t,s,r),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,l=n?.[s]?.map(h=>h.url)||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:i,caipNetworkId:s,assets:{imageId:t0.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(i=>kl.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];return r?.forEach(i=>{n.push(If(i.url,i.config))}),wy.includes(t.caipNetworkId)&&n.push(If(d$(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(i=>{n.push(If(i))}),FC(n)},extendWagmiTransports(t,e,r){if(wy.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return FC([r,If(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:de.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=he.getActiveCaipNetworkId(),r=B.getAllRequestedCaipNetworks(),n=Array.from(B.state.chains?.keys()||[]),i=e?.split(":")[0],s=i?n.includes(i):!1,o=r?.find(c=>c.caipNetworkId===e);return s&&!o&&e?this.getUnsupportedNetwork(e):o||t||r?.[0]}},n0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},en=at({providers:{...n0},providerIds:{...n0}}),vt={state:en,subscribeKey(t,e){return Rr(en,t,e)},subscribe(t){return Ir(en,()=>{t(en)})},subscribeProviders(t){return Ir(en.providers,()=>t(en.providers))},setProvider(t,e){e&&(en.providers[t]=Qo(e))},getProvider(t){return en.providers[t]},setProviderId(t,e){e&&(en.providerIds[t]=e)},getProviderId(t){if(t)return en.providerIds[t]},reset(){en.providers={...n0},en.providerIds={...n0}},resetChain(t){en.providers[t]=void 0,en.providerIds[t]=void 0}};var h$;(function(t){t.Google="google",t.Github="github",t.Apple="apple",t.Facebook="facebook",t.X="x",t.Discord="discord",t.Farcaster="farcaster"})(h$||(h$={}));const bo={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},Ca={filterOutDuplicatesByRDNS(t){const e=G.state.enableEIP6963?oe.state.connectors:[],r=he.getRecentWallets(),n=e.map(a=>a.info?.rdns).filter(Boolean),i=r.map(a=>a.rdns).filter(Boolean),s=n.concat(i);if(s.includes("io.metamask.mobile")&&X.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return t.filter(a=>!s.includes(String(a?.rdns)))},filterOutDuplicatesByIds(t){const e=oe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),r=he.getRecentWallets(),n=e.map(a=>a.explorerId),i=r.map(a=>a.id),s=n.concat(i);return t.filter(a=>!s.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=oe.state,r=e.filter(s=>s.type==="ANNOUNCED").reduce((s,o)=>(o.info?.rdns&&(s[o.info.rdns]=!0),s),{});return t.map(s=>({...s,installed:!!s.rdns&&!!r[s.rdns??""]})).sort((s,o)=>Number(o.installed)-Number(s.installed))},getConnectOrderMethod(t,e){const r=t?.connectMethodsOrder||G.state.features?.connectMethodsOrder,n=e||oe.state.connectors;if(r)return r;const{injected:i,announced:s}=_s.getConnectorsByType(n,se.state.recommended,se.state.featured),o=i.filter(_s.showConnector),a=s.filter(_s.showConnector);return o.length||a.length?["wallet","email","social"]:bo.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&se.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&se.state.excludedWallets.some(n=>gy.isLowerCaseMatch(n.name,t.name));return e||r}},_s={getConnectorsByType(t,e,r){const{customWallets:n}=G.state,i=he.getRecentWallets(),s=Ca.filterOutDuplicateWallets(e),o=Ca.filterOutDuplicateWallets(r),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:n,recent:i,external:u,multiChain:a,announced:c,injected:l,recommended:s,featured:o}},showConnector(t){const e=t.info?.rdns,r=!!e&&se.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),n=!!t.name&&se.state.excludedWallets.some(i=>gy.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(!X.isMobile()&&t.name==="Browser Wallet"||!e&&!pe.checkInstalled()||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(B.state.chains.values()).some(r=>oe.getConnectorId(r.namespace)===de.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:i,injected:s,multiChain:o,external:a,overriddenConnectors:c=G.state.features?.connectorTypeOrder??[]}){const l=_s.getIsConnectedWithWC(),h=[{type:"walletConnect",isEnabled:G.state.enableWalletConnect&&!l},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...s,...i,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(p=>p.isEnabled),f=new Set(h.map(p=>p.type)),g=c.filter(p=>f.has(p)).map(p=>({type:p,isEnabled:!0})),w=h.filter(({type:p})=>!g.some(({type:m})=>m===p));return Array.from(new Set([...g,...w].map(({type:p})=>p)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i0=globalThis,my=i0.ShadowRoot&&(i0.ShadyCSS===void 0||i0.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,by=Symbol(),p$=new WeakMap;class f${constructor(e,r,n){if(this._$cssResult$=!0,n!==by)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(my&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=p$.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&p$.set(r,e))}return e}toString(){return this.cssText}}const jn=t=>new f$(typeof t=="string"?t:t+"",void 0,by),we=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new f$(r,t,by)},ice=(t,e)=>{if(my)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),i=i0.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},g$=my?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return jn(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:sce,defineProperty:oce,getOwnPropertyDescriptor:ace,getOwnPropertyNames:cce,getOwnPropertySymbols:lce,getPrototypeOf:uce}=Object,s0=globalThis,w$=s0.trustedTypes,dce=w$?w$.emptyScript:"",hce=s0.reactiveElementPolyfillSupport,eh=(t,e)=>t,o0={toAttribute(t,e){switch(e){case Boolean:t=t?dce:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},yy=(t,e)=>!sce(t,e),m$={attribute:!0,type:String,converter:o0,reflect:!1,useDefault:!1,hasChanged:yy};Symbol.metadata??=Symbol("metadata"),s0.litPropertyMetadata??=new WeakMap;class Rl extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=m$){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&oce(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){const{get:i,set:s}=ace(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:i,set(o){const a=i?.call(this);s?.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??m$}static _$Ei(){if(this.hasOwnProperty(eh("elementProperties")))return;const e=uce(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(eh("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(eh("properties"))){const r=this.properties,n=[...cce(r),...lce(r)];for(const i of n)this.createProperty(i,r[i])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(g$(i))}else e!==void 0&&r.push(g$(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return ice(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(i!==void 0&&n.reflect===!0){const s=(n.converter?.toAttribute!==void 0?n.converter:o0).toAttribute(r,n.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,r){const n=this.constructor,i=n._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const s=n.getPropertyOptions(i),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:o0;this._$Em=i,this[i]=o.fromAttribute(r,s.type)??this._$Ej?.get(i)??null,this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){const i=this.constructor,s=this[e];if(n??=i.getPropertyOptions(e),!((n.hasChanged??yy)(s,r)||n.useDefault&&n.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:i,wrapped:s},o){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??r??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),i===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,s]of this._$Ep)this[i]=s;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[i,s]of n){const{wrapped:o}=s,a=this[i];o!==!0||this._$AL.has(i)||a===void 0||this.C(i,void 0,s,a)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach(n=>n.hostUpdate?.()),this.update(r)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach(r=>r.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(r=>this._$ET(r,this[r])),this._$EM()}updated(e){}firstUpdated(e){}}Rl.elementStyles=[],Rl.shadowRootOptions={mode:"open"},Rl[eh("elementProperties")]=new Map,Rl[eh("finalized")]=new Map,hce?.({ReactiveElement:Rl}),(s0.reactiveElementVersions??=[]).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vy=globalThis,a0=vy.trustedTypes,b$=a0?a0.createPolicy("lit-html",{createHTML:t=>t}):void 0,y$="$lit$",yo=`lit$${Math.random().toFixed(9).slice(2)}$`,v$="?"+yo,pce=`<${v$}>`,xa=document,th=()=>xa.createComment(""),rh=t=>t===null||typeof t!="object"&&typeof t!="function",Ey=Array.isArray,fce=t=>Ey(t)||typeof t?.[Symbol.iterator]=="function",Cy=`[ 	
\f\r]`,nh=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,E$=/-->/g,C$=/>/g,$a=RegExp(`>|${Cy}(?:([^\\s"'>=/]+)(${Cy}*=${Cy}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),x$=/'/g,$$=/"/g,_$=/^(?:script|style|textarea|title)$/i,I$=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),U=I$(1),ee=I$(2),Is=Symbol.for("lit-noChange"),At=Symbol.for("lit-nothing"),S$=new WeakMap,_a=xa.createTreeWalker(xa,129);function A$(t,e){if(!Ey(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return b$!==void 0?b$.createHTML(e):e}const gce=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=nh;for(let a=0;a<r;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===nh?u[1]==="!--"?o=E$:u[1]!==void 0?o=C$:u[2]!==void 0?(_$.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=$a):u[3]!==void 0&&(o=$a):o===$a?u[0]===">"?(o=i??nh,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?$a:u[3]==='"'?$$:x$):o===$$||o===x$?o=$a:o===E$||o===C$?o=nh:(o=$a,i=void 0);const f=o===$a&&t[a+1].startsWith("/>")?" ":"";s+=o===nh?c+pce:d>=0?(n.push(l),c.slice(0,d)+y$+c.slice(d)+yo+f):c+yo+(d===-2?a:f)}return[A$(t,s+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class ih{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=gce(e,r);if(this.el=ih.createElement(l,n),_a.currentNode=this.el.content,r===2||r===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(i=_a.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const d of i.getAttributeNames())if(d.endsWith(y$)){const h=u[o++],f=i.getAttribute(d).split(yo),g=/([.?@])?(.*)/.exec(h);c.push({type:1,index:s,name:g[2],strings:f,ctor:g[1]==="."?mce:g[1]==="?"?bce:g[1]==="@"?yce:c0}),i.removeAttribute(d)}else d.startsWith(yo)&&(c.push({type:6,index:s}),i.removeAttribute(d));if(_$.test(i.tagName)){const d=i.textContent.split(yo),h=d.length-1;if(h>0){i.textContent=a0?a0.emptyScript:"";for(let f=0;f<h;f++)i.append(d[f],th()),_a.nextNode(),c.push({type:2,index:++s});i.append(d[h],th())}}}else if(i.nodeType===8)if(i.data===v$)c.push({type:2,index:s});else{let d=-1;for(;(d=i.data.indexOf(yo,d+1))!==-1;)c.push({type:7,index:s}),d+=yo.length-1}s++}}static createElement(e,r){const n=xa.createElement("template");return n.innerHTML=e,n}}function Dl(t,e,r=t,n){if(e===Is)return e;let i=n!==void 0?r._$Co?.[n]:r._$Cl;const s=rh(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,r,n)),n!==void 0?(r._$Co??=[])[n]=i:r._$Cl=i),i!==void 0&&(e=Dl(t,i._$AS(t,e.values),i,n)),e}class wce{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,i=(e?.creationScope??xa).importNode(r,!0);_a.currentNode=i;let s=_a.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new sh(s,s.nextSibling,this,e):c.type===1?l=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(l=new vce(s,this,e)),this._$AV.push(l),c=n[++a]}o!==c?.index&&(s=_a.nextNode(),o++)}return _a.currentNode=xa,i}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class sh{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,n,i){this.type=2,this._$AH=At,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Dl(this,e,r),rh(e)?e===At||e==null||e===""?(this._$AH!==At&&this._$AR(),this._$AH=At):e!==this._$AH&&e!==Is&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):fce(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==At&&rh(this._$AH)?this._$AA.nextSibling.data=e:this.T(xa.createTextNode(e)),this._$AH=e}$(e){const{values:r,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=ih.createElement(A$(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(r);else{const s=new wce(i,this),o=s.u(this.options);s.p(r),this.T(o),this._$AH=s}}_$AC(e){let r=S$.get(e.strings);return r===void 0&&S$.set(e.strings,r=new ih(e)),r}k(e){Ey(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new sh(this.O(th()),this.O(th()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class c0{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,s){this.type=1,this._$AH=At,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=At}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Dl(this,e,r,0),o=!rh(e)||e!==this._$AH&&e!==Is,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=Dl(this,a[n+c],r,c),l===Is&&(l=this._$AH[c]),o||=!rh(l)||l!==this._$AH[c],l===At?e=At:e!==At&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!i&&this.j(e)}j(e){e===At?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class mce extends c0{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===At?void 0:e}}class bce extends c0{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==At)}}class yce extends c0{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){if((e=Dl(this,e,r,0)??At)===Is)return;const n=this._$AH,i=e===At&&n!==At||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==At&&(n===At||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class vce{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Dl(this,e)}}const Ece=vy.litHtmlPolyfillSupport;Ece?.(ih,sh),(vy.litHtmlVersions??=[]).push("3.3.0");const Cce=(t,e,r)=>{const n=r?.renderBefore??e;let i=n._$litPart$;if(i===void 0){const s=r?.renderBefore??null;n._$litPart$=i=new sh(e.insertBefore(th(),s),s,void 0,r??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xy=globalThis;class ue extends Rl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Cce(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Is}}ue._$litElement$=!0,ue.finalized=!0,xy.litElementHydrateSupport?.({LitElement:ue});const xce=xy.litElementPolyfillSupport;xce?.({LitElement:ue}),(xy.litElementVersions??=[]).push("4.2.0");let oh,vo,Eo;function $ce(t,e){oh=document.createElement("style"),vo=document.createElement("style"),Eo=document.createElement("style"),oh.textContent=Bl(t).core.cssText,vo.textContent=Bl(t).dark.cssText,Eo.textContent=Bl(t).light.cssText,document.head.appendChild(oh),document.head.appendChild(vo),document.head.appendChild(Eo),P$(e)}function P$(t){vo&&Eo&&(t==="light"?(vo.removeAttribute("media"),Eo.media="enabled"):(Eo.removeAttribute("media"),vo.media="enabled"))}function _ce(t){oh&&vo&&Eo&&(oh.textContent=Bl(t).core.cssText,vo.textContent=Bl(t).dark.cssText,Eo.textContent=Bl(t).light.cssText)}function Bl(t){return{core:we`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${jn(t?.["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${jn(t?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${jn(t?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${jn(t?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${jn(t?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:we`
      :root {
        --w3m-color-mix: ${jn(t?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${jn(Js(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${jn(Js(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:we`
      :root {
        --w3m-color-mix: ${jn(t?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${jn(Js(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${jn(Js(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const qe=we`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Er=we`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,ah=we`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,or={getSpacingStyles(t,e){if(Array.isArray(t))return t[e]?`var(--wui-spacing-${t[e]})`:void 0;if(typeof t=="string")return`var(--wui-spacing-${t})`},getFormattedDate(t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(t)},getHostName(t){try{return new URL(t).hostname}catch{return""}},getTruncateString({string:t,charsStart:e,charsEnd:r,truncate:n}){return t.length<=e+r?t:n==="end"?`${t.substring(0,e)}...`:n==="start"?`...${t.substring(t.length-r)}`:`${t.substring(0,Math.floor(e))}...${t.substring(t.length-Math.floor(r))}`},generateAvatarColors(t){const r=t.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),n=this.hexToRgb(r),i=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),o=100-3*Number(i?.replace("px","")),a=`${o}% ${o}% at 65% 40%`,c=[];for(let l=0;l<5;l+=1){const u=this.tintColor(n,.15*l);c.push(`rgb(${u[0]}, ${u[1]}, ${u[2]})`)}return`
    --local-color-1: ${c[0]};
    --local-color-2: ${c[1]};
    --local-color-3: ${c[2]};
    --local-color-4: ${c[3]};
    --local-color-5: ${c[4]};
    --local-radial-circle: ${a}
   `},hexToRgb(t){const e=parseInt(t,16),r=e>>16&255,n=e>>8&255,i=e&255;return[r,n,i]},tintColor(t,e){const[r,n,i]=t,s=Math.round(r+(255-r)*e),o=Math.round(n+(255-n)*e),a=Math.round(i+(255-i)*e);return[s,o,a]},isNumber(t){return{number:/^[0-9]+$/u}.number.test(t)},getColorTheme(t){return t||(typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark")},splitBalance(t){const e=t.split(".");return e.length===2?[e[0],e[1]]:["0","00"]},roundNumber(t,e,r){return t.toString().length>=e?Number(t).toFixed(r):t},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})}};function Ice(t,e){const{kind:r,elements:n}=e;return{kind:r,elements:n,finisher(i){customElements.get(t)||customElements.define(t,i)}}}function Sce(t,e){return customElements.get(t)||customElements.define(t,e),e}function ce(t){return function(r){return typeof r=="function"?Sce(t,r):Ice(t,r)}}const l0={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603},O$={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},Ace={block:AC({format(t){return{transactions:t.transactions?.map(r=>{if(typeof r=="string")return r;const n=Cf(r);return n.typeHex==="0x7e"&&(n.isSystemTx=r.isSystemTx,n.mint=r.mint?hs(r.mint):void 0,n.sourceHash=r.sourceHash,n.type="deposit"),n}),stateRoot:t.stateRoot}}}),transaction:SC({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?hs(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:YY({format(t){return{l1GasPrice:t.l1GasPrice?hs(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?hs(t.l1GasUsed):null,l1Fee:t.l1Fee?hs(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function N$(t,e){return Nce(t)?Oce(t):jY(t,e)}const Pce={transaction:N$};function Oce(t){Tce(t);const{sourceHash:e,data:r,from:n,gas:i,isSystemTx:s,mint:o,to:a,value:c}=t,l=[e,n,a??"0x",o?ye(o):"0x",c?ye(c):"0x",i?ye(i):"0x",s?"0x1":"0x",r??"0x"];return Yc(["0x7e",co(l)])}function Nce(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function Tce(t){const{from:e,to:r}=t;if(e&&!gs(e))throw new ao({address:e});if(r&&!gs(r))throw new ao({address:r})}const Z={contracts:O$,formatters:Ace,serializers:Pce},u0=1;({...Z,contracts:{...Z.contracts,l2OutputOracle:u0+"",portal:u0+"",l1StandardBridge:u0+""}});const d0=11155111;({...Z,contracts:{...Z.contracts,l2OutputOracle:d0+"",portal:d0+"",l1StandardBridge:d0+""}});const ch=1;({...Z,contracts:{...Z.contracts,disputeGameFactory:ch+"",l2OutputOracle:ch+"",portal:ch+"",l1StandardBridge:ch+""}});const h0=5;({...Z,contracts:{...Z.contracts,l2OutputOracle:h0+"",portal:h0+"",l1StandardBridge:h0+""}});const lh=11155111;({...Z,contracts:{...Z.contracts,disputeGameFactory:lh+"",l2OutputOracle:lh+"",portal:lh+"",l1StandardBridge:lh+""}},fe({id:53456,name:"BirdLayer",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.birdlayer.xyz","https://rpc1.birdlayer.xyz"],webSocket:["wss://rpc.birdlayer.xyz/ws"]}},blockExplorers:{default:{name:"BirdLayer Explorer",url:"https://scan.birdlayer.xyz"}}}));const kce=1;({...Z,contracts:{...Z.contracts}});const $y=1;fe({...Z,id:60808,name:"BOB",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.gobob.xyz"],webSocket:["wss://rpc.gobob.xyz"]}},blockExplorers:{default:{name:"BOB Explorer",url:"https://explorer.gobob.xyz"}},contracts:{...Z.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:23131},l2OutputOracle:{[$y]:{address:"0xdDa53E23f8a32640b04D7256e651C1db98dB11C1",blockCreated:4462615}},portal:{[$y]:{address:"0x8AdeE124447435fE03e3CD24dF3f4cAE32E65a3E",blockCreated:4462615}}},sourceId:$y});const _y=11155111;fe({...Z,id:808813,name:"BOB Sepolia",nativeCurrency:{decimals:18,name:"ETH",symbol:"ETH"},rpcUrls:{default:{http:["https://bob-sepolia.rpc.gobob.xyz"],webSocket:["wss://bob-sepolia.rpc.gobob.xyz"]}},blockExplorers:{default:{name:"BOB Sepolia Explorer",url:"https://bob-sepolia.explorer.gobob.xyz"}},contracts:{...Z.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:35677},l2OutputOracle:{[_y]:{address:"0x14D0069452b4AE2b250B395b8adAb771E4267d2f",blockCreated:4462615}},portal:{[_y]:{address:"0x867B1Aa872b9C8cB5E9F7755feDC45BB24Ad0ae4",blockCreated:4462615}}},testnet:!0,sourceId:_y});const Rce={estimateFeesPerGas:async t=>{if(!t.request?.feeCurrency)return null;const[e,r]=await Promise.all([Dce(t.client,t.request.feeCurrency),Bce(t.client,t.request.feeCurrency)]);return{maxFeePerGas:t.multiply(e-r)+r,maxPriorityFeePerGas:r}}};async function Dce(t,e){const r=await t.request({method:"eth_gasPrice",params:[e]});return BigInt(r)}async function Bce(t,e){const r=await t.request({method:"eth_maxPriorityFeePerGas",params:[e]});return BigInt(r)}function T$(t){return t===0||t===0n||t===void 0||t===null||t==="0"||t===""||typeof t=="string"&&(Gc(t).toLowerCase()==="0x"||Gc(t).toLowerCase()==="0x00")}function uh(t){return!T$(t)}function Uce(t){return typeof t.maxFeePerGas<"u"&&typeof t.maxPriorityFeePerGas<"u"}function k$(t){return t.type==="cip64"?!0:Uce(t)&&uh(t.feeCurrency)}const Lce={block:AC({format(t){return{transactions:t.transactions?.map(r=>typeof r=="string"?r:{...Cf(r),...r.gatewayFee?{gatewayFee:hs(r.gatewayFee),gatewayFeeRecipient:r.gatewayFeeRecipient}:{},feeCurrency:r.feeCurrency}),...t.randomness?{randomness:t.randomness}:{}}}}),transaction:SC({format(t){if(t.type==="0x7e")return{isSystemTx:t.isSystemTx,mint:t.mint?hs(t.mint):void 0,sourceHash:t.sourceHash,type:"deposit"};const e={feeCurrency:t.feeCurrency};return t.type==="0x7b"?e.type="cip64":(t.type==="0x7c"&&(e.type="cip42"),e.gatewayFee=t.gatewayFee?hs(t.gatewayFee):null,e.gatewayFeeRecipient=t.gatewayFeeRecipient),e}}),transactionRequest:uY({format(t){const e={};return t.feeCurrency&&(e.feeCurrency=t.feeCurrency),k$(t)&&(e.type="0x7b"),e}})};function Fce(t,e){return k$(t)?jce(t,e):N$(t,e)}const Mce={transaction:Fce};function jce(t,e){qce(t);const{chainId:r,gas:n,nonce:i,to:s,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,feeCurrency:u,data:d}=t,h=[ye(r),i?ye(i):"0x",c?ye(c):"0x",a?ye(a):"0x",n?ye(n):"0x",s??"0x",o?ye(o):"0x",d??"0x",Id(l),u,...el(t,e)];return Yc(["0x7b",co(h)])}const zce=Ef;function qce(t){const{chainId:e,maxPriorityFeePerGas:r,gasPrice:n,maxFeePerGas:i,to:s,feeCurrency:o}=t;if(e<=0)throw new _d({chainId:e});if(s&&!gs(s))throw new ao({address:s});if(n)throw new Ne("`gasPrice` is not a valid CIP-64 Transaction attribute.");if(uh(i)&&i>zce)throw new $d({maxFeePerGas:i});if(uh(r)&&uh(i)&&r>i)throw new Um({maxFeePerGas:i,maxPriorityFeePerGas:r});if(uh(o)&&!gs(o))throw new Ne("`feeCurrency` MUST be a token address for CIP-64 transactions.");if(T$(o))throw new Ne("`feeCurrency` must be provided for CIP-64 transactions.")}const R$={contracts:O$,formatters:Lce,serializers:Mce,fees:Rce},p0=17e3;({...R$,contracts:{...R$.contracts,portal:p0+"",disputeGameFactory:p0+"",l2OutputOracle:p0+"",l1StandardBridge:p0+""}},fe({id:44,name:"Crab Network",nativeCurrency:{decimals:18,name:"Crab Network Native Token",symbol:"CRAB"},rpcUrls:{default:{http:["https://crab-rpc.darwinia.network"],webSocket:["wss://crab-rpc.darwinia.network"]}},blockExplorers:{default:{name:"Blockscout",url:"https://crab-scan.darwinia.network"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:3032593}}})),fe({id:66665,name:"Creator",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.creatorchain.io"]}},blockExplorers:{default:{name:"Explorer",url:"https://explorer.creatorchain.io"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11"}},testnet:!0}),{...Z,contracts:{...Z.contracts}},{...Z,contracts:{...Z.contracts}},fe({id:53457,name:"DODOchain Testnet",nativeCurrency:{decimals:18,name:"DODO",symbol:"DODO"},rpcUrls:{default:{http:["https://dodochain-testnet.alt.technology"],webSocket:["wss://dodochain-testnet.alt.technology/ws"]}},blockExplorers:{default:{name:"DODOchain Testnet (Sepolia) Explorer",url:"https://testnet-scan.dodochain.com"}},testnet:!0});const Ul=1;({...Z.contracts,addressManager:Ul+"",l1CrossDomainMessenger:Ul+"",l2OutputOracle:Ul+"",portal:Ul+"",l1StandardBridge:Ul+""});const Ll=11155111;({...Z.contracts,addressManager:Ll+"",l1CrossDomainMessenger:Ll+"",l2OutputOracle:Ll+"",portal:Ll+"",l1StandardBridge:Ll+""});const f0=1;({...Z,contracts:{...Z.contracts,l2OutputOracle:f0+"",portal:f0+"",l1StandardBridge:f0+""}});const g0=17e3;({...Z,contracts:{...Z.contracts,l2OutputOracle:g0+"",portal:g0+"",l1StandardBridge:g0+""}});const Hce=1;({...Z,contracts:{...Z.contracts}},fe({...Z,id:3397901,network:"funkiSepolia",name:"Funki Sepolia Sandbox",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://funki-testnet.alt.technology"]}},blockExplorers:{default:{name:"Funki Sepolia Sandbox Explorer",url:"https://sepolia-sandbox.funkichain.com/"}},testnet:!0,contracts:{...Z.contracts,multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1620204}},sourceId:11155111}));const w0=17e3;fe({...Z,name:"Garnet Testnet",testnet:!0,id:17069,sourceId:w0,nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.garnetchain.com"],webSocket:["wss://rpc.garnetchain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.garnetchain.com"}},contracts:{...Z.contracts,multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11"},portal:{[w0]:{address:"0x57ee40586fbE286AfC75E67cb69511A6D9aF5909",blockCreated:1274684}},l2OutputOracle:{[w0]:{address:"0xCb8E7AC561b8EF04F2a15865e9fbc0766FEF569B",blockCreated:1274684}},l1StandardBridge:{[w0]:{address:"0x09bcDd311FE398F80a78BE37E489f5D440DB95DE",blockCreated:1274684}}}});const m0=1;({...Z,contracts:{...Z.contracts,disputeGameFactory:m0+"",portal:m0+"",l1StandardBridge:m0+""}});const b0=11155111;({...Z,contracts:{...Z.contracts,disputeGameFactory:b0+"",portal:b0+"",l1StandardBridge:b0+""}},fe({id:701,name:"Koi Network",nativeCurrency:{decimals:18,name:"Koi Network Native Token",symbol:"KRING"},rpcUrls:{default:{http:["https://koi-rpc.darwinia.network"],webSocket:["wss://koi-rpc.darwinia.network"]}},blockExplorers:{default:{name:"Blockscout",url:"https://koi-scan.darwinia.network"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:180001}},testnet:!0}));const y0=1;({...Z,contracts:{...Z.contracts,l2OutputOracle:y0+"",portal:y0+"",l1StandardBridge:y0+""}});const v0=11155111;({...Z,contracts:{...Z.contracts,l2OutputOracle:v0+"",portal:v0+"",l1StandardBridge:v0+""}});const E0=1;({...Z,contracts:{...Z.contracts,l2OutputOracle:E0+"",portal:E0+"",l1StandardBridge:E0+""}});const C0=1;({...Z,contracts:{...Z.contracts,l2OutputOracle:C0+"",portal:C0+"",l1StandardBridge:C0+""}});const x0=11155111;({...Z,contracts:{...Z.contracts,l2OutputOracle:x0+"",portal:x0+"",l1StandardBridge:x0+""}});const $0=56;({...Z.contracts,l2OutputOracle:$0+"",portal:$0+"",l1StandardBridge:$0+""});const _0=97;({...Z.contracts,l2OutputOracle:_0+"",portal:_0+"",l1StandardBridge:_0+""});const dh=1;({...Z,contracts:{...Z.contracts,disputeGameFactory:dh+"",l2OutputOracle:dh+"",portal:dh+"",l1StandardBridge:dh+""}});const I0=5;({...Z,contracts:{...Z.contracts,l2OutputOracle:I0+"",portal:I0+"",l1StandardBridge:I0+""}});const hh=11155111;({...Z,contracts:{...Z.contracts,disputeGameFactory:hh+"",l2OutputOracle:hh+"",portal:hh+"",l1StandardBridge:hh+""}});const D$=11155111;fe({...Z,name:"Pyrope Testnet",testnet:!0,id:695569,sourceId:D$,nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://rpc.pyropechain.com"],webSocket:["wss://rpc.pyropechain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://pyrope.blockscout.com"}},contracts:{...Z.contracts,l1StandardBridge:{[D$]:{address:"0xC24932c31D9621aE9e792576152B7ef010cFC2F8"}}}});const S0=1;fe({...Z,name:"Redstone",id:690,sourceId:S0,nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://rpc.redstonechain.com"],webSocket:["wss://rpc.redstonechain.com"]}},blockExplorers:{default:{name:"Blockscout",url:"https://explorer.redstone.xyz"}},contracts:{...Z.contracts,multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11"},portal:{[S0]:{address:"0xC7bCb0e8839a28A1cFadd1CF716de9016CdA51ae",blockCreated:19578329}},l2OutputOracle:{[S0]:{address:"0xa426A052f657AEEefc298b3B5c35a470e4739d69",blockCreated:19578337}},l1StandardBridge:{[S0]:{address:"0xc473ca7E02af24c129c2eEf51F2aDf0411c1Df69",blockCreated:19578331}}}});const A0=1;({...Z,contracts:{...Z.contracts,l2OutputOracle:A0+"",portal:A0+"",l1StandardBridge:A0+""}});const P0=11155111;({...Z,contracts:{...Z.contracts,l2OutputOracle:P0+"",portal:P0+"",l1StandardBridge:P0+""}});const O0=1;({...Z,contracts:{...Z.contracts,l2OutputOracle:O0+"",portal:O0+"",l1StandardBridge:O0+""}});const Wce=11155111;({...Z,contracts:{...Z.contracts}});const ph=1;({...Z,contracts:{...Z.contracts,disputeGameFactory:ph+"",l2OutputOracle:ph+"",portal:ph+"",l1StandardBridge:ph+""}});const fh=11155111;({...Z,contracts:{...Z.contracts,disputeGameFactory:fh+"",l2OutputOracle:fh+"",portal:fh+"",l1StandardBridge:fh+""}});const gh=1;({...Z,contracts:{...Z.contracts,disputeGameFactory:gh+"",l2OutputOracle:gh+"",portal:gh+"",l1StandardBridge:gh+""}});const wh=11155111;({...Z,contracts:{...Z.contracts,disputeGameFactory:wh+"",l2OutputOracle:wh+"",portal:wh+"",l1StandardBridge:wh+""}});const mh=1;({...Z,contracts:{...Z.contracts,disputeGameFactory:mh+"",l2OutputOracle:mh+"",portal:mh+"",l1StandardBridge:mh+""}});const Iy=11155111;({...Z,contracts:{...Z.contracts,portal:Iy+"",l1StandardBridge:Iy+""}},{...Z,contracts:{...Z.contracts}}),{...Z,contracts:{...Z.contracts}};const N0=1;({...Z,contracts:{...Z.contracts,disputeGameFactory:N0+"",portal:N0+"",l1StandardBridge:N0+""}});const T0=11155111;({...Z,contracts:{...Z.contracts,portal:T0+"",l1StandardBridge:T0+"",disputeGameFactory:T0+""}});const bh=1;({...Z,contracts:{...Z.contracts,disputeGameFactory:bh+"",l2OutputOracle:bh+"",portal:bh+"",l1StandardBridge:bh+""}});const yh=11155111;({...Z,contracts:{...Z.contracts,disputeGameFactory:yh+"",l2OutputOracle:yh+"",portal:yh+"",l1StandardBridge:yh+""}});const k0=1;({...Z,contracts:{...Z.contracts,l2OutputOracle:k0+"",portal:k0+"",l1StandardBridge:k0+""}});const R0=11155111;({...Z,contracts:{...Z.contracts,l2OutputOracle:R0+"",portal:R0+"",l1StandardBridge:R0+""}});const B$=5;({...Z,contracts:{...Z.contracts,portal:B$+""}});function Fl(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const U$=Fl({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),L$=Fl({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Fl({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"}),Fl({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),Fl({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const Vce={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},F$={getMethodsByChainNamespace(t){return Vce[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>n.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>n.add(i)),e.events&&Object.keys(e.events).forEach(i=>n.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[s]=i.split(":");s&&n.add(s)}),n.forEach(i=>{r[i]||(r[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,s])=>{r[i]&&(r[i].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([i,s])=>{r[i]&&(r[i].chains=s)}),e.events&&Object.entries(e.events).forEach(([i,s])=>{r[i]&&(r[i].events=s)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([s,o])=>{const[a,c]=s.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),i.has(a)||(r[a].rpcMap={},i.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,i)=>{const{id:s,chainNamespace:o,rpcUrls:a}=i,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const l=`${o}:${s}`,u=n[o];switch(u.chains.push(l),l){case U$.caipNetworkId:u.chains.push(U$.deprecatedCaipNetworkId);break;case L$.caipNetworkId:u.chains.push(L$.deprecatedCaipNetworkId);break}return u?.rpcMap&&c&&(u.rpcMap[s]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{const e=await e9.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(i=>{const[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null}};class M${constructor({provider:e,namespace:r}){this.id=de.CONNECTOR_ID.WALLET_CONNECT,this.name=t0.ConnectorNamesMap[de.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=t0.ConnectorImageIds[de.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=B.getCaipNetworks.bind(B),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=G.state.universalProviderConfigOverride,i=F$.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:i})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return so.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Kce})}}const Kce=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class Gce{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=r=>B.getCaipNetworks(r),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:de.CONNECTOR_ID.AUTH,type:"AUTH",name:de.CONNECTOR_NAMES.AUTH,provider:e,imageId:t0.ConnectorImageIds[de.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,r){ge.setStatus(e,r)}on(e,r){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(i=>i(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){i.setDefaultChain(r.caipNetworkId);return}if(i&&n==="AUTH"){const s=i,o=ge.state.preferredAccountTypes?.[r.chainNamespace];await s.switchNetwork(r.caipNetworkId);const a=await s.getUser({chainId:r.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof M$);if(!e)throw new Error("WalletConnectConnector not found");return e}}class Zce extends Gce{setUniversalProvider(e){this.addConnector(new M$({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){const n=this.provider?.session?.namespaces?.[e]?.accounts?.map(i=>{const[,,s]=i.split(":");return s}).filter((i,s,o)=>o.indexOf(i)===s)||[];return Promise.resolve({accounts:n.map(i=>X.createAccount(e,i,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&Bt.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(ge.state.balanceLoading&&e.chainId===B.state.activeCaipNetwork?.id)return{balance:ge.state.balance||"0.00",symbol:ge.state.balanceSymbol||""};const i=(await ge.fetchTokenBalance()).find(s=>s.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&s.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:r,message:n,address:i}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return B.state.activeCaipNetwork?.chainNamespace===de.CHAIN.SOLANA?s=(await r.request({method:"solana_signMessage",params:{message:rg.encode(new TextEncoder().encode(n)),pubkey:i}},B.state.activeCaipNetwork?.caipNetworkId)).signature:s=await r.request({method:"personal_sign",params:[n,i]},B.state.activeCaipNetwork?.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===de.CHAIN.EVM)try{await n.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:ye(r.id)}]})}catch(i){if(i.code===l0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===l0.ERROR_INVALID_CHAIN_ID||i.code===l0.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===l0.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await n.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:ye(r.id),rpcUrls:[r?.rpcUrls.chainDefault?.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[r.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(n=>n.type==="WALLET_CONNECT")?.provider}}class Yce{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{if(r){const i=B.getNetworkData(r)?.requestedCaipNetworks?.find(o=>o.id===n);if(i)return i;const s=B.getNetworkData(r)?.caipNetwork;return s||B.getRequestedCaipNetworks(r).filter(o=>o.chainNamespace===r)?.[0]}return B.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>B.getCaipNetworks(r),this.getActiveChainNamespace=()=>B.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{B.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>B.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>B.state.activeChain===r||!r?B.state.activeCaipAddress:B.getAccountProp("caipAddress",r),this.setClientId=r=>{ve.setClientId(r)},this.getProvider=r=>vt.getProvider(r),this.getProviderType=r=>vt.getProviderId(r),this.getPreferredAccountType=r=>ge.state.preferredAccountTypes?.[r],this.setCaipAddress=(r,n)=>{ge.setCaipAddress(r,n)},this.setBalance=(r,n,i)=>{ge.setBalance(r,n,i)},this.setProfileName=(r,n)=>{ge.setProfileName(r,n)},this.setProfileImage=(r,n)=>{ge.setProfileImage(r,n)},this.setUser=(r,n)=>{ge.setUser(r,n),G.state.enableEmbedded&&De.close()},this.resetAccount=r=>{ge.resetAccount(r)},this.setCaipNetwork=r=>{B.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{B.setChainNetworkData(n,{caipNetwork:r})},this.setAllAccounts=(r,n)=>{ge.setAllAccounts(r,n),G.setHasMultipleAddresses(r?.length>1)},this.setStatus=(r,n)=>{ge.setStatus(r,n),oe.isConnected()?he.setConnectionStatus("connected"):he.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>B.getAccountProp("address",r),this.setConnectors=r=>{const n=[...oe.state.allConnectors,...r];oe.setConnectors(n)},this.fetchIdentity=r=>ve.fetchIdentity(r),this.getReownName=r=>e9.getNamesForAddress(r),this.getConnectors=()=>oe.getConnectors(),this.getConnectorImage=r=>Ut.getConnectorImage(r),this.setConnectedWalletInfo=(r,n)=>{const i=vt.getProviderId(n),s=r?{...r,type:i}:void 0;ge.setConnectedWalletInfo(s,n)},this.getIsConnectedState=()=>!!B.state.activeCaipAddress,this.addAddressLabel=(r,n,i)=>{ge.addAddressLabel(r,n,i)},this.removeAddressLabel=(r,n)=>{ge.removeAddressLabel(r,n)},this.getAddress=r=>B.state.activeChain===r||!r?ge.state.address:B.getAccountProp("address",r),this.setApprovedCaipNetworksData=r=>B.setApprovedCaipNetworksData(r),this.resetNetwork=r=>{B.resetNetwork(r)},this.addConnector=r=>{oe.addConnector(r)},this.resetWcConnection=()=>{pe.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{ge.setAddressExplorerUrl(r,n)},this.setSmartAccountDeployed=(r,n)=>{ge.setSmartAccountDeployed(r,n)},this.setSmartAccountEnabledNetworks=(r,n)=>{B.setSmartAccountEnabledNetworks(r,n)},this.setPreferredAccountType=(r,n)=>{ge.setPreferredAccountType(r,n)},this.setEIP6963Enabled=r=>{G.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e)}getChainNamespacesSet(e,r){const n=e?.map(s=>s.namespace).filter(s=>!!s);if(n?.length)return[...new Set(n)];const i=r?.map(s=>s.chainNamespace);return[...new Set(i)]}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),this.sendInitializeEvent(e),ds.set({initialized:!0}),await this.syncExistingConnection()}sendInitializeEvent(e){const{...r}=e;delete r.adapters,delete r.universalProvider,Ae.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(n=>n.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Lt.setThemeMode(e.themeMode),e.themeVariables&&Lt.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");B.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&B.setActiveCaipNetwork(r)}initializeConnectionController(e){pe.setWcBasic(e.basic??!1)}initializeConnectorController(){oe.initialize(this.chainNamespaces)}initializeOptionsController(e){G.setDebug(e.debug!==!1),G.setEnableWalletConnect(e.enableWalletConnect!==!1),G.setEnableWalletGuide(e.enableWalletGuide!==!1),G.setEnableWallets(e.enableWallets!==!1),G.setEIP6963Enabled(e.enableEIP6963!==!1),G.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),G.setEnableAuthLogger(e.enableAuthLogger!==!1),G.setCustomRpcUrls(e.customRpcUrls),G.setSdkVersion(e.sdkVersion),G.setProjectId(e.projectId),G.setEnableEmbedded(e.enableEmbedded),G.setAllWallets(e.allWallets),G.setIncludeWalletIds(e.includeWalletIds),G.setExcludeWalletIds(e.excludeWalletIds),G.setFeaturedWalletIds(e.featuredWalletIds),G.setTokens(e.tokens),G.setTermsConditionsUrl(e.termsConditionsUrl),G.setPrivacyPolicyUrl(e.privacyPolicyUrl),G.setCustomWallets(e.customWallets),G.setFeatures(e.features),G.setAllowUnsupportedChain(e.allowUnsupportedChain),G.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),G.setDefaultAccountTypes(e.defaultAccountTypes);const r=he.getPreferredAccountTypes(),n={...G.state.defaultAccountTypes,...r};ge.setPreferredAccountTypes(n);const i=this.getDefaultMetaData();if(!e.metadata&&i&&(e.metadata=i),G.setMetadata(e.metadata),G.setDisableAppend(e.disableAppend),G.setEnableEmbedded(e.enableEmbedded),G.setSIWX(e.siwx),!e.projectId){eo.open(r0.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(o=>o.namespace===de.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");G.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return typeof window<"u"&&typeof document<"u"?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=kl.getUnsupportedNetwork(`${r}:${e}`);B.setActiveCaipNetwork(n)}}getDefaultNetwork(){return kl.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return kl.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return kl.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(i=>i.id===e.defaultNetwork?.id);return r?kl.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=B.state.activeChain,r=this.getAdapter(e),n=this.getCaipNetwork(e)?.id;if(!r)throw new Error("Adapter not found");const i=await r.connectWalletConnect(n);this.close(),this.setClientId(i?.clientId||null),he.setConnectedNamespaces([...B.state.chains.keys()]),this.chainNamespaces.forEach(s=>{oe.setConnectorId(jt.CONNECTOR_TYPE_WALLET_CONNECT,s)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:r,type:n,provider:i,chain:s,caipNetwork:o})=>{const a=B.state.activeChain,c=s||a,l=this.getAdapter(c);if(s&&s!==a&&!o){const f=this.getCaipNetworks().find(g=>g.chainNamespace===s);f&&this.setCaipNetwork(f)}if(!l)throw new Error("Adapter not found");const u=this.getCaipNetwork(c),d=await l.connect({id:e,info:r,type:n,provider:i,chainId:o?.id||u?.id,rpcUrl:o?.rpcUrls?.default?.http?.[0]||u?.rpcUrls?.default?.http?.[0]});if(!d)return;he.addConnectedNamespace(c),this.syncProvider({...d,chainNamespace:c});const{accounts:h}=await l.getAccounts({namespace:c,id:e});this.setAllAccounts(h,c),this.setStatus("connected",c)},reconnectExternal:async({id:e,info:r,type:n,provider:i})=>{const s=B.state.activeChain,o=this.getAdapter(s);o?.reconnect&&(await o?.reconnect({id:e,info:r,type:n,provider:i,chainId:this.getCaipNetwork()?.id}),he.addConnectedNamespace(s))},disconnect:async e=>{const r=e||B.state.activeChain,n=this.getAdapter(r),i=vt.getProvider(r),s=vt.getProviderId(r);await n?.disconnect({provider:i,providerType:s}),he.removeConnectedNamespace(r),vt.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r)},checkInstalled:e=>e?e.some(r=>!!window.ethereum?.[String(r)]):!!window.ethereum,signMessage:async e=>(await this.getAdapter(B.state.activeChain)?.signMessage({message:e,address:ge.state.address,provider:vt.getProvider(B.state.activeChain)}))?.signature||"",sendTransaction:async e=>{if(e.chainNamespace===de.CHAIN.EVM){const r=this.getAdapter(B.state.activeChain),n=vt.getProvider(B.state.activeChain);return(await r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}))?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===de.CHAIN.EVM){const r=this.getAdapter(B.state.activeChain),n=vt.getProvider(B.state.activeChain),i=this.getCaipNetwork();if(!i)throw new Error("CaipNetwork is undefined");return(await r?.estimateGas({...e,provider:n,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.getAdapter(B.state.activeChain)?.getProfile({address:ge.state.address,chainId:Number(this.getCaipNetwork()?.id)}))?.profileImage||!1,getEnsAddress:async e=>{const r=this.getAdapter(B.state.activeChain),n=this.getCaipNetwork();return n&&(await r?.getEnsAddress({name:e,caipNetwork:n}))?.address||!1},writeContract:async e=>{const r=this.getAdapter(B.state.activeChain),n=this.getCaipNetwork(),i=this.getCaipAddress(),s=vt.getProvider(B.state.activeChain);if(!n||!i)throw new Error("CaipNetwork or CaipAddress is undefined");return(await r?.writeContract({...e,caipNetwork:n,provider:s,caipAddress:i}))?.hash},parseUnits:(e,r)=>this.getAdapter(B.state.activeChain)?.parseUnits({value:e,decimals:r})??0n,formatUnits:(e,r)=>this.getAdapter(B.state.activeChain)?.formatUnits({value:e,decimals:r})??"0",getCapabilities:async e=>await this.getAdapter(B.state.activeChain)?.getCapabilities(e),grantPermissions:async e=>await this.getAdapter(B.state.activeChain)?.grantPermissions(e),revokePermissions:async e=>{const r=this.getAdapter(B.state.activeChain);return r?.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>await this.getAdapter(B.state.activeChain)?.walletGetAssets(e)??{}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},pe.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(vt.getProviderId(B.state.activeChain)===jt.CONNECTOR_TYPE_WALLET_CONNECT){const r=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(r)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=vt.getProvider(r),s=vt.getProviderId(r);if(e.chainNamespace===B.state.activeChain)await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:i,providerType:s});else if(this.setCaipNetwork(e),s===jt.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],i=r.accounts.map(s=>{const{chainId:o,chainNamespace:a}=Ys.parseCaipAddress(s);return`${a}:${o}`});return Array.from(new Set([...n,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{const i=e?.find(s=>s.namespace===n);return i?(i.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),r[n]=i):r[n]=new Zce({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=he.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(he.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:i,chainId:s})=>{const o=this.getCaipNetworks().find(l=>l.id===s||l.caipNetworkId===s),a=B.state.activeChain===e,c=B.getAccountProp("address",e);if(o){const l=a&&i?i:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),r.on("disconnect",this.disconnect.bind(this,e)),r.on("pendingTransactions",()=>{const i=ge.state.address,s=B.state.activeCaipNetwork;!i||!s?.id||this.updateNativeBalance(i,s.id,s.chainNamespace)}),r.on("accountChanged",({address:i,chainId:s})=>{const o=B.state.activeChain===e;o&&s?this.syncAccount({address:i,chainId:s,chainNamespace:e}):o&&B.state.activeCaipNetwork?.id?this.syncAccount({address:i,chainId:B.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(i,s,e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const r=oe.getConnectorId(e);switch(this.setStatus("connecting",e),r){case de.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case de.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){const r=this.getAdapter(e),n=oe.getConnectorId(e),i=this.getCaipNetwork(e),s=oe.getConnectors(e).find(o=>o.id===n);try{if(!r||!s)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!i?.id)throw new Error("CaipNetwork not found");const o=await r?.syncConnection({namespace:e,id:s.id,chainId:i.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]});if(o){const a=await r?.getAccounts({namespace:e,id:s.id});a&&a.accounts.length>0?this.setAllAccounts(a.accounts,e):this.setAllAccounts([X.createAccount(e,o.address,"eoa")],e),this.syncProvider({...o,chainNamespace:e}),await this.syncAccount({...o,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async r=>{const n=this.getAdapter(r),i=this.universalProvider?.session?.namespaces?.[r]?.accounts||[],s=B.state.activeCaipNetwork?.id,o=i.find(a=>{const{chainId:c}=Ys.parseCaipAddress(a);return c===s?.toString()})||i[0];if(o){const a=Ys.validateCaipAddress(o),{chainId:c,address:l}=Ys.parseCaipAddress(a);if(vt.setProviderId(r,jt.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&B.state.activeCaipNetwork&&n?.namespace!==de.CHAIN.EVM){const u=n?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:B.state.activeCaipNetwork});vt.setProvider(r,u)}else vt.setProvider(r,this.universalProvider);oe.setConnectorId(de.CONNECTOR_ID.WALLET_CONNECT,r),he.addConnectedNamespace(r),this.syncWalletConnectAccounts(r),await this.syncAccount({address:l,chainId:c,chainNamespace:r})}else this.setStatus("disconnected",r);await B.setApprovedCaipNetworksData(r)});await Promise.all(e)}syncWalletConnectAccounts(e){const r=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(n=>{const{address:i}=Ys.parseCaipAddress(n);return i}).filter((n,i,s)=>s.indexOf(n)===i);r&&this.setAllAccounts(r.map(n=>X.createAccount(e,n,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:r,id:n,chainNamespace:i}){vt.setProviderId(i,e),vt.setProvider(i,r),oe.setConnectorId(n,i)}async syncAccount(e){const r=e.chainNamespace===B.state.activeChain,n=B.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:a}=he.getActiveNetworkProps(),c=s||a,l=B.state.activeCaipNetwork?.name===de.UNSUPPORTED_NETWORK_NAME,u=B.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let d=this.getCaipNetworks().find(g=>g.id.toString()===c.toString()),h=this.getCaipNetworks().find(g=>g.chainNamespace===o);if(!u&&!d&&!h){const g=this.getApprovedCaipNetworkIds()||[],w=g.find(b=>Ys.parseCaipNetworkId(b)?.chainId===c.toString()),p=g.find(b=>Ys.parseCaipNetworkId(b)?.chainNamespace===o);d=this.getCaipNetworks().find(b=>b.caipNetworkId===w),h=this.getCaipNetworks().find(b=>b.caipNetworkId===p||"deprecatedCaipNetworkId"in b&&b.deprecatedCaipNetworkId===p)}const f=d||h;f?.chainNamespace===B.state.activeChain?G.state.enableNetworkSwitch&&!G.state.allowUnsupportedChain&&B.state.activeCaipNetwork?.name===de.UNSUPPORTED_NETWORK_NAME?B.showUnsupportedChainUI():this.setCaipNetwork(f):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),gy.isLowerCaseMatch(i,ge.state.address)||this.syncAccountInfo(i,f?.id,o),r?await this.syncBalance({address:i,chainId:f?.id,chainNamespace:o}):await this.syncBalance({address:i,chainId:n?.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const i=this.getCaipAddress(n),s=r||i?.split(":")[1];if(!s)return;const o=`${n}:${s}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:s,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const i=n[0];this.setProfileName(i.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){const r=oe.getConnectorId(e),n=vt.getProviderId(e);if(n===jt.CONNECTOR_TYPE_ANNOUNCED||n===jt.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(s=>s.id===r);if(i){const{info:s,name:o,imageUrl:a}=i,c=a||this.getConnectorImage(i);this.setConnectedWalletInfo({name:o,icon:c,...s},e)}}}else if(n===jt.CONNECTOR_TYPE_WALLET_CONNECT){const i=vt.getProvider(e);i?.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:i.session.peer.metadata.icons?.[0]},e)}else if(r)if(r===de.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(s=>s.id===de.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}else this.setConnectedWalletInfo({name:r},e)}async syncBalance(e){!V8.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>n.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,r,n){const i=this.getAdapter(n),s=B.getCaipNetworkByNamespace(n,r);if(i){const o=await i.getBalance({address:e,chainId:r,caipNetwork:s,tokens:this.options.tokens});this.setBalance(o.balance,o.symbol,n)}}async initializeUniversalAdapter(){const e=rce.createLogger((n,...i)=>{n&&this.handleAlertError(n),console.error(...i)}),r={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};G.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await fy.init(r),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{pe.setUri(e)}),this.universalProvider.on("connect",pe.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),pe.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const r=this.getCaipNetworks().find(i=>i.id==e),n=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(e);return}n?.id!==r?.id&&this.setCaipNetwork(r)}),this.universalProvider.on("session_event",e=>{if(F$.isSessionEventData(e)){const{name:r,data:n}=e.params.event;r==="accountsChanged"&&Array.isArray(n)&&X.isCaipAddress(n[0])&&this.syncAccount(Ys.parseCaipAddress(n[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&X.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Ae.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(r0.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,i]=r??[],{message:s,alertErrorKey:o}=i??{};if(n&&s&&!this.reportedAlertErrors[n]){const a=r0.ALERT_ERRORS[o];a&&(eo.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){if(await this.injectModalUi(),e?.uri&&pe.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return De.open({...e,data:{swap:e.arguments}})}return De.open(e)}async close(){await this.injectModalUi(),De.close()}setLoading(e,r){De.setLoading(e,r)}async disconnect(e){await pe.disconnect(e)}getError(){return""}getChainId(){return B.state.activeCaipNetwork?.id}async switchNetwork(e){const r=this.getCaipNetworks().find(n=>n.id===e.id);if(!r){eo.open(r0.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await B.switchActiveNetwork(r)}getWalletProvider(){return B.state.activeChain?vt.state.providers[B.state.activeChain]:null}getWalletProviderType(){return vt.getProviderId(B.state.activeChain)}subscribeProviders(e){return vt.subscribeProviders(e)}getThemeMode(){return Lt.state.themeMode}getThemeVariables(){return Lt.state.themeVariables}setThemeMode(e){Lt.setThemeMode(e),P$(Lt.state.themeMode)}setTermsConditionsUrl(e){G.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){G.setPrivacyPolicyUrl(e)}setThemeVariables(e){Lt.setThemeVariables(e),_ce(Lt.state.themeVariables)}subscribeTheme(e){return Lt.subscribe(e)}getWalletInfo(){return ge.state.connectedWalletInfo}getAccount(e){const r=oe.getAuthConnector(e),n=B.getAccountData(e),i=B.state.activeChain;if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:X.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:r?{user:n.user?{...n.user,username:he.getConnectedSocialUsername()}:void 0,authProvider:n.socialProvider||"email",accountType:n.preferredAccountTypes?.[e||i],isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const i=this.getAccount(r);i&&e(i)};r?B.subscribeChainProp("accountState",n,r):B.subscribe(n),oe.subscribe(n)}subscribeNetwork(e){return B.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r?.id,caipNetworkId:r?.caipNetworkId})})}subscribeWalletInfo(e){return ge.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ge.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){B.subscribeKey("activeCaipNetwork",e)}getState(){return ds.state}subscribeState(e){return ds.subscribe(e)}showErrorMessage(e){ct.showError(e)}showSuccessMessage(e){ct.showSuccess(e)}getEvent(){return{...Ae.state}}subscribeEvents(e){return Ae.subscribe(e)}replace(e){ne.replace(e)}redirect(e){ne.push(e)}popTransactionStack(e){ne.popTransactionStack(e)}isOpen(){return De.state.open}isTransactionStackEmpty(){return ne.state.transactionStack.length===0}isTransactionShouldReplaceView(){return ne.state.transactionStack[ne.state.transactionStack.length-1]?.replace}static getInstance(){return this.instance}updateFeatures(e){G.setFeatures(e)}updateOptions(e){const n={...G.state||{},...e};G.setOptions(n)}setConnectMethodsOrder(e){G.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){G.setWalletFeaturesOrder(e)}setCollapseWallets(e){G.setCollapseWallets(e)}setSocialsOrder(e){G.setSocialsOrder(e)}getConnectMethodsOrder(){return Ca.getConnectOrderMethod(G.state.features,oe.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(i=>i.id===n.id)||B.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(i=>i.id===r)&&B.removeNetwork(e,r)}}let j$=!1;class z$ extends Yce{async open(e){oe.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&pe.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!j$&&X.isClient()){if(await Promise.resolve().then(function(){return cde}),await Promise.resolve().then(function(){return $de}),!document.querySelector("w3m-modal")){const r=document.createElement("w3m-modal");!G.state.disableAppend&&!G.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",r)}j$=!0}}}const Jce="1.7.3";function Xce(t){return new z$({...t,basic:!0,sdkVersion:`html-core-${Jce}`})}var Qce=Object.freeze({__proto__:null,createAppKit:Xce,AppKit:z$}),ele=Object.defineProperty,tle=Object.defineProperties,rle=Object.getOwnPropertyDescriptors,q$=Object.getOwnPropertySymbols,nle=Object.prototype.hasOwnProperty,ile=Object.prototype.propertyIsEnumerable,H$=(t,e,r)=>e in t?ele(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sle=(t,e)=>{for(var r in e||(e={}))nle.call(e,r)&&H$(t,r,e[r]);if(q$)for(var r of q$(e))ile.call(e,r)&&H$(t,r,e[r]);return t},ole=(t,e)=>tle(t,rle(e));function ale(t){if(t)return{"--w3m-font-family":t["--wcm-font-family"],"--w3m-accent":t["--wcm-accent-color"],"--w3m-color-mix":t["--wcm-background-color"],"--w3m-z-index":t["--wcm-z-index"]?Number(t["--wcm-z-index"]):void 0,"--w3m-qr-color":t["--wcm-accent-color"],"--w3m-font-size-master":t["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":t["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const cle=t=>{const[e,r]=t.split(":");return Fl({id:r,caipNetworkId:t,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function lle(t){var e,r,n,i,s,o,a;const c=(e=t.chains)==null?void 0:e.map(cle).filter(Boolean);if(c.length===0)throw new Error("At least one chain must be specified");const l=c.find(d=>{var h;return d.id===((h=t.defaultChain)==null?void 0:h.id)}),u={projectId:t.projectId,networks:c,themeMode:t.themeMode,themeVariables:ale(t.themeVariables),chainImages:t.chainImages,connectorImages:t.walletImages,defaultNetwork:l,metadata:ole(sle({},t.metadata),{name:((r=t.metadata)==null?void 0:r.name)||"WalletConnect",description:((n=t.metadata)==null?void 0:n.description)||"Connect to WalletConnect-compatible wallets",url:((i=t.metadata)==null?void 0:i.url)||"https://walletconnect.org",icons:((s=t.metadata)==null?void 0:s.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:t.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(t.explorerRecommendedWalletIds)?t.explorerRecommendedWalletIds:[],excludeWalletIds:t.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(t.explorerExcludedWalletIds)?t.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((o=t.mobileWallets)!=null&&o.length||(a=t.desktopWallets)!=null&&a.length){const d=[...(t.mobileWallets||[]).map(g=>({id:g.id,name:g.name,links:g.links})),...(t.desktopWallets||[]).map(g=>({id:g.id,name:g.name,links:{native:g.links.native,universal:g.links.universal}}))],h=[...u.featuredWalletIds||[],...u.excludeWalletIds||[]],f=d.filter(g=>!h.includes(g.id));f.length&&(u.customWallets=f)}return u}var ule=Object.freeze({__proto__:null,convertWCMToAppKitOptions:lle});/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const dle={attribute:!0,type:String,converter:o0,reflect:!1,hasChanged:yy},hle=(t=dle,e,r)=>{const{kind:n,metadata:i}=r;let s=globalThis.litPropertyMetadata.get(i);if(s===void 0&&globalThis.litPropertyMetadata.set(i,s=new Map),n==="setter"&&((t=Object.create(t)).wrapped=!0),s.set(r.name,t),n==="accessor"){const{name:o}=r;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,c,t)},init(a){return a!==void 0&&this.C(o,void 0,t,a),a}}}if(n==="setter"){const{name:o}=r;return function(a){const c=this[o];e.call(this,a),this.requestUpdate(o,c,t)}}throw Error("Unsupported decorator location: "+n)};function j(t){return(e,r)=>typeof r=="object"?hle(t,e,r):((n,i,s)=>{const o=i.hasOwnProperty(s);return i.constructor.createProperty(s,n),o?Object.getOwnPropertyDescriptor(i,s):void 0})(t,e,r)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function le(t){return j({...t,state:!0,attribute:!1})}var ple=we`
  :host {
    display: flex;
    width: inherit;
    height: inherit;
  }
`,In=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let jr=class extends ue{render(){return this.style.cssText=`
      flex-direction: ${this.flexDirection};
      flex-wrap: ${this.flexWrap};
      flex-basis: ${this.flexBasis};
      flex-grow: ${this.flexGrow};
      flex-shrink: ${this.flexShrink};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      column-gap: ${this.columnGap&&`var(--wui-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--wui-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--wui-spacing-${this.gap})`};
      padding-top: ${this.padding&&or.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&or.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&or.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&or.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&or.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&or.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&or.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&or.getSpacingStyles(this.margin,3)};
    `,U`<slot></slot>`}};jr.styles=[qe,ple],In([j()],jr.prototype,"flexDirection",void 0),In([j()],jr.prototype,"flexWrap",void 0),In([j()],jr.prototype,"flexBasis",void 0),In([j()],jr.prototype,"flexGrow",void 0),In([j()],jr.prototype,"flexShrink",void 0),In([j()],jr.prototype,"alignItems",void 0),In([j()],jr.prototype,"justifyContent",void 0),In([j()],jr.prototype,"columnGap",void 0),In([j()],jr.prototype,"rowGap",void 0),In([j()],jr.prototype,"gap",void 0),In([j()],jr.prototype,"padding",void 0),In([j()],jr.prototype,"margin",void 0),jr=In([ce("wui-flex")],jr);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const me=t=>t??At;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fle=t=>t===null||typeof t!="object"&&typeof t!="function",gle=t=>t.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const W$={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Sy=t=>(...e)=>({_$litDirective$:t,values:e});class V${constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vh=(t,e)=>{const r=t._$AN;if(r===void 0)return!1;for(const n of r)n._$AO?.(e,!1),vh(n,e);return!0},D0=t=>{let e,r;do{if((e=t._$AM)===void 0)break;r=e._$AN,r.delete(t),t=e}while(r?.size===0)},K$=t=>{for(let e;e=t._$AM;t=e){let r=e._$AN;if(r===void 0)e._$AN=r=new Set;else if(r.has(t))break;r.add(t),ble(e)}};function wle(t){this._$AN!==void 0?(D0(this),this._$AM=t,K$(this)):this._$AM=t}function mle(t,e=!1,r=0){const n=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(e)if(Array.isArray(n))for(let s=r;s<n.length;s++)vh(n[s],!1),D0(n[s]);else n!=null&&(vh(n,!1),D0(n));else vh(this,t)}const ble=t=>{t.type==W$.CHILD&&(t._$AP??=mle,t._$AQ??=wle)};class G$ extends V${constructor(){super(...arguments),this._$AN=void 0}_$AT(e,r,n){super._$AT(e,r,n),K$(this),this.isConnected=e._$AU}_$AO(e,r=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),r&&(vh(this,e),D0(this))}setValue(e){if(gle(this._$Ct))this._$Ct._$AI(e,this);else{const r=[...this._$Ct._$AH];r[this._$Ci]=e,this._$Ct._$AI(r,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class yle{constructor(e){this.G=e}disconnect(){this.G=void 0}reconnect(e){this.G=e}deref(){return this.G}}class vle{constructor(){this.Y=void 0,this.Z=void 0}get(){return this.Y}pause(){this.Y??=new Promise(e=>this.Z=e)}resume(){this.Z?.(),this.Y=this.Z=void 0}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Z$=t=>!fle(t)&&typeof t.then=="function",Y$=1073741823;class Ele extends G${constructor(){super(...arguments),this._$Cwt=Y$,this._$Cbt=[],this._$CK=new yle(this),this._$CX=new vle}render(...e){return e.find(r=>!Z$(r))??Is}update(e,r){const n=this._$Cbt;let i=n.length;this._$Cbt=r;const s=this._$CK,o=this._$CX;this.isConnected||this.disconnected();for(let a=0;a<r.length&&!(a>this._$Cwt);a++){const c=r[a];if(!Z$(c))return this._$Cwt=a,c;a<i&&c===n[a]||(this._$Cwt=Y$,i=0,Promise.resolve(c).then(async l=>{for(;o.get();)await o.get();const u=s.deref();if(u!==void 0){const d=u._$Cbt.indexOf(c);d>-1&&d<u._$Cwt&&(u._$Cwt=d,u.setValue(l))}}))}return Is}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}const Cle=Sy(Ele);class xle{constructor(){this.cache=new Map}set(e,r){this.cache.set(e,r)}get(e){return this.cache.get(e)}has(e){return this.cache.has(e)}delete(e){this.cache.delete(e)}clear(){this.cache.clear()}}const Ay=new xle;var $le=we`
  :host {
    display: flex;
    aspect-ratio: var(--local-aspect-ratio);
    color: var(--local-color);
    width: var(--local-width);
  }

  svg {
    width: inherit;
    height: inherit;
    object-fit: contain;
    object-position: center;
  }

  .fallback {
    width: var(--local-width);
    height: var(--local-height);
  }
`,Eh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const J$={add:async()=>(await Promise.resolve().then(function(){return Ide})).addSvg,allWallets:async()=>(await Promise.resolve().then(function(){return Ade})).allWalletsSvg,arrowBottomCircle:async()=>(await Promise.resolve().then(function(){return Ode})).arrowBottomCircleSvg,appStore:async()=>(await Promise.resolve().then(function(){return Tde})).appStoreSvg,apple:async()=>(await Promise.resolve().then(function(){return Rde})).appleSvg,arrowBottom:async()=>(await Promise.resolve().then(function(){return Bde})).arrowBottomSvg,arrowLeft:async()=>(await Promise.resolve().then(function(){return Lde})).arrowLeftSvg,arrowRight:async()=>(await Promise.resolve().then(function(){return Mde})).arrowRightSvg,arrowTop:async()=>(await Promise.resolve().then(function(){return zde})).arrowTopSvg,bank:async()=>(await Promise.resolve().then(function(){return Hde})).bankSvg,browser:async()=>(await Promise.resolve().then(function(){return Vde})).browserSvg,card:async()=>(await Promise.resolve().then(function(){return Gde})).cardSvg,checkmark:async()=>(await Promise.resolve().then(function(){return Yde})).checkmarkSvg,checkmarkBold:async()=>(await Promise.resolve().then(function(){return Xde})).checkmarkBoldSvg,chevronBottom:async()=>(await Promise.resolve().then(function(){return ehe})).chevronBottomSvg,chevronLeft:async()=>(await Promise.resolve().then(function(){return rhe})).chevronLeftSvg,chevronRight:async()=>(await Promise.resolve().then(function(){return ihe})).chevronRightSvg,chevronTop:async()=>(await Promise.resolve().then(function(){return ohe})).chevronTopSvg,chromeStore:async()=>(await Promise.resolve().then(function(){return che})).chromeStoreSvg,clock:async()=>(await Promise.resolve().then(function(){return uhe})).clockSvg,close:async()=>(await Promise.resolve().then(function(){return hhe})).closeSvg,compass:async()=>(await Promise.resolve().then(function(){return fhe})).compassSvg,coinPlaceholder:async()=>(await Promise.resolve().then(function(){return whe})).coinPlaceholderSvg,copy:async()=>(await Promise.resolve().then(function(){return bhe})).copySvg,cursor:async()=>(await Promise.resolve().then(function(){return vhe})).cursorSvg,cursorTransparent:async()=>(await Promise.resolve().then(function(){return Che})).cursorTransparentSvg,desktop:async()=>(await Promise.resolve().then(function(){return $he})).desktopSvg,disconnect:async()=>(await Promise.resolve().then(function(){return Ihe})).disconnectSvg,discord:async()=>(await Promise.resolve().then(function(){return Ahe})).discordSvg,etherscan:async()=>(await Promise.resolve().then(function(){return Ohe})).etherscanSvg,extension:async()=>(await Promise.resolve().then(function(){return The})).extensionSvg,externalLink:async()=>(await Promise.resolve().then(function(){return Rhe})).externalLinkSvg,facebook:async()=>(await Promise.resolve().then(function(){return Bhe})).facebookSvg,farcaster:async()=>(await Promise.resolve().then(function(){return Lhe})).farcasterSvg,filters:async()=>(await Promise.resolve().then(function(){return Mhe})).filtersSvg,github:async()=>(await Promise.resolve().then(function(){return zhe})).githubSvg,google:async()=>(await Promise.resolve().then(function(){return Hhe})).googleSvg,helpCircle:async()=>(await Promise.resolve().then(function(){return Vhe})).helpCircleSvg,image:async()=>(await Promise.resolve().then(function(){return Ghe})).imageSvg,id:async()=>(await Promise.resolve().then(function(){return Yhe})).idSvg,infoCircle:async()=>(await Promise.resolve().then(function(){return Xhe})).infoCircleSvg,lightbulb:async()=>(await Promise.resolve().then(function(){return epe})).lightbulbSvg,mail:async()=>(await Promise.resolve().then(function(){return rpe})).mailSvg,mobile:async()=>(await Promise.resolve().then(function(){return ipe})).mobileSvg,more:async()=>(await Promise.resolve().then(function(){return ope})).moreSvg,networkPlaceholder:async()=>(await Promise.resolve().then(function(){return cpe})).networkPlaceholderSvg,nftPlaceholder:async()=>(await Promise.resolve().then(function(){return upe})).nftPlaceholderSvg,off:async()=>(await Promise.resolve().then(function(){return hpe})).offSvg,playStore:async()=>(await Promise.resolve().then(function(){return fpe})).playStoreSvg,plus:async()=>(await Promise.resolve().then(function(){return wpe})).plusSvg,qrCode:async()=>(await Promise.resolve().then(function(){return bpe})).qrCodeIcon,recycleHorizontal:async()=>(await Promise.resolve().then(function(){return vpe})).recycleHorizontalSvg,refresh:async()=>(await Promise.resolve().then(function(){return Cpe})).refreshSvg,search:async()=>(await Promise.resolve().then(function(){return $pe})).searchSvg,send:async()=>(await Promise.resolve().then(function(){return Ipe})).sendSvg,swapHorizontal:async()=>(await Promise.resolve().then(function(){return Ape})).swapHorizontalSvg,swapHorizontalMedium:async()=>(await Promise.resolve().then(function(){return Ope})).swapHorizontalMediumSvg,swapHorizontalBold:async()=>(await Promise.resolve().then(function(){return Tpe})).swapHorizontalBoldSvg,swapHorizontalRoundedBold:async()=>(await Promise.resolve().then(function(){return Rpe})).swapHorizontalRoundedBoldSvg,swapVertical:async()=>(await Promise.resolve().then(function(){return Bpe})).swapVerticalSvg,telegram:async()=>(await Promise.resolve().then(function(){return Lpe})).telegramSvg,threeDots:async()=>(await Promise.resolve().then(function(){return Mpe})).threeDotsSvg,twitch:async()=>(await Promise.resolve().then(function(){return zpe})).twitchSvg,twitter:async()=>(await Promise.resolve().then(function(){return L_})).xSvg,twitterIcon:async()=>(await Promise.resolve().then(function(){return Wpe})).twitterIconSvg,verify:async()=>(await Promise.resolve().then(function(){return Kpe})).verifySvg,verifyFilled:async()=>(await Promise.resolve().then(function(){return Zpe})).verifyFilledSvg,wallet:async()=>(await Promise.resolve().then(function(){return Jpe})).walletSvg,walletConnect:async()=>(await Promise.resolve().then(function(){return u2})).walletConnectSvg,walletConnectLightBrown:async()=>(await Promise.resolve().then(function(){return u2})).walletConnectLightBrownSvg,walletConnectBrown:async()=>(await Promise.resolve().then(function(){return u2})).walletConnectBrownSvg,walletPlaceholder:async()=>(await Promise.resolve().then(function(){return rfe})).walletPlaceholderSvg,warningCircle:async()=>(await Promise.resolve().then(function(){return ife})).warningCircleSvg,x:async()=>(await Promise.resolve().then(function(){return L_})).xSvg,info:async()=>(await Promise.resolve().then(function(){return ofe})).infoSvg,exclamationTriangle:async()=>(await Promise.resolve().then(function(){return cfe})).exclamationTriangleSvg,reown:async()=>(await Promise.resolve().then(function(){return ufe})).reownSvg};async function _le(t){if(Ay.has(t))return Ay.get(t);const r=(J$[t]??J$.copy)();return Ay.set(t,r),r}let Ia=class extends ue{constructor(){super(...arguments),this.size="md",this.name="copy",this.color="fg-300",this.aspectRatio="1 / 1"}render(){return this.style.cssText=`
      --local-color: ${`var(--wui-color-${this.color});`}
      --local-width: ${`var(--wui-icon-size-${this.size});`}
      --local-aspect-ratio: ${this.aspectRatio}
    `,U`${Cle(_le(this.name),U`<div class="fallback"></div>`)}`}};Ia.styles=[qe,ah,$le],Eh([j()],Ia.prototype,"size",void 0),Eh([j()],Ia.prototype,"name",void 0),Eh([j()],Ia.prototype,"color",void 0),Eh([j()],Ia.prototype,"aspectRatio",void 0),Ia=Eh([ce("wui-icon")],Ia);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const X$=Sy(class extends V${constructor(t){if(super(t),t.type!==W$.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(n=>n!=="")));for(const n in e)e[n]&&!this.nt?.has(n)&&this.st.add(n);return this.render(e)}const r=t.element.classList;for(const n of this.st)n in e||(r.remove(n),this.st.delete(n));for(const n in e){const i=!!e[n];i===this.st.has(n)||this.nt?.has(n)||(i?(r.add(n),this.st.add(n)):(r.remove(n),this.st.delete(n)))}return Is}});var Ile=we`
  :host {
    display: inline-flex !important;
  }

  slot {
    width: 100%;
    display: inline-block;
    font-style: normal;
    font-family: var(--wui-font-family);
    font-feature-settings:
      'tnum' on,
      'lnum' on,
      'case' on;
    line-height: 130%;
    font-weight: var(--wui-font-weight-regular);
    overflow: inherit;
    text-overflow: inherit;
    text-align: var(--local-align);
    color: var(--local-color);
  }

  .wui-line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .wui-line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .wui-font-medium-400 {
    font-size: var(--wui-font-size-medium);
    font-weight: var(--wui-font-weight-light);
    letter-spacing: var(--wui-letter-spacing-medium);
  }

  .wui-font-medium-600 {
    font-size: var(--wui-font-size-medium);
    letter-spacing: var(--wui-letter-spacing-medium);
  }

  .wui-font-title-600 {
    font-size: var(--wui-font-size-title);
    letter-spacing: var(--wui-letter-spacing-title);
  }

  .wui-font-title-6-600 {
    font-size: var(--wui-font-size-title-6);
    letter-spacing: var(--wui-letter-spacing-title-6);
  }

  .wui-font-mini-700 {
    font-size: var(--wui-font-size-mini);
    letter-spacing: var(--wui-letter-spacing-mini);
    text-transform: uppercase;
  }

  .wui-font-large-500,
  .wui-font-large-600,
  .wui-font-large-700 {
    font-size: var(--wui-font-size-large);
    letter-spacing: var(--wui-letter-spacing-large);
  }

  .wui-font-2xl-500,
  .wui-font-2xl-600,
  .wui-font-2xl-700 {
    font-size: var(--wui-font-size-2xl);
    letter-spacing: var(--wui-letter-spacing-2xl);
  }

  .wui-font-paragraph-400,
  .wui-font-paragraph-500,
  .wui-font-paragraph-600,
  .wui-font-paragraph-700 {
    font-size: var(--wui-font-size-paragraph);
    letter-spacing: var(--wui-letter-spacing-paragraph);
  }

  .wui-font-small-400,
  .wui-font-small-500,
  .wui-font-small-600 {
    font-size: var(--wui-font-size-small);
    letter-spacing: var(--wui-letter-spacing-small);
  }

  .wui-font-tiny-400,
  .wui-font-tiny-500,
  .wui-font-tiny-600 {
    font-size: var(--wui-font-size-tiny);
    letter-spacing: var(--wui-letter-spacing-tiny);
  }

  .wui-font-micro-700,
  .wui-font-micro-600 {
    font-size: var(--wui-font-size-micro);
    letter-spacing: var(--wui-letter-spacing-micro);
    text-transform: uppercase;
  }

  .wui-font-tiny-400,
  .wui-font-small-400,
  .wui-font-medium-400,
  .wui-font-paragraph-400 {
    font-weight: var(--wui-font-weight-light);
  }

  .wui-font-large-700,
  .wui-font-paragraph-700,
  .wui-font-micro-700,
  .wui-font-mini-700 {
    font-weight: var(--wui-font-weight-bold);
  }

  .wui-font-medium-600,
  .wui-font-medium-title-600,
  .wui-font-title-6-600,
  .wui-font-large-600,
  .wui-font-paragraph-600,
  .wui-font-small-600,
  .wui-font-tiny-600,
  .wui-font-micro-600 {
    font-weight: var(--wui-font-weight-medium);
  }

  :host([disabled]) {
    opacity: 0.4;
  }
`,Ch=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Sa=class extends ue{constructor(){super(...arguments),this.variant="paragraph-500",this.color="fg-300",this.align="left",this.lineClamp=void 0}render(){const e={[`wui-font-${this.variant}`]:!0,[`wui-color-${this.color}`]:!0,[`wui-line-clamp-${this.lineClamp}`]:!!this.lineClamp};return this.style.cssText=`
      --local-align: ${this.align};
      --local-color: var(--wui-color-${this.color});
    `,U`<slot class=${X$(e)}></slot>`}};Sa.styles=[qe,Ile],Ch([j()],Sa.prototype,"variant",void 0),Ch([j()],Sa.prototype,"color",void 0),Ch([j()],Sa.prototype,"align",void 0),Ch([j()],Sa.prototype,"lineClamp",void 0),Sa=Ch([ce("wui-text")],Sa);var Sle=we`
  :host {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
    background-color: var(--wui-color-gray-glass-020);
    border-radius: var(--local-border-radius);
    border: var(--local-border);
    box-sizing: content-box;
    width: var(--local-size);
    height: var(--local-size);
    min-height: var(--local-size);
    min-width: var(--local-size);
  }

  @supports (background: color-mix(in srgb, white 50%, black)) {
    :host {
      background-color: color-mix(in srgb, var(--local-bg-value) var(--local-bg-mix), transparent);
    }
  }
`,Ss=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let li=class extends ue{constructor(){super(...arguments),this.size="md",this.backgroundColor="accent-100",this.iconColor="accent-100",this.background="transparent",this.border=!1,this.borderColor="wui-color-bg-125",this.icon="copy"}render(){const e=this.iconSize||this.size,r=this.size==="lg",n=this.size==="xl",i=r?"12%":"16%",s=r?"xxs":n?"s":"3xl",o=this.background==="gray",a=this.background==="opaque",c=this.backgroundColor==="accent-100"&&a||this.backgroundColor==="success-100"&&a||this.backgroundColor==="error-100"&&a||this.backgroundColor==="inverse-100"&&a;let l=`var(--wui-color-${this.backgroundColor})`;return c?l=`var(--wui-icon-box-bg-${this.backgroundColor})`:o&&(l=`var(--wui-color-gray-${this.backgroundColor})`),this.style.cssText=`
       --local-bg-value: ${l};
       --local-bg-mix: ${c||o?"100%":i};
       --local-border-radius: var(--wui-border-radius-${s});
       --local-size: var(--wui-icon-box-size-${this.size});
       --local-border: ${this.borderColor==="wui-color-bg-125"?"2px":"1px"} solid ${this.border?`var(--${this.borderColor})`:"transparent"}
   `,U` <wui-icon color=${this.iconColor} size=${e} name=${this.icon}></wui-icon> `}};li.styles=[qe,Er,Sle],Ss([j()],li.prototype,"size",void 0),Ss([j()],li.prototype,"backgroundColor",void 0),Ss([j()],li.prototype,"iconColor",void 0),Ss([j()],li.prototype,"iconSize",void 0),Ss([j()],li.prototype,"background",void 0),Ss([j({type:Boolean})],li.prototype,"border",void 0),Ss([j()],li.prototype,"borderColor",void 0),Ss([j()],li.prototype,"icon",void 0),li=Ss([ce("wui-icon-box")],li);var Ale=we`
  :host {
    display: block;
    width: var(--local-width);
    height: var(--local-height);
  }

  img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center center;
    border-radius: inherit;
  }
`,B0=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ml=class extends ue{constructor(){super(...arguments),this.src="./path/to/image.jpg",this.alt="Image",this.size=void 0}render(){return this.style.cssText=`
      --local-width: ${this.size?`var(--wui-icon-size-${this.size});`:"100%"};
      --local-height: ${this.size?`var(--wui-icon-size-${this.size});`:"100%"};
      `,U`<img src=${this.src} alt=${this.alt} @error=${this.handleImageError} />`}handleImageError(){this.dispatchEvent(new CustomEvent("onLoadError",{bubbles:!0,composed:!0}))}};Ml.styles=[qe,ah,Ale],B0([j()],Ml.prototype,"src",void 0),B0([j()],Ml.prototype,"alt",void 0),B0([j()],Ml.prototype,"size",void 0),Ml=B0([ce("wui-image")],Ml);var Ple=we`
  :host {
    position: relative;
    background-color: var(--wui-color-gray-glass-002);
    display: flex;
    justify-content: center;
    align-items: center;
    width: var(--local-size);
    height: var(--local-size);
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host > wui-flex {
    overflow: hidden;
    border-radius: inherit;
    border-radius: var(--local-border-radius);
  }

  :host::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-gray-glass-010);
    pointer-events: none;
  }

  :host([name='Extension'])::after {
    border: 1px solid var(--wui-color-accent-glass-010);
  }

  :host([data-wallet-icon='allWallets']) {
    background-color: var(--wui-all-wallets-bg-100);
  }

  :host([data-wallet-icon='allWallets'])::after {
    border: 1px solid var(--wui-color-accent-glass-010);
  }

  wui-icon[data-parent-size='inherit'] {
    width: 75%;
    height: 75%;
    align-items: center;
  }

  wui-icon[data-parent-size='sm'] {
    width: 18px;
    height: 18px;
  }

  wui-icon[data-parent-size='md'] {
    width: 24px;
    height: 24px;
  }

  wui-icon[data-parent-size='lg'] {
    width: 42px;
    height: 42px;
  }

  wui-icon[data-parent-size='full'] {
    width: 100%;
    height: 100%;
  }

  :host > wui-icon-box {
    position: absolute;
    overflow: hidden;
    right: -1px;
    bottom: -2px;
    z-index: 1;
    border: 2px solid var(--wui-color-bg-150, #1e1f1f);
    padding: 1px;
  }
`,Aa=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let As=class extends ue{constructor(){super(...arguments),this.size="md",this.name="",this.installed=!1,this.badgeSize="xs"}render(){let e="xxs";return this.size==="lg"?e="m":this.size==="md"?e="xs":e="xxs",this.style.cssText=`
       --local-border-radius: var(--wui-border-radius-${e});
       --local-size: var(--wui-wallet-image-size-${this.size});
   `,this.walletIcon&&(this.dataset.walletIcon=this.walletIcon),U`
      <wui-flex justifyContent="center" alignItems="center"> ${this.templateVisual()} </wui-flex>
    `}templateVisual(){return this.imageSrc?U`<wui-image src=${this.imageSrc} alt=${this.name}></wui-image>`:this.walletIcon?U`<wui-icon
        data-parent-size="md"
        size="md"
        color="inherit"
        name=${this.walletIcon}
      ></wui-icon>`:U`<wui-icon
      data-parent-size=${this.size}
      size="inherit"
      color="inherit"
      name="walletPlaceholder"
    ></wui-icon>`}};As.styles=[Er,qe,Ple],Aa([j()],As.prototype,"size",void 0),Aa([j()],As.prototype,"name",void 0),Aa([j()],As.prototype,"imageSrc",void 0),Aa([j()],As.prototype,"walletIcon",void 0),Aa([j({type:Boolean})],As.prototype,"installed",void 0),Aa([j()],As.prototype,"badgeSize",void 0),As=Aa([ce("wui-wallet-image")],As);var Ole=we`
  :host {
    position: relative;
    border-radius: var(--wui-border-radius-xxs);
    width: 40px;
    height: 40px;
    overflow: hidden;
    background: var(--wui-color-gray-glass-002);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--wui-spacing-4xs);
    padding: 3.75px !important;
  }

  :host::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-gray-glass-010);
    pointer-events: none;
  }

  :host > wui-wallet-image {
    width: 14px;
    height: 14px;
    border-radius: var(--wui-border-radius-5xs);
  }

  :host > wui-flex {
    padding: 2px;
    position: fixed;
    overflow: hidden;
    left: 34px;
    bottom: 8px;
    background: var(--dark-background-150, #1e1f1f);
    border-radius: 50%;
    z-index: 2;
    display: flex;
  }
`,Q$=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const Py=4;let U0=class extends ue{constructor(){super(...arguments),this.walletImages=[]}render(){const e=this.walletImages.length<Py;return U`${this.walletImages.slice(0,Py).map(({src:r,walletName:n})=>U`
            <wui-wallet-image
              size="inherit"
              imageSrc=${r}
              name=${me(n)}
            ></wui-wallet-image>
          `)}
      ${e?[...Array(Py-this.walletImages.length)].map(()=>U` <wui-wallet-image size="inherit" name=""></wui-wallet-image>`):null}
      <wui-flex>
        <wui-icon-box
          size="xxs"
          iconSize="xxs"
          iconcolor="success-100"
          backgroundcolor="success-100"
          icon="checkmark"
          background="opaque"
        ></wui-icon-box>
      </wui-flex>`}};U0.styles=[qe,Ole],Q$([j({type:Array})],U0.prototype,"walletImages",void 0),U0=Q$([ce("wui-all-wallets-image")],U0);var Nle=we`
  :host {
    display: flex;
    justify-content: center;
    align-items: center;
    height: var(--wui-spacing-m);
    padding: 0 var(--wui-spacing-3xs) !important;
    border-radius: var(--wui-border-radius-5xs);
    transition:
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius, background-color;
  }

  :host > wui-text {
    transform: translateY(5%);
  }

  :host([data-variant='main']) {
    background-color: var(--wui-color-accent-glass-015);
    color: var(--wui-color-accent-100);
  }

  :host([data-variant='shade']) {
    background-color: var(--wui-color-gray-glass-010);
    color: var(--wui-color-fg-200);
  }

  :host([data-variant='success']) {
    background-color: var(--wui-icon-box-bg-success-100);
    color: var(--wui-color-success-100);
  }

  :host([data-variant='error']) {
    background-color: var(--wui-icon-box-bg-error-100);
    color: var(--wui-color-error-100);
  }

  :host([data-size='lg']) {
    padding: 11px 5px !important;
  }

  :host([data-size='lg']) > wui-text {
    transform: translateY(2%);
  }
`,Oy=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let xh=class extends ue{constructor(){super(...arguments),this.variant="main",this.size="lg"}render(){this.dataset.variant=this.variant,this.dataset.size=this.size;const e=this.size==="md"?"mini-700":"micro-700";return U`
      <wui-text data-variant=${this.variant} variant=${e} color="inherit">
        <slot></slot>
      </wui-text>
    `}};xh.styles=[qe,Nle],Oy([j()],xh.prototype,"variant",void 0),Oy([j()],xh.prototype,"size",void 0),xh=Oy([ce("wui-tag")],xh);var Tle=we`
  button {
    column-gap: var(--wui-spacing-s);
    padding: 7px var(--wui-spacing-l) 7px var(--wui-spacing-xs);
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    color: var(--wui-color-fg-100);
  }

  button > wui-text:nth-child(2) {
    display: flex;
    flex: 1;
  }

  button:disabled {
    background-color: var(--wui-color-gray-glass-015);
    color: var(--wui-color-gray-glass-015);
  }

  button:disabled > wui-tag {
    background-color: var(--wui-color-gray-glass-010);
    color: var(--wui-color-fg-300);
  }

  wui-icon {
    color: var(--wui-color-fg-200) !important;
  }
`,tn=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ar=class extends ue{constructor(){super(...arguments),this.walletImages=[],this.imageSrc="",this.name="",this.tabIdx=void 0,this.installed=!1,this.disabled=!1,this.showAllWallets=!1,this.loading=!1,this.loadingSpinnerColor="accent-100"}render(){return U`
      <button ?disabled=${this.disabled} tabindex=${me(this.tabIdx)}>
        ${this.templateAllWallets()} ${this.templateWalletImage()}
        <wui-text variant="paragraph-500" color="inherit">${this.name}</wui-text>
        ${this.templateStatus()}
      </button>
    `}templateAllWallets(){return this.showAllWallets&&this.imageSrc?U` <wui-all-wallets-image .imageeSrc=${this.imageSrc}> </wui-all-wallets-image> `:this.showAllWallets&&this.walletIcon?U` <wui-wallet-image .walletIcon=${this.walletIcon} size="sm"> </wui-wallet-image> `:null}templateWalletImage(){return!this.showAllWallets&&this.imageSrc?U`<wui-wallet-image
        size="sm"
        imageSrc=${this.imageSrc}
        name=${this.name}
        .installed=${this.installed}
      ></wui-wallet-image>`:!this.showAllWallets&&!this.imageSrc?U`<wui-wallet-image size="sm" name=${this.name}></wui-wallet-image>`:null}templateStatus(){return this.loading?U`<wui-loading-spinner
        size="lg"
        color=${this.loadingSpinnerColor}
      ></wui-loading-spinner>`:this.tagLabel&&this.tagVariant?U`<wui-tag variant=${this.tagVariant}>${this.tagLabel}</wui-tag>`:this.icon?U`<wui-icon color="inherit" size="sm" name=${this.icon}></wui-icon>`:null}};Ar.styles=[qe,Er,Tle],tn([j({type:Array})],Ar.prototype,"walletImages",void 0),tn([j()],Ar.prototype,"imageSrc",void 0),tn([j()],Ar.prototype,"name",void 0),tn([j()],Ar.prototype,"tagLabel",void 0),tn([j()],Ar.prototype,"tagVariant",void 0),tn([j()],Ar.prototype,"icon",void 0),tn([j()],Ar.prototype,"walletIcon",void 0),tn([j()],Ar.prototype,"tabIdx",void 0),tn([j({type:Boolean})],Ar.prototype,"installed",void 0),tn([j({type:Boolean})],Ar.prototype,"disabled",void 0),tn([j({type:Boolean})],Ar.prototype,"showAllWallets",void 0),tn([j({type:Boolean})],Ar.prototype,"loading",void 0),tn([j({type:String})],Ar.prototype,"loadingSpinnerColor",void 0),Ar=tn([ce("wui-list-wallet")],Ar);var $h=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let jl=class extends ue{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=oe.state.connectors,this.count=se.state.count,this.isFetchingRecommendedWallets=se.state.isFetchingRecommendedWallets,this.unsubscribe.push(oe.subscribeKey("connectors",e=>this.connectors=e),se.subscribeKey("count",e=>this.count=e),se.subscribeKey("isFetchingRecommendedWallets",e=>this.isFetchingRecommendedWallets=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.find(a=>a.id==="walletConnect"),{allWallets:r}=G.state;if(!e||r==="HIDE"||r==="ONLY_MOBILE"&&!X.isMobile())return null;const n=se.state.featured.length,i=this.count+n,s=i<10?i:Math.floor(i/10)*10,o=s<i?`${s}+`:`${s}`;return U`
      <wui-list-wallet
        name="All Wallets"
        walletIcon="allWallets"
        showAllWallets
        @click=${this.onAllWallets.bind(this)}
        tagLabel=${o}
        tagVariant="shade"
        data-testid="all-wallets"
        tabIdx=${me(this.tabIdx)}
        .loading=${this.isFetchingRecommendedWallets}
        loadingSpinnerColor=${this.isFetchingRecommendedWallets?"fg-300":"accent-100"}
      ></wui-list-wallet>
    `}onAllWallets(){Ae.sendEvent({type:"track",event:"CLICK_ALL_WALLETS"}),ne.push("AllWallets")}};$h([j()],jl.prototype,"tabIdx",void 0),$h([le()],jl.prototype,"connectors",void 0),$h([le()],jl.prototype,"count",void 0),$h([le()],jl.prototype,"isFetchingRecommendedWallets",void 0),jl=$h([ce("w3m-all-wallets-widget")],jl);var Ny=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let L0=class extends ue{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=oe.state.connectors,this.unsubscribe.push(oe.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.filter(r=>r.type==="ANNOUNCED");return e?.length?U`
      <wui-flex flexDirection="column" gap="xs">
        ${e.filter(_s.showConnector).map(r=>U`
              <wui-list-wallet
                imageSrc=${me(Ut.getConnectorImage(r))}
                name=${r.name??"Unknown"}
                @click=${()=>this.onConnector(r)}
                tagVariant="success"
                tagLabel="installed"
                data-testid=${`wallet-selector-${r.id}`}
                .installed=${!0}
                tabIdx=${me(this.tabIdx)}
              >
              </wui-list-wallet>
            `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){e.id==="walletConnect"?X.isMobile()?ne.push("AllWallets"):ne.push("ConnectingWalletConnect"):ne.push("ConnectingExternal",{connector:e})}};Ny([j()],L0.prototype,"tabIdx",void 0),Ny([le()],L0.prototype,"connectors",void 0),L0=Ny([ce("w3m-connect-announced-widget")],L0);var F0=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let _h=class extends ue{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=oe.state.connectors,this.loading=!1,this.unsubscribe.push(oe.subscribeKey("connectors",e=>this.connectors=e)),X.isTelegram()&&X.isIos()&&(this.loading=!pe.state.wcUri,this.unsubscribe.push(pe.subscribeKey("wcUri",e=>this.loading=!e)))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const{customWallets:e}=G.state;if(!e?.length)return this.style.cssText="display: none",null;const r=this.filterOutDuplicateWallets(e);return U`<wui-flex flexDirection="column" gap="xs">
      ${r.map(n=>U`
          <wui-list-wallet
            imageSrc=${me(Ut.getWalletImage(n))}
            name=${n.name??"Unknown"}
            @click=${()=>this.onConnectWallet(n)}
            data-testid=${`wallet-selector-${n.id}`}
            tabIdx=${me(this.tabIdx)}
            ?loading=${this.loading}
          >
          </wui-list-wallet>
        `)}
    </wui-flex>`}filterOutDuplicateWallets(e){const r=he.getRecentWallets(),n=this.connectors.map(a=>a.info?.rdns).filter(Boolean),i=r.map(a=>a.rdns).filter(Boolean),s=n.concat(i);if(s.includes("io.metamask.mobile")&&X.isMobile()){const a=s.indexOf("io.metamask.mobile");s[a]="io.metamask"}return e.filter(a=>!s.includes(String(a?.rdns)))}onConnectWallet(e){this.loading||ne.push("ConnectingWalletConnect",{wallet:e})}};F0([j()],_h.prototype,"tabIdx",void 0),F0([le()],_h.prototype,"connectors",void 0),F0([le()],_h.prototype,"loading",void 0),_h=F0([ce("w3m-connect-custom-widget")],_h);var Ty=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let M0=class extends ue{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=oe.state.connectors,this.unsubscribe.push(oe.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const n=this.connectors.filter(i=>i.type==="EXTERNAL").filter(_s.showConnector).filter(i=>i.id!==de.CONNECTOR_ID.COINBASE_SDK);return n?.length?U`
      <wui-flex flexDirection="column" gap="xs">
        ${n.map(i=>U`
            <wui-list-wallet
              imageSrc=${me(Ut.getConnectorImage(i))}
              .installed=${!0}
              name=${i.name??"Unknown"}
              data-testid=${`wallet-selector-external-${i.id}`}
              @click=${()=>this.onConnector(i)}
              tabIdx=${me(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){ne.push("ConnectingExternal",{connector:e})}};Ty([j()],M0.prototype,"tabIdx",void 0),Ty([le()],M0.prototype,"connectors",void 0),M0=Ty([ce("w3m-connect-external-widget")],M0);var ky=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let j0=class extends ue{constructor(){super(...arguments),this.tabIdx=void 0,this.wallets=[]}render(){return this.wallets.length?U`
      <wui-flex flexDirection="column" gap="xs">
        ${this.wallets.map(e=>U`
            <wui-list-wallet
              data-testid=${`wallet-selector-featured-${e.id}`}
              imageSrc=${me(Ut.getWalletImage(e))}
              name=${e.name??"Unknown"}
              @click=${()=>this.onConnectWallet(e)}
              tabIdx=${me(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){oe.selectWalletConnector(e)}};ky([j()],j0.prototype,"tabIdx",void 0),ky([j()],j0.prototype,"wallets",void 0),j0=ky([ce("w3m-connect-featured-widget")],j0);var Ry=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let z0=class extends ue{constructor(){super(...arguments),this.tabIdx=void 0,this.connectors=[]}render(){const e=this.connectors;return!e?.length||e.length===1&&e[0]?.name==="Browser Wallet"&&!X.isMobile()?(this.style.cssText="display: none",null):U`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(r=>{const n=r.info?.rdns;return!X.isMobile()&&r.name==="Browser Wallet"?null:!n&&!pe.checkInstalled()?(this.style.cssText="display: none",null):_s.showConnector(r)?U`
            <wui-list-wallet
              imageSrc=${me(Ut.getConnectorImage(r))}
              .installed=${!0}
              name=${r.name??"Unknown"}
              tagVariant="success"
              tagLabel="installed"
              data-testid=${`wallet-selector-${r.id}`}
              @click=${()=>this.onConnector(r)}
              tabIdx=${me(this.tabIdx)}
            >
            </wui-list-wallet>
          `:null})}
      </wui-flex>
    `}onConnector(e){oe.setActiveConnector(e),ne.push("ConnectingExternal",{connector:e})}};Ry([j()],z0.prototype,"tabIdx",void 0),Ry([j()],z0.prototype,"connectors",void 0),z0=Ry([ce("w3m-connect-injected-widget")],z0);var Dy=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let q0=class extends ue{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=oe.state.connectors,this.unsubscribe.push(oe.subscribeKey("connectors",e=>this.connectors=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.connectors.filter(r=>r.type==="MULTI_CHAIN"&&r.name!=="WalletConnect");return e?.length?U`
      <wui-flex flexDirection="column" gap="xs">
        ${e.map(r=>U`
            <wui-list-wallet
              imageSrc=${me(Ut.getConnectorImage(r))}
              .installed=${!0}
              name=${r.name??"Unknown"}
              tagVariant="shade"
              tagLabel="multichain"
              data-testid=${`wallet-selector-${r.id}`}
              @click=${()=>this.onConnector(r)}
              tabIdx=${me(this.tabIdx)}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnector(e){oe.setActiveConnector(e),ne.push("ConnectingMultiChain")}};Dy([j()],q0.prototype,"tabIdx",void 0),Dy([le()],q0.prototype,"connectors",void 0),q0=Dy([ce("w3m-connect-multi-chain-widget")],q0);var H0=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ih=class extends ue{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=oe.state.connectors,this.loading=!1,this.unsubscribe.push(oe.subscribeKey("connectors",e=>this.connectors=e)),X.isTelegram()&&X.isIos()&&(this.loading=!pe.state.wcUri,this.unsubscribe.push(pe.subscribeKey("wcUri",e=>this.loading=!e)))}render(){const r=he.getRecentWallets().filter(n=>!Ca.isExcluded(n)).filter(n=>!this.hasWalletConnector(n)).filter(n=>this.isWalletCompatibleWithCurrentChain(n));return r.length?U`
      <wui-flex flexDirection="column" gap="xs">
        ${r.map(n=>U`
            <wui-list-wallet
              imageSrc=${me(Ut.getWalletImage(n))}
              name=${n.name??"Unknown"}
              @click=${()=>this.onConnectWallet(n)}
              tagLabel="recent"
              tagVariant="shade"
              tabIdx=${me(this.tabIdx)}
              ?loading=${this.loading}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){this.loading||oe.selectWalletConnector(e)}hasWalletConnector(e){return this.connectors.some(r=>r.id===e.id||r.name===e.name)}isWalletCompatibleWithCurrentChain(e){const r=B.state.activeChain;return r&&e.chains?e.chains.some(n=>{const i=n.split(":")[0];return r===i}):!0}};H0([j()],Ih.prototype,"tabIdx",void 0),H0([le()],Ih.prototype,"connectors",void 0),H0([le()],Ih.prototype,"loading",void 0),Ih=H0([ce("w3m-connect-recent-widget")],Ih);var W0=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Sh=class extends ue{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.wallets=[],this.loading=!1,X.isTelegram()&&X.isIos()&&(this.loading=!pe.state.wcUri,this.unsubscribe.push(pe.subscribeKey("wcUri",e=>this.loading=!e)))}render(){const{connectors:e}=oe.state,{customWallets:r,featuredWalletIds:n}=G.state,i=he.getRecentWallets(),s=e.find(d=>d.id==="walletConnect"),a=e.filter(d=>d.type==="INJECTED"||d.type==="ANNOUNCED"||d.type==="MULTI_CHAIN").filter(d=>d.name!=="Browser Wallet");if(!s)return null;if(n||r||!this.wallets.length)return this.style.cssText="display: none",null;const c=a.length+i.length,l=Math.max(0,2-c),u=Ca.filterOutDuplicateWallets(this.wallets).slice(0,l);return u.length?U`
      <wui-flex flexDirection="column" gap="xs">
        ${u.map(d=>U`
            <wui-list-wallet
              imageSrc=${me(Ut.getWalletImage(d))}
              name=${d?.name??"Unknown"}
              @click=${()=>this.onConnectWallet(d)}
              tabIdx=${me(this.tabIdx)}
              ?loading=${this.loading}
            >
            </wui-list-wallet>
          `)}
      </wui-flex>
    `:(this.style.cssText="display: none",null)}onConnectWallet(e){if(this.loading)return;const r=oe.getConnector(e.id,e.rdns);r?ne.push("ConnectingExternal",{connector:r}):ne.push("ConnectingWalletConnect",{wallet:e})}};W0([j()],Sh.prototype,"tabIdx",void 0),W0([j()],Sh.prototype,"wallets",void 0),W0([le()],Sh.prototype,"loading",void 0),Sh=W0([ce("w3m-connect-recommended-widget")],Sh);var V0=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ah=class extends ue{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=oe.state.connectors,this.connectorImages=Kr.state.connectorImages,this.unsubscribe.push(oe.subscribeKey("connectors",e=>this.connectors=e),Kr.subscribeKey("connectorImages",e=>this.connectorImages=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){if(X.isMobile())return this.style.cssText="display: none",null;const e=this.connectors.find(n=>n.id==="walletConnect");if(!e)return this.style.cssText="display: none",null;const r=e.imageUrl||this.connectorImages[e?.imageId??""];return U`
      <wui-list-wallet
        imageSrc=${me(r)}
        name=${e.name??"Unknown"}
        @click=${()=>this.onConnector(e)}
        tagLabel="qr code"
        tagVariant="main"
        tabIdx=${me(this.tabIdx)}
        data-testid="wallet-selector-walletconnect"
      >
      </wui-list-wallet>
    `}onConnector(e){oe.setActiveConnector(e),ne.push("ConnectingWalletConnect")}};V0([j()],Ah.prototype,"tabIdx",void 0),V0([le()],Ah.prototype,"connectors",void 0),V0([le()],Ah.prototype,"connectorImages",void 0),Ah=V0([ce("w3m-connect-walletconnect-widget")],Ah);var kle=we`
  :host {
    margin-top: var(--wui-spacing-3xs);
  }
  wui-separator {
    margin: var(--wui-spacing-m) calc(var(--wui-spacing-m) * -1) var(--wui-spacing-xs)
      calc(var(--wui-spacing-m) * -1);
    width: calc(100% + var(--wui-spacing-s) * 2);
  }
`,Ph=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Pa=class extends ue{constructor(){super(),this.unsubscribe=[],this.tabIdx=void 0,this.connectors=oe.state.connectors,this.recommended=se.state.recommended,this.featured=se.state.featured,this.unsubscribe.push(oe.subscribeKey("connectors",e=>this.connectors=e),se.subscribeKey("recommended",e=>this.recommended=e),se.subscribeKey("featured",e=>this.featured=e))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){return U`
      <wui-flex flexDirection="column" gap="xs"> ${this.connectorListTemplate()} </wui-flex>
    `}connectorListTemplate(){const{custom:e,recent:r,announced:n,injected:i,multiChain:s,recommended:o,featured:a,external:c}=_s.getConnectorsByType(this.connectors,this.recommended,this.featured);return _s.getConnectorTypeOrder({custom:e,recent:r,announced:n,injected:i,multiChain:s,recommended:o,featured:a,external:c}).map(u=>{switch(u){case"injected":return U`
            ${s.length?U`<w3m-connect-multi-chain-widget
                  tabIdx=${me(this.tabIdx)}
                ></w3m-connect-multi-chain-widget>`:null}
            ${n.length?U`<w3m-connect-announced-widget
                  tabIdx=${me(this.tabIdx)}
                ></w3m-connect-announced-widget>`:null}
            ${i.length?U`<w3m-connect-injected-widget
                  .connectors=${i}
                  tabIdx=${me(this.tabIdx)}
                ></w3m-connect-injected-widget>`:null}
          `;case"walletConnect":return U`<w3m-connect-walletconnect-widget
            tabIdx=${me(this.tabIdx)}
          ></w3m-connect-walletconnect-widget>`;case"recent":return U`<w3m-connect-recent-widget
            tabIdx=${me(this.tabIdx)}
          ></w3m-connect-recent-widget>`;case"featured":return U`<w3m-connect-featured-widget
            .wallets=${a}
            tabIdx=${me(this.tabIdx)}
          ></w3m-connect-featured-widget>`;case"custom":return U`<w3m-connect-custom-widget
            tabIdx=${me(this.tabIdx)}
          ></w3m-connect-custom-widget>`;case"external":return U`<w3m-connect-external-widget
            tabIdx=${me(this.tabIdx)}
          ></w3m-connect-external-widget>`;case"recommended":return U`<w3m-connect-recommended-widget
            .wallets=${o}
            tabIdx=${me(this.tabIdx)}
          ></w3m-connect-recommended-widget>`;default:return console.warn(`Unknown connector type: ${u}`),null}})}};Pa.styles=kle,Ph([j()],Pa.prototype,"tabIdx",void 0),Ph([le()],Pa.prototype,"connectors",void 0),Ph([le()],Pa.prototype,"recommended",void 0),Ph([le()],Pa.prototype,"featured",void 0),Pa=Ph([ce("w3m-connector-list")],Pa);var Rle=we`
  :host {
    display: inline-flex;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-3xl);
    padding: var(--wui-spacing-3xs);
    position: relative;
    height: 36px;
    min-height: 36px;
    overflow: hidden;
  }

  :host::before {
    content: '';
    position: absolute;
    pointer-events: none;
    top: 4px;
    left: 4px;
    display: block;
    width: var(--local-tab-width);
    height: 28px;
    border-radius: var(--wui-border-radius-3xl);
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    transform: translateX(calc(var(--local-tab) * var(--local-tab-width)));
    transition: transform var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color, opacity;
  }

  :host([data-type='flex'])::before {
    left: 3px;
    transform: translateX(calc((var(--local-tab) * 34px) + (var(--local-tab) * 4px)));
  }

  :host([data-type='flex']) {
    display: flex;
    padding: 0px 0px 0px 12px;
    gap: 4px;
  }

  :host([data-type='flex']) > button > wui-text {
    position: absolute;
    left: 18px;
    opacity: 0;
  }

  button[data-active='true'] > wui-icon,
  button[data-active='true'] > wui-text {
    color: var(--wui-color-fg-100);
  }

  button[data-active='false'] > wui-icon,
  button[data-active='false'] > wui-text {
    color: var(--wui-color-fg-200);
  }

  button[data-active='true']:disabled,
  button[data-active='false']:disabled {
    background-color: transparent;
    opacity: 0.5;
    cursor: not-allowed;
  }

  button[data-active='true']:disabled > wui-text {
    color: var(--wui-color-fg-200);
  }

  button[data-active='false']:disabled > wui-text {
    color: var(--wui-color-fg-300);
  }

  button > wui-icon,
  button > wui-text {
    pointer-events: none;
    transition: color var(--wui-e ase-out-power-1) var(--wui-duration-md);
    will-change: color;
  }

  button {
    width: var(--local-tab-width);
    transition: background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color;
  }

  :host([data-type='flex']) > button {
    width: 34px;
    position: relative;
    display: flex;
    justify-content: flex-start;
  }

  button:hover:enabled,
  button:active:enabled {
    background-color: transparent !important;
  }

  button:hover:enabled > wui-icon,
  button:active:enabled > wui-icon {
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-lg);
    color: var(--wui-color-fg-125);
  }

  button:hover:enabled > wui-text,
  button:active:enabled > wui-text {
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-lg);
    color: var(--wui-color-fg-125);
  }

  button {
    border-radius: var(--wui-border-radius-3xl);
  }
`,Co=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ri=class extends ue{constructor(){super(...arguments),this.tabs=[],this.onTabChange=()=>null,this.buttons=[],this.disabled=!1,this.localTabWidth="100px",this.activeTab=0,this.isDense=!1}render(){return this.isDense=this.tabs.length>3,this.style.cssText=`
      --local-tab: ${this.activeTab};
      --local-tab-width: ${this.localTabWidth};
    `,this.dataset.type=this.isDense?"flex":"block",this.tabs.map((e,r)=>{const n=r===this.activeTab;return U`
        <button
          ?disabled=${this.disabled}
          @click=${()=>this.onTabClick(r)}
          data-active=${n}
          data-testid="tab-${e.label?.toLowerCase()}"
        >
          ${this.iconTemplate(e)}
          <wui-text variant="small-600" color="inherit"> ${e.label} </wui-text>
        </button>
      `})}firstUpdated(){this.shadowRoot&&this.isDense&&(this.buttons=[...this.shadowRoot.querySelectorAll("button")],setTimeout(()=>{this.animateTabs(0,!0)},0))}iconTemplate(e){return e.icon?U`<wui-icon size="xs" color="inherit" name=${e.icon}></wui-icon>`:null}onTabClick(e){this.buttons&&this.animateTabs(e,!1),this.activeTab=e,this.onTabChange(e)}animateTabs(e,r){const n=this.buttons[this.activeTab],i=this.buttons[e],s=n?.querySelector("wui-text"),o=i?.querySelector("wui-text"),a=i?.getBoundingClientRect(),c=o?.getBoundingClientRect();n&&s&&!r&&e!==this.activeTab&&(s.animate([{opacity:0}],{duration:50,easing:"ease",fill:"forwards"}),n.animate([{width:"34px"}],{duration:500,easing:"ease",fill:"forwards"})),i&&a&&c&&o&&(e!==this.activeTab||r)&&(this.localTabWidth=`${Math.round(a.width+c.width)+6}px`,i.animate([{width:`${a.width+c.width}px`}],{duration:r?0:500,fill:"forwards",easing:"ease"}),o.animate([{opacity:1}],{duration:r?0:125,delay:r?0:200,fill:"forwards",easing:"ease"}))}};Ri.styles=[qe,Er,Rle],Co([j({type:Array})],Ri.prototype,"tabs",void 0),Co([j()],Ri.prototype,"onTabChange",void 0),Co([j({type:Array})],Ri.prototype,"buttons",void 0),Co([j({type:Boolean})],Ri.prototype,"disabled",void 0),Co([j()],Ri.prototype,"localTabWidth",void 0),Co([le()],Ri.prototype,"activeTab",void 0),Co([le()],Ri.prototype,"isDense",void 0),Ri=Co([ce("wui-tabs")],Ri);var K0=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Oh=class extends ue{constructor(){super(),this.platformTabs=[],this.unsubscribe=[],this.platforms=[],this.onSelectPlatfrom=void 0,this.buffering=!1,this.unsubscribe.push(pe.subscribeKey("buffering",e=>this.buffering=e))}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){const e=this.generateTabs();return U`
      <wui-flex justifyContent="center" .padding=${["0","0","l","0"]}>
        <wui-tabs
          ?disabled=${this.buffering}
          .tabs=${e}
          .onTabChange=${this.onTabChange.bind(this)}
        ></wui-tabs>
      </wui-flex>
    `}generateTabs(){const e=this.platforms.map(r=>r==="browser"?{label:"Browser",icon:"extension",platform:"browser"}:r==="mobile"?{label:"Mobile",icon:"mobile",platform:"mobile"}:r==="qrcode"?{label:"Mobile",icon:"mobile",platform:"qrcode"}:r==="web"?{label:"Webapp",icon:"browser",platform:"web"}:r==="desktop"?{label:"Desktop",icon:"desktop",platform:"desktop"}:{label:"Browser",icon:"extension",platform:"unsupported"});return this.platformTabs=e.map(({platform:r})=>r),e}onTabChange(e){const r=this.platformTabs[e];r&&this.onSelectPlatfrom?.(r)}};K0([j({type:Array})],Oh.prototype,"platforms",void 0),K0([j()],Oh.prototype,"onSelectPlatfrom",void 0),K0([le()],Oh.prototype,"buffering",void 0),Oh=K0([ce("w3m-connecting-header")],Oh);var Dle=we`
  :host {
    display: flex;
  }

  :host([data-size='sm']) > svg {
    width: 12px;
    height: 12px;
  }

  :host([data-size='md']) > svg {
    width: 16px;
    height: 16px;
  }

  :host([data-size='lg']) > svg {
    width: 24px;
    height: 24px;
  }

  :host([data-size='xl']) > svg {
    width: 32px;
    height: 32px;
  }

  svg {
    animation: rotate 2s linear infinite;
  }

  circle {
    fill: none;
    stroke: var(--local-color);
    stroke-width: 4px;
    stroke-dasharray: 1, 124;
    stroke-dashoffset: 0;
    stroke-linecap: round;
    animation: dash 1.5s ease-in-out infinite;
  }

  :host([data-size='md']) > svg > circle {
    stroke-width: 6px;
  }

  :host([data-size='sm']) > svg > circle {
    stroke-width: 8px;
  }

  @keyframes rotate {
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes dash {
    0% {
      stroke-dasharray: 1, 124;
      stroke-dashoffset: 0;
    }

    50% {
      stroke-dasharray: 90, 124;
      stroke-dashoffset: -35;
    }

    100% {
      stroke-dashoffset: -125;
    }
  }
`,By=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Nh=class extends ue{constructor(){super(...arguments),this.color="accent-100",this.size="lg"}render(){return this.style.cssText=`--local-color: ${this.color==="inherit"?"inherit":`var(--wui-color-${this.color})`}`,this.dataset.size=this.size,U`<svg viewBox="25 25 50 50">
      <circle r="20" cy="50" cx="50"></circle>
    </svg>`}};Nh.styles=[qe,Dle],By([j()],Nh.prototype,"color",void 0),By([j()],Nh.prototype,"size",void 0),Nh=By([ce("wui-loading-spinner")],Nh);var Ble=we`
  :host {
    width: var(--local-width);
    position: relative;
  }

  button {
    border: none;
    border-radius: var(--local-border-radius);
    width: var(--local-width);
    white-space: nowrap;
  }

  /* -- Sizes --------------------------------------------------- */
  button[data-size='md'] {
    padding: 8.2px var(--wui-spacing-l) 9px var(--wui-spacing-l);
    height: 36px;
  }

  button[data-size='md'][data-icon-left='true'][data-icon-right='false'] {
    padding: 8.2px var(--wui-spacing-l) 9px var(--wui-spacing-s);
  }

  button[data-size='md'][data-icon-right='true'][data-icon-left='false'] {
    padding: 8.2px var(--wui-spacing-s) 9px var(--wui-spacing-l);
  }

  button[data-size='lg'] {
    padding: var(--wui-spacing-m) var(--wui-spacing-2l);
    height: 48px;
  }

  /* -- Variants --------------------------------------------------------- */
  button[data-variant='main'] {
    background-color: var(--wui-color-accent-100);
    color: var(--wui-color-inverse-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='inverse'] {
    background-color: var(--wui-color-inverse-100);
    color: var(--wui-color-inverse-000);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='accent'] {
    background-color: var(--wui-color-accent-glass-010);
    color: var(--wui-color-accent-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  button[data-variant='accent-error'] {
    background: var(--wui-color-error-glass-015);
    color: var(--wui-color-error-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-error-glass-010);
  }

  button[data-variant='accent-success'] {
    background: var(--wui-color-success-glass-015);
    color: var(--wui-color-success-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-success-glass-010);
  }

  button[data-variant='neutral'] {
    background: transparent;
    color: var(--wui-color-fg-100);
    border: none;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  /* -- Focus states --------------------------------------------------- */
  button[data-variant='main']:focus-visible:enabled {
    background-color: var(--wui-color-accent-090);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='inverse']:focus-visible:enabled {
    background-color: var(--wui-color-inverse-100);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-gray-glass-010),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='accent']:focus-visible:enabled {
    background-color: var(--wui-color-accent-glass-010);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0 0 0 4px var(--wui-color-accent-glass-020);
  }
  button[data-variant='accent-error']:focus-visible:enabled {
    background: var(--wui-color-error-glass-015);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-error-100),
      0 0 0 4px var(--wui-color-error-glass-020);
  }
  button[data-variant='accent-success']:focus-visible:enabled {
    background: var(--wui-color-success-glass-015);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-success-100),
      0 0 0 4px var(--wui-color-success-glass-020);
  }
  button[data-variant='neutral']:focus-visible:enabled {
    background: var(--wui-color-gray-glass-005);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-gray-glass-010),
      0 0 0 4px var(--wui-color-gray-glass-002);
  }

  /* -- Hover & Active states ----------------------------------------------------------- */
  @media (hover: hover) and (pointer: fine) {
    button[data-variant='main']:hover:enabled {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:active:enabled {
      background-color: var(--wui-color-accent-080);
    }

    button[data-variant='accent']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }

    button[data-variant='accent']:active:enabled {
      background-color: var(--wui-color-accent-glass-020);
    }

    button[data-variant='accent-error']:hover:enabled {
      background: var(--wui-color-error-glass-020);
      color: var(--wui-color-error-100);
    }

    button[data-variant='accent-error']:active:enabled {
      background: var(--wui-color-error-glass-030);
      color: var(--wui-color-error-100);
    }

    button[data-variant='accent-success']:hover:enabled {
      background: var(--wui-color-success-glass-020);
      color: var(--wui-color-success-100);
    }

    button[data-variant='accent-success']:active:enabled {
      background: var(--wui-color-success-glass-030);
      color: var(--wui-color-success-100);
    }

    button[data-variant='neutral']:hover:enabled {
      background: var(--wui-color-gray-glass-002);
    }

    button[data-variant='neutral']:active:enabled {
      background: var(--wui-color-gray-glass-005);
    }

    button[data-size='lg'][data-icon-left='true'][data-icon-right='false'] {
      padding-left: var(--wui-spacing-m);
    }

    button[data-size='lg'][data-icon-right='true'][data-icon-left='false'] {
      padding-right: var(--wui-spacing-m);
    }
  }

  /* -- Disabled state --------------------------------------------------- */
  button:disabled {
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    color: var(--wui-color-gray-glass-020);
    cursor: not-allowed;
  }

  button > wui-text {
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
    opacity: var(--local-opacity-100);
  }

  ::slotted(*) {
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
    opacity: var(--local-opacity-100);
  }

  wui-loading-spinner {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    opacity: var(--local-opacity-000);
  }
`,Di=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const e_={main:"inverse-100",inverse:"inverse-000",accent:"accent-100","accent-error":"error-100","accent-success":"success-100",neutral:"fg-100",disabled:"gray-glass-020"},Ule={lg:"paragraph-600",md:"small-600"},Lle={lg:"md",md:"md"};let zn=class extends ue{constructor(){super(...arguments),this.size="lg",this.disabled=!1,this.fullWidth=!1,this.loading=!1,this.variant="main",this.hasIconLeft=!1,this.hasIconRight=!1,this.borderRadius="m"}render(){this.style.cssText=`
    --local-width: ${this.fullWidth?"100%":"auto"};
    --local-opacity-100: ${this.loading?0:1};
    --local-opacity-000: ${this.loading?1:0};
    --local-border-radius: var(--wui-border-radius-${this.borderRadius});
    `;const e=this.textVariant??Ule[this.size];return U`
      <button
        data-variant=${this.variant}
        data-icon-left=${this.hasIconLeft}
        data-icon-right=${this.hasIconRight}
        data-size=${this.size}
        ?disabled=${this.disabled}
      >
        ${this.loadingTemplate()}
        <slot name="iconLeft" @slotchange=${()=>this.handleSlotLeftChange()}></slot>
        <wui-text variant=${e} color="inherit">
          <slot></slot>
        </wui-text>
        <slot name="iconRight" @slotchange=${()=>this.handleSlotRightChange()}></slot>
      </button>
    `}handleSlotLeftChange(){this.hasIconLeft=!0}handleSlotRightChange(){this.hasIconRight=!0}loadingTemplate(){if(this.loading){const e=Lle[this.size],r=this.disabled?e_.disabled:e_[this.variant];return U`<wui-loading-spinner color=${r} size=${e}></wui-loading-spinner>`}return U``}};zn.styles=[qe,Er,Ble],Di([j()],zn.prototype,"size",void 0),Di([j({type:Boolean})],zn.prototype,"disabled",void 0),Di([j({type:Boolean})],zn.prototype,"fullWidth",void 0),Di([j({type:Boolean})],zn.prototype,"loading",void 0),Di([j()],zn.prototype,"variant",void 0),Di([j({type:Boolean})],zn.prototype,"hasIconLeft",void 0),Di([j({type:Boolean})],zn.prototype,"hasIconRight",void 0),Di([j()],zn.prototype,"borderRadius",void 0),Di([j()],zn.prototype,"textVariant",void 0),zn=Di([ce("wui-button")],zn);var Fle=we`
  button {
    padding: var(--wui-spacing-4xs) var(--wui-spacing-xxs);
    border-radius: var(--wui-border-radius-3xs);
    background-color: transparent;
    color: var(--wui-color-accent-100);
  }

  button:disabled {
    background-color: transparent;
    color: var(--wui-color-gray-glass-015);
  }

  button:hover {
    background-color: var(--wui-color-gray-glass-005);
  }
`,G0=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let zl=class extends ue{constructor(){super(...arguments),this.tabIdx=void 0,this.disabled=!1,this.color="inherit"}render(){return U`
      <button ?disabled=${this.disabled} tabindex=${me(this.tabIdx)}>
        <slot name="iconLeft"></slot>
        <wui-text variant="small-600" color=${this.color}>
          <slot></slot>
        </wui-text>
        <slot name="iconRight"></slot>
      </button>
    `}};zl.styles=[qe,Er,Fle],G0([j()],zl.prototype,"tabIdx",void 0),G0([j({type:Boolean})],zl.prototype,"disabled",void 0),G0([j()],zl.prototype,"color",void 0),zl=G0([ce("wui-link")],zl);var Mle=we`
  :host {
    display: block;
    width: var(--wui-box-size-md);
    height: var(--wui-box-size-md);
  }

  svg {
    width: var(--wui-box-size-md);
    height: var(--wui-box-size-md);
  }

  rect {
    fill: none;
    stroke: var(--wui-color-accent-100);
    stroke-width: 4px;
    stroke-linecap: round;
    animation: dash 1s linear infinite;
  }

  @keyframes dash {
    to {
      stroke-dashoffset: 0px;
    }
  }
`,t_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Z0=class extends ue{constructor(){super(...arguments),this.radius=36}render(){return this.svgLoaderTemplate()}svgLoaderTemplate(){const e=this.radius>50?50:this.radius,n=36-e,i=116+n,s=245+n,o=360+n*1.75;return U`
      <svg viewBox="0 0 110 110" width="110" height="110">
        <rect
          x="2"
          y="2"
          width="106"
          height="106"
          rx=${e}
          stroke-dasharray="${i} ${s}"
          stroke-dashoffset=${o}
        />
      </svg>
    `}};Z0.styles=[qe,Mle],t_([j({type:Number})],Z0.prototype,"radius",void 0),Z0=t_([ce("wui-loading-thumbnail")],Z0);var jle=we`
  button {
    border: none;
    border-radius: var(--wui-border-radius-3xl);
  }

  button[data-variant='main'] {
    background-color: var(--wui-color-accent-100);
    color: var(--wui-color-inverse-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='accent'] {
    background-color: var(--wui-color-accent-glass-010);
    color: var(--wui-color-accent-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
  }

  button[data-variant='gray'] {
    background-color: transparent;
    color: var(--wui-color-fg-200);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-variant='shade'] {
    background-color: transparent;
    color: var(--wui-color-accent-100);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  button[data-size='sm'] {
    height: 32px;
    padding: 0 var(--wui-spacing-s);
  }

  button[data-size='md'] {
    height: 40px;
    padding: 0 var(--wui-spacing-l);
  }

  button[data-size='sm'] > wui-image {
    width: 16px;
    height: 16px;
  }

  button[data-size='md'] > wui-image {
    width: 24px;
    height: 24px;
  }

  button[data-size='sm'] > wui-icon {
    width: 12px;
    height: 12px;
  }

  button[data-size='md'] > wui-icon {
    width: 14px;
    height: 14px;
  }

  wui-image {
    border-radius: var(--wui-border-radius-3xl);
    overflow: hidden;
  }

  button.disabled > wui-icon,
  button.disabled > wui-image {
    filter: grayscale(1);
  }

  button[data-variant='main'] > wui-image {
    box-shadow: inset 0 0 0 1px var(--wui-color-accent-090);
  }

  button[data-variant='shade'] > wui-image,
  button[data-variant='gray'] > wui-image {
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-010);
  }

  @media (hover: hover) and (pointer: fine) {
    button[data-variant='main']:focus-visible {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:hover:enabled {
      background-color: var(--wui-color-accent-090);
    }

    button[data-variant='main']:active:enabled {
      background-color: var(--wui-color-accent-080);
    }

    button[data-variant='accent']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }

    button[data-variant='accent']:active:enabled {
      background-color: var(--wui-color-accent-glass-020);
    }

    button[data-variant='shade']:focus-visible,
    button[data-variant='gray']:focus-visible,
    button[data-variant='shade']:hover,
    button[data-variant='gray']:hover {
      background-color: var(--wui-color-gray-glass-002);
    }

    button[data-variant='gray']:active,
    button[data-variant='shade']:active {
      background-color: var(--wui-color-gray-glass-005);
    }
  }

  button.disabled {
    color: var(--wui-color-gray-glass-020);
    background-color: var(--wui-color-gray-glass-002);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    pointer-events: none;
  }
`,Oa=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ps=class extends ue{constructor(){super(...arguments),this.variant="accent",this.imageSrc="",this.disabled=!1,this.icon="externalLink",this.size="md",this.text=""}render(){const e=this.size==="sm"?"small-600":"paragraph-600";return U`
      <button
        class=${this.disabled?"disabled":""}
        data-variant=${this.variant}
        data-size=${this.size}
      >
        ${this.imageSrc?U`<wui-image src=${this.imageSrc}></wui-image>`:null}
        <wui-text variant=${e} color="inherit"> ${this.text} </wui-text>
        <wui-icon name=${this.icon} color="inherit" size="inherit"></wui-icon>
      </button>
    `}};Ps.styles=[qe,Er,jle],Oa([j()],Ps.prototype,"variant",void 0),Oa([j()],Ps.prototype,"imageSrc",void 0),Oa([j({type:Boolean})],Ps.prototype,"disabled",void 0),Oa([j()],Ps.prototype,"icon",void 0),Oa([j()],Ps.prototype,"size",void 0),Oa([j()],Ps.prototype,"text",void 0),Ps=Oa([ce("wui-chip-button")],Ps);var zle=we`
  wui-flex {
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
  }
`,Y0=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let ql=class extends ue{constructor(){super(...arguments),this.disabled=!1,this.label="",this.buttonLabel=""}render(){return U`
      <wui-flex
        justifyContent="space-between"
        alignItems="center"
        .padding=${["1xs","2l","1xs","2l"]}
      >
        <wui-text variant="paragraph-500" color="fg-200">${this.label}</wui-text>
        <wui-chip-button size="sm" variant="shade" text=${this.buttonLabel} icon="chevronRight">
        </wui-chip-button>
      </wui-flex>
    `}};ql.styles=[qe,Er,zle],Y0([j({type:Boolean})],ql.prototype,"disabled",void 0),Y0([j()],ql.prototype,"label",void 0),Y0([j()],ql.prototype,"buttonLabel",void 0),ql=Y0([ce("wui-cta-button")],ql);var qle=we`
  :host {
    display: block;
    padding: 0 var(--wui-spacing-xl) var(--wui-spacing-xl);
  }
`,r_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let J0=class extends ue{constructor(){super(...arguments),this.wallet=void 0}render(){if(!this.wallet)return this.style.display="none",null;const{name:e,app_store:r,play_store:n,chrome_store:i,homepage:s}=this.wallet,o=X.isMobile(),a=X.isIos(),c=X.isAndroid(),l=[r,n,s,i].filter(Boolean).length>1,u=or.getTruncateString({string:e,charsStart:12,charsEnd:0,truncate:"end"});return l&&!o?U`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${()=>ne.push("Downloads",{wallet:this.wallet})}
        ></wui-cta-button>
      `:!l&&s?U`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onHomePage.bind(this)}
        ></wui-cta-button>
      `:r&&a?U`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onAppStore.bind(this)}
        ></wui-cta-button>
      `:n&&c?U`
        <wui-cta-button
          label=${`Don't have ${u}?`}
          buttonLabel="Get"
          @click=${this.onPlayStore.bind(this)}
        ></wui-cta-button>
      `:(this.style.display="none",null)}onAppStore(){this.wallet?.app_store&&X.openHref(this.wallet.app_store,"_blank")}onPlayStore(){this.wallet?.play_store&&X.openHref(this.wallet.play_store,"_blank")}onHomePage(){this.wallet?.homepage&&X.openHref(this.wallet.homepage,"_blank")}};J0.styles=[qle],r_([j({type:Object})],J0.prototype,"wallet",void 0),J0=r_([ce("w3m-mobile-download-links")],J0);var Hle=we`
  @keyframes shake {
    0% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(3px);
    }
    50% {
      transform: translateX(-3px);
    }
    75% {
      transform: translateX(3px);
    }
    100% {
      transform: translateX(0);
    }
  }

  wui-flex:first-child:not(:only-child) {
    position: relative;
  }

  wui-loading-thumbnail {
    position: absolute;
  }

  wui-icon-box {
    position: absolute;
    right: calc(var(--wui-spacing-3xs) * -1);
    bottom: calc(var(--wui-spacing-3xs) * -1);
    opacity: 0;
    transform: scale(0.5);
    transition-property: opacity, transform;
    transition-duration: var(--wui-duration-lg);
    transition-timing-function: var(--wui-ease-out-power-2);
    will-change: opacity, transform;
  }

  wui-text[align='center'] {
    width: 100%;
    padding: 0px var(--wui-spacing-l);
  }

  [data-error='true'] wui-icon-box {
    opacity: 1;
    transform: scale(1);
  }

  [data-error='true'] > wui-flex:first-child {
    animation: shake 250ms cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
  }

  [data-retry='false'] wui-link {
    display: none;
  }

  [data-retry='true'] wui-link {
    display: block;
    opacity: 1;
  }
`,ui=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};class Cr extends ue{constructor(){super(),this.wallet=ne.state.data?.wallet,this.connector=ne.state.data?.connector,this.timeout=void 0,this.secondaryBtnIcon="refresh",this.onConnect=void 0,this.onRender=void 0,this.onAutoConnect=void 0,this.isWalletConnect=!0,this.unsubscribe=[],this.imageSrc=Ut.getWalletImage(this.wallet)??Ut.getConnectorImage(this.connector),this.name=this.wallet?.name??this.connector?.name??"Wallet",this.isRetrying=!1,this.uri=pe.state.wcUri,this.error=pe.state.wcError,this.ready=!1,this.showRetry=!1,this.secondaryBtnLabel="Try again",this.secondaryLabel="Accept connection request in the wallet",this.buffering=!1,this.isLoading=!1,this.isMobile=!1,this.onRetry=void 0,this.unsubscribe.push(pe.subscribeKey("wcUri",e=>{this.uri=e,this.isRetrying&&this.onRetry&&(this.isRetrying=!1,this.onConnect?.())}),pe.subscribeKey("wcError",e=>this.error=e),pe.subscribeKey("buffering",e=>this.buffering=e)),(X.isTelegram()||X.isSafari())&&X.isIos()&&pe.state.wcUri&&this.onConnect?.()}firstUpdated(){this.onAutoConnect?.(),this.showRetry=!this.onAutoConnect}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),clearTimeout(this.timeout)}render(){this.onRender?.(),this.onShowRetry();const e=this.error?"Connection can be declined if a previous request is still active":this.secondaryLabel;let r=`Continue in ${this.name}`;return this.buffering&&(r="Connecting..."),this.error&&(r="Connection declined"),U`
      <wui-flex
        data-error=${me(this.error)}
        data-retry=${this.showRetry}
        flexDirection="column"
        alignItems="center"
        .padding=${["3xl","xl","xl","xl"]}
        gap="xl"
      >
        <wui-flex justifyContent="center" alignItems="center">
          <wui-wallet-image size="lg" imageSrc=${me(this.imageSrc)}></wui-wallet-image>

          ${this.error?null:this.loaderTemplate()}

          <wui-icon-box
            backgroundColor="error-100"
            background="opaque"
            iconColor="error-100"
            icon="close"
            size="sm"
            border
            borderColor="wui-color-bg-125"
          ></wui-icon-box>
        </wui-flex>

        <wui-flex flexDirection="column" alignItems="center" gap="xs">
          <wui-text variant="paragraph-500" color=${this.error?"error-100":"fg-100"}>
            ${r}
          </wui-text>
          <wui-text align="center" variant="small-500" color="fg-200">${e}</wui-text>
        </wui-flex>

        ${this.secondaryBtnLabel?U`
              <wui-button
                variant="accent"
                size="md"
                ?disabled=${this.isRetrying||!this.error&&this.buffering||this.isLoading}
                @click=${this.onTryAgain.bind(this)}
                data-testid="w3m-connecting-widget-secondary-button"
              >
                <wui-icon color="inherit" slot="iconLeft" name=${this.secondaryBtnIcon}></wui-icon>
                ${this.secondaryBtnLabel}
              </wui-button>
            `:null}
      </wui-flex>

      ${this.isWalletConnect?U`
            <wui-flex .padding=${["0","xl","xl","xl"]} justifyContent="center">
              <wui-link @click=${this.onCopyUri} color="fg-200" data-testid="wui-link-copy">
                <wui-icon size="xs" color="fg-200" slot="iconLeft" name="copy"></wui-icon>
                Copy link
              </wui-link>
            </wui-flex>
          `:null}

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}onShowRetry(){this.error&&!this.showRetry&&(this.showRetry=!0,this.shadowRoot?.querySelector("wui-button")?.animate([{opacity:0},{opacity:1}],{fill:"forwards",easing:"ease"}))}onTryAgain(){this.buffering||(pe.setWcError(!1),this.onRetry?(this.isRetrying=!0,this.onRetry?.()):this.onConnect?.())}loaderTemplate(){const e=Lt.state.themeVariables["--w3m-border-radius-master"],r=e?parseInt(e.replace("px",""),10):4;return U`<wui-loading-thumbnail radius=${r*9}></wui-loading-thumbnail>`}onCopyUri(){try{this.uri&&(X.copyToClopboard(this.uri),ct.showSuccess("Link copied"))}catch{ct.showError("Failed to copy")}}}Cr.styles=Hle,ui([le()],Cr.prototype,"isRetrying",void 0),ui([le()],Cr.prototype,"uri",void 0),ui([le()],Cr.prototype,"error",void 0),ui([le()],Cr.prototype,"ready",void 0),ui([le()],Cr.prototype,"showRetry",void 0),ui([le()],Cr.prototype,"secondaryBtnLabel",void 0),ui([le()],Cr.prototype,"secondaryLabel",void 0),ui([le()],Cr.prototype,"buffering",void 0),ui([le()],Cr.prototype,"isLoading",void 0),ui([j({type:Boolean})],Cr.prototype,"isMobile",void 0),ui([j()],Cr.prototype,"onRetry",void 0);var Wle=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let n_=class extends Cr{constructor(){if(super(),!this.wallet)throw new Error("w3m-connecting-wc-browser: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onAutoConnect=this.onConnectProxy.bind(this),Ae.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser"}})}async onConnectProxy(){try{this.error=!1;const{connectors:e}=oe.state,r=e.find(n=>n.type==="ANNOUNCED"&&n.info?.rdns===this.wallet?.rdns||n.type==="INJECTED"||n.name===this.wallet?.name);if(r)await pe.connectExternal(r,r.chain);else throw new Error("w3m-connecting-wc-browser: No connector found");De.close(),Ae.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"browser",name:this.wallet?.name||"Unknown"}})}catch(e){Ae.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:e?.message??"Unknown"}}),this.error=!0}}};n_=Wle([ce("w3m-connecting-wc-browser")],n_);var Vle=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let i_=class extends Cr{constructor(){if(super(),!this.wallet)throw new Error("w3m-connecting-wc-desktop: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.onRender=this.onRenderProxy.bind(this),Ae.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"desktop"}})}onRenderProxy(){!this.ready&&this.uri&&(this.ready=!0,this.onConnect?.())}onConnectProxy(){if(this.wallet?.desktop_link&&this.uri)try{this.error=!1;const{desktop_link:e,name:r}=this.wallet,{redirect:n,href:i}=X.formatNativeUrl(e,this.uri);pe.setWcLinking({name:r,href:i}),pe.setRecentWallet(this.wallet),X.openHref(n,"_blank")}catch{this.error=!0}}};i_=Vle([ce("w3m-connecting-wc-desktop")],i_);var Kle=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let s_=class extends Cr{constructor(){if(super(),this.btnLabelTimeout=void 0,this.labelTimeout=void 0,this.onRender=()=>{!this.ready&&this.uri&&(this.ready=!0,this.onConnect?.())},this.onConnect=()=>{if(this.wallet?.mobile_link&&this.uri)try{this.error=!1;const{mobile_link:e,name:r}=this.wallet,{redirect:n,href:i}=X.formatNativeUrl(e,this.uri);pe.setWcLinking({name:r,href:i}),pe.setRecentWallet(this.wallet);const s=X.isIframe()?"_top":"_self";X.openHref(n,s),clearTimeout(this.labelTimeout),this.secondaryLabel=Bt.CONNECT_LABELS.MOBILE}catch(e){Ae.sendEvent({type:"track",event:"CONNECT_PROXY_ERROR",properties:{message:e instanceof Error?e.message:"Error parsing the deeplink",uri:this.uri,mobile_link:this.wallet.mobile_link,name:this.wallet.name}}),this.error=!0}},!this.wallet)throw new Error("w3m-connecting-wc-mobile: No wallet provided");this.initializeStateAndTimers(),document.addEventListener("visibilitychange",this.onBuffering.bind(this)),Ae.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"mobile"}})}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("visibilitychange",this.onBuffering.bind(this)),clearTimeout(this.btnLabelTimeout),clearTimeout(this.labelTimeout)}initializeStateAndTimers(){this.secondaryBtnLabel=void 0,this.secondaryLabel=Bt.CONNECT_LABELS.MOBILE,this.btnLabelTimeout=setTimeout(()=>{this.secondaryBtnLabel="Try again",this.secondaryLabel=Bt.CONNECT_LABELS.MOBILE},Bt.FIVE_SEC_MS),this.labelTimeout=setTimeout(()=>{this.secondaryLabel="Hold tight... it's taking longer than expected"},Bt.THREE_SEC_MS)}onBuffering(){const e=X.isIos();document?.visibilityState==="visible"&&!this.error&&e&&(pe.setBuffering(!0),setTimeout(()=>{pe.setBuffering(!1)},5e3))}onTryAgain(){this.buffering||(clearTimeout(this.btnLabelTimeout),clearTimeout(this.labelTimeout),this.initializeStateAndTimers(),pe.setWcError(!1),this.onConnect())}};s_=Kle([ce("w3m-connecting-wc-mobile")],s_);var Th={},Gle=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},o_={},Sn={};let Uy;const Zle=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Sn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},Sn.getSymbolTotalCodewords=function(e){return Zle[e]},Sn.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},Sn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Uy=e},Sn.isKanjiModeEnabled=function(){return typeof Uy<"u"},Sn.toSJIS=function(e){return Uy(e)};var X0={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(X0);function a_(){this.buffer=[],this.length=0}a_.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Yle=a_;function kh(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}kh.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},kh.prototype.get=function(t,e){return this.data[t*this.size+e]},kh.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},kh.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Jle=kh,c_={};(function(t){const e=Sn.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(c_);var l_={};const Xle=Sn.getSymbolSize,u_=7;l_.getPositions=function(e){const r=Xle(e);return[[0,0],[r-u_,0],[0,r-u_]]};var d_={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,l=null,u=null;for(let d=0;d<s;d++){a=c=0,l=u=null;for(let h=0;h<s;h++){let f=i.get(d,h);f===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=f,a=1),f=i.get(h,d),f===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=f,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,i);const u=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),u<c&&(c=u,a=l)}return a}})(d_);var Q0={};const xo=X0,e1=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t1=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Q0.getBlocksCount=function(e,r){switch(r){case xo.L:return e1[(e-1)*4+0];case xo.M:return e1[(e-1)*4+1];case xo.Q:return e1[(e-1)*4+2];case xo.H:return e1[(e-1)*4+3];default:return}},Q0.getTotalCodewordsCount=function(e,r){switch(r){case xo.L:return t1[(e-1)*4+0];case xo.M:return t1[(e-1)*4+1];case xo.Q:return t1[(e-1)*4+2];case xo.H:return t1[(e-1)*4+3];default:return}};var h_={},r1={};const Rh=new Uint8Array(512),n1=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)Rh[r]=e,n1[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)Rh[r]=Rh[r-255]})(),r1.log=function(e){if(e<1)throw new Error("log("+e+")");return n1[e]},r1.exp=function(e){return Rh[e]},r1.mul=function(e,r){return e===0||r===0?0:Rh[n1[e]+n1[r]]},function(t){const e=r1;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(h_);const p_=h_;function Ly(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Ly.prototype.initialize=function(e){this.degree=e,this.genPoly=p_.generateECPolynomial(this.degree)},Ly.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=p_.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var Qle=Ly,f_={},$o={},Fy={};Fy.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Bi={};const g_="[0-9]+",eue="[A-Z $%*+\\-./:]+";let Dh="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Dh=Dh.replace(/u/g,"\\u");const tue="(?:(?![A-Z0-9 $%*+\\-./:]|"+Dh+`)(?:.|[\r
]))+`;Bi.KANJI=new RegExp(Dh,"g"),Bi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Bi.BYTE=new RegExp(tue,"g"),Bi.NUMERIC=new RegExp(g_,"g"),Bi.ALPHANUMERIC=new RegExp(eue,"g");const rue=new RegExp("^"+Dh+"$"),nue=new RegExp("^"+g_+"$"),iue=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Bi.testKanji=function(e){return rue.test(e)},Bi.testNumeric=function(e){return nue.test(e)},Bi.testAlphanumeric=function(e){return iue.test(e)},function(t){const e=Fy,r=Bi;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}($o),function(t){const e=Sn,r=Q0,n=X0,i=$o,s=Fy,o=7973,a=e.getBCHDigit(o);function c(h,f,g){for(let w=1;w<=40;w++)if(f<=t.getCapacity(w,g,h))return w}function l(h,f){return i.getCharCountIndicator(h,f)+4}function u(h,f){let g=0;return h.forEach(function(w){const p=l(w.mode,f);g+=p+w.getBitsLength()}),g}function d(h,f){for(let g=1;g<=40;g++)if(u(h,g)<=t.getCapacity(g,f,i.MIXED))return g}t.from=function(f,g){return s.isValid(f)?parseInt(f,10):g},t.getCapacity=function(f,g,w){if(!s.isValid(f))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=i.BYTE);const p=e.getSymbolTotalCodewords(f),b=r.getTotalCodewordsCount(f,g),m=(p-b)*8;if(w===i.MIXED)return m;const E=m-l(w,f);switch(w){case i.NUMERIC:return Math.floor(E/10*3);case i.ALPHANUMERIC:return Math.floor(E/11*2);case i.KANJI:return Math.floor(E/13);case i.BYTE:default:return Math.floor(E/8)}},t.getBestVersionForData=function(f,g){let w;const p=n.from(g,n.M);if(Array.isArray(f)){if(f.length>1)return d(f,p);if(f.length===0)return 1;w=f[0]}else w=f;return c(w.mode,w.getLength(),p)},t.getEncodedBits=function(f){if(!s.isValid(f)||f<7)throw new Error("Invalid QR Code version");let g=f<<12;for(;e.getBCHDigit(g)-a>=0;)g^=o<<e.getBCHDigit(g)-a;return f<<12|g}}(f_);var w_={};const My=Sn,m_=1335,sue=21522,b_=My.getBCHDigit(m_);w_.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;My.getBCHDigit(i)-b_>=0;)i^=m_<<My.getBCHDigit(i)-b_;return(n<<10|i)^sue};var y_={};const oue=$o;function Hl(t){this.mode=oue.NUMERIC,this.data=t.toString()}Hl.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Hl.prototype.getLength=function(){return this.data.length},Hl.prototype.getBitsLength=function(){return Hl.getBitsLength(this.data.length)},Hl.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var aue=Hl;const cue=$o,jy=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Wl(t){this.mode=cue.ALPHANUMERIC,this.data=t}Wl.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Wl.prototype.getLength=function(){return this.data.length},Wl.prototype.getBitsLength=function(){return Wl.getBitsLength(this.data.length)},Wl.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=jy.indexOf(this.data[r])*45;n+=jy.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(jy.indexOf(this.data[r]),6)};var lue=Wl,uue=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const due=uue,hue=$o;function Vl(t){this.mode=hue.BYTE,typeof t=="string"&&(t=due(t)),this.data=new Uint8Array(t)}Vl.getBitsLength=function(e){return e*8},Vl.prototype.getLength=function(){return this.data.length},Vl.prototype.getBitsLength=function(){return Vl.getBitsLength(this.data.length)},Vl.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var pue=Vl;const fue=$o,gue=Sn;function Kl(t){this.mode=fue.KANJI,this.data=t}Kl.getBitsLength=function(e){return e*13},Kl.prototype.getLength=function(){return this.data.length},Kl.prototype.getBitsLength=function(){return Kl.getBitsLength(this.data.length)},Kl.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=gue.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var wue=Kl,v_={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,l,u,d,h,f,g,w,p;!a.empty();){c=a.pop(),l=c.value,d=c.cost,h=r[l]||{};for(u in h)h.hasOwnProperty(u)&&(f=h[u],g=d+f,w=o[u],p=typeof o[u]>"u",(p||w>g)&&(o[u]=g,a.push(u,g),s[u]=l))}if(typeof i<"u"&&typeof o[i]>"u"){var b=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(b)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(v_),function(t){const e=$o,r=aue,n=lue,i=pue,s=wue,o=Bi,a=Sn,c=v_.exports;function l(b){return unescape(encodeURIComponent(b)).length}function u(b,m,E){const C=[];let P;for(;(P=b.exec(E))!==null;)C.push({data:P[0],index:P.index,mode:m,length:P[0].length});return C}function d(b){const m=u(o.NUMERIC,e.NUMERIC,b),E=u(o.ALPHANUMERIC,e.ALPHANUMERIC,b);let C,P;return a.isKanjiModeEnabled()?(C=u(o.BYTE,e.BYTE,b),P=u(o.KANJI,e.KANJI,b)):(C=u(o.BYTE_KANJI,e.BYTE,b),P=[]),m.concat(E,C,P).sort(function(I,N){return I.index-N.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function h(b,m){switch(m){case e.NUMERIC:return r.getBitsLength(b);case e.ALPHANUMERIC:return n.getBitsLength(b);case e.KANJI:return s.getBitsLength(b);case e.BYTE:return i.getBitsLength(b)}}function f(b){return b.reduce(function(m,E){const C=m.length-1>=0?m[m.length-1]:null;return C&&C.mode===E.mode?(m[m.length-1].data+=E.data,m):(m.push(E),m)},[])}function g(b){const m=[];for(let E=0;E<b.length;E++){const C=b[E];switch(C.mode){case e.NUMERIC:m.push([C,{data:C.data,mode:e.ALPHANUMERIC,length:C.length},{data:C.data,mode:e.BYTE,length:C.length}]);break;case e.ALPHANUMERIC:m.push([C,{data:C.data,mode:e.BYTE,length:C.length}]);break;case e.KANJI:m.push([C,{data:C.data,mode:e.BYTE,length:l(C.data)}]);break;case e.BYTE:m.push([{data:C.data,mode:e.BYTE,length:l(C.data)}])}}return m}function w(b,m){const E={},C={start:{}};let P=["start"];for(let S=0;S<b.length;S++){const I=b[S],N=[];for(let $=0;$<I.length;$++){const D=I[$],T=""+S+$;N.push(T),E[T]={node:D,lastCount:0},C[T]={};for(let R=0;R<P.length;R++){const M=P[R];E[M]&&E[M].node.mode===D.mode?(C[M][T]=h(E[M].lastCount+D.length,D.mode)-h(E[M].lastCount,D.mode),E[M].lastCount+=D.length):(E[M]&&(E[M].lastCount=D.length),C[M][T]=h(D.length,D.mode)+4+e.getCharCountIndicator(D.mode,m))}}P=N}for(let S=0;S<P.length;S++)C[P[S]].end=0;return{map:C,table:E}}function p(b,m){let E;const C=e.getBestModeForData(b);if(E=e.from(m,C),E!==e.BYTE&&E.bit<C.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(C));switch(E===e.KANJI&&!a.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new r(b);case e.ALPHANUMERIC:return new n(b);case e.KANJI:return new s(b);case e.BYTE:return new i(b)}}t.fromArray=function(m){return m.reduce(function(E,C){return typeof C=="string"?E.push(p(C,null)):C.data&&E.push(p(C.data,C.mode)),E},[])},t.fromString=function(m,E){const C=d(m,a.isKanjiModeEnabled()),P=g(C),S=w(P,E),I=c.find_path(S.map,"start","end"),N=[];for(let $=1;$<I.length-1;$++)N.push(S.table[I[$]].node);return t.fromArray(f(N))},t.rawSplit=function(m){return t.fromArray(d(m,a.isKanjiModeEnabled()))}}(y_);const i1=Sn,zy=X0,mue=Yle,bue=Jle,yue=c_,vue=l_,qy=d_,Hy=Q0,Eue=Qle,s1=f_,Cue=w_,xue=$o,Wy=y_;function $ue(t,e){const r=t.size,n=vue.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function _ue(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function Iue(t,e){const r=yue.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function Sue(t,e){const r=t.size,n=s1.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Vy(t,e,r){const n=t.size,i=Cue.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function Aue(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(i,a-c,l),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function Pue(t,e,r){const n=new mue;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),xue.getCharCountIndicator(c.mode,t)),c.write(n)});const i=i1.getSymbolTotalCodewords(t),s=Hy.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return Oue(n,t,e)}function Oue(t,e,r){const n=i1.getSymbolTotalCodewords(e),i=Hy.getTotalCodewordsCount(e,r),s=n-i,o=Hy.getBlocksCount(e,r),a=n%o,c=o-a,l=Math.floor(n/o),u=Math.floor(s/o),d=u+1,h=l-u,f=new Eue(h);let g=0;const w=new Array(o),p=new Array(o);let b=0;const m=new Uint8Array(t.buffer);for(let I=0;I<o;I++){const N=I<c?u:d;w[I]=m.slice(g,g+N),p[I]=f.encode(w[I]),g+=N,b=Math.max(b,N)}const E=new Uint8Array(n);let C=0,P,S;for(P=0;P<b;P++)for(S=0;S<o;S++)P<w[S].length&&(E[C++]=w[S][P]);for(P=0;P<h;P++)for(S=0;S<o;S++)E[C++]=p[S][P];return E}function Nue(t,e,r,n){let i;if(Array.isArray(t))i=Wy.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=Wy.rawSplit(t);l=s1.getBestVersionForData(u,r)}i=Wy.fromString(t,l||40)}else throw new Error("Invalid data");const s=s1.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=Pue(e,r,i),a=i1.getSymbolSize(e),c=new bue(a);return $ue(c,e),_ue(c),Iue(c,e),Vy(c,r,0),e>=7&&Sue(c,e),Aue(c,o),isNaN(n)&&(n=qy.getBestMask(c,Vy.bind(null,c,r))),qy.applyMask(n,c),Vy(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}o_.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=zy.M,i,s;return typeof r<"u"&&(n=zy.from(r.errorCorrectionLevel,zy.M),i=s1.from(r.version),s=qy.from(r.maskPattern),r.toSJISFunc&&i1.setToSJISFunction(r.toSJISFunc)),Nue(e,i,n,s)};var E_={},Ky={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,d=[s.color.light,s.color.dark];for(let h=0;h<l;h++)for(let f=0;f<l;f++){let g=(h*l+f)*4,w=s.color.light;if(h>=u&&f>=u&&h<l-u&&f<l-u){const p=Math.floor((h-u)/c),b=Math.floor((f-u)/c);w=d[a[p*o+b]?1:0]}n[g++]=w.r,n[g++]=w.g,n[g++]=w.b,n[g]=w.a}}})(Ky),function(t){const e=Ky;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=n()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),d=l.getContext("2d"),h=d.createImageData(u,u);return e.qrToImageData(h.data,s,c),r(d,l,u),d.putImageData(h,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",d=c.rendererOpts||{};return l.toDataURL(u,d.quality)}}(E_);var C_={};const Tue=Ky;function x_(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Gy(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function kue(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?Gy("M",c+r,.5+l+r):Gy("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=Gy("h",o),o=0)):i++}return n}C_.render=function(e,r,n){const i=Tue.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+x_(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+x_(i.color.dark,"stroke")+' d="'+kue(o,s,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof n=="function"&&n(null,h),h};const Rue=Gle,Zy=o_,$_=E_,Due=C_;function Yy(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!Rue())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,l){try{const u=Zy.create(r,n);c(t(u,e,n))}catch(u){l(u)}})}try{const c=Zy.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}Th.create=Zy.create,Th.toCanvas=Yy.bind(null,$_.render),Th.toDataURL=Yy.bind(null,$_.renderToDataURL),Th.toString=Yy.bind(null,function(t,e,r){return Due.render(t,r)});const Bue=.1,__=2.5,Os=7;function Jy(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+Bue}function Uue(t,e){const r=Array.prototype.slice.call(Th.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const Lue={generate({uri:t,size:e,logoSize:r,dotColor:n="#141414"}){const i="transparent",o=[],a=Uue(t,"Q"),c=e/a.length,l=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];l.forEach(({x:w,y:p})=>{const b=(a.length-Os)*c*w,m=(a.length-Os)*c*p,E=.45;for(let C=0;C<l.length;C+=1){const P=c*(Os-C*2);o.push(ee`
            <rect
              fill=${C===2?n:i}
              width=${C===0?P-5:P}
              rx= ${C===0?(P-5)*E:P*E}
              ry= ${C===0?(P-5)*E:P*E}
              stroke=${n}
              stroke-width=${C===0?5:0}
              height=${C===0?P-5:P}
              x= ${C===0?m+c*C+5/2:m+c*C}
              y= ${C===0?b+c*C+5/2:b+c*C}
            />
          `)}});const u=Math.floor((r+25)/c),d=a.length/2-u/2,h=a.length/2+u/2-1,f=[];a.forEach((w,p)=>{w.forEach((b,m)=>{if(a[p][m]&&!(p<Os&&m<Os||p>a.length-(Os+1)&&m<Os||p<Os&&m>a.length-(Os+1))&&!(p>d&&p<h&&m>d&&m<h)){const E=p*c+c/2,C=m*c+c/2;f.push([E,C])}})});const g={};return f.forEach(([w,p])=>{g[w]?g[w]?.push(p):g[w]=[p]}),Object.entries(g).map(([w,p])=>{const b=p.filter(m=>p.every(E=>!Jy(m,E,c)));return[Number(w),b]}).forEach(([w,p])=>{p.forEach(b=>{o.push(ee`<circle cx=${w} cy=${b} fill=${n} r=${c/__} />`)})}),Object.entries(g).filter(([w,p])=>p.length>1).map(([w,p])=>{const b=p.filter(m=>p.some(E=>Jy(m,E,c)));return[Number(w),b]}).map(([w,p])=>{p.sort((m,E)=>m<E?-1:1);const b=[];for(const m of p){const E=b.find(C=>C.some(P=>Jy(m,P,c)));E?E.push(m):b.push([m])}return[w,b.map(m=>[m[0],m[m.length-1]])]}).forEach(([w,p])=>{p.forEach(([b,m])=>{o.push(ee`
              <line
                x1=${w}
                x2=${w}
                y1=${b}
                y2=${m}
                stroke=${n}
                stroke-width=${c/(__/2)}
                stroke-linecap="round"
              />
            `)})}),o}};var Fue=we`
  :host {
    position: relative;
    user-select: none;
    display: block;
    overflow: hidden;
    aspect-ratio: 1 / 1;
    width: var(--local-size);
  }

  :host([data-theme='dark']) {
    border-radius: clamp(0px, var(--wui-border-radius-l), 40px);
    background-color: var(--wui-color-inverse-100);
    padding: var(--wui-spacing-l);
  }

  :host([data-theme='light']) {
    box-shadow: 0 0 0 1px var(--wui-color-bg-125);
    background-color: var(--wui-color-bg-125);
  }

  :host([data-clear='true']) > wui-icon {
    display: none;
  }

  svg:first-child,
  wui-image,
  wui-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateY(-50%) translateX(-50%);
  }

  wui-image {
    width: 25%;
    height: 25%;
    border-radius: var(--wui-border-radius-xs);
  }

  wui-icon {
    width: 100%;
    height: 100%;
    color: var(--local-icon-color) !important;
    transform: translateY(-50%) translateX(-50%) scale(0.25);
  }
`,Ns=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const Mue="#3396ff";let di=class extends ue{constructor(){super(...arguments),this.uri="",this.size=0,this.theme="dark",this.imageSrc=void 0,this.alt=void 0,this.arenaClear=void 0,this.farcaster=void 0}render(){return this.dataset.theme=this.theme,this.dataset.clear=String(this.arenaClear),this.style.cssText=`
     --local-size: ${this.size}px;
     --local-icon-color: ${this.color??Mue}
    `,U`${this.templateVisual()} ${this.templateSvg()}`}templateSvg(){const e=this.theme==="light"?this.size:this.size-32;return ee`
      <svg height=${e} width=${e}>
        ${Lue.generate({uri:this.uri,size:e,logoSize:this.arenaClear?0:e/4,dotColor:this.color})}
      </svg>
    `}templateVisual(){return this.imageSrc?U`<wui-image src=${this.imageSrc} alt=${this.alt??"logo"}></wui-image>`:this.farcaster?U`<wui-icon
        class="farcaster"
        size="inherit"
        color="inherit"
        name="farcaster"
      ></wui-icon>`:U`<wui-icon size="inherit" color="inherit" name="walletConnect"></wui-icon>`}};di.styles=[qe,Fue],Ns([j()],di.prototype,"uri",void 0),Ns([j({type:Number})],di.prototype,"size",void 0),Ns([j()],di.prototype,"theme",void 0),Ns([j()],di.prototype,"imageSrc",void 0),Ns([j()],di.prototype,"alt",void 0),Ns([j()],di.prototype,"color",void 0),Ns([j({type:Boolean})],di.prototype,"arenaClear",void 0),Ns([j({type:Boolean})],di.prototype,"farcaster",void 0),di=Ns([ce("wui-qr-code")],di);var jue=we`
  :host {
    display: block;
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-005);
    background: linear-gradient(
      120deg,
      var(--wui-color-bg-200) 5%,
      var(--wui-color-bg-200) 48%,
      var(--wui-color-bg-300) 55%,
      var(--wui-color-bg-300) 60%,
      var(--wui-color-bg-300) calc(60% + 10px),
      var(--wui-color-bg-200) calc(60% + 12px),
      var(--wui-color-bg-200) 100%
    );
    background-size: 250%;
    animation: shimmer 3s linear infinite reverse;
  }

  :host([variant='light']) {
    background: linear-gradient(
      120deg,
      var(--wui-color-bg-150) 5%,
      var(--wui-color-bg-150) 48%,
      var(--wui-color-bg-200) 55%,
      var(--wui-color-bg-200) 60%,
      var(--wui-color-bg-200) calc(60% + 10px),
      var(--wui-color-bg-150) calc(60% + 12px),
      var(--wui-color-bg-150) 100%
    );
    background-size: 250%;
  }

  @keyframes shimmer {
    from {
      background-position: -250% 0;
    }
    to {
      background-position: 250% 0;
    }
  }
`,Bh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Na=class extends ue{constructor(){super(...arguments),this.width="",this.height="",this.borderRadius="m",this.variant="default"}render(){return this.style.cssText=`
      width: ${this.width};
      height: ${this.height};
      border-radius: ${`clamp(0px,var(--wui-border-radius-${this.borderRadius}), 40px)`};
    `,U`<slot></slot>`}};Na.styles=[jue],Bh([j()],Na.prototype,"width",void 0),Bh([j()],Na.prototype,"height",void 0),Bh([j()],Na.prototype,"borderRadius",void 0),Bh([j()],Na.prototype,"variant",void 0),Na=Bh([ce("wui-shimmer")],Na);var zue=we`
  .reown-logo {
    height: var(--wui-spacing-xxl);
  }
`,que=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Xy=class extends ue{render(){return U`
      <wui-flex
        justifyContent="center"
        alignItems="center"
        gap="xs"
        .padding=${["0","0","l","0"]}
      >
        <wui-text variant="small-500" color="fg-100"> UX by </wui-text>
        <wui-icon name="reown" size="xxxl" class="reown-logo"></wui-icon>
      </wui-flex>
    `}};Xy.styles=[qe,Er,zue],Xy=que([ce("wui-ux-by-reown")],Xy);var Hue=we`
  @keyframes fadein {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  wui-shimmer {
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: clamp(0px, var(--wui-border-radius-l), 40px) !important;
  }

  wui-qr-code {
    opacity: 0;
    animation-duration: 200ms;
    animation-timing-function: ease;
    animation-name: fadein;
    animation-fill-mode: forwards;
  }
`,Wue=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Qy=class extends Cr{constructor(){super(),this.forceUpdate=()=>{this.requestUpdate()},window.addEventListener("resize",this.forceUpdate),Ae.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet?.name??"WalletConnect",platform:"qrcode"}})}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe?.forEach(e=>e()),window.removeEventListener("resize",this.forceUpdate)}render(){return this.onRenderProxy(),U`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["0","xl","xl","xl"]}
        gap="xl"
      >
        <wui-shimmer borderRadius="l" width="100%"> ${this.qrCodeTemplate()} </wui-shimmer>

        <wui-text variant="paragraph-500" color="fg-100">
          Scan this QR Code with your phone
        </wui-text>
        ${this.copyTemplate()}
      </wui-flex>
      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}onRenderProxy(){!this.ready&&this.uri&&(this.timeout=setTimeout(()=>{this.ready=!0},200))}qrCodeTemplate(){if(!this.uri||!this.ready)return null;const e=this.getBoundingClientRect().width-40,r=this.wallet?this.wallet.name:void 0;return pe.setWcLinking(void 0),pe.setRecentWallet(this.wallet),U` <wui-qr-code
      size=${e}
      theme=${Lt.state.themeMode}
      uri=${this.uri}
      imageSrc=${me(Ut.getWalletImage(this.wallet))}
      color=${me(Lt.state.themeVariables["--w3m-qr-color"])}
      alt=${me(r)}
      data-testid="wui-qr-code"
    ></wui-qr-code>`}copyTemplate(){const e=!this.uri||!this.ready;return U`<wui-link
      .disabled=${e}
      @click=${this.onCopyUri}
      color="fg-200"
      data-testid="copy-wc2-uri"
    >
      <wui-icon size="xs" color="fg-200" slot="iconLeft" name="copy"></wui-icon>
      Copy link
    </wui-link>`}};Qy.styles=Hue,Qy=Wue([ce("w3m-connecting-wc-qrcode")],Qy);var Vue=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let I_=class extends ue{constructor(){if(super(),this.wallet=ne.state.data?.wallet,!this.wallet)throw new Error("w3m-connecting-wc-unsupported: No wallet provided");Ae.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"browser"}})}render(){return U`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["3xl","xl","xl","xl"]}
        gap="xl"
      >
        <wui-wallet-image
          size="lg"
          imageSrc=${me(Ut.getWalletImage(this.wallet))}
        ></wui-wallet-image>

        <wui-text variant="paragraph-500" color="fg-100">Not Detected</wui-text>
      </wui-flex>

      <w3m-mobile-download-links .wallet=${this.wallet}></w3m-mobile-download-links>
    `}};I_=Vue([ce("w3m-connecting-wc-unsupported")],I_);var S_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let e2=class extends Cr{constructor(){if(super(),this.isLoading=!0,!this.wallet)throw new Error("w3m-connecting-wc-web: No wallet provided");this.onConnect=this.onConnectProxy.bind(this),this.secondaryBtnLabel="Open",this.secondaryLabel="Open and continue in a new browser tab",this.secondaryBtnIcon="externalLink",this.updateLoadingState(),this.unsubscribe.push(pe.subscribeKey("wcUri",()=>{this.updateLoadingState()})),Ae.sendEvent({type:"track",event:"SELECT_WALLET",properties:{name:this.wallet.name,platform:"web"}})}updateLoadingState(){this.isLoading=!this.uri}onConnectProxy(){if(this.wallet?.webapp_link&&this.uri)try{this.error=!1;const{webapp_link:e,name:r}=this.wallet,{redirect:n,href:i}=X.formatUniversalUrl(e,this.uri);pe.setWcLinking({name:r,href:i}),pe.setRecentWallet(this.wallet),X.openHref(n,"_blank")}catch{this.error=!0}}};S_([le()],e2.prototype,"isLoading",void 0),e2=S_([ce("w3m-connecting-wc-web")],e2);var o1=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Uh=class extends ue{constructor(){super(),this.wallet=ne.state.data?.wallet,this.platform=void 0,this.platforms=[],this.isSiwxEnabled=!!G.state.siwx,this.determinePlatforms(),this.initializeConnection()}render(){return U`
      ${this.headerTemplate()}
      <div>${this.platformTemplate()}</div>
      <wui-ux-by-reown></wui-ux-by-reown>
    `}async initializeConnection(e=!1){if(!(this.platform==="browser"||G.state.manualWCControl&&!e))try{const{wcPairingExpiry:r,status:n}=pe.state;(e||G.state.enableEmbedded||X.isPairingExpired(r)||n==="connecting")&&(await pe.connectWalletConnect(),this.isSiwxEnabled||De.close())}catch(r){Ae.sendEvent({type:"track",event:"CONNECT_ERROR",properties:{message:r?.message??"Unknown"}}),pe.setWcError(!0),ct.showError(r.message??"Connection error"),pe.resetWcConnection(),ne.goBack()}}determinePlatforms(){if(!this.wallet){this.platforms.push("qrcode"),this.platform="qrcode";return}if(this.platform)return;const{mobile_link:e,desktop_link:r,webapp_link:n,injected:i,rdns:s}=this.wallet,o=i?.map(({injected_id:g})=>g).filter(Boolean),a=[...s?[s]:o??[]],c=G.state.isUniversalProvider?!1:a.length,l=e,u=n,d=pe.checkInstalled(a),h=c&&d,f=r&&!X.isMobile();h&&!B.state.noAdapters&&this.platforms.push("browser"),l&&this.platforms.push(X.isMobile()?"mobile":"qrcode"),u&&this.platforms.push("web"),f&&this.platforms.push("desktop"),!h&&c&&!B.state.noAdapters&&this.platforms.push("unsupported"),this.platform=this.platforms[0]}platformTemplate(){switch(this.platform){case"browser":return U`<w3m-connecting-wc-browser></w3m-connecting-wc-browser>`;case"web":return U`<w3m-connecting-wc-web></w3m-connecting-wc-web>`;case"desktop":return U`
          <w3m-connecting-wc-desktop .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-desktop>
        `;case"mobile":return U`
          <w3m-connecting-wc-mobile isMobile .onRetry=${()=>this.initializeConnection(!0)}>
          </w3m-connecting-wc-mobile>
        `;case"qrcode":return U`<w3m-connecting-wc-qrcode></w3m-connecting-wc-qrcode>`;default:return U`<w3m-connecting-wc-unsupported></w3m-connecting-wc-unsupported>`}}headerTemplate(){return this.platforms.length>1?U`
      <w3m-connecting-header
        .platforms=${this.platforms}
        .onSelectPlatfrom=${this.onSelectPlatform.bind(this)}
      >
      </w3m-connecting-header>
    `:null}async onSelectPlatform(e){const r=this.shadowRoot?.querySelector("div");r&&(await r.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.platform=e,r.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}};o1([le()],Uh.prototype,"platform",void 0),o1([le()],Uh.prototype,"platforms",void 0),o1([le()],Uh.prototype,"isSiwxEnabled",void 0),Uh=o1([ce("w3m-connecting-wc-view")],Uh);var A_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let a1=class extends ue{constructor(){super(...arguments),this.isMobile=X.isMobile()}render(){if(this.isMobile){const{featured:e,recommended:r}=se.state,{customWallets:n}=G.state,i=he.getRecentWallets(),s=e.length||r.length||n?.length||i.length;return U`<wui-flex
        flexDirection="column"
        gap="xs"
        .margin=${["3xs","s","s","s"]}
      >
        ${s?U`<w3m-connector-list></w3m-connector-list>`:null}
        <w3m-all-wallets-widget></w3m-all-wallets-widget>
      </wui-flex>`}return U`<wui-flex flexDirection="column" .padding=${["0","0","l","0"]}>
      <w3m-connecting-wc-view></w3m-connecting-wc-view>
      <wui-flex flexDirection="column" .padding=${["0","m","0","m"]}>
        <w3m-all-wallets-widget></w3m-all-wallets-widget> </wui-flex
    ></wui-flex>`}};A_([le()],a1.prototype,"isMobile",void 0),a1=A_([ce("w3m-connecting-wc-basic-view")],a1);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t2=()=>new Kue;class Kue{}const r2=new WeakMap,n2=Sy(class extends G${render(t){return At}update(t,[e]){const r=e!==this.G;return r&&this.G!==void 0&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),At}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let r=r2.get(e);r===void 0&&(r=new WeakMap,r2.set(e,r)),r.get(this.G)!==void 0&&this.G.call(this.ht,void 0),r.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?r2.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var Gue=we`
  :host {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  label {
    position: relative;
    display: inline-block;
    width: 32px;
    height: 22px;
  }

  input {
    width: 0;
    height: 0;
    opacity: 0;
  }

  span {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--wui-color-blue-100);
    border-width: 1px;
    border-style: solid;
    border-color: var(--wui-color-gray-glass-002);
    border-radius: 999px;
    transition:
      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md);
    will-change: background-color, border-color;
  }

  span:before {
    position: absolute;
    content: '';
    height: 16px;
    width: 16px;
    left: 3px;
    top: 2px;
    background-color: var(--wui-color-inverse-100);
    transition: transform var(--wui-ease-inout-power-1) var(--wui-duration-lg);
    will-change: transform;
    border-radius: 50%;
  }

  input:checked + span {
    border-color: var(--wui-color-gray-glass-005);
    background-color: var(--wui-color-blue-100);
  }

  input:not(:checked) + span {
    background-color: var(--wui-color-gray-glass-010);
  }

  input:checked + span:before {
    transform: translateX(calc(100% - 7px));
  }
`,P_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let c1=class extends ue{constructor(){super(...arguments),this.inputElementRef=t2(),this.checked=void 0}render(){return U`
      <label>
        <input
          ${n2(this.inputElementRef)}
          type="checkbox"
          ?checked=${me(this.checked)}
          @change=${this.dispatchChangeEvent.bind(this)}
        />
        <span></span>
      </label>
    `}dispatchChangeEvent(){this.dispatchEvent(new CustomEvent("switchChange",{detail:this.inputElementRef.value?.checked,bubbles:!0,composed:!0}))}};c1.styles=[qe,Er,ah,Gue],P_([j({type:Boolean})],c1.prototype,"checked",void 0),c1=P_([ce("wui-switch")],c1);var Zue=we`
  :host {
    height: 100%;
  }

  button {
    display: flex;
    align-items: center;
    justify-content: center;
    column-gap: var(--wui-spacing-1xs);
    padding: var(--wui-spacing-xs) var(--wui-spacing-s);
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    transition: background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: background-color;
    cursor: pointer;
  }

  wui-switch {
    pointer-events: none;
  }
`,O_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let l1=class extends ue{constructor(){super(...arguments),this.checked=void 0}render(){return U`
      <button>
        <wui-icon size="xl" name="walletConnectBrown"></wui-icon>
        <wui-switch ?checked=${me(this.checked)}></wui-switch>
      </button>
    `}};l1.styles=[qe,Er,Zue],O_([j({type:Boolean})],l1.prototype,"checked",void 0),l1=O_([ce("wui-certified-switch")],l1);var Yue=we`
  button {
    background-color: var(--wui-color-fg-300);
    border-radius: var(--wui-border-radius-4xs);
    width: 16px;
    height: 16px;
  }

  button:disabled {
    background-color: var(--wui-color-bg-300);
  }

  wui-icon {
    color: var(--wui-color-bg-200) !important;
  }

  button:focus-visible {
    background-color: var(--wui-color-fg-250);
    border: 1px solid var(--wui-color-accent-100);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-fg-250);
    }

    button:active:enabled {
      background-color: var(--wui-color-fg-225);
    }
  }
`,N_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let u1=class extends ue{constructor(){super(...arguments),this.icon="copy"}render(){return U`
      <button>
        <wui-icon color="inherit" size="xxs" name=${this.icon}></wui-icon>
      </button>
    `}};u1.styles=[qe,Er,Yue],N_([j()],u1.prototype,"icon",void 0),u1=N_([ce("wui-input-element")],u1);var Jue=we`
  :host {
    position: relative;
    width: 100%;
    display: inline-block;
    color: var(--wui-color-fg-275);
  }

  input {
    width: 100%;
    border-radius: var(--wui-border-radius-xs);
    box-shadow: inset 0 0 0 1px var(--wui-color-gray-glass-002);
    background: var(--wui-color-gray-glass-002);
    font-size: var(--wui-font-size-paragraph);
    letter-spacing: var(--wui-letter-spacing-paragraph);
    color: var(--wui-color-fg-100);
    transition:
      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      box-shadow var(--wui-ease-inout-power-1) var(--wui-duration-md);
    will-change: background-color, border-color, box-shadow;
    caret-color: var(--wui-color-accent-100);
  }

  input:disabled {
    cursor: not-allowed;
    border: 1px solid var(--wui-color-gray-glass-010);
  }

  input:disabled::placeholder,
  input:disabled + wui-icon {
    color: var(--wui-color-fg-300);
  }

  input::placeholder {
    color: var(--wui-color-fg-275);
  }

  input:focus:enabled {
    background-color: var(--wui-color-gray-glass-005);
    -webkit-box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
    -moz-box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
    box-shadow:
      inset 0 0 0 1px var(--wui-color-accent-100),
      0px 0px 0px 4px var(--wui-box-shadow-blue);
  }

  input:hover:enabled {
    background-color: var(--wui-color-gray-glass-005);
  }

  wui-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
  }

  .wui-size-sm {
    padding: 9px var(--wui-spacing-m) 10px var(--wui-spacing-s);
  }

  wui-icon + .wui-size-sm {
    padding: 9px var(--wui-spacing-m) 10px 36px;
  }

  wui-icon[data-input='sm'] {
    left: var(--wui-spacing-s);
  }

  .wui-size-md {
    padding: 15px var(--wui-spacing-m) var(--wui-spacing-l) var(--wui-spacing-m);
  }

  wui-icon + .wui-size-md,
  wui-loading-spinner + .wui-size-md {
    padding: 10.5px var(--wui-spacing-3xl) 10.5px var(--wui-spacing-3xl);
  }

  wui-icon[data-input='md'] {
    left: var(--wui-spacing-l);
  }

  .wui-size-lg {
    padding: var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-s) var(--wui-spacing-l);
    letter-spacing: var(--wui-letter-spacing-medium-title);
    font-size: var(--wui-font-size-medium-title);
    font-weight: var(--wui-font-weight-light);
    line-height: 130%;
    color: var(--wui-color-fg-100);
    height: 64px;
  }

  .wui-padding-right-xs {
    padding-right: var(--wui-spacing-xs);
  }

  .wui-padding-right-s {
    padding-right: var(--wui-spacing-s);
  }

  .wui-padding-right-m {
    padding-right: var(--wui-spacing-m);
  }

  .wui-padding-right-l {
    padding-right: var(--wui-spacing-l);
  }

  .wui-padding-right-xl {
    padding-right: var(--wui-spacing-xl);
  }

  .wui-padding-right-2xl {
    padding-right: var(--wui-spacing-2xl);
  }

  .wui-padding-right-3xl {
    padding-right: var(--wui-spacing-3xl);
  }

  .wui-padding-right-4xl {
    padding-right: var(--wui-spacing-4xl);
  }

  .wui-padding-right-5xl {
    padding-right: var(--wui-spacing-5xl);
  }

  wui-icon + .wui-size-lg,
  wui-loading-spinner + .wui-size-lg {
    padding-left: 50px;
  }

  wui-icon[data-input='lg'] {
    left: var(--wui-spacing-l);
  }

  .wui-size-mdl {
    padding: 17.25px var(--wui-spacing-m) 17.25px var(--wui-spacing-m);
  }
  wui-icon + .wui-size-mdl,
  wui-loading-spinner + .wui-size-mdl {
    padding: 17.25px var(--wui-spacing-3xl) 17.25px 40px;
  }
  wui-icon[data-input='mdl'] {
    left: var(--wui-spacing-m);
  }

  input:placeholder-shown ~ ::slotted(wui-input-element),
  input:placeholder-shown ~ ::slotted(wui-icon) {
    opacity: 0;
    pointer-events: none;
  }

  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }

  ::slotted(wui-input-element),
  ::slotted(wui-icon) {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }

  ::slotted(wui-input-element) {
    right: var(--wui-spacing-m);
  }

  ::slotted(wui-icon) {
    right: 0px;
  }
`,Ui=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let qn=class extends ue{constructor(){super(...arguments),this.inputElementRef=t2(),this.size="md",this.disabled=!1,this.placeholder="",this.type="text",this.value=""}render(){const e=`wui-padding-right-${this.inputRightPadding}`,n={[`wui-size-${this.size}`]:!0,[e]:!!this.inputRightPadding};return U`${this.templateIcon()}
      <input
        data-testid="wui-input-text"
        ${n2(this.inputElementRef)}
        class=${X$(n)}
        type=${this.type}
        enterkeyhint=${me(this.enterKeyHint)}
        ?disabled=${this.disabled}
        placeholder=${this.placeholder}
        @input=${this.dispatchInputChangeEvent.bind(this)}
        .value=${this.value||""}
        tabindex=${me(this.tabIdx)}
      />
      <slot></slot>`}templateIcon(){return this.icon?U`<wui-icon
        data-input=${this.size}
        size=${this.size}
        color="inherit"
        name=${this.icon}
      ></wui-icon>`:null}dispatchInputChangeEvent(){this.dispatchEvent(new CustomEvent("inputChange",{detail:this.inputElementRef.value?.value,bubbles:!0,composed:!0}))}};qn.styles=[qe,Er,Jue],Ui([j()],qn.prototype,"size",void 0),Ui([j()],qn.prototype,"icon",void 0),Ui([j({type:Boolean})],qn.prototype,"disabled",void 0),Ui([j()],qn.prototype,"placeholder",void 0),Ui([j()],qn.prototype,"type",void 0),Ui([j()],qn.prototype,"keyHint",void 0),Ui([j()],qn.prototype,"value",void 0),Ui([j()],qn.prototype,"inputRightPadding",void 0),Ui([j()],qn.prototype,"tabIdx",void 0),qn=Ui([ce("wui-input-text")],qn);var Xue=we`
  :host {
    position: relative;
    display: inline-block;
    width: 100%;
  }
`,Que=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let i2=class extends ue{constructor(){super(...arguments),this.inputComponentRef=t2()}render(){return U`
      <wui-input-text
        ${n2(this.inputComponentRef)}
        placeholder="Search wallet"
        icon="search"
        type="search"
        enterKeyHint="search"
        size="sm"
      >
        <wui-input-element @click=${this.clearValue} icon="close"></wui-input-element>
      </wui-input-text>
    `}clearValue(){const r=this.inputComponentRef.value?.inputElementRef.value;r&&(r.value="",r.focus(),r.dispatchEvent(new Event("input")))}};i2.styles=[qe,Xue],i2=Que([ce("wui-search-bar")],i2);const ede=ee`<svg  viewBox="0 0 48 54" fill="none">
  <path
    d="M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z"
  />
</svg>`;var tde=we`
  :host {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 104px;
    row-gap: var(--wui-spacing-xs);
    padding: var(--wui-spacing-xs) 10px;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: clamp(0px, var(--wui-border-radius-xs), 20px);
    position: relative;
  }

  wui-shimmer[data-type='network'] {
    border: none;
    -webkit-clip-path: var(--wui-path-network);
    clip-path: var(--wui-path-network);
  }

  svg {
    position: absolute;
    width: 48px;
    height: 54px;
    z-index: 1;
  }

  svg > path {
    stroke: var(--wui-color-gray-glass-010);
    stroke-width: 1px;
  }

  @media (max-width: 350px) {
    :host {
      width: 100%;
    }
  }
`,T_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let d1=class extends ue{constructor(){super(...arguments),this.type="wallet"}render(){return U`
      ${this.shimmerTemplate()}
      <wui-shimmer width="56px" height="20px" borderRadius="xs"></wui-shimmer>
    `}shimmerTemplate(){return this.type==="network"?U` <wui-shimmer
          data-type=${this.type}
          width="48px"
          height="54px"
          borderRadius="xs"
        ></wui-shimmer>
        ${ede}`:U`<wui-shimmer width="56px" height="56px" borderRadius="xs"></wui-shimmer>`}};d1.styles=[qe,Er,tde],T_([j()],d1.prototype,"type",void 0),d1=T_([ce("wui-card-select-loader")],d1);var rde=we`
  :host {
    display: grid;
    width: inherit;
    height: inherit;
  }
`,Hn=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let rn=class extends ue{render(){return this.style.cssText=`
      grid-template-rows: ${this.gridTemplateRows};
      grid-template-columns: ${this.gridTemplateColumns};
      justify-items: ${this.justifyItems};
      align-items: ${this.alignItems};
      justify-content: ${this.justifyContent};
      align-content: ${this.alignContent};
      column-gap: ${this.columnGap&&`var(--wui-spacing-${this.columnGap})`};
      row-gap: ${this.rowGap&&`var(--wui-spacing-${this.rowGap})`};
      gap: ${this.gap&&`var(--wui-spacing-${this.gap})`};
      padding-top: ${this.padding&&or.getSpacingStyles(this.padding,0)};
      padding-right: ${this.padding&&or.getSpacingStyles(this.padding,1)};
      padding-bottom: ${this.padding&&or.getSpacingStyles(this.padding,2)};
      padding-left: ${this.padding&&or.getSpacingStyles(this.padding,3)};
      margin-top: ${this.margin&&or.getSpacingStyles(this.margin,0)};
      margin-right: ${this.margin&&or.getSpacingStyles(this.margin,1)};
      margin-bottom: ${this.margin&&or.getSpacingStyles(this.margin,2)};
      margin-left: ${this.margin&&or.getSpacingStyles(this.margin,3)};
    `,U`<slot></slot>`}};rn.styles=[qe,rde],Hn([j()],rn.prototype,"gridTemplateRows",void 0),Hn([j()],rn.prototype,"gridTemplateColumns",void 0),Hn([j()],rn.prototype,"justifyItems",void 0),Hn([j()],rn.prototype,"alignItems",void 0),Hn([j()],rn.prototype,"justifyContent",void 0),Hn([j()],rn.prototype,"alignContent",void 0),Hn([j()],rn.prototype,"columnGap",void 0),Hn([j()],rn.prototype,"rowGap",void 0),Hn([j()],rn.prototype,"gap",void 0),Hn([j()],rn.prototype,"padding",void 0),Hn([j()],rn.prototype,"margin",void 0),rn=Hn([ce("wui-grid")],rn);var nde=we`
  button {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    width: 104px;
    row-gap: var(--wui-spacing-xs);
    padding: var(--wui-spacing-s) var(--wui-spacing-0);
    background-color: var(--wui-color-gray-glass-002);
    border-radius: clamp(0px, var(--wui-border-radius-xs), 20px);
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border-radius;
    outline: none;
    border: none;
  }

  button > wui-flex > wui-text {
    color: var(--wui-color-fg-100);
    max-width: 86px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    justify-content: center;
  }

  button > wui-flex > wui-text.certified {
    max-width: 66px;
  }

  button:hover:enabled {
    background-color: var(--wui-color-gray-glass-005);
  }

  button:disabled > wui-flex > wui-text {
    color: var(--wui-color-gray-glass-015);
  }

  [data-selected='true'] {
    background-color: var(--wui-color-accent-glass-020);
  }

  @media (hover: hover) and (pointer: fine) {
    [data-selected='true']:hover:enabled {
      background-color: var(--wui-color-accent-glass-015);
    }
  }

  [data-selected='true']:active:enabled {
    background-color: var(--wui-color-accent-glass-010);
  }

  @media (max-width: 350px) {
    button {
      width: 100%;
    }
  }
`,Lh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ta=class extends ue{constructor(){super(),this.observer=new IntersectionObserver(()=>{}),this.visible=!1,this.imageSrc=void 0,this.imageLoading=!1,this.wallet=void 0,this.observer=new IntersectionObserver(e=>{e.forEach(r=>{r.isIntersecting?(this.visible=!0,this.fetchImageSrc()):this.visible=!1})},{threshold:.01})}firstUpdated(){this.observer.observe(this)}disconnectedCallback(){this.observer.disconnect()}render(){const e=this.wallet?.badge_type==="certified";return U`
      <button>
        ${this.imageTemplate()}
        <wui-flex flexDirection="row" alignItems="center" justifyContent="center" gap="3xs">
          <wui-text
            variant="tiny-500"
            color="inherit"
            class=${me(e?"certified":void 0)}
            >${this.wallet?.name}</wui-text
          >
          ${e?U`<wui-icon size="sm" name="walletConnectBrown"></wui-icon>`:null}
        </wui-flex>
      </button>
    `}imageTemplate(){return!this.visible&&!this.imageSrc||this.imageLoading?this.shimmerTemplate():U`
      <wui-wallet-image
        size="md"
        imageSrc=${me(this.imageSrc)}
        name=${this.wallet?.name}
        .installed=${this.wallet?.installed}
        badgeSize="sm"
      >
      </wui-wallet-image>
    `}shimmerTemplate(){return U`<wui-shimmer width="56px" height="56px" borderRadius="xs"></wui-shimmer>`}async fetchImageSrc(){this.wallet&&(this.imageSrc=Ut.getWalletImage(this.wallet),!this.imageSrc&&(this.imageLoading=!0,this.imageSrc=await Ut.fetchWalletImage(this.wallet.image_id),this.imageLoading=!1))}};Ta.styles=nde,Lh([le()],Ta.prototype,"visible",void 0),Lh([le()],Ta.prototype,"imageSrc",void 0),Lh([le()],Ta.prototype,"imageLoading",void 0),Lh([j()],Ta.prototype,"wallet",void 0),Ta=Lh([ce("w3m-all-wallets-list-item")],Ta);var ide=we`
  wui-grid {
    max-height: clamp(360px, 400px, 80vh);
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  wui-loading-spinner {
    padding-top: var(--wui-spacing-l);
    padding-bottom: var(--wui-spacing-l);
    justify-content: center;
    grid-column: 1 / span 4;
  }
`,Fh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const k_="local-paginator";let ka=class extends ue{constructor(){super(),this.unsubscribe=[],this.paginationObserver=void 0,this.loading=!se.state.wallets.length,this.wallets=se.state.wallets,this.recommended=se.state.recommended,this.featured=se.state.featured,this.unsubscribe.push(se.subscribeKey("wallets",e=>this.wallets=e),se.subscribeKey("recommended",e=>this.recommended=e),se.subscribeKey("featured",e=>this.featured=e))}firstUpdated(){this.initialFetch(),this.createPaginationObserver()}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.paginationObserver?.disconnect()}render(){return U`
      <wui-grid
        data-scroll=${!this.loading}
        .padding=${["0","s","s","s"]}
        columnGap="xxs"
        rowGap="l"
        justifyContent="space-between"
      >
        ${this.loading?this.shimmerTemplate(16):this.walletsTemplate()}
        ${this.paginationLoaderTemplate()}
      </wui-grid>
    `}async initialFetch(){this.loading=!0;const e=this.shadowRoot?.querySelector("wui-grid");e&&(await se.fetchWalletsByPage({page:1}),await e.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.loading=!1,e.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}shimmerTemplate(e,r){return[...Array(e)].map(()=>U`
        <wui-card-select-loader type="wallet" id=${me(r)}></wui-card-select-loader>
      `)}walletsTemplate(){const e=X.uniqueBy([...this.featured,...this.recommended,...this.wallets],"id");return Ca.markWalletsAsInstalled(e).map(n=>U`
        <w3m-all-wallets-list-item
          @click=${()=>this.onConnectWallet(n)}
          .wallet=${n}
        ></w3m-all-wallets-list-item>
      `)}paginationLoaderTemplate(){const{wallets:e,recommended:r,featured:n,count:i}=se.state,s=window.innerWidth<352?3:4,o=e.length+r.length;let c=Math.ceil(o/s)*s-o+s;return c-=e.length?n.length%s:0,i===0&&n.length>0?null:i===0||[...n,...e,...r].length<i?this.shimmerTemplate(c,k_):null}createPaginationObserver(){const e=this.shadowRoot?.querySelector(`#${k_}`);e&&(this.paginationObserver=new IntersectionObserver(([r])=>{if(r?.isIntersecting&&!this.loading){const{page:n,count:i,wallets:s}=se.state;s.length<i&&se.fetchWalletsByPage({page:n+1})}}),this.paginationObserver.observe(e))}onConnectWallet(e){oe.selectWalletConnector(e)}};ka.styles=ide,Fh([le()],ka.prototype,"loading",void 0),Fh([le()],ka.prototype,"wallets",void 0),Fh([le()],ka.prototype,"recommended",void 0),Fh([le()],ka.prototype,"featured",void 0),ka=Fh([ce("w3m-all-wallets-list")],ka);var sde=we`
  wui-grid,
  wui-loading-spinner,
  wui-flex {
    height: 360px;
  }

  wui-grid {
    overflow: scroll;
    scrollbar-width: none;
    grid-auto-rows: min-content;
    grid-template-columns: repeat(auto-fill, 104px);
  }

  wui-grid[data-scroll='false'] {
    overflow: hidden;
  }

  wui-grid::-webkit-scrollbar {
    display: none;
  }

  wui-loading-spinner {
    justify-content: center;
    align-items: center;
  }

  @media (max-width: 350px) {
    wui-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
`,h1=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Gl=class extends ue{constructor(){super(...arguments),this.prevQuery="",this.prevBadge=void 0,this.loading=!0,this.query=""}render(){return this.onSearch(),this.loading?U`<wui-loading-spinner color="accent-100"></wui-loading-spinner>`:this.walletsTemplate()}async onSearch(){(this.query.trim()!==this.prevQuery.trim()||this.badge!==this.prevBadge)&&(this.prevQuery=this.query,this.prevBadge=this.badge,this.loading=!0,await se.searchWallet({search:this.query,badge:this.badge}),this.loading=!1)}walletsTemplate(){const{search:e}=se.state,r=Ca.markWalletsAsInstalled(e);return e.length?U`
      <wui-grid
        data-testid="wallet-list"
        .padding=${["0","s","s","s"]}
        rowGap="l"
        columnGap="xs"
        justifyContent="space-between"
      >
        ${r.map(n=>U`
            <w3m-all-wallets-list-item
              @click=${()=>this.onConnectWallet(n)}
              .wallet=${n}
              data-testid="wallet-search-item-${n.id}"
            ></w3m-all-wallets-list-item>
          `)}
      </wui-grid>
    `:U`
        <wui-flex
          data-testid="no-wallet-found"
          justifyContent="center"
          alignItems="center"
          gap="s"
          flexDirection="column"
        >
          <wui-icon-box
            size="lg"
            iconColor="fg-200"
            backgroundColor="fg-300"
            icon="wallet"
            background="transparent"
          ></wui-icon-box>
          <wui-text data-testid="no-wallet-found-text" color="fg-200" variant="paragraph-500">
            No Wallet found
          </wui-text>
        </wui-flex>
      `}onConnectWallet(e){oe.selectWalletConnector(e)}};Gl.styles=sde,h1([le()],Gl.prototype,"loading",void 0),h1([j()],Gl.prototype,"query",void 0),h1([j()],Gl.prototype,"badge",void 0),Gl=h1([ce("w3m-all-wallets-search")],Gl);var s2=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Mh=class extends ue{constructor(){super(...arguments),this.search="",this.onDebouncedSearch=X.debounce(e=>{this.search=e})}render(){const e=this.search.length>=2;return U`
      <wui-flex .padding=${["0","s","s","s"]} gap="xs">
        <wui-search-bar @inputChange=${this.onInputChange.bind(this)}></wui-search-bar>
        <wui-certified-switch
          ?checked=${this.badge}
          @click=${this.onClick.bind(this)}
          data-testid="wui-certified-switch"
        ></wui-certified-switch>
        ${this.qrButtonTemplate()}
      </wui-flex>
      ${e||this.badge?U`<w3m-all-wallets-search
            query=${this.search}
            badge=${me(this.badge)}
          ></w3m-all-wallets-search>`:U`<w3m-all-wallets-list badge=${me(this.badge)}></w3m-all-wallets-list>`}
    `}onInputChange(e){this.onDebouncedSearch(e.detail)}onClick(){if(this.badge==="certified"){this.badge=void 0;return}this.badge="certified",ct.showSvg("Only WalletConnect certified",{icon:"walletConnectBrown",iconColor:"accent-100"})}qrButtonTemplate(){return X.isMobile()?U`
        <wui-icon-box
          size="lg"
          iconSize="xl"
          iconColor="accent-100"
          backgroundColor="accent-100"
          icon="qrCode"
          background="transparent"
          border
          borderColor="wui-accent-glass-010"
          @click=${this.onWalletConnectQr.bind(this)}
        ></wui-icon-box>
      `:null}onWalletConnectQr(){ne.push("ConnectingWalletConnect")}};s2([le()],Mh.prototype,"search",void 0),s2([le()],Mh.prototype,"badge",void 0),Mh=s2([ce("w3m-all-wallets-view")],Mh);var ode=we`
  button {
    column-gap: var(--wui-spacing-s);
    padding: 11px 18px 11px var(--wui-spacing-s);
    width: 100%;
    background-color: var(--wui-color-gray-glass-002);
    border-radius: var(--wui-border-radius-xs);
    color: var(--wui-color-fg-250);
    transition:
      color var(--wui-ease-out-power-1) var(--wui-duration-md),
      background-color var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: color, background-color;
  }

  button[data-iconvariant='square'],
  button[data-iconvariant='square-blue'] {
    padding: 6px 18px 6px 9px;
  }

  button > wui-flex {
    flex: 1;
  }

  button > wui-image {
    width: 32px;
    height: 32px;
    box-shadow: 0 0 0 2px var(--wui-color-gray-glass-005);
    border-radius: var(--wui-border-radius-3xl);
  }

  button > wui-icon {
    width: 36px;
    height: 36px;
    transition: opacity var(--wui-ease-out-power-1) var(--wui-duration-md);
    will-change: opacity;
  }

  button > wui-icon-box[data-variant='blue'] {
    box-shadow: 0 0 0 2px var(--wui-color-accent-glass-005);
  }

  button > wui-icon-box[data-variant='overlay'] {
    box-shadow: 0 0 0 2px var(--wui-color-gray-glass-005);
  }

  button > wui-icon-box[data-variant='square-blue'] {
    border-radius: var(--wui-border-radius-3xs);
    position: relative;
    border: none;
    width: 36px;
    height: 36px;
  }

  button > wui-icon-box[data-variant='square-blue']::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: inherit;
    border: 1px solid var(--wui-color-accent-glass-010);
    pointer-events: none;
  }

  button > wui-icon:last-child {
    width: 14px;
    height: 14px;
  }

  button:disabled {
    color: var(--wui-color-gray-glass-020);
  }

  button[data-loading='true'] > wui-icon {
    opacity: 0;
  }

  wui-loading-spinner {
    position: absolute;
    right: 18px;
    top: 50%;
    transform: translateY(-50%);
  }
`,hi=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let An=class extends ue{constructor(){super(...arguments),this.tabIdx=void 0,this.variant="icon",this.disabled=!1,this.imageSrc=void 0,this.alt=void 0,this.chevron=!1,this.loading=!1}render(){return U`
      <button
        ?disabled=${this.loading?!0:!!this.disabled}
        data-loading=${this.loading}
        data-iconvariant=${me(this.iconVariant)}
        tabindex=${me(this.tabIdx)}
      >
        ${this.loadingTemplate()} ${this.visualTemplate()}
        <wui-flex gap="3xs">
          <slot></slot>
        </wui-flex>
        ${this.chevronTemplate()}
      </button>
    `}visualTemplate(){if(this.variant==="image"&&this.imageSrc)return U`<wui-image src=${this.imageSrc} alt=${this.alt??"list item"}></wui-image>`;if(this.iconVariant==="square"&&this.icon&&this.variant==="icon")return U`<wui-icon name=${this.icon}></wui-icon>`;if(this.variant==="icon"&&this.icon&&this.iconVariant){const e=["blue","square-blue"].includes(this.iconVariant)?"accent-100":"fg-200",r=this.iconVariant==="square-blue"?"mdl":"md",n=this.iconSize?this.iconSize:r;return U`
        <wui-icon-box
          data-variant=${this.iconVariant}
          icon=${this.icon}
          iconSize=${n}
          background="transparent"
          iconColor=${e}
          backgroundColor=${e}
          size=${r}
        ></wui-icon-box>
      `}return null}loadingTemplate(){return this.loading?U`<wui-loading-spinner
        data-testid="wui-list-item-loading-spinner"
        color="fg-300"
      ></wui-loading-spinner>`:U``}chevronTemplate(){return this.chevron?U`<wui-icon size="inherit" color="fg-200" name="chevronRight"></wui-icon>`:null}};An.styles=[qe,Er,ode],hi([j()],An.prototype,"icon",void 0),hi([j()],An.prototype,"iconSize",void 0),hi([j()],An.prototype,"tabIdx",void 0),hi([j()],An.prototype,"variant",void 0),hi([j()],An.prototype,"iconVariant",void 0),hi([j({type:Boolean})],An.prototype,"disabled",void 0),hi([j()],An.prototype,"imageSrc",void 0),hi([j()],An.prototype,"alt",void 0),hi([j({type:Boolean})],An.prototype,"chevron",void 0),hi([j({type:Boolean})],An.prototype,"loading",void 0),An=hi([ce("wui-list-item")],An);var ade=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let o2=class extends ue{constructor(){super(...arguments),this.wallet=ne.state.data?.wallet}render(){if(!this.wallet)throw new Error("w3m-downloads-view");return U`
      <wui-flex gap="xs" flexDirection="column" .padding=${["s","s","l","s"]}>
        ${this.chromeTemplate()} ${this.iosTemplate()} ${this.androidTemplate()}
        ${this.homepageTemplate()}
      </wui-flex>
    `}chromeTemplate(){return this.wallet?.chrome_store?U`<wui-list-item
      variant="icon"
      icon="chromeStore"
      iconVariant="square"
      @click=${this.onChromeStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">Chrome Extension</wui-text>
    </wui-list-item>`:null}iosTemplate(){return this.wallet?.app_store?U`<wui-list-item
      variant="icon"
      icon="appStore"
      iconVariant="square"
      @click=${this.onAppStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">iOS App</wui-text>
    </wui-list-item>`:null}androidTemplate(){return this.wallet?.play_store?U`<wui-list-item
      variant="icon"
      icon="playStore"
      iconVariant="square"
      @click=${this.onPlayStore.bind(this)}
      chevron
    >
      <wui-text variant="paragraph-500" color="fg-100">Android App</wui-text>
    </wui-list-item>`:null}homepageTemplate(){return this.wallet?.homepage?U`
      <wui-list-item
        variant="icon"
        icon="browser"
        iconVariant="square-blue"
        @click=${this.onHomePage.bind(this)}
        chevron
      >
        <wui-text variant="paragraph-500" color="fg-100">Website</wui-text>
      </wui-list-item>
    `:null}onChromeStore(){this.wallet?.chrome_store&&X.openHref(this.wallet.chrome_store,"_blank")}onAppStore(){this.wallet?.app_store&&X.openHref(this.wallet.app_store,"_blank")}onPlayStore(){this.wallet?.play_store&&X.openHref(this.wallet.play_store,"_blank")}onHomePage(){this.wallet?.homepage&&X.openHref(this.wallet.homepage,"_blank")}};o2=ade([ce("w3m-downloads-view")],o2);var cde=Object.freeze({__proto__:null,get W3mConnectingWcBasicView(){return a1},get W3mAllWalletsView(){return Mh},get W3mDownloadsView(){return o2}}),lde=we`
  :host {
    display: block;
    border-radius: clamp(0px, var(--wui-border-radius-l), 44px);
    box-shadow: 0 0 0 1px var(--wui-color-gray-glass-005);
    background-color: var(--wui-color-modal-bg);
    overflow: hidden;
  }

  :host([data-embedded='true']) {
    box-shadow:
      0 0 0 1px var(--wui-color-gray-glass-005),
      0px 4px 12px 4px var(--w3m-card-embedded-shadow-color);
  }
`,ude=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let a2=class extends ue{render(){return U`<slot></slot>`}};a2.styles=[qe,lde],a2=ude([ce("wui-card")],a2);var dde=we`
  :host {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--wui-spacing-s);
    border-radius: var(--wui-border-radius-s);
    border: 1px solid var(--wui-color-dark-glass-100);
    box-sizing: border-box;
    background-color: var(--wui-color-bg-325);
    box-shadow: 0px 0px 16px 0px rgba(0, 0, 0, 0.25);
  }

  wui-flex {
    width: 100%;
  }

  wui-text {
    word-break: break-word;
    flex: 1;
  }

  .close {
    cursor: pointer;
  }

  .icon-box {
    height: 40px;
    width: 40px;
    border-radius: var(--wui-border-radius-3xs);
    background-color: var(--local-icon-bg-value);
  }
`,jh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ra=class extends ue{constructor(){super(...arguments),this.message="",this.backgroundColor="accent-100",this.iconColor="accent-100",this.icon="info"}render(){return this.style.cssText=`
      --local-icon-bg-value: var(--wui-color-${this.backgroundColor});
   `,U`
      <wui-flex flexDirection="row" justifyContent="space-between" alignItems="center">
        <wui-flex columnGap="xs" flexDirection="row" alignItems="center">
          <wui-flex
            flexDirection="row"
            alignItems="center"
            justifyContent="center"
            class="icon-box"
          >
            <wui-icon color=${this.iconColor} size="md" name=${this.icon}></wui-icon>
          </wui-flex>
          <wui-text variant="small-500" color="bg-350" data-testid="wui-alertbar-text"
            >${this.message}</wui-text
          >
        </wui-flex>
        <wui-icon
          class="close"
          color="bg-350"
          size="sm"
          name="close"
          @click=${this.onClose}
        ></wui-icon>
      </wui-flex>
    `}onClose(){eo.close()}};Ra.styles=[qe,dde],jh([j()],Ra.prototype,"message",void 0),jh([j()],Ra.prototype,"backgroundColor",void 0),jh([j()],Ra.prototype,"iconColor",void 0),jh([j()],Ra.prototype,"icon",void 0),Ra=jh([ce("wui-alertbar")],Ra);var hde=we`
  :host {
    display: block;
    position: absolute;
    top: var(--wui-spacing-s);
    left: var(--wui-spacing-l);
    right: var(--wui-spacing-l);
    opacity: 0;
    pointer-events: none;
  }
`,R_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const pde={info:{backgroundColor:"fg-350",iconColor:"fg-325",icon:"info"},success:{backgroundColor:"success-glass-reown-020",iconColor:"success-125",icon:"checkmark"},warning:{backgroundColor:"warning-glass-reown-020",iconColor:"warning-100",icon:"warningCircle"},error:{backgroundColor:"error-glass-reown-020",iconColor:"error-125",icon:"exclamationTriangle"}};let p1=class extends ue{constructor(){super(),this.unsubscribe=[],this.open=eo.state.open,this.onOpen(!0),this.unsubscribe.push(eo.subscribeKey("open",e=>{this.open=e,this.onOpen(!1)}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){const{message:e,variant:r}=eo.state,n=pde[r];return U`
      <wui-alertbar
        message=${e}
        backgroundColor=${n?.backgroundColor}
        iconColor=${n?.iconColor}
        icon=${n?.icon}
      ></wui-alertbar>
    `}onOpen(e){this.open?(this.animate([{opacity:0,transform:"scale(0.85)"},{opacity:1,transform:"scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: auto"):e||(this.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"}),this.style.cssText="pointer-events: none")}};p1.styles=hde,R_([le()],p1.prototype,"open",void 0),p1=R_([ce("w3m-alertbar")],p1);var fde=we`
  button {
    border-radius: var(--local-border-radius);
    color: var(--wui-color-fg-100);
    padding: var(--local-padding);
  }

  @media (max-width: 700px) {
    button {
      padding: var(--wui-spacing-s);
    }
  }

  button > wui-icon {
    pointer-events: none;
  }

  button:disabled > wui-icon {
    color: var(--wui-color-bg-300) !important;
  }

  button:disabled {
    background-color: transparent;
  }
`,zh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Da=class extends ue{constructor(){super(...arguments),this.size="md",this.disabled=!1,this.icon="copy",this.iconColor="inherit"}render(){const e=this.size==="lg"?"--wui-border-radius-xs":"--wui-border-radius-xxs",r=this.size==="lg"?"--wui-spacing-1xs":"--wui-spacing-2xs";return this.style.cssText=`
    --local-border-radius: var(${e});
    --local-padding: var(${r});
`,U`
      <button ?disabled=${this.disabled}>
        <wui-icon color=${this.iconColor} size=${this.size} name=${this.icon}></wui-icon>
      </button>
    `}};Da.styles=[qe,Er,ah,fde],zh([j()],Da.prototype,"size",void 0),zh([j({type:Boolean})],Da.prototype,"disabled",void 0),zh([j()],Da.prototype,"icon",void 0),zh([j()],Da.prototype,"iconColor",void 0),Da=zh([ce("wui-icon-link")],Da);var gde=we`
  button {
    display: block;
    display: flex;
    align-items: center;
    padding: var(--wui-spacing-xxs);
    gap: var(--wui-spacing-xxs);
    transition: all var(--wui-ease-out-power-1) var(--wui-duration-md);
    border-radius: var(--wui-border-radius-xxs);
  }

  wui-image {
    border-radius: 100%;
    width: var(--wui-spacing-xl);
    height: var(--wui-spacing-xl);
  }

  wui-icon-box {
    width: var(--wui-spacing-xl);
    height: var(--wui-spacing-xl);
  }

  button:hover {
    background-color: var(--wui-color-gray-glass-002);
  }

  button:active {
    background-color: var(--wui-color-gray-glass-005);
  }
`,D_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let f1=class extends ue{constructor(){super(...arguments),this.imageSrc=""}render(){return U`<button>
      ${this.imageTemplate()}
      <wui-icon size="xs" color="fg-200" name="chevronBottom"></wui-icon>
    </button>`}imageTemplate(){return this.imageSrc?U`<wui-image src=${this.imageSrc} alt="select visual"></wui-image>`:U`<wui-icon-box
      size="xxs"
      iconColor="fg-200"
      backgroundColor="fg-100"
      background="opaque"
      icon="networkPlaceholder"
    ></wui-icon-box>`}};f1.styles=[qe,Er,ah,gde],D_([j()],f1.prototype,"imageSrc",void 0),f1=D_([ce("wui-select")],f1);var wde=we`
  :host {
    height: 64px;
  }

  wui-text {
    text-transform: capitalize;
  }

  wui-flex.w3m-header-title {
    transform: translateY(0);
    opacity: 1;
  }

  wui-flex.w3m-header-title[view-direction='prev'] {
    animation:
      slide-down-out 120ms forwards var(--wui-ease-out-power-2),
      slide-down-in 120ms forwards var(--wui-ease-out-power-2);
    animation-delay: 0ms, 200ms;
  }

  wui-flex.w3m-header-title[view-direction='next'] {
    animation:
      slide-up-out 120ms forwards var(--wui-ease-out-power-2),
      slide-up-in 120ms forwards var(--wui-ease-out-power-2);
    animation-delay: 0ms, 200ms;
  }

  wui-icon-link[data-hidden='true'] {
    opacity: 0 !important;
    pointer-events: none;
  }

  @keyframes slide-up-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(3px);
      opacity: 0;
    }
  }

  @keyframes slide-up-in {
    from {
      transform: translateY(-3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes slide-down-out {
    from {
      transform: translateY(0px);
      opacity: 1;
    }
    to {
      transform: translateY(-3px);
      opacity: 0;
    }
  }

  @keyframes slide-down-in {
    from {
      transform: translateY(3px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
`,Li=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const mde=["SmartSessionList"];function c2(){const t=ne.state.data?.connector?.name,e=ne.state.data?.wallet?.name,r=ne.state.data?.network?.name,n=e??t,i=oe.getConnectors();return{Connect:`Connect ${i.length===1&&i[0]?.id==="w3m-email"?"Email":""} Wallet`,Create:"Create Wallet",ChooseAccountName:void 0,Account:void 0,AccountSettings:void 0,AllWallets:"All Wallets",ApproveTransaction:"Approve Transaction",BuyInProgress:"Buy",ConnectingExternal:n??"Connect Wallet",ConnectingWalletConnect:n??"WalletConnect",ConnectingWalletConnectBasic:"WalletConnect",ConnectingSiwe:"Sign In",Convert:"Convert",ConvertSelectToken:"Select token",ConvertPreview:"Preview convert",Downloads:n?`Get ${n}`:"Downloads",EmailLogin:"Email Login",EmailVerifyOtp:"Confirm Email",EmailVerifyDevice:"Register Device",GetWallet:"Get a wallet",Networks:"Choose Network",OnRampProviders:"Choose Provider",OnRampActivity:"Activity",OnRampTokenSelect:"Select Token",OnRampFiatSelect:"Select Currency",Profile:void 0,SwitchNetwork:r??"Switch Network",SwitchAddress:"Switch Address",Transactions:"Activity",UnsupportedChain:"Switch Network",UpgradeEmailWallet:"Upgrade your Wallet",UpdateEmailWallet:"Edit Email",UpdateEmailPrimaryOtp:"Confirm Current Email",UpdateEmailSecondaryOtp:"Confirm New Email",WhatIsABuy:"What is Buy?",RegisterAccountName:"Choose name",RegisterAccountNameSuccess:"",WalletReceive:"Receive",WalletCompatibleNetworks:"Compatible Networks",Swap:"Swap",SwapSelectToken:"Select token",SwapPreview:"Preview swap",WalletSend:"Send",WalletSendPreview:"Review send",WalletSendSelectToken:"Select Token",WhatIsANetwork:"What is a network?",WhatIsAWallet:"What is a wallet?",ConnectWallets:"Connect wallet",ConnectSocials:"All socials",ConnectingSocial:ge.state.socialProvider?ge.state.socialProvider:"Connect Social",ConnectingMultiChain:"Select chain",ConnectingFarcaster:"Farcaster",SwitchActiveChain:"Switch chain",SmartSessionCreated:void 0,SmartSessionList:"Smart Sessions",SIWXSignMessage:"Sign In"}}let Wn=class extends ue{constructor(){super(),this.unsubscribe=[],this.heading=c2()[ne.state.view],this.network=B.state.activeCaipNetwork,this.networkImage=Ut.getNetworkImage(this.network),this.buffering=!1,this.showBack=!1,this.prevHistoryLength=1,this.view=ne.state.view,this.viewDirection="",this.headerText=c2()[ne.state.view],this.unsubscribe.push(Kr.subscribeNetworkImages(()=>{this.networkImage=Ut.getNetworkImage(this.network)}),ne.subscribeKey("view",e=>{setTimeout(()=>{this.view=e,this.headerText=c2()[e]},bo.ANIMATION_DURATIONS.HeaderText),this.onViewChange(),this.onHistoryChange()}),pe.subscribeKey("buffering",e=>this.buffering=e),B.subscribeKey("activeCaipNetwork",e=>{this.network=e,this.networkImage=Ut.getNetworkImage(this.network)}))}disconnectCallback(){this.unsubscribe.forEach(e=>e())}render(){return U`
      <wui-flex .padding=${this.getPadding()} justifyContent="space-between" alignItems="center">
        ${this.leftHeaderTemplate()} ${this.titleTemplate()} ${this.rightHeaderTemplate()}
      </wui-flex>
    `}onWalletHelp(){Ae.sendEvent({type:"track",event:"CLICK_WALLET_HELP"}),ne.push("WhatIsAWallet")}async onClose(){ne.state.view==="UnsupportedChain"||await so.isSIWXCloseDisabled()?De.shake():De.close()}rightHeaderTemplate(){const e=G?.state?.features?.smartSessions;return ne.state.view!=="Account"||!e?this.closeButtonTemplate():U`<wui-flex>
      <wui-icon-link
        icon="clock"
        @click=${()=>ne.push("SmartSessionList")}
        data-testid="w3m-header-smart-sessions"
      ></wui-icon-link>
      ${this.closeButtonTemplate()}
    </wui-flex> `}closeButtonTemplate(){return U`
      <wui-icon-link
        ?disabled=${this.buffering}
        icon="close"
        @click=${this.onClose.bind(this)}
        data-testid="w3m-header-close"
      ></wui-icon-link>
    `}titleTemplate(){const e=mde.includes(this.view);return U`
      <wui-flex
        view-direction="${this.viewDirection}"
        class="w3m-header-title"
        alignItems="center"
        gap="xs"
      >
        <wui-text variant="paragraph-700" color="fg-100" data-testid="w3m-header-text"
          >${this.headerText}</wui-text
        >
        ${e?U`<wui-tag variant="main">Beta</wui-tag>`:null}
      </wui-flex>
    `}leftHeaderTemplate(){const{view:e}=ne.state,r=e==="Connect",n=G.state.enableEmbedded,i=e==="ApproveTransaction",s=e==="ConnectingSiwe",o=e==="Account",a=G.state.enableNetworkSwitch,c=i||s||r&&n;return o&&a?U`<wui-select
        id="dynamic"
        data-testid="w3m-account-select-network"
        active-network=${me(this.network?.name)}
        @click=${this.onNetworks.bind(this)}
        imageSrc=${me(this.networkImage)}
      ></wui-select>`:this.showBack&&!c?U`<wui-icon-link
        data-testid="header-back"
        id="dynamic"
        icon="chevronLeft"
        ?disabled=${this.buffering}
        @click=${this.onGoBack.bind(this)}
      ></wui-icon-link>`:U`<wui-icon-link
      data-hidden=${!r}
      id="dynamic"
      icon="helpCircle"
      @click=${this.onWalletHelp.bind(this)}
    ></wui-icon-link>`}onNetworks(){this.isAllowedNetworkSwitch()&&(Ae.sendEvent({type:"track",event:"CLICK_NETWORKS"}),ne.push("Networks"))}isAllowedNetworkSwitch(){const e=B.getAllRequestedCaipNetworks(),r=e?e.length>1:!1,n=e?.find(({id:i})=>i===this.network?.id);return r||!n}getPadding(){return this.heading?["l","2l","l","2l"]:["0","2l","0","2l"]}onViewChange(){const{history:e}=ne.state;let r=bo.VIEW_DIRECTION.Next;e.length<this.prevHistoryLength&&(r=bo.VIEW_DIRECTION.Prev),this.prevHistoryLength=e.length,this.viewDirection=r}async onHistoryChange(){const{history:e}=ne.state,r=this.shadowRoot?.querySelector("#dynamic");e.length>1&&!this.showBack&&r?(await r.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!0,r.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"})):e.length<=1&&this.showBack&&r&&(await r.animate([{opacity:1},{opacity:0}],{duration:200,fill:"forwards",easing:"ease"}).finished,this.showBack=!1,r.animate([{opacity:0},{opacity:1}],{duration:200,fill:"forwards",easing:"ease"}))}onGoBack(){ne.goBack()}};Wn.styles=wde,Li([le()],Wn.prototype,"heading",void 0),Li([le()],Wn.prototype,"network",void 0),Li([le()],Wn.prototype,"networkImage",void 0),Li([le()],Wn.prototype,"buffering",void 0),Li([le()],Wn.prototype,"showBack",void 0),Li([le()],Wn.prototype,"prevHistoryLength",void 0),Li([le()],Wn.prototype,"view",void 0),Li([le()],Wn.prototype,"viewDirection",void 0),Li([le()],Wn.prototype,"headerText",void 0),Wn=Li([ce("w3m-header")],Wn);var bde=we`
  :host {
    display: flex;
    column-gap: var(--wui-spacing-s);
    align-items: center;
    padding: var(--wui-spacing-xs) var(--wui-spacing-m) var(--wui-spacing-xs) var(--wui-spacing-xs);
    border-radius: var(--wui-border-radius-s);
    border: 1px solid var(--wui-color-gray-glass-005);
    box-sizing: border-box;
    background-color: var(--wui-color-bg-175);
    box-shadow:
      0px 14px 64px -4px rgba(0, 0, 0, 0.15),
      0px 8px 22px -6px rgba(0, 0, 0, 0.15);

    max-width: 300px;
  }

  :host wui-loading-spinner {
    margin-left: var(--wui-spacing-3xs);
  }
`,Ba=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ts=class extends ue{constructor(){super(...arguments),this.backgroundColor="accent-100",this.iconColor="accent-100",this.icon="checkmark",this.message="",this.loading=!1,this.iconType="default"}render(){return U`
      ${this.templateIcon()}
      <wui-text variant="paragraph-500" color="fg-100" data-testid="wui-snackbar-message"
        >${this.message}</wui-text
      >
    `}templateIcon(){return this.loading?U`<wui-loading-spinner size="md" color="accent-100"></wui-loading-spinner>`:this.iconType==="default"?U`<wui-icon size="xl" color=${this.iconColor} name=${this.icon}></wui-icon>`:U`<wui-icon-box
      size="sm"
      iconSize="xs"
      iconColor=${this.iconColor}
      backgroundColor=${this.backgroundColor}
      icon=${this.icon}
      background="opaque"
    ></wui-icon-box>`}};Ts.styles=[qe,bde],Ba([j()],Ts.prototype,"backgroundColor",void 0),Ba([j()],Ts.prototype,"iconColor",void 0),Ba([j()],Ts.prototype,"icon",void 0),Ba([j()],Ts.prototype,"message",void 0),Ba([j()],Ts.prototype,"loading",void 0),Ba([j()],Ts.prototype,"iconType",void 0),Ts=Ba([ce("wui-snackbar")],Ts);var yde=we`
  :host {
    display: block;
    position: absolute;
    opacity: 0;
    pointer-events: none;
    top: 11px;
    left: 50%;
    width: max-content;
  }
`,B_=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const vde={loading:void 0,success:{backgroundColor:"success-100",iconColor:"success-100",icon:"checkmark"},error:{backgroundColor:"error-100",iconColor:"error-100",icon:"close"}};let g1=class extends ue{constructor(){super(),this.unsubscribe=[],this.timeout=void 0,this.open=ct.state.open,this.unsubscribe.push(ct.subscribeKey("open",e=>{this.open=e,this.onOpen()}))}disconnectedCallback(){clearTimeout(this.timeout),this.unsubscribe.forEach(e=>e())}render(){const{message:e,variant:r,svg:n}=ct.state,i=vde[r],{icon:s,iconColor:o}=n??i??{};return U`
      <wui-snackbar
        message=${e}
        backgroundColor=${i?.backgroundColor}
        iconColor=${o}
        icon=${s}
        .loading=${r==="loading"}
      ></wui-snackbar>
    `}onOpen(){clearTimeout(this.timeout),this.open?(this.animate([{opacity:0,transform:"translateX(-50%) scale(0.85)"},{opacity:1,transform:"translateX(-50%) scale(1)"}],{duration:150,fill:"forwards",easing:"ease"}),this.timeout&&clearTimeout(this.timeout),ct.state.autoClose&&(this.timeout=setTimeout(()=>ct.hide(),2500))):this.animate([{opacity:1,transform:"translateX(-50%) scale(1)"},{opacity:0,transform:"translateX(-50%) scale(0.85)"}],{duration:150,fill:"forwards",easing:"ease"})}};g1.styles=yde,B_([le()],g1.prototype,"open",void 0),g1=B_([ce("w3m-snackbar")],g1);var Ede=we`
  :host {
    pointer-events: none;
  }

  :host > wui-flex {
    display: var(--w3m-tooltip-display);
    opacity: var(--w3m-tooltip-opacity);
    padding: 9px var(--wui-spacing-s) 10px var(--wui-spacing-s);
    border-radius: var(--wui-border-radius-xxs);
    color: var(--wui-color-bg-100);
    position: fixed;
    top: var(--w3m-tooltip-top);
    left: var(--w3m-tooltip-left);
    transform: translate(calc(-50% + var(--w3m-tooltip-parent-width)), calc(-100% - 8px));
    max-width: calc(var(--w3m-modal-width) - var(--wui-spacing-xl));
    transition: opacity 0.2s var(--wui-ease-out-power-2);
    will-change: opacity;
  }

  :host([data-variant='shade']) > wui-flex {
    background-color: var(--wui-color-bg-150);
    border: 1px solid var(--wui-color-gray-glass-005);
  }

  :host([data-variant='shade']) > wui-flex > wui-text {
    color: var(--wui-color-fg-150);
  }

  :host([data-variant='fill']) > wui-flex {
    background-color: var(--wui-color-fg-100);
    border: none;
  }

  wui-icon {
    position: absolute;
    width: 12px !important;
    height: 4px !important;
    color: var(--wui-color-bg-150);
  }

  wui-icon[data-placement='top'] {
    bottom: 0px;
    left: 50%;
    transform: translate(-50%, 95%);
  }

  wui-icon[data-placement='bottom'] {
    top: 0;
    left: 50%;
    transform: translate(-50%, -95%) rotate(180deg);
  }

  wui-icon[data-placement='right'] {
    top: 50%;
    left: 0;
    transform: translate(-65%, -50%) rotate(90deg);
  }

  wui-icon[data-placement='left'] {
    top: 50%;
    right: 0%;
    transform: translate(65%, -50%) rotate(270deg);
  }
`,qh=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Ua=class extends ue{constructor(){super(),this.unsubscribe=[],this.open=tl.state.open,this.message=tl.state.message,this.triggerRect=tl.state.triggerRect,this.variant=tl.state.variant,this.unsubscribe.push(tl.subscribe(e=>{this.open=e.open,this.message=e.message,this.triggerRect=e.triggerRect,this.variant=e.variant}))}disconnectedCallback(){this.unsubscribe.forEach(e=>e())}render(){this.dataset.variant=this.variant;const e=this.triggerRect.top,r=this.triggerRect.left;return this.style.cssText=`
    --w3m-tooltip-top: ${e}px;
    --w3m-tooltip-left: ${r}px;
    --w3m-tooltip-parent-width: ${this.triggerRect.width/2}px;
    --w3m-tooltip-display: ${this.open?"flex":"none"};
    --w3m-tooltip-opacity: ${this.open?1:0};
    `,U`<wui-flex>
      <wui-icon data-placement="top" color="fg-100" size="inherit" name="cursor"></wui-icon>
      <wui-text color="inherit" variant="small-500">${this.message}</wui-text>
    </wui-flex>`}};Ua.styles=[Ede],qh([le()],Ua.prototype,"open",void 0),qh([le()],Ua.prototype,"message",void 0),qh([le()],Ua.prototype,"triggerRect",void 0),qh([le()],Ua.prototype,"variant",void 0),Ua=qh([ce("w3m-tooltip"),ce("w3m-tooltip")],Ua);var Cde=we`
  :host {
    --prev-height: 0px;
    --new-height: 0px;
    display: block;
  }

  div.w3m-router-container {
    transform: translateY(0);
    opacity: 1;
  }

  div.w3m-router-container[view-direction='prev'] {
    animation:
      slide-left-out 150ms forwards ease,
      slide-left-in 150ms forwards ease;
    animation-delay: 0ms, 200ms;
  }

  div.w3m-router-container[view-direction='next'] {
    animation:
      slide-right-out 150ms forwards ease,
      slide-right-in 150ms forwards ease;
    animation-delay: 0ms, 200ms;
  }

  @keyframes slide-left-out {
    from {
      transform: translateX(0px);
      opacity: 1;
    }
    to {
      transform: translateX(10px);
      opacity: 0;
    }
  }

  @keyframes slide-left-in {
    from {
      transform: translateX(-10px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slide-right-out {
    from {
      transform: translateX(0px);
      opacity: 1;
    }
    to {
      transform: translateX(-10px);
      opacity: 0;
    }
  }

  @keyframes slide-right-in {
    from {
      transform: translateX(10px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
`,l2=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};let Hh=class extends ue{constructor(){super(),this.resizeObserver=void 0,this.prevHeight="0px",this.prevHistoryLength=1,this.unsubscribe=[],this.view=ne.state.view,this.viewDirection="",this.unsubscribe.push(ne.subscribeKey("view",e=>this.onViewChange(e)))}firstUpdated(){this.resizeObserver=new ResizeObserver(([e])=>{const r=`${e?.contentRect.height}px`;this.prevHeight!=="0px"&&(this.style.setProperty("--prev-height",this.prevHeight),this.style.setProperty("--new-height",r),this.style.animation="w3m-view-height 150ms forwards ease",this.style.height="auto"),setTimeout(()=>{this.prevHeight=r,this.style.animation="unset"},bo.ANIMATION_DURATIONS.ModalHeight)}),this.resizeObserver?.observe(this.getWrapper())}disconnectedCallback(){this.resizeObserver?.unobserve(this.getWrapper()),this.unsubscribe.forEach(e=>e())}render(){return U`<div class="w3m-router-container" view-direction="${this.viewDirection}">
      ${this.viewTemplate()}
    </div>`}viewTemplate(){switch(this.view){case"AccountSettings":return U`<w3m-account-settings-view></w3m-account-settings-view>`;case"Account":return U`<w3m-account-view></w3m-account-view>`;case"AllWallets":return U`<w3m-all-wallets-view></w3m-all-wallets-view>`;case"ApproveTransaction":return U`<w3m-approve-transaction-view></w3m-approve-transaction-view>`;case"BuyInProgress":return U`<w3m-buy-in-progress-view></w3m-buy-in-progress-view>`;case"ChooseAccountName":return U`<w3m-choose-account-name-view></w3m-choose-account-name-view>`;case"Connect":return U`<w3m-connect-view></w3m-connect-view>`;case"Create":return U`<w3m-connect-view walletGuide="explore"></w3m-connect-view>`;case"ConnectingWalletConnect":return U`<w3m-connecting-wc-view></w3m-connecting-wc-view>`;case"ConnectingWalletConnectBasic":return U`<w3m-connecting-wc-basic-view></w3m-connecting-wc-basic-view>`;case"ConnectingExternal":return U`<w3m-connecting-external-view></w3m-connecting-external-view>`;case"ConnectingSiwe":return U`<w3m-connecting-siwe-view></w3m-connecting-siwe-view>`;case"ConnectWallets":return U`<w3m-connect-wallets-view></w3m-connect-wallets-view>`;case"ConnectSocials":return U`<w3m-connect-socials-view></w3m-connect-socials-view>`;case"ConnectingSocial":return U`<w3m-connecting-social-view></w3m-connecting-social-view>`;case"Downloads":return U`<w3m-downloads-view></w3m-downloads-view>`;case"EmailLogin":return U`<w3m-email-login-view></w3m-email-login-view>`;case"EmailVerifyOtp":return U`<w3m-email-verify-otp-view></w3m-email-verify-otp-view>`;case"EmailVerifyDevice":return U`<w3m-email-verify-device-view></w3m-email-verify-device-view>`;case"GetWallet":return U`<w3m-get-wallet-view></w3m-get-wallet-view>`;case"Networks":return U`<w3m-networks-view></w3m-networks-view>`;case"SwitchNetwork":return U`<w3m-network-switch-view></w3m-network-switch-view>`;case"Profile":return U`<w3m-profile-view></w3m-profile-view>`;case"SwitchAddress":return U`<w3m-switch-address-view></w3m-switch-address-view>`;case"Transactions":return U`<w3m-transactions-view></w3m-transactions-view>`;case"OnRampProviders":return U`<w3m-onramp-providers-view></w3m-onramp-providers-view>`;case"OnRampActivity":return U`<w3m-onramp-activity-view></w3m-onramp-activity-view>`;case"OnRampTokenSelect":return U`<w3m-onramp-token-select-view></w3m-onramp-token-select-view>`;case"OnRampFiatSelect":return U`<w3m-onramp-fiat-select-view></w3m-onramp-fiat-select-view>`;case"UpgradeEmailWallet":return U`<w3m-upgrade-wallet-view></w3m-upgrade-wallet-view>`;case"UpdateEmailWallet":return U`<w3m-update-email-wallet-view></w3m-update-email-wallet-view>`;case"UpdateEmailPrimaryOtp":return U`<w3m-update-email-primary-otp-view></w3m-update-email-primary-otp-view>`;case"UpdateEmailSecondaryOtp":return U`<w3m-update-email-secondary-otp-view></w3m-update-email-secondary-otp-view>`;case"UnsupportedChain":return U`<w3m-unsupported-chain-view></w3m-unsupported-chain-view>`;case"Swap":return U`<w3m-swap-view></w3m-swap-view>`;case"SwapSelectToken":return U`<w3m-swap-select-token-view></w3m-swap-select-token-view>`;case"SwapPreview":return U`<w3m-swap-preview-view></w3m-swap-preview-view>`;case"WalletSend":return U`<w3m-wallet-send-view></w3m-wallet-send-view>`;case"WalletSendSelectToken":return U`<w3m-wallet-send-select-token-view></w3m-wallet-send-select-token-view>`;case"WalletSendPreview":return U`<w3m-wallet-send-preview-view></w3m-wallet-send-preview-view>`;case"WhatIsABuy":return U`<w3m-what-is-a-buy-view></w3m-what-is-a-buy-view>`;case"WalletReceive":return U`<w3m-wallet-receive-view></w3m-wallet-receive-view>`;case"WalletCompatibleNetworks":return U`<w3m-wallet-compatible-networks-view></w3m-wallet-compatible-networks-view>`;case"WhatIsAWallet":return U`<w3m-what-is-a-wallet-view></w3m-what-is-a-wallet-view>`;case"ConnectingMultiChain":return U`<w3m-connecting-multi-chain-view></w3m-connecting-multi-chain-view>`;case"WhatIsANetwork":return U`<w3m-what-is-a-network-view></w3m-what-is-a-network-view>`;case"ConnectingFarcaster":return U`<w3m-connecting-farcaster-view></w3m-connecting-farcaster-view>`;case"SwitchActiveChain":return U`<w3m-switch-active-chain-view></w3m-switch-active-chain-view>`;case"RegisterAccountName":return U`<w3m-register-account-name-view></w3m-register-account-name-view>`;case"RegisterAccountNameSuccess":return U`<w3m-register-account-name-success-view></w3m-register-account-name-success-view>`;case"SmartSessionCreated":return U`<w3m-smart-session-created-view></w3m-smart-session-created-view>`;case"SmartSessionList":return U`<w3m-smart-session-list-view></w3m-smart-session-list-view>`;case"SIWXSignMessage":return U`<w3m-siwx-sign-message-view></w3m-siwx-sign-message-view>`;default:return U`<w3m-connect-view></w3m-connect-view>`}}onViewChange(e){tl.hide();let r=bo.VIEW_DIRECTION.Next;const{history:n}=ne.state;n.length<this.prevHistoryLength&&(r=bo.VIEW_DIRECTION.Prev),this.prevHistoryLength=n.length,this.viewDirection=r,setTimeout(()=>{this.view=e},bo.ANIMATION_DURATIONS.ViewTransition)}getWrapper(){return this.shadowRoot?.querySelector("div")}};Hh.styles=Cde,l2([le()],Hh.prototype,"view",void 0),l2([le()],Hh.prototype,"viewDirection",void 0),Hh=l2([ce("w3m-router")],Hh);var xde=we`
  :host {
    z-index: var(--w3m-z-index);
    display: block;
    backface-visibility: hidden;
    will-change: opacity;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    opacity: 0;
    background-color: var(--wui-cover);
    transition: opacity 0.2s var(--wui-ease-out-power-2);
    will-change: opacity;
  }

  :host(.open) {
    opacity: 1;
  }

  :host(.embedded) {
    position: relative;
    pointer-events: unset;
    background: none;
    width: 100%;
    opacity: 1;
  }

  wui-card {
    max-width: var(--w3m-modal-width);
    width: 100%;
    position: relative;
    animation: zoom-in 0.2s var(--wui-ease-out-power-2);
    animation-fill-mode: backwards;
    outline: none;
    transition:
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius, background-color;
  }

  :host(.embedded) wui-card {
    max-width: 400px;
  }

  wui-card[shake='true'] {
    animation:
      zoom-in 0.2s var(--wui-ease-out-power-2),
      w3m-shake 0.5s var(--wui-ease-out-power-2);
  }

  wui-flex {
    overflow-x: hidden;
    overflow-y: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }

  @media (max-height: 700px) and (min-width: 431px) {
    wui-flex {
      align-items: flex-start;
    }

    wui-card {
      margin: var(--wui-spacing-xxl) 0px;
    }
  }

  @media (max-width: 430px) {
    wui-flex {
      align-items: flex-end;
    }

    wui-card {
      max-width: 100%;
      border-bottom-left-radius: var(--local-border-bottom-mobile-radius);
      border-bottom-right-radius: var(--local-border-bottom-mobile-radius);
      border-bottom: none;
      animation: slide-in 0.2s var(--wui-ease-out-power-2);
    }

    wui-card[shake='true'] {
      animation:
        slide-in 0.2s var(--wui-ease-out-power-2),
        w3m-shake 0.5s var(--wui-ease-out-power-2);
    }
  }

  @keyframes zoom-in {
    0% {
      transform: scale(0.95) translateY(0);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  @keyframes slide-in {
    0% {
      transform: scale(1) translateY(50px);
    }
    100% {
      transform: scale(1) translateY(0);
    }
  }

  @keyframes w3m-shake {
    0% {
      transform: scale(1) rotate(0deg);
    }
    20% {
      transform: scale(1) rotate(-1deg);
    }
    40% {
      transform: scale(1) rotate(1.5deg);
    }
    60% {
      transform: scale(1) rotate(-1.5deg);
    }
    80% {
      transform: scale(1) rotate(1deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
    }
  }

  @keyframes w3m-view-height {
    from {
      height: var(--prev-height);
    }
    to {
      height: var(--new-height);
    }
  }
`,La=function(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const U_="scroll-lock";let Fi=class extends ue{constructor(){super(),this.unsubscribe=[],this.abortController=void 0,this.hasPrefetched=!1,this.enableEmbedded=G.state.enableEmbedded,this.open=De.state.open,this.caipAddress=B.state.activeCaipAddress,this.caipNetwork=B.state.activeCaipNetwork,this.shake=De.state.shake,this.filterByNamespace=oe.state.filterByNamespace,this.initializeTheming(),se.prefetchAnalyticsConfig(),this.unsubscribe.push(De.subscribeKey("open",e=>e?this.onOpen():this.onClose()),De.subscribeKey("shake",e=>this.shake=e),B.subscribeKey("activeCaipNetwork",e=>this.onNewNetwork(e)),B.subscribeKey("activeCaipAddress",e=>this.onNewAddress(e)),G.subscribeKey("enableEmbedded",e=>this.enableEmbedded=e),oe.subscribeKey("filterByNamespace",e=>{this.filterByNamespace!==e&&!B.getAccountData(e)?.caipAddress&&(se.fetchRecommendedWallets(),this.filterByNamespace=e)}))}firstUpdated(){if(this.caipAddress){if(this.enableEmbedded){De.close(),this.prefetch();return}this.onNewAddress(this.caipAddress)}this.open&&this.onOpen(),this.enableEmbedded&&this.prefetch()}disconnectedCallback(){this.unsubscribe.forEach(e=>e()),this.onRemoveKeyboardListener()}render(){return this.style.cssText=`
      --local-border-bottom-mobile-radius: ${this.enableEmbedded?"clamp(0px, var(--wui-border-radius-l), 44px)":"0px"};
    `,this.enableEmbedded?U`${this.contentTemplate()}
        <w3m-tooltip></w3m-tooltip> `:this.open?U`
          <wui-flex @click=${this.onOverlayClick.bind(this)} data-testid="w3m-modal-overlay">
            ${this.contentTemplate()}
          </wui-flex>
          <w3m-tooltip></w3m-tooltip>
        `:null}contentTemplate(){return U` <wui-card
      shake="${this.shake}"
      data-embedded="${me(this.enableEmbedded)}"
      role="alertdialog"
      aria-modal="true"
      tabindex="0"
      data-testid="w3m-modal-card"
    >
      <w3m-header></w3m-header>
      <w3m-router></w3m-router>
      <w3m-snackbar></w3m-snackbar>
      <w3m-alertbar></w3m-alertbar>
    </wui-card>`}async onOverlayClick(e){e.target===e.currentTarget&&await this.handleClose()}async handleClose(){ne.state.view==="UnsupportedChain"||await so.isSIWXCloseDisabled()?De.shake():De.close()}initializeTheming(){const{themeVariables:e,themeMode:r}=Lt.state,n=or.getColorTheme(r);$ce(e,n)}onClose(){this.open=!1,this.classList.remove("open"),this.onScrollUnlock(),ct.hide(),this.onRemoveKeyboardListener()}onOpen(){this.open=!0,this.classList.add("open"),this.onScrollLock(),this.onAddKeyboardListener()}onScrollLock(){const e=document.createElement("style");e.dataset.w3m=U_,e.textContent=`
      body {
        touch-action: none;
        overflow: hidden;
        overscroll-behavior: contain;
      }
      w3m-modal {
        pointer-events: auto;
      }
    `,document.head.appendChild(e)}onScrollUnlock(){const e=document.head.querySelector(`style[data-w3m="${U_}"]`);e&&e.remove()}onAddKeyboardListener(){this.abortController=new AbortController;const e=this.shadowRoot?.querySelector("wui-card");e?.focus(),window.addEventListener("keydown",r=>{if(r.key==="Escape")this.handleClose();else if(r.key==="Tab"){const{tagName:n}=r.target;n&&!n.includes("W3M-")&&!n.includes("WUI-")&&e?.focus()}},this.abortController)}onRemoveKeyboardListener(){this.abortController?.abort(),this.abortController=void 0}async onNewAddress(e){const r=B.state.isSwitchingNamespace,n=X.getPlainAddress(e);!n&&!r?De.close():r&&n&&ne.goBack(),await so.initializeIfEnabled(),this.caipAddress=e,B.setIsSwitchingNamespace(!1)}onNewNetwork(e){const r=this.caipNetwork,n=r?.caipNetworkId?.toString(),i=r?.chainNamespace,s=e?.caipNetworkId?.toString(),o=e?.chainNamespace,a=n!==s,l=a&&!(i!==o),u=r?.name===de.UNSUPPORTED_NETWORK_NAME,d=ne.state.view==="ConnectingExternal",h=!this.caipAddress,f=ne.state.view==="UnsupportedChain",g=De.state.open;let w=!1;g&&!d&&(h?a&&(w=!0):(f||l&&!u)&&(w=!0)),w&&ne.state.view!=="SIWXSignMessage"&&ne.goBack(),this.caipNetwork=e}prefetch(){this.hasPrefetched||(se.prefetch(),se.fetchWalletsByPage({page:1}),this.hasPrefetched=!0)}};Fi.styles=xde,La([j({type:Boolean})],Fi.prototype,"enableEmbedded",void 0),La([le()],Fi.prototype,"open",void 0),La([le()],Fi.prototype,"caipAddress",void 0),La([le()],Fi.prototype,"caipNetwork",void 0),La([le()],Fi.prototype,"shake",void 0),La([le()],Fi.prototype,"filterByNamespace",void 0),Fi=La([ce("w3m-modal")],Fi);var $de=Object.freeze({__proto__:null,get W3mModal(){return Fi}});const _de=ee`<svg
  width="14"
  height="14"
  viewBox="0 0 14 14"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M7.0023 0.875C7.48571 0.875 7.8776 1.26675 7.8776 1.75V6.125H12.2541C12.7375 6.125 13.1294 6.51675 13.1294 7C13.1294 7.48325 12.7375 7.875 12.2541 7.875H7.8776V12.25C7.8776 12.7332 7.48571 13.125 7.0023 13.125C6.51889 13.125 6.12701 12.7332 6.12701 12.25V7.875H1.75054C1.26713 7.875 0.875244 7.48325 0.875244 7C0.875244 6.51675 1.26713 6.125 1.75054 6.125H6.12701V1.75C6.12701 1.26675 6.51889 0.875 7.0023 0.875Z"
    fill="#667dff"
  /></svg
>`;var Ide=Object.freeze({__proto__:null,addSvg:_de});const Sde=ee`<svg fill="none" viewBox="0 0 24 24">
  <path
    style="fill: var(--wui-color-accent-100);"
    d="M10.2 6.6a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM21 6.6a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM10.2 17.4a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0ZM21 17.4a3.6 3.6 0 1 1-7.2 0 3.6 3.6 0 0 1 7.2 0Z"
  />
</svg>`;var Ade=Object.freeze({__proto__:null,allWalletsSvg:Sde});const Pde=ee`<svg
  fill="none"
  viewBox="0 0 21 20"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10.5 2.42908C6.31875 2.42908 2.92859 5.81989 2.92859 10.0034C2.92859 14.1869 6.31875 17.5777 10.5 17.5777C14.6813 17.5777 18.0714 14.1869 18.0714 10.0034C18.0714 5.81989 14.6813 2.42908 10.5 2.42908ZM0.928589 10.0034C0.928589 4.71596 5.21355 0.429077 10.5 0.429077C15.7865 0.429077 20.0714 4.71596 20.0714 10.0034C20.0714 15.2908 15.7865 19.5777 10.5 19.5777C5.21355 19.5777 0.928589 15.2908 0.928589 10.0034ZM10.5 5.75003C11.0523 5.75003 11.5 6.19774 11.5 6.75003L11.5 10.8343L12.7929 9.54137C13.1834 9.15085 13.8166 9.15085 14.2071 9.54137C14.5976 9.9319 14.5976 10.5651 14.2071 10.9556L11.2071 13.9556C10.8166 14.3461 10.1834 14.3461 9.79291 13.9556L6.79291 10.9556C6.40239 10.5651 6.40239 9.9319 6.79291 9.54137C7.18343 9.15085 7.8166 9.15085 8.20712 9.54137L9.50002 10.8343L9.50002 6.75003C9.50002 6.19774 9.94773 5.75003 10.5 5.75003Z"
    clip-rule="evenodd"
  /></svg
>`;var Ode=Object.freeze({__proto__:null,arrowBottomCircleSvg:Pde});const Nde=ee`
<svg width="36" height="36">
  <path
    d="M28.724 0H7.271A7.269 7.269 0 0 0 0 7.272v21.46A7.268 7.268 0 0 0 7.271 36H28.73A7.272 7.272 0 0 0 36 28.728V7.272A7.275 7.275 0 0 0 28.724 0Z"
    fill="url(#a)"
  />
  <path
    d="m17.845 8.271.729-1.26a1.64 1.64 0 1 1 2.843 1.638l-7.023 12.159h5.08c1.646 0 2.569 1.935 1.853 3.276H6.434a1.632 1.632 0 0 1-1.638-1.638c0-.909.73-1.638 1.638-1.638h4.176l5.345-9.265-1.67-2.898a1.642 1.642 0 0 1 2.844-1.638l.716 1.264Zm-6.317 17.5-1.575 2.732a1.64 1.64 0 1 1-2.844-1.638l1.17-2.025c1.323-.41 2.398-.095 3.249.931Zm13.56-4.954h4.262c.909 0 1.638.729 1.638 1.638 0 .909-.73 1.638-1.638 1.638h-2.367l1.597 2.772c.45.788.185 1.782-.602 2.241a1.642 1.642 0 0 1-2.241-.603c-2.69-4.666-4.711-8.159-6.052-10.485-1.372-2.367-.391-4.743.576-5.549 1.075 1.846 2.682 4.631 4.828 8.348Z"
    fill="#fff"
  />
  <defs>
    <linearGradient id="a" x1="18" y1="0" x2="18" y2="36" gradientUnits="userSpaceOnUse">
      <stop stop-color="#18BFFB" />
      <stop offset="1" stop-color="#2072F3" />
    </linearGradient>
  </defs>
</svg>`;var Tde=Object.freeze({__proto__:null,appStoreSvg:Nde});const kde=ee`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#000" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M28.77 23.3c-.69 1.99-2.75 5.52-4.87 5.56-1.4.03-1.86-.84-3.46-.84-1.61 0-2.12.81-3.45.86-2.25.1-5.72-5.1-5.72-9.62 0-4.15 2.9-6.2 5.42-6.25 1.36-.02 2.64.92 3.47.92.83 0 2.38-1.13 4.02-.97.68.03 2.6.28 3.84 2.08-3.27 2.14-2.76 6.61.75 8.25ZM24.2 7.88c-2.47.1-4.49 2.69-4.2 4.84 2.28.17 4.47-2.39 4.2-4.84Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`;var Rde=Object.freeze({__proto__:null,appleSvg:kde});const Dde=ee`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 1.99a1 1 0 0 1 1 1v7.58l2.46-2.46a1 1 0 0 1 1.41 1.42L7.7 13.69a1 1 0 0 1-1.41 0L2.12 9.53A1 1 0 0 1 3.54 8.1L6 10.57V3a1 1 0 0 1 1-1Z"
    clip-rule="evenodd"
  />
</svg>`;var Bde=Object.freeze({__proto__:null,arrowBottomSvg:Dde});const Ude=ee`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M13 7.99a1 1 0 0 1-1 1H4.4l2.46 2.46a1 1 0 1 1-1.41 1.41L1.29 8.7a1 1 0 0 1 0-1.41L5.46 3.1a1 1 0 0 1 1.41 1.42L4.41 6.99H12a1 1 0 0 1 1 1Z"
    clip-rule="evenodd"
  />
</svg>`;var Lde=Object.freeze({__proto__:null,arrowLeftSvg:Ude});const Fde=ee`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M1 7.99a1 1 0 0 1 1-1h7.58L7.12 4.53A1 1 0 1 1 8.54 3.1l4.16 4.17a1 1 0 0 1 0 1.41l-4.16 4.17a1 1 0 1 1-1.42-1.41l2.46-2.46H2a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`;var Mde=Object.freeze({__proto__:null,arrowRightSvg:Fde});const jde=ee`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 13.99a1 1 0 0 1-1-1V5.4L3.54 7.86a1 1 0 0 1-1.42-1.41L6.3 2.28a1 1 0 0 1 1.41 0l4.17 4.17a1 1 0 1 1-1.41 1.41L8 5.4v7.59a1 1 0 0 1-1 1Z"
    clip-rule="evenodd"
  />
</svg>`;var zde=Object.freeze({__proto__:null,arrowTopSvg:jde});const qde=ee`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="12"
  height="13"
  viewBox="0 0 12 13"
  fill="none"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M5.61391 1.57124C5.85142 1.42873 6.14813 1.42873 6.38564 1.57124L11.0793 4.38749C11.9179 4.89067 11.5612 6.17864 10.5832 6.17864H9.96398V10.0358H10.2854C10.6996 10.0358 11.0354 10.3716 11.0354 10.7858C11.0354 11.2 10.6996 11.5358 10.2854 11.5358H1.71416C1.29995 11.5358 0.964172 11.2 0.964172 10.7858C0.964172 10.3716 1.29995 10.0358 1.71416 10.0358H2.03558L2.03558 6.17864H1.41637C0.438389 6.17864 0.0816547 4.89066 0.920263 4.38749L5.61391 1.57124ZM3.53554 6.17864V10.0358H5.24979V6.17864H3.53554ZM6.74976 6.17864V10.0358H8.46401V6.17864H6.74976ZM8.64913 4.67864H3.35043L5.99978 3.089L8.64913 4.67864Z"
    fill="currentColor"
  /></svg
>`;var Hde=Object.freeze({__proto__:null,bankSvg:qde});const Wde=ee`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4 6.4a1 1 0 0 1-.46.89 6.98 6.98 0 0 0 .38 6.18A7 7 0 0 0 16.46 7.3a1 1 0 0 1-.47-.92 7 7 0 0 0-12 .03Zm-2.02-.5a9 9 0 1 1 16.03 8.2A9 9 0 0 1 1.98 5.9Z"
    clip-rule="evenodd"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.03 8.63c-1.46-.3-2.72-.75-3.6-1.35l-.02-.01-.14-.11a1 1 0 0 1 1.2-1.6l.1.08c.6.4 1.52.74 2.69 1 .16-.99.39-1.88.67-2.65.3-.79.68-1.5 1.15-2.02A2.58 2.58 0 0 1 9.99 1c.8 0 1.45.44 1.92.97.47.52.84 1.23 1.14 2.02.29.77.52 1.66.68 2.64a8 8 0 0 0 2.7-1l.26-.18h.48a1 1 0 0 1 .12 2c-.86.51-2.01.91-3.34 1.18a22.24 22.24 0 0 1-.03 3.19c1.45.29 2.7.73 3.58 1.31a1 1 0 0 1-1.1 1.68c-.6-.4-1.56-.76-2.75-1-.15.8-.36 1.55-.6 2.2-.3.79-.67 1.5-1.14 2.02-.47.53-1.12.97-1.92.97-.8 0-1.45-.44-1.91-.97a6.51 6.51 0 0 1-1.15-2.02c-.24-.65-.44-1.4-.6-2.2-1.18.24-2.13.6-2.73.99a1 1 0 1 1-1.1-1.67c.88-.58 2.12-1.03 3.57-1.31a22.03 22.03 0 0 1-.04-3.2Zm2.2-1.7c.15-.86.34-1.61.58-2.24.24-.65.51-1.12.76-1.4.25-.28.4-.29.42-.29.03 0 .17.01.42.3.25.27.52.74.77 1.4.23.62.43 1.37.57 2.22a19.96 19.96 0 0 1-3.52 0Zm-.18 4.6a20.1 20.1 0 0 1-.03-2.62 21.95 21.95 0 0 0 3.94 0 20.4 20.4 0 0 1-.03 2.63 21.97 21.97 0 0 0-3.88 0Zm.27 2c.13.66.3 1.26.49 1.78.24.65.51 1.12.76 1.4.25.28.4.29.42.29.03 0 .17-.01.42-.3.25-.27.52-.74.77-1.4.19-.5.36-1.1.49-1.78a20.03 20.03 0 0 0-3.35 0Z"
    clip-rule="evenodd"
  />
</svg>`;var Vde=Object.freeze({__proto__:null,browserSvg:Wde});const Kde=ee`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="12"
  height="13"
  viewBox="0 0 12 13"
  fill="none"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M4.16072 2C4.17367 2 4.18665 2 4.19968 2L7.83857 2C8.36772 1.99998 8.82398 1.99996 9.19518 2.04018C9.5895 2.0829 9.97577 2.17811 10.3221 2.42971C10.5131 2.56849 10.6811 2.73647 10.8198 2.92749C11.0714 3.27379 11.1666 3.66007 11.2094 4.0544C11.2496 4.42561 11.2496 4.88188 11.2495 5.41105V7.58896C11.2496 8.11812 11.2496 8.57439 11.2094 8.94561C11.1666 9.33994 11.0714 9.72621 10.8198 10.0725C10.6811 10.2635 10.5131 10.4315 10.3221 10.5703C9.97577 10.8219 9.5895 10.9171 9.19518 10.9598C8.82398 11 8.36772 11 7.83856 11H4.16073C3.63157 11 3.17531 11 2.80411 10.9598C2.40979 10.9171 2.02352 10.8219 1.67722 10.5703C1.48621 10.4315 1.31824 10.2635 1.17946 10.0725C0.927858 9.72621 0.832652 9.33994 0.78993 8.94561C0.749713 8.5744 0.749733 8.11813 0.749757 7.58896L0.749758 5.45C0.749758 5.43697 0.749758 5.42399 0.749757 5.41104C0.749733 4.88188 0.749713 4.42561 0.78993 4.0544C0.832652 3.66007 0.927858 3.27379 1.17946 2.92749C1.31824 2.73647 1.48621 2.56849 1.67722 2.42971C2.02352 2.17811 2.40979 2.0829 2.80411 2.04018C3.17531 1.99996 3.63157 1.99998 4.16072 2ZM2.96567 3.53145C2.69897 3.56034 2.60687 3.60837 2.55888 3.64324C2.49521 3.6895 2.43922 3.74549 2.39296 3.80916C2.35809 3.85715 2.31007 3.94926 2.28117 4.21597C2.26629 4.35335 2.25844 4.51311 2.25431 4.70832H9.74498C9.74085 4.51311 9.733 4.35335 9.71812 4.21597C9.68922 3.94926 9.6412 3.85715 9.60633 3.80916C9.56007 3.74549 9.50408 3.6895 9.44041 3.64324C9.39242 3.60837 9.30031 3.56034 9.03362 3.53145C8.75288 3.50103 8.37876 3.5 7.79961 3.5H4.19968C3.62053 3.5 3.24641 3.50103 2.96567 3.53145ZM9.74956 6.20832H2.24973V7.55C2.24973 8.12917 2.25076 8.5033 2.28117 8.78404C2.31007 9.05074 2.35809 9.14285 2.39296 9.19084C2.43922 9.25451 2.49521 9.31051 2.55888 9.35677C2.60687 9.39163 2.69897 9.43966 2.96567 9.46856C3.24641 9.49897 3.62053 9.5 4.19968 9.5H7.79961C8.37876 9.5 8.75288 9.49897 9.03362 9.46856C9.30032 9.43966 9.39242 9.39163 9.44041 9.35677C9.50408 9.31051 9.56007 9.25451 9.60633 9.19084C9.6412 9.14285 9.68922 9.05075 9.71812 8.78404C9.74854 8.5033 9.74956 8.12917 9.74956 7.55V6.20832ZM6.74963 8C6.74963 7.58579 7.08541 7.25 7.49961 7.25H8.2496C8.6638 7.25 8.99958 7.58579 8.99958 8C8.99958 8.41422 8.6638 8.75 8.2496 8.75H7.49961C7.08541 8.75 6.74963 8.41422 6.74963 8Z"
    fill="currentColor"
  /></svg
>`;var Gde=Object.freeze({__proto__:null,cardSvg:Kde});const Zde=ee`<svg
  width="28"
  height="28"
  viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M25.5297 4.92733C26.1221 5.4242 26.1996 6.30724 25.7027 6.89966L12.2836 22.8997C12.0316 23.2001 11.6652 23.3811 11.2735 23.3986C10.8817 23.4161 10.5006 23.2686 10.2228 22.9919L2.38218 15.1815C1.83439 14.6358 1.83268 13.7494 2.37835 13.2016C2.92403 12.6538 3.81046 12.6521 4.35825 13.1978L11.1183 19.9317L23.5573 5.10036C24.0542 4.50794 24.9372 4.43047 25.5297 4.92733Z"
    fill="currentColor"/>
</svg>
`;var Yde=Object.freeze({__proto__:null,checkmarkSvg:Zde});const Jde=ee`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M12.9576 2.23383C13.3807 2.58873 13.4361 3.21947 13.0812 3.64263L6.37159 11.6426C6.19161 11.8572 5.92989 11.9865 5.65009 11.999C5.3703 12.0115 5.09808 11.9062 4.89965 11.7085L0.979321 7.80331C0.588042 7.41354 0.586817 6.78038 0.976585 6.3891C1.36635 5.99782 1.99952 5.99659 2.3908 6.38636L5.53928 9.52268L11.5488 2.35742C11.9037 1.93426 12.5344 1.87893 12.9576 2.23383Z"
    clip-rule="evenodd"
  />
</svg>`;var Xde=Object.freeze({__proto__:null,checkmarkBoldSvg:Jde});const Qde=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M1.46 4.96a1 1 0 0 1 1.41 0L8 10.09l5.13-5.13a1 1 0 1 1 1.41 1.41l-5.83 5.84a1 1 0 0 1-1.42 0L1.46 6.37a1 1 0 0 1 0-1.41Z"
    clip-rule="evenodd"
  />
</svg>`;var ehe=Object.freeze({__proto__:null,chevronBottomSvg:Qde});const the=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M11.04 1.46a1 1 0 0 1 0 1.41L5.91 8l5.13 5.13a1 1 0 1 1-1.41 1.41L3.79 8.71a1 1 0 0 1 0-1.42l5.84-5.83a1 1 0 0 1 1.41 0Z"
    clip-rule="evenodd"
  />
</svg>`;var rhe=Object.freeze({__proto__:null,chevronLeftSvg:the});const nhe=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.96 14.54a1 1 0 0 1 0-1.41L10.09 8 4.96 2.87a1 1 0 0 1 1.41-1.41l5.84 5.83a1 1 0 0 1 0 1.42l-5.84 5.83a1 1 0 0 1-1.41 0Z"
    clip-rule="evenodd"
  />
</svg>`;var ihe=Object.freeze({__proto__:null,chevronRightSvg:nhe});const she=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M14.54 11.04a1 1 0 0 1-1.41 0L8 5.92l-5.13 5.12a1 1 0 1 1-1.41-1.41l5.83-5.84a1 1 0 0 1 1.42 0l5.83 5.84a1 1 0 0 1 0 1.41Z"
    clip-rule="evenodd"
  />
</svg>`;var ohe=Object.freeze({__proto__:null,chevronTopSvg:she});const ahe=ee`<svg width="36" height="36" fill="none">
  <path
    fill="#fff"
    fill-opacity=".05"
    d="M0 14.94c0-5.55 0-8.326 1.182-10.4a9 9 0 0 1 3.359-3.358C6.614 0 9.389 0 14.94 0h6.12c5.55 0 8.326 0 10.4 1.182a9 9 0 0 1 3.358 3.359C36 6.614 36 9.389 36 14.94v6.12c0 5.55 0 8.326-1.182 10.4a9 9 0 0 1-3.359 3.358C29.386 36 26.611 36 21.06 36h-6.12c-5.55 0-8.326 0-10.4-1.182a9 9 0 0 1-3.358-3.359C0 29.386 0 26.611 0 21.06v-6.12Z"
  />
  <path
    stroke="#fff"
    stroke-opacity=".05"
    d="M14.94.5h6.12c2.785 0 4.84 0 6.46.146 1.612.144 2.743.43 3.691.97a8.5 8.5 0 0 1 3.172 3.173c.541.948.826 2.08.971 3.692.145 1.62.146 3.675.146 6.459v6.12c0 2.785 0 4.84-.146 6.46-.145 1.612-.43 2.743-.97 3.691a8.5 8.5 0 0 1-3.173 3.172c-.948.541-2.08.826-3.692.971-1.62.145-3.674.146-6.459.146h-6.12c-2.784 0-4.84 0-6.46-.146-1.612-.145-2.743-.43-3.691-.97a8.5 8.5 0 0 1-3.172-3.173c-.541-.948-.827-2.08-.971-3.692C.5 25.9.5 23.845.5 21.06v-6.12c0-2.784 0-4.84.146-6.46.144-1.612.43-2.743.97-3.691A8.5 8.5 0 0 1 4.79 1.617C5.737 1.076 6.869.79 8.48.646 10.1.5 12.156.5 14.94.5Z"
  />
  <path
    fill="url(#a)"
    d="M17.998 10.8h12.469a14.397 14.397 0 0 0-24.938.001l6.234 10.798.006-.001a7.19 7.19 0 0 1 6.23-10.799Z"
  />
  <path
    fill="url(#b)"
    d="m24.237 21.598-6.234 10.798A14.397 14.397 0 0 0 30.47 10.798H18.002l-.002.006a7.191 7.191 0 0 1 6.237 10.794Z"
  />
  <path
    fill="url(#c)"
    d="M11.765 21.601 5.531 10.803A14.396 14.396 0 0 0 18.001 32.4l6.235-10.798-.004-.004a7.19 7.19 0 0 1-12.466.004Z"
  />
  <path fill="#fff" d="M18 25.2a7.2 7.2 0 1 0 0-14.4 7.2 7.2 0 0 0 0 14.4Z" />
  <path fill="#1A73E8" d="M18 23.7a5.7 5.7 0 1 0 0-11.4 5.7 5.7 0 0 0 0 11.4Z" />
  <defs>
    <linearGradient
      id="a"
      x1="6.294"
      x2="41.1"
      y1="5.995"
      y2="5.995"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#D93025" />
      <stop offset="1" stop-color="#EA4335" />
    </linearGradient>
    <linearGradient
      id="b"
      x1="20.953"
      x2="37.194"
      y1="32.143"
      y2="2.701"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#FCC934" />
      <stop offset="1" stop-color="#FBBC04" />
    </linearGradient>
    <linearGradient
      id="c"
      x1="25.873"
      x2="9.632"
      y1="31.2"
      y2="1.759"
      gradientUnits="userSpaceOnUse"
    >
      <stop stop-color="#1E8E3E" />
      <stop offset="1" stop-color="#34A853" />
    </linearGradient>
  </defs>
</svg>`;var che=Object.freeze({__proto__:null,chromeStoreSvg:ahe});const lhe=ee`<svg width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path 
    fill-rule="evenodd" 
    clip-rule="evenodd" 
    d="M7.00235 2C4.24 2 2.00067 4.23858 2.00067 7C2.00067 9.76142 4.24 12 7.00235 12C9.7647 12 12.004 9.76142 12.004 7C12.004 4.23858 9.7647 2 7.00235 2ZM0 7C0 3.13401 3.13506 0 7.00235 0C10.8696 0 14.0047 3.13401 14.0047 7C14.0047 10.866 10.8696 14 7.00235 14C3.13506 14 0 10.866 0 7ZM7.00235 3C7.55482 3 8.00269 3.44771 8.00269 4V6.58579L9.85327 8.43575C10.2439 8.82627 10.2439 9.45944 9.85327 9.84996C9.46262 10.2405 8.82924 10.2405 8.43858 9.84996L6.29501 7.70711C6.10741 7.51957 6.00201 7.26522 6.00201 7V4C6.00201 3.44771 6.44988 3 7.00235 3Z" 
    fill="currentColor"
  />
</svg>`;var uhe=Object.freeze({__proto__:null,clockSvg:lhe});const dhe=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M2.54 2.54a1 1 0 0 1 1.42 0L8 6.6l4.04-4.05a1 1 0 1 1 1.42 1.42L9.4 8l4.05 4.04a1 1 0 0 1-1.42 1.42L8 9.4l-4.04 4.05a1 1 0 0 1-1.42-1.42L6.6 8 2.54 3.96a1 1 0 0 1 0-1.42Z"
    clip-rule="evenodd"
  />
</svg>`;var hhe=Object.freeze({__proto__:null,closeSvg:dhe});const phe=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M8 2a6 6 0 1 0 0 12A6 6 0 0 0 8 2ZM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm10.66-2.65a1 1 0 0 1 .23 1.06L9.83 9.24a1 1 0 0 1-.59.58l-2.83 1.06A1 1 0 0 1 5.13 9.6l1.06-2.82a1 1 0 0 1 .58-.59L9.6 5.12a1 1 0 0 1 1.06.23ZM7.9 7.89l-.13.35.35-.13.12-.35-.34.13Z"
    clip-rule="evenodd"
  />
</svg>`;var fhe=Object.freeze({__proto__:null,compassSvg:phe});const ghe=ee`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10 3a7 7 0 0 0-6.85 8.44l8.29-8.3C10.97 3.06 10.49 3 10 3Zm3.49.93-9.56 9.56c.32.55.71 1.06 1.16 1.5L15 5.1a7.03 7.03 0 0 0-1.5-1.16Zm2.7 2.8-9.46 9.46a7 7 0 0 0 9.46-9.46ZM1.99 5.9A9 9 0 1 1 18 14.09 9 9 0 0 1 1.98 5.91Z"
    clip-rule="evenodd"
  />
</svg>`;var whe=Object.freeze({__proto__:null,coinPlaceholderSvg:ghe});const mhe=ee`<svg
  xmlns="http://www.w3.org/2000/svg"
  width="16"
  height="16"
  viewBox="0 0 16 16"
  fill="none"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M9.21498 1.28565H10.5944C11.1458 1.28562 11.6246 1.2856 12.0182 1.32093C12.4353 1.35836 12.853 1.44155 13.2486 1.66724C13.7005 1.92498 14.0749 2.29935 14.3326 2.75122C14.5583 3.14689 14.6415 3.56456 14.6789 3.9817C14.7143 4.37531 14.7142 4.85403 14.7142 5.40545V6.78489C14.7142 7.33631 14.7143 7.81503 14.6789 8.20865C14.6415 8.62578 14.5583 9.04345 14.3326 9.43912C14.0749 9.89099 13.7005 10.2654 13.2486 10.5231C12.853 10.7488 12.4353 10.832 12.0182 10.8694C11.7003 10.8979 11.3269 10.9034 10.9045 10.9045C10.9034 11.3269 10.8979 11.7003 10.8694 12.0182C10.832 12.4353 10.7488 12.853 10.5231 13.2486C10.2654 13.7005 9.89099 14.0749 9.43912 14.3326C9.04345 14.5583 8.62578 14.6415 8.20865 14.6789C7.81503 14.7143 7.33631 14.7142 6.78489 14.7142H5.40545C4.85403 14.7142 4.37531 14.7143 3.9817 14.6789C3.56456 14.6415 3.14689 14.5583 2.75122 14.3326C2.29935 14.0749 1.92498 13.7005 1.66724 13.2486C1.44155 12.853 1.35836 12.4353 1.32093 12.0182C1.2856 11.6246 1.28562 11.1458 1.28565 10.5944V9.21498C1.28562 8.66356 1.2856 8.18484 1.32093 7.79122C1.35836 7.37409 1.44155 6.95642 1.66724 6.56074C1.92498 6.10887 2.29935 5.73451 2.75122 5.47677C3.14689 5.25108 3.56456 5.16789 3.9817 5.13045C4.2996 5.10192 4.67301 5.09645 5.09541 5.09541C5.09645 4.67302 5.10192 4.2996 5.13045 3.9817C5.16789 3.56456 5.25108 3.14689 5.47676 2.75122C5.73451 2.29935 6.10887 1.92498 6.56074 1.66724C6.95642 1.44155 7.37409 1.35836 7.79122 1.32093C8.18484 1.2856 8.66356 1.28562 9.21498 1.28565ZM5.09541 7.09552C4.68397 7.09667 4.39263 7.10161 4.16046 7.12245C3.88053 7.14757 3.78516 7.18949 3.74214 7.21403C3.60139 7.29431 3.48478 7.41091 3.4045 7.55166C3.37997 7.59468 3.33804 7.69005 3.31292 7.96999C3.28659 8.26345 3.28565 8.65147 3.28565 9.25708V10.5523C3.28565 11.1579 3.28659 11.5459 3.31292 11.8394C3.33804 12.1193 3.37997 12.2147 3.4045 12.2577C3.48478 12.3985 3.60139 12.5151 3.74214 12.5954C3.78516 12.6199 3.88053 12.6618 4.16046 12.6869C4.45393 12.7133 4.84195 12.7142 5.44755 12.7142H6.74279C7.3484 12.7142 7.73641 12.7133 8.02988 12.6869C8.30981 12.6618 8.40518 12.6199 8.44821 12.5954C8.58895 12.5151 8.70556 12.3985 8.78584 12.2577C8.81038 12.2147 8.8523 12.1193 8.87742 11.8394C8.89825 11.6072 8.90319 11.3159 8.90435 10.9045C8.48219 10.9034 8.10898 10.8979 7.79122 10.8694C7.37409 10.832 6.95641 10.7488 6.56074 10.5231C6.10887 10.2654 5.73451 9.89099 5.47676 9.43912C5.25108 9.04345 5.16789 8.62578 5.13045 8.20865C5.10194 7.89089 5.09645 7.51767 5.09541 7.09552ZM7.96999 3.31292C7.69005 3.33804 7.59468 3.37997 7.55166 3.4045C7.41091 3.48478 7.29431 3.60139 7.21403 3.74214C7.18949 3.78516 7.14757 3.88053 7.12245 4.16046C7.09611 4.45393 7.09517 4.84195 7.09517 5.44755V6.74279C7.09517 7.3484 7.09611 7.73641 7.12245 8.02988C7.14757 8.30981 7.18949 8.40518 7.21403 8.4482C7.29431 8.58895 7.41091 8.70556 7.55166 8.78584C7.59468 8.81038 7.69005 8.8523 7.96999 8.87742C8.26345 8.90376 8.65147 8.9047 9.25708 8.9047H10.5523C11.1579 8.9047 11.5459 8.90376 11.8394 8.87742C12.1193 8.8523 12.2147 8.81038 12.2577 8.78584C12.3985 8.70556 12.5151 8.58895 12.5954 8.4482C12.6199 8.40518 12.6618 8.30981 12.6869 8.02988C12.7133 7.73641 12.7142 7.3484 12.7142 6.74279V5.44755C12.7142 4.84195 12.7133 4.45393 12.6869 4.16046C12.6618 3.88053 12.6199 3.78516 12.5954 3.74214C12.5151 3.60139 12.3985 3.48478 12.2577 3.4045C12.2147 3.37997 12.1193 3.33804 11.8394 3.31292C11.5459 3.28659 11.1579 3.28565 10.5523 3.28565H9.25708C8.65147 3.28565 8.26345 3.28659 7.96999 3.31292Z"
    fill="#788181"
  /></svg
>`;var bhe=Object.freeze({__proto__:null,copySvg:mhe});const yhe=ee` <svg fill="none" viewBox="0 0 13 4">
  <path fill="currentColor" d="M.5 0h12L8.9 3.13a3.76 3.76 0 0 1-4.8 0L.5 0Z" />
</svg>`;var vhe=Object.freeze({__proto__:null,cursorSvg:yhe});const Ehe=ee`<svg fill="none" viewBox="0 0 14 6">
  <path style="fill: var(--wui-color-bg-150);" d="M0 1h14L9.21 5.12a3.31 3.31 0 0 1-4.49 0L0 1Z" />
  <path
    style="stroke: var(--wui-color-inverse-100);"
    stroke-opacity=".05"
    d="M1.33 1.5h11.32L8.88 4.75l-.01.01a2.81 2.81 0 0 1-3.8 0l-.02-.01L1.33 1.5Z"
  />
  <path
    style="fill: var(--wui-color-bg-150);"
    d="M1.25.71h11.5L9.21 3.88a3.31 3.31 0 0 1-4.49 0L1.25.71Z"
  />
</svg> `;var Che=Object.freeze({__proto__:null,cursorTransparentSvg:Ehe});const xhe=ee`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M13.66 2H6.34c-1.07 0-1.96 0-2.68.08-.74.08-1.42.25-2.01.68a4 4 0 0 0-.89.89c-.43.6-.6 1.27-.68 2.01C0 6.38 0 7.26 0 8.34v.89c0 1.07 0 1.96.08 2.68.08.74.25 1.42.68 2.01a4 4 0 0 0 .89.89c.6.43 1.27.6 2.01.68a27 27 0 0 0 2.68.08h7.32a27 27 0 0 0 2.68-.08 4.03 4.03 0 0 0 2.01-.68 4 4 0 0 0 .89-.89c.43-.6.6-1.27.68-2.01.08-.72.08-1.6.08-2.68v-.89c0-1.07 0-1.96-.08-2.68a4.04 4.04 0 0 0-.68-2.01 4 4 0 0 0-.89-.89c-.6-.43-1.27-.6-2.01-.68C15.62 2 14.74 2 13.66 2ZM2.82 4.38c.2-.14.48-.25 1.06-.31C4.48 4 5.25 4 6.4 4h7.2c1.15 0 1.93 0 2.52.07.58.06.86.17 1.06.31a2 2 0 0 1 .44.44c.14.2.25.48.31 1.06.07.6.07 1.37.07 2.52v.77c0 1.15 0 1.93-.07 2.52-.06.58-.17.86-.31 1.06a2 2 0 0 1-.44.44c-.2.14-.48.25-1.06.32-.6.06-1.37.06-2.52.06H6.4c-1.15 0-1.93 0-2.52-.06-.58-.07-.86-.18-1.06-.32a2 2 0 0 1-.44-.44c-.14-.2-.25-.48-.31-1.06C2 11.1 2 10.32 2 9.17V8.4c0-1.15 0-1.93.07-2.52.06-.58.17-.86.31-1.06a2 2 0 0 1 .44-.44Z"
    clip-rule="evenodd"
  />
  <path fill="currentColor" d="M6.14 17.57a1 1 0 1 0 0 2h7.72a1 1 0 1 0 0-2H6.14Z" />
</svg>`;var $he=Object.freeze({__proto__:null,desktopSvg:xhe});const _he=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.07 1h.57a1 1 0 0 1 0 2h-.52c-.98 0-1.64 0-2.14.06-.48.05-.7.14-.84.24-.13.1-.25.22-.34.35-.1.14-.2.35-.25.83-.05.5-.05 1.16-.05 2.15v2.74c0 .99 0 1.65.05 2.15.05.48.14.7.25.83.1.14.2.25.34.35.14.1.36.2.84.25.5.05 1.16.05 2.14.05h.52a1 1 0 0 1 0 2h-.57c-.92 0-1.69 0-2.3-.07a3.6 3.6 0 0 1-1.8-.61c-.3-.22-.57-.49-.8-.8a3.6 3.6 0 0 1-.6-1.79C.5 11.11.5 10.35.5 9.43V6.58c0-.92 0-1.7.06-2.31a3.6 3.6 0 0 1 .62-1.8c.22-.3.48-.57.79-.79a3.6 3.6 0 0 1 1.8-.61C4.37 1 5.14 1 6.06 1ZM9.5 3a1 1 0 0 1 1.42 0l4.28 4.3a1 1 0 0 1 0 1.4L10.93 13a1 1 0 0 1-1.42-1.42L12.1 9H6.8a1 1 0 1 1 0-2h5.3L9.51 4.42a1 1 0 0 1 0-1.41Z"
    clip-rule="evenodd"
  />
</svg>`;var Ihe=Object.freeze({__proto__:null,disconnectSvg:_he});const She=ee`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5865F2" />
      <path
        fill="#fff"
        fill-rule="evenodd"
        d="M25.71 28.15C30.25 28 32 25.02 32 25.02c0-6.61-2.96-11.98-2.96-11.98-2.96-2.22-5.77-2.15-5.77-2.15l-.29.32c3.5 1.07 5.12 2.61 5.12 2.61a16.75 16.75 0 0 0-10.34-1.93l-.35.04a15.43 15.43 0 0 0-5.88 1.9s1.71-1.63 5.4-2.7l-.2-.24s-2.81-.07-5.77 2.15c0 0-2.96 5.37-2.96 11.98 0 0 1.73 2.98 6.27 3.13l1.37-1.7c-2.6-.79-3.6-2.43-3.6-2.43l.58.35.09.06.08.04.02.01.08.05a17.25 17.25 0 0 0 4.52 1.58 14.4 14.4 0 0 0 8.3-.86c.72-.27 1.52-.66 2.37-1.21 0 0-1.03 1.68-3.72 2.44.61.78 1.35 1.67 1.35 1.67Zm-9.55-9.6c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28.01-1.25-.93-2.28-2.1-2.28Zm7.5 0c-1.17 0-2.1 1.03-2.1 2.28 0 1.25.95 2.28 2.1 2.28 1.17 0 2.1-1.03 2.1-2.28 0-1.25-.93-2.28-2.1-2.28Z"
        clip-rule="evenodd"
      />
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
  </defs>
</svg>`;var Ahe=Object.freeze({__proto__:null,discordSvg:She});const Phe=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="M4.25 7a.63.63 0 0 0-.63.63v3.97c0 .28-.2.51-.47.54l-.75.07a.93.93 0 0 1-.9-.47A7.51 7.51 0 0 1 5.54.92a7.5 7.5 0 0 1 9.54 4.62c.12.35.06.72-.16 1-.74.97-1.68 1.78-2.6 2.44V4.44a.64.64 0 0 0-.63-.64h-1.06c-.35 0-.63.3-.63.64v5.5c0 .23-.12.42-.32.5l-.52.23V6.05c0-.36-.3-.64-.64-.64H7.45c-.35 0-.64.3-.64.64v4.97c0 .25-.17.46-.4.52a5.8 5.8 0 0 0-.45.11v-4c0-.36-.3-.65-.64-.65H4.25ZM14.07 12.4A7.49 7.49 0 0 1 3.6 14.08c4.09-.58 9.14-2.5 11.87-6.6v.03a7.56 7.56 0 0 1-1.41 4.91Z"
  />
</svg>`;var Ohe=Object.freeze({__proto__:null,etherscanSvg:Phe});const Nhe=ee`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.71 2.99a.57.57 0 0 0-.57.57 1 1 0 0 1-1 1c-.58 0-.96 0-1.24.03-.27.03-.37.07-.42.1a.97.97 0 0 0-.36.35c-.04.08-.09.21-.11.67a2.57 2.57 0 0 1 0 5.13c.02.45.07.6.11.66.09.15.21.28.36.36.07.04.21.1.67.12a2.57 2.57 0 0 1 5.12 0c.46-.03.6-.08.67-.12a.97.97 0 0 0 .36-.36c.03-.04.07-.14.1-.41.02-.29.03-.66.03-1.24a1 1 0 0 1 1-1 .57.57 0 0 0 0-1.15 1 1 0 0 1-1-1c0-.58 0-.95-.03-1.24a1.04 1.04 0 0 0-.1-.42.97.97 0 0 0-.36-.36 1.04 1.04 0 0 0-.42-.1c-.28-.02-.65-.02-1.24-.02a1 1 0 0 1-1-1 .57.57 0 0 0-.57-.57ZM5.15 13.98a1 1 0 0 0 .99-1v-.78a.57.57 0 0 1 1.14 0v.78a1 1 0 0 0 .99 1H8.36a66.26 66.26 0 0 0 .73 0 3.78 3.78 0 0 0 1.84-.38c.46-.26.85-.64 1.1-1.1.23-.4.32-.8.36-1.22.02-.2.03-.4.03-.63a2.57 2.57 0 0 0 0-4.75c0-.23-.01-.44-.03-.63a2.96 2.96 0 0 0-.35-1.22 2.97 2.97 0 0 0-1.1-1.1c-.4-.22-.8-.31-1.22-.35a8.7 8.7 0 0 0-.64-.04 2.57 2.57 0 0 0-4.74 0c-.23 0-.44.02-.63.04-.42.04-.83.13-1.22.35-.46.26-.84.64-1.1 1.1-.33.57-.37 1.2-.39 1.84a21.39 21.39 0 0 0 0 .72v.1a1 1 0 0 0 1 .99h.78a.57.57 0 0 1 0 1.15h-.77a1 1 0 0 0-1 .98v.1a63.87 63.87 0 0 0 0 .73c0 .64.05 1.27.38 1.83.26.47.64.85 1.1 1.11.56.32 1.2.37 1.84.38a20.93 20.93 0 0 0 .72 0h.1Z"
    clip-rule="evenodd"
  />
</svg>`;var The=Object.freeze({__proto__:null,extensionSvg:Nhe});const khe=ee`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.74 3.99a1 1 0 0 1 1-1H11a1 1 0 0 1 1 1v6.26a1 1 0 0 1-2 0V6.4l-6.3 6.3a1 1 0 0 1-1.4-1.42l6.29-6.3H4.74a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`;var Rhe=Object.freeze({__proto__:null,externalLinkSvg:khe});const Dhe=ee`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1877F2" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M26 12.38h-2.89c-.92 0-1.61.38-1.61 1.34v1.66H26l-.36 4.5H21.5v12H17v-12h-3v-4.5h3V12.5c0-3.03 1.6-4.62 5.2-4.62H26v4.5Z"
        />
      </g>
    </g>
    <path
      fill="#1877F2"
      d="M40 20a20 20 0 1 0-23.13 19.76V25.78H11.8V20h5.07v-4.4c0-5.02 3-7.79 7.56-7.79 2.19 0 4.48.4 4.48.4v4.91h-2.53c-2.48 0-3.25 1.55-3.25 3.13V20h5.54l-.88 5.78h-4.66v13.98A20 20 0 0 0 40 20Z"
    />
    <path
      fill="#fff"
      d="m27.79 25.78.88-5.78h-5.55v-3.75c0-1.58.78-3.13 3.26-3.13h2.53V8.2s-2.3-.39-4.48-.39c-4.57 0-7.55 2.77-7.55 7.78V20H11.8v5.78h5.07v13.98a20.15 20.15 0 0 0 6.25 0V25.78h4.67Z"
    />
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`;var Bhe=Object.freeze({__proto__:null,facebookSvg:Dhe});const Uhe=ee`<svg style="border-radius: 9999px; overflow: hidden;"  fill="none" viewBox="0 0 1000 1000">
  <rect width="1000" height="1000" rx="9999" ry="9999" fill="#855DCD"/>
  <path fill="#855DCD" d="M0 0h1000v1000H0V0Z" />
  <path
    fill="#fff"
    d="M320 248h354v504h-51.96V521.13h-.5c-5.76-63.8-59.31-113.81-124.54-113.81s-118.78 50-124.53 113.81h-.5V752H320V248Z"
  />
  <path
    fill="#fff"
    d="m225 320 21.16 71.46h17.9v289.09a16.29 16.29 0 0 0-16.28 16.24v19.49h-3.25a16.3 16.3 0 0 0-16.28 16.24V752h182.26v-19.48a16.22 16.22 0 0 0-16.28-16.24h-3.25v-19.5a16.22 16.22 0 0 0-16.28-16.23h-19.52V320H225Zm400.3 360.55a16.3 16.3 0 0 0-15.04 10.02 16.2 16.2 0 0 0-1.24 6.22v19.49h-3.25a16.29 16.29 0 0 0-16.27 16.24V752h182.24v-19.48a16.23 16.23 0 0 0-16.27-16.24h-3.25v-19.5a16.2 16.2 0 0 0-10.04-15 16.3 16.3 0 0 0-6.23-1.23v-289.1h17.9L775 320H644.82v360.55H625.3Z"
  />
</svg>`;var Lhe=Object.freeze({__proto__:null,farcasterSvg:Uhe});const Fhe=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 3a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1Zm2.63 5.25a1 1 0 0 1 1-1h8.75a1 1 0 1 1 0 2H3.63a1 1 0 0 1-1-1Zm2.62 5.25a1 1 0 0 1 1-1h3.5a1 1 0 0 1 0 2h-3.5a1 1 0 0 1-1-1Z"
    clip-rule="evenodd"
  />
</svg>`;var Mhe=Object.freeze({__proto__:null,filtersSvg:Fhe});const jhe=ee`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#1B1F23" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M8 19.89a12 12 0 1 1 15.8 11.38c-.6.12-.8-.26-.8-.57v-3.3c0-1.12-.4-1.85-.82-2.22 2.67-.3 5.48-1.31 5.48-5.92 0-1.31-.47-2.38-1.24-3.22.13-.3.54-1.52-.12-3.18 0 0-1-.32-3.3 1.23a11.54 11.54 0 0 0-6 0c-2.3-1.55-3.3-1.23-3.3-1.23a4.32 4.32 0 0 0-.12 3.18 4.64 4.64 0 0 0-1.24 3.22c0 4.6 2.8 5.63 5.47 5.93-.34.3-.65.83-.76 1.6-.69.31-2.42.84-3.5-1 0 0-.63-1.15-1.83-1.23 0 0-1.18-.02-.09.73 0 0 .8.37 1.34 1.76 0 0 .7 2.14 4.03 1.41v2.24c0 .31-.2.68-.8.57A12 12 0 0 1 8 19.9Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`;var zhe=Object.freeze({__proto__:null,githubSvg:jhe});const qhe=ee`<svg fill="none" viewBox="0 0 40 40">
  <path
    fill="#4285F4"
    d="M32.74 20.3c0-.93-.08-1.81-.24-2.66H20.26v5.03h7a6 6 0 0 1-2.62 3.91v3.28h4.22c2.46-2.27 3.88-5.6 3.88-9.56Z"
  />
  <path
    fill="#34A853"
    d="M20.26 33a12.4 12.4 0 0 0 8.6-3.14l-4.22-3.28a7.74 7.74 0 0 1-4.38 1.26 7.76 7.76 0 0 1-7.28-5.36H8.65v3.36A12.99 12.99 0 0 0 20.26 33Z"
  />
  <path
    fill="#FBBC05"
    d="M12.98 22.47a7.79 7.79 0 0 1 0-4.94v-3.36H8.65a12.84 12.84 0 0 0 0 11.66l3.37-2.63.96-.73Z"
  />
  <path
    fill="#EA4335"
    d="M20.26 12.18a7.1 7.1 0 0 1 4.98 1.93l3.72-3.72A12.47 12.47 0 0 0 20.26 7c-5.08 0-9.47 2.92-11.6 7.17l4.32 3.36a7.76 7.76 0 0 1 7.28-5.35Z"
  />
</svg>`;var Hhe=Object.freeze({__proto__:null,googleSvg:qhe});const Whe=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="M8.51 5.66a.83.83 0 0 0-.57-.2.83.83 0 0 0-.52.28.8.8 0 0 0-.25.52 1 1 0 0 1-2 0c0-.75.34-1.43.81-1.91a2.75 2.75 0 0 1 4.78 1.92c0 1.24-.8 1.86-1.25 2.2l-.04.03c-.47.36-.5.43-.5.65a1 1 0 1 1-2 0c0-1.25.8-1.86 1.24-2.2l.04-.04c.47-.36.5-.43.5-.65 0-.3-.1-.49-.24-.6ZM9.12 11.87a1.13 1.13 0 1 1-2.25 0 1.13 1.13 0 0 1 2.25 0Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6a6 6 0 1 0 0 12A6 6 0 0 0 8 2Z"
    clip-rule="evenodd"
  />
</svg>`;var Vhe=Object.freeze({__proto__:null,helpCircleSvg:Whe});const Khe=ee`<svg width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path d="M4.98926 3.73932C4.2989 3.73932 3.73926 4.29896 3.73926 4.98932C3.73926 5.67968 4.2989 6.23932 4.98926 6.23932C5.67962 6.23932 6.23926 5.67968 6.23926 4.98932C6.23926 4.29896 5.67962 3.73932 4.98926 3.73932Z" fill="currentColor"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.60497 0.500001H6.39504C5.41068 0.499977 4.59185 0.499958 3.93178 0.571471C3.24075 0.64634 2.60613 0.809093 2.04581 1.21619C1.72745 1.44749 1.44749 1.72745 1.21619 2.04581C0.809093 2.60613 0.64634 3.24075 0.571471 3.93178C0.499958 4.59185 0.499977 5.41065 0.500001 6.39501V7.57815C0.499998 8.37476 0.499995 9.05726 0.534869 9.62725C0.570123 10.2034 0.644114 10.7419 0.828442 11.2302C0.925651 11.4877 1.05235 11.7287 1.21619 11.9542C1.44749 12.2726 1.72745 12.5525 2.04581 12.7838C2.60613 13.1909 3.24075 13.3537 3.93178 13.4285C4.59185 13.5001 5.41066 13.5 6.39503 13.5H7.60496C8.58933 13.5 9.40815 13.5001 10.0682 13.4285C10.7593 13.3537 11.3939 13.1909 11.9542 12.7838C12.2726 12.5525 12.5525 12.2726 12.7838 11.9542C13.1909 11.3939 13.3537 10.7593 13.4285 10.0682C13.5 9.40816 13.5 8.58935 13.5 7.60497V6.39505C13.5 5.41068 13.5 4.59185 13.4285 3.93178C13.3537 3.24075 13.1909 2.60613 12.7838 2.04581C12.5525 1.72745 12.2726 1.44749 11.9542 1.21619C11.3939 0.809093 10.7593 0.64634 10.0682 0.571471C9.40816 0.499958 8.58933 0.499977 7.60497 0.500001ZM3.22138 2.83422C3.38394 2.71612 3.62634 2.61627 4.14721 2.55984C4.68679 2.50138 5.39655 2.5 6.45 2.5H7.55C8.60345 2.5 9.31322 2.50138 9.8528 2.55984C10.3737 2.61627 10.6161 2.71612 10.7786 2.83422C10.9272 2.94216 11.0578 3.07281 11.1658 3.22138C11.2839 3.38394 11.3837 3.62634 11.4402 4.14721C11.4986 4.68679 11.5 5.39655 11.5 6.45V6.49703C10.9674 6.11617 10.386 5.84936 9.74213 5.81948C8.40536 5.75745 7.3556 6.73051 6.40509 7.84229C6.33236 7.92737 6.27406 7.98735 6.22971 8.02911L6.1919 8.00514L6.17483 7.99427C6.09523 7.94353 5.98115 7.87083 5.85596 7.80302C5.56887 7.64752 5.18012 7.4921 4.68105 7.4921C4.66697 7.4921 4.6529 7.49239 4.63884 7.49299C3.79163 7.52878 3.09922 8.1106 2.62901 8.55472C2.58751 8.59392 2.54594 8.6339 2.50435 8.6745C2.50011 8.34653 2.5 7.97569 2.5 7.55V6.45C2.5 5.39655 2.50138 4.68679 2.55984 4.14721C2.61627 3.62634 2.71612 3.38394 2.83422 3.22138C2.94216 3.07281 3.07281 2.94216 3.22138 2.83422ZM10.3703 8.14825C10.6798 8.37526 11.043 8.71839 11.4832 9.20889C11.4744 9.44992 11.4608 9.662 11.4402 9.8528C11.3837 10.3737 11.2839 10.6161 11.1658 10.7786C11.0578 10.9272 10.9272 11.0578 10.7786 11.1658C10.6161 11.2839 10.3737 11.3837 9.8528 11.4402C9.31322 11.4986 8.60345 11.5 7.55 11.5H6.45C5.39655 11.5 4.68679 11.4986 4.14721 11.4402C3.62634 11.3837 3.38394 11.2839 3.22138 11.1658C3.15484 11.1174 3.0919 11.0645 3.03298 11.0075C3.10126 10.9356 3.16806 10.8649 3.23317 10.7959L3.29772 10.7276C3.55763 10.4525 3.78639 10.2126 4.00232 10.0087C4.22016 9.80294 4.39412 9.66364 4.53524 9.57742C4.63352 9.51738 4.69022 9.49897 4.71275 9.49345C4.76387 9.49804 4.81803 9.51537 4.90343 9.56162C4.96409 9.59447 5.02355 9.63225 5.11802 9.69238L5.12363 9.69595C5.20522 9.74789 5.32771 9.82587 5.46078 9.89278C5.76529 10.0459 6.21427 10.186 6.74977 10.0158C7.21485 9.86796 7.59367 9.52979 7.92525 9.14195C8.91377 7.98571 9.38267 7.80495 9.64941 7.81733C9.7858 7.82366 10.0101 7.884 10.3703 8.14825Z" fill="currentColor"/>
</svg>`;var Ghe=Object.freeze({__proto__:null,imageSvg:Khe});const Zhe=ee`<svg
 xmlns="http://www.w3.org/2000/svg"
 width="28"
 height="28"
 viewBox="0 0 28 28"
 fill="none">
  <path
    fill="#949E9E"
    fill-rule="evenodd"
    d="M7.974 2.975h12.052c1.248 0 2.296 0 3.143.092.89.096 1.723.307 2.461.844a4.9 4.9 0 0 1 1.084 1.084c.537.738.748 1.57.844 2.461.092.847.092 1.895.092 3.143v6.802c0 1.248 0 2.296-.092 3.143-.096.89-.307 1.723-.844 2.461a4.9 4.9 0 0 1-1.084 1.084c-.738.537-1.57.748-2.461.844-.847.092-1.895.092-3.143.092H7.974c-1.247 0-2.296 0-3.143-.092-.89-.096-1.723-.307-2.461-.844a4.901 4.901 0 0 1-1.084-1.084c-.537-.738-.748-1.571-.844-2.461C.35 19.697.35 18.649.35 17.4v-6.802c0-1.248 0-2.296.092-3.143.096-.89.307-1.723.844-2.461A4.9 4.9 0 0 1 2.37 3.91c.738-.537 1.571-.748 2.461-.844.847-.092 1.895-.092 3.143-.092ZM5.133 5.85c-.652.071-.936.194-1.117.326a2.1 2.1 0 0 0-.465.465c-.132.181-.255.465-.325 1.117-.074.678-.076 1.573-.076 2.917v6.65c0 1.344.002 2.239.076 2.917.07.652.193.936.325 1.117a2.1 2.1 0 0 0 .465.465c.181.132.465.255 1.117.326.678.073 1.574.075 2.917.075h11.9c1.344 0 2.239-.002 2.917-.075.652-.071.936-.194 1.117-.326.179-.13.335-.286.465-.465.132-.181.255-.465.326-1.117.073-.678.075-1.573.075-2.917v-6.65c0-1.344-.002-2.239-.075-2.917-.071-.652-.194-.936-.326-1.117a2.1 2.1 0 0 0-.465-.465c-.181-.132-.465-.255-1.117-.326-.678-.073-1.573-.075-2.917-.075H8.05c-1.343 0-2.239.002-2.917.075Zm.467 7.275a3.15 3.15 0 1 1 6.3 0 3.15 3.15 0 0 1-6.3 0Zm8.75-1.75a1.4 1.4 0 0 1 1.4-1.4h3.5a1.4 1.4 0 0 1 0 2.8h-3.5a1.4 1.4 0 0 1-1.4-1.4Zm0 5.25a1.4 1.4 0 0 1 1.4-1.4H21a1.4 1.4 0 1 1 0 2.8h-5.25a1.4 1.4 0 0 1-1.4-1.4Z"
    clip-rule="evenodd"/>
</svg>`;var Yhe=Object.freeze({__proto__:null,idSvg:Zhe});const Jhe=ee`<svg fill="none" viewBox="0 0 14 15">
  <path
    fill="currentColor"
    d="M6 10.49a1 1 0 1 0 2 0v-2a1 1 0 0 0-2 0v2ZM7 4.49a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M7 14.99a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm5-7a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"
    clip-rule="evenodd"
  />
</svg>`;var Xhe=Object.freeze({__proto__:null,infoCircleSvg:Jhe});const Qhe=ee`<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.00177 1.78569C3.8179 1.78569 2.85819 2.74508 2.85819 3.92855C2.85819 4.52287 3.09928 5.05956 3.49077 5.4485L3.5005 5.45817C3.64381 5.60054 3.76515 5.72108 3.85631 5.81845C3.93747 5.90512 4.05255 6.03218 4.12889 6.1805C4.16999 6.26034 4.19 6.30843 4.21768 6.39385C4.22145 6.40546 4.22499 6.41703 4.22833 6.42855H5.77521C5.77854 6.41703 5.78208 6.40547 5.78585 6.39385C5.81353 6.30843 5.83354 6.26034 5.87464 6.1805C5.95098 6.03218 6.06606 5.90512 6.14722 5.81845C6.23839 5.72108 6.35973 5.60053 6.50304 5.45816L6.51276 5.4485C6.90425 5.05956 7.14534 4.52287 7.14534 3.92855C7.14534 2.74508 6.18563 1.78569 5.00177 1.78569ZM5.71629 7.85712H4.28724C4.28724 8.21403 4.28876 8.40985 4.30703 8.54571C4.30727 8.54748 4.30751 8.54921 4.30774 8.55091C4.30944 8.55115 4.31118 8.55138 4.31295 8.55162C4.44884 8.56989 4.64474 8.5714 5.00177 8.5714C5.3588 8.5714 5.55469 8.56989 5.69059 8.55162C5.69236 8.55138 5.69409 8.55115 5.69579 8.55091C5.69603 8.54921 5.69627 8.54748 5.6965 8.54571C5.71477 8.40985 5.71629 8.21403 5.71629 7.85712ZM2.85819 7.14283C2.85819 6.9948 2.85796 6.91114 2.8548 6.85032C2.85461 6.84656 2.85441 6.84309 2.85421 6.83988C2.84393 6.8282 2.83047 6.81334 2.81301 6.79469C2.74172 6.71856 2.63908 6.61643 2.48342 6.46178C1.83307 5.81566 1.42914 4.91859 1.42914 3.92855C1.42914 1.9561 3.02866 0.357117 5.00177 0.357117C6.97487 0.357117 8.57439 1.9561 8.57439 3.92855C8.57439 4.91859 8.17047 5.81566 7.52012 6.46178C7.36445 6.61643 7.26182 6.71856 7.19053 6.79469C7.17306 6.81334 7.1596 6.8282 7.14932 6.83988C7.14912 6.84309 7.14892 6.84656 7.14873 6.85032C7.14557 6.91114 7.14534 6.9948 7.14534 7.14283V7.85712C7.14534 7.87009 7.14535 7.88304 7.14535 7.89598C7.14541 8.19889 7.14547 8.49326 7.11281 8.73606C7.076 9.00978 6.98631 9.32212 6.72678 9.58156C6.46726 9.841 6.15481 9.93065 5.881 9.96745C5.63813 10.0001 5.34365 10 5.04064 9.99998C5.0277 9.99998 5.01474 9.99998 5.00177 9.99998C4.98879 9.99998 4.97583 9.99998 4.96289 9.99998C4.65988 10 4.36541 10.0001 4.12253 9.96745C3.84872 9.93065 3.53628 9.841 3.27675 9.58156C3.01722 9.32212 2.92753 9.00978 2.89072 8.73606C2.85807 8.49326 2.85812 8.19889 2.85818 7.89598C2.85819 7.88304 2.85819 7.87008 2.85819 7.85712V7.14283ZM7.1243 6.86977C7.12366 6.87069 7.1233 6.87116 7.12327 6.87119C7.12323 6.87123 7.12356 6.87076 7.1243 6.86977ZM2.88027 6.8712C2.88025 6.87119 2.87988 6.8707 2.87921 6.86975C2.87995 6.87072 2.88028 6.8712 2.88027 6.8712Z" fill="#949E9E"/>
</svg>`;var epe=Object.freeze({__proto__:null,lightbulbSvg:Qhe});const tpe=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.83 1.34h6.34c.68 0 1.26 0 1.73.04.5.05.97.15 1.42.4.52.3.95.72 1.24 1.24.26.45.35.92.4 1.42.04.47.04 1.05.04 1.73v3.71c0 .69 0 1.26-.04 1.74-.05.5-.14.97-.4 1.41-.3.52-.72.95-1.24 1.25-.45.25-.92.35-1.42.4-.47.03-1.05.03-1.73.03H4.83c-.68 0-1.26 0-1.73-.04-.5-.04-.97-.14-1.42-.4-.52-.29-.95-.72-1.24-1.24a3.39 3.39 0 0 1-.4-1.41A20.9 20.9 0 0 1 0 9.88v-3.7c0-.7 0-1.27.04-1.74.05-.5.14-.97.4-1.42.3-.52.72-.95 1.24-1.24.45-.25.92-.35 1.42-.4.47-.04 1.05-.04 1.73-.04ZM3.28 3.38c-.36.03-.51.08-.6.14-.21.11-.39.29-.5.5a.8.8 0 0 0-.08.19l5.16 3.44c.45.3 1.03.3 1.48 0L13.9 4.2a.79.79 0 0 0-.08-.2c-.11-.2-.29-.38-.5-.5-.09-.05-.24-.1-.6-.13-.37-.04-.86-.04-1.6-.04H4.88c-.73 0-1.22 0-1.6.04ZM14 6.54 9.85 9.31a3.33 3.33 0 0 1-3.7 0L2 6.54v3.3c0 .74 0 1.22.03 1.6.04.36.1.5.15.6.11.2.29.38.5.5.09.05.24.1.6.14.37.03.86.03 1.6.03h6.25c.73 0 1.22 0 1.6-.03.35-.03.5-.09.6-.14.2-.12.38-.3.5-.5.05-.1.1-.24.14-.6.03-.38.03-.86.03-1.6v-3.3Z"
    clip-rule="evenodd"
  />
</svg>`;var rpe=Object.freeze({__proto__:null,mailSvg:tpe});const npe=ee`<svg fill="none" viewBox="0 0 20 20">
  <path fill="currentColor" d="M10.81 5.81a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z" />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3 4.75A4.75 4.75 0 0 1 7.75 0h4.5A4.75 4.75 0 0 1 17 4.75v10.5A4.75 4.75 0 0 1 12.25 20h-4.5A4.75 4.75 0 0 1 3 15.25V4.75ZM7.75 2A2.75 2.75 0 0 0 5 4.75v10.5A2.75 2.75 0 0 0 7.75 18h4.5A2.75 2.75 0 0 0 15 15.25V4.75A2.75 2.75 0 0 0 12.25 2h-4.5Z"
    clip-rule="evenodd"
  />
</svg>`;var ipe=Object.freeze({__proto__:null,mobileSvg:npe});const spe=ee`<svg fill="none" viewBox="0 0 41 40">
  <path
    style="fill: var(--wui-color-fg-100);"
    fill-opacity=".05"
    d="M.6 20a20 20 0 1 1 40 0 20 20 0 0 1-40 0Z"
  />
  <path
    fill="#949E9E"
    d="M15.6 20.31a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM23.1 20.31a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM28.1 22.81a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"
  />
</svg>`;var ope=Object.freeze({__proto__:null,moreSvg:spe});const ape=ee`<svg fill="none" viewBox="0 0 22 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M16.32 13.62a3.14 3.14 0 1 1-.99 1.72l-1.6-.93a3.83 3.83 0 0 1-3.71 1 3.66 3.66 0 0 1-1.74-1l-1.6.94a3.14 3.14 0 1 1-1-1.73l1.6-.94a3.7 3.7 0 0 1 0-2 3.81 3.81 0 0 1 1.8-2.33c.29-.17.6-.3.92-.38V6.1a3.14 3.14 0 1 1 2 0l-.01.02v1.85H12a3.82 3.82 0 0 1 2.33 1.8 3.7 3.7 0 0 1 .39 2.91l1.6.93ZM2.6 16.54a1.14 1.14 0 0 0 1.98-1.14 1.14 1.14 0 0 0-1.98 1.14ZM11 2.01a1.14 1.14 0 1 0 0 2.28 1.14 1.14 0 0 0 0-2.28Zm1.68 10.45c.08-.19.14-.38.16-.58v-.05l.02-.13v-.13a1.92 1.92 0 0 0-.24-.8l-.11-.15a1.89 1.89 0 0 0-.74-.6 1.86 1.86 0 0 0-.77-.17h-.19a1.97 1.97 0 0 0-.89.34 1.98 1.98 0 0 0-.61.74 1.99 1.99 0 0 0-.16.9v.05a1.87 1.87 0 0 0 .24.74l.1.15c.12.16.26.3.42.42l.16.1.13.07.04.02a1.84 1.84 0 0 0 .76.17h.17a2 2 0 0 0 .91-.35 1.78 1.78 0 0 0 .52-.58l.03-.05a.84.84 0 0 0 .05-.11Zm5.15 4.5a1.14 1.14 0 0 0 1.14-1.97 1.13 1.13 0 0 0-1.55.41c-.32.55-.13 1.25.41 1.56Z"
    clip-rule="evenodd"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M4.63 9.43a1.5 1.5 0 1 0 1.5-2.6 1.5 1.5 0 0 0-1.5 2.6Zm.32-1.55a.5.5 0 0 1 .68-.19.5.5 0 0 1 .18.68.5.5 0 0 1-.68.19.5.5 0 0 1-.18-.68ZM17.94 8.88a1.5 1.5 0 1 1-2.6-1.5 1.5 1.5 0 1 1 2.6 1.5ZM16.9 7.69a.5.5 0 0 0-.68.19.5.5 0 0 0 .18.68.5.5 0 0 0 .68-.19.5.5 0 0 0-.18-.68ZM9.75 17.75a1.5 1.5 0 1 1 2.6 1.5 1.5 1.5 0 1 1-2.6-1.5Zm1.05 1.18a.5.5 0 0 0 .68-.18.5.5 0 0 0-.18-.68.5.5 0 0 0-.68.18.5.5 0 0 0 .18.68Z"
    clip-rule="evenodd"
  />
</svg>`;var cpe=Object.freeze({__proto__:null,networkPlaceholderSvg:ape});const lpe=ee`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M9.13 1h1.71c1.46 0 2.63 0 3.56.1.97.1 1.8.33 2.53.85a5 5 0 0 1 1.1 1.11c.53.73.75 1.56.86 2.53.1.93.1 2.1.1 3.55v1.72c0 1.45 0 2.62-.1 3.55-.1.97-.33 1.8-.86 2.53a5 5 0 0 1-1.1 1.1c-.73.53-1.56.75-2.53.86-.93.1-2.1.1-3.55.1H9.13c-1.45 0-2.62 0-3.56-.1-.96-.1-1.8-.33-2.52-.85a5 5 0 0 1-1.1-1.11 5.05 5.05 0 0 1-.86-2.53c-.1-.93-.1-2.1-.1-3.55V9.14c0-1.45 0-2.62.1-3.55.1-.97.33-1.8.85-2.53a5 5 0 0 1 1.1-1.1 5.05 5.05 0 0 1 2.53-.86C6.51 1 7.67 1 9.13 1ZM5.79 3.09a3.1 3.1 0 0 0-1.57.48 3 3 0 0 0-.66.67c-.24.32-.4.77-.48 1.56-.1.82-.1 1.88-.1 3.4v1.6c0 1.15 0 2.04.05 2.76l.41-.42c.5-.5.93-.92 1.32-1.24.41-.33.86-.6 1.43-.7a3 3 0 0 1 .94 0c.35.06.66.2.95.37a17.11 17.11 0 0 0 .8.45c.1-.08.2-.2.41-.4l.04-.03a27 27 0 0 1 1.95-1.84 4.03 4.03 0 0 1 1.91-.94 4 4 0 0 1 1.25 0c.73.11 1.33.46 1.91.94l.64.55V9.2c0-1.52 0-2.58-.1-3.4a3.1 3.1 0 0 0-.48-1.56 3 3 0 0 0-.66-.67 3.1 3.1 0 0 0-1.56-.48C13.37 3 12.3 3 10.79 3h-1.6c-1.52 0-2.59 0-3.4.09Zm11.18 10-.04-.05a26.24 26.24 0 0 0-1.83-1.74c-.45-.36-.73-.48-.97-.52a2 2 0 0 0-.63 0c-.24.04-.51.16-.97.52-.46.38-1.01.93-1.83 1.74l-.02.02c-.17.18-.34.34-.49.47a2.04 2.04 0 0 1-1.08.5 1.97 1.97 0 0 1-1.25-.27l-.79-.46-.02-.02a.65.65 0 0 0-.24-.1 1 1 0 0 0-.31 0c-.08.02-.21.06-.49.28-.3.24-.65.59-1.2 1.14l-.56.56-.65.66a3 3 0 0 0 .62.6c.33.24.77.4 1.57.49.81.09 1.88.09 3.4.09h1.6c1.52 0 2.58 0 3.4-.09a3.1 3.1 0 0 0 1.56-.48 3 3 0 0 0 .66-.67c.24-.32.4-.77.49-1.56l.07-1.12Zm-8.02-1.03ZM4.99 7a2 2 0 1 1 4 0 2 2 0 0 1-4 0Z"
    clip-rule="evenodd"
  />
</svg>`;var upe=Object.freeze({__proto__:null,nftPlaceholderSvg:lpe});const dpe=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M8 0a1 1 0 0 1 1 1v5.38a1 1 0 0 1-2 0V1a1 1 0 0 1 1-1ZM5.26 2.6a1 1 0 0 1-.28 1.39 5.46 5.46 0 1 0 6.04 0 1 1 0 1 1 1.1-1.67 7.46 7.46 0 1 1-8.25 0 1 1 0 0 1 1.4.28Z"
    clip-rule="evenodd"
  />
</svg>`;var hpe=Object.freeze({__proto__:null,offSvg:dpe});const ppe=ee` <svg
  width="36"
  height="36"
  fill="none"
>
  <path
    d="M0 8a8 8 0 0 1 8-8h20a8 8 0 0 1 8 8v20a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V8Z"
    fill="#fff"
    fill-opacity=".05"
  />
  <path
    d="m18.262 17.513-8.944 9.49v.01a2.417 2.417 0 0 0 3.56 1.452l.026-.017 10.061-5.803-4.703-5.132Z"
    fill="#EA4335"
  />
  <path
    d="m27.307 15.9-.008-.008-4.342-2.52-4.896 4.36 4.913 4.912 4.325-2.494a2.42 2.42 0 0 0 .008-4.25Z"
    fill="#FBBC04"
  />
  <path
    d="M9.318 8.997c-.05.202-.084.403-.084.622V26.39c0 .218.025.42.084.621l9.246-9.247-9.246-8.768Z"
    fill="#4285F4"
  />
  <path
    d="m18.33 18 4.627-4.628-10.053-5.828a2.427 2.427 0 0 0-3.586 1.444L18.329 18Z"
    fill="#34A853"
  />
  <path
    d="M8 .5h20A7.5 7.5 0 0 1 35.5 8v20a7.5 7.5 0 0 1-7.5 7.5H8A7.5 7.5 0 0 1 .5 28V8A7.5 7.5 0 0 1 8 .5Z"
    stroke="#fff"
    stroke-opacity=".05"
  />
</svg>`;var fpe=Object.freeze({__proto__:null,playStoreSvg:ppe});const gpe=ee`<svg
  width="13"
  height="12"
  viewBox="0 0 13 12"
  fill="none"
>
  <path
    fill="currentColor"
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M0.794373 5.99982C0.794373 5.52643 1.17812 5.14268 1.6515 5.14268H5.643V1.15109C5.643 0.677701 6.02675 0.293946 6.50012 0.293945C6.9735 0.293946 7.35725 0.677701 7.35725 1.15109V5.14268H11.3488C11.8221 5.14268 12.2059 5.52643 12.2059 5.99982C12.2059 6.47321 11.8221 6.85696 11.3488 6.85696H7.35725V10.8486C7.35725 11.3219 6.9735 11.7057 6.50012 11.7057C6.02675 11.7057 5.643 11.3219 5.643 10.8486V6.85696H1.6515C1.17812 6.85696 0.794373 6.47321 0.794373 5.99982Z"
  /></svg
>`;var wpe=Object.freeze({__proto__:null,plusSvg:gpe});const mpe=ee`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    d="M3 6a3 3 0 0 1 3-3h1a1 1 0 1 0 0-2H6a5 5 0 0 0-5 5v1a1 1 0 0 0 2 0V6ZM13 1a1 1 0 1 0 0 2h1a3 3 0 0 1 3 3v1a1 1 0 1 0 2 0V6a5 5 0 0 0-5-5h-1ZM3 13a1 1 0 1 0-2 0v1a5 5 0 0 0 5 5h1a1 1 0 1 0 0-2H6a3 3 0 0 1-3-3v-1ZM19 13a1 1 0 1 0-2 0v1a3 3 0 0 1-3 3h-1a1 1 0 1 0 0 2h1.01a5 5 0 0 0 5-5v-1ZM5.3 6.36c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05A1.5 1.5 0 0 0 9.2 8.14c.06-.2.06-.43.06-.89s0-.7-.06-.89A1.5 1.5 0 0 0 8.14 5.3c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06ZM10.8 6.36c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05a1.5 1.5 0 0 0 1.06-1.06c.06-.2.06-.43.06-.89s0-.7-.06-.89a1.5 1.5 0 0 0-1.06-1.06c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06ZM5.26 12.75c0-.46 0-.7.05-.89a1.5 1.5 0 0 1 1.06-1.06c.19-.05.42-.05.89-.05.46 0 .7 0 .88.05.52.14.93.54 1.06 1.06.06.2.06.43.06.89s0 .7-.06.89a1.5 1.5 0 0 1-1.06 1.06c-.19.05-.42.05-.88.05-.47 0-.7 0-.9-.05a1.5 1.5 0 0 1-1.05-1.06c-.05-.2-.05-.43-.05-.89ZM10.8 11.86c-.04.2-.04.43-.04.89s0 .7.05.89c.14.52.54.92 1.06 1.06.19.05.42.05.89.05.46 0 .7 0 .88-.05a1.5 1.5 0 0 0 1.06-1.06c.06-.2.06-.43.06-.89s0-.7-.06-.89a1.5 1.5 0 0 0-1.06-1.06c-.19-.05-.42-.05-.88-.05-.47 0-.7 0-.9.05a1.5 1.5 0 0 0-1.05 1.06Z"
  />
</svg>`;var bpe=Object.freeze({__proto__:null,qrCodeIcon:mpe});const ype=ee`<svg
  fill="none"
  viewBox="0 0 21 20"
>
  <path
    fill="currentColor"
    d="M8.8071 0.292893C9.19763 0.683417 9.19763 1.31658 8.8071 1.70711L6.91421 3.6H11.8404C14.3368 3.6 16.5533 5.1975 17.3427 7.56588L17.4487 7.88377C17.6233 8.40772 17.3402 8.97404 16.8162 9.14868C16.2923 9.32333 15.726 9.04017 15.5513 8.51623L15.4453 8.19834C14.9281 6.64664 13.476 5.6 11.8404 5.6H6.91421L8.8071 7.49289C9.19763 7.88342 9.19763 8.51658 8.8071 8.90711C8.41658 9.29763 7.78341 9.29763 7.39289 8.90711L3.79289 5.30711C3.40236 4.91658 3.40236 4.28342 3.79289 3.89289L7.39289 0.292893C7.78341 -0.0976311 8.41658 -0.0976311 8.8071 0.292893ZM4.18377 10.8513C4.70771 10.6767 5.27403 10.9598 5.44868 11.4838L5.55464 11.8017C6.07188 13.3534 7.52401 14.4 9.15964 14.4L14.0858 14.4L12.1929 12.5071C11.8024 12.1166 11.8024 11.4834 12.1929 11.0929C12.5834 10.7024 13.2166 10.7024 13.6071 11.0929L17.2071 14.6929C17.5976 15.0834 17.5976 15.7166 17.2071 16.1071L13.6071 19.7071C13.2166 20.0976 12.5834 20.0976 12.1929 19.7071C11.8024 19.3166 11.8024 18.6834 12.1929 18.2929L14.0858 16.4L9.15964 16.4C6.66314 16.4 4.44674 14.8025 3.65728 12.4341L3.55131 12.1162C3.37667 11.5923 3.65983 11.026 4.18377 10.8513Z"
  /></svg
>`;var vpe=Object.freeze({__proto__:null,recycleHorizontalSvg:ype});const Epe=ee`<svg fill="none" viewBox="0 0 14 16">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.94 1.04a1 1 0 0 1 .7 1.23l-.48 1.68a5.85 5.85 0 0 1 8.53 4.32 5.86 5.86 0 0 1-11.4 2.56 1 1 0 0 1 1.9-.57 3.86 3.86 0 1 0 1.83-4.5l1.87.53a1 1 0 0 1-.55 1.92l-4.1-1.15a1 1 0 0 1-.69-1.23l1.16-4.1a1 1 0 0 1 1.23-.7Z"
    clip-rule="evenodd"
  />
</svg>`;var Cpe=Object.freeze({__proto__:null,refreshSvg:Epe});const xpe=ee`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M9.36 4.21a5.14 5.14 0 1 0 0 10.29 5.14 5.14 0 0 0 0-10.29ZM1.64 9.36a7.71 7.71 0 1 1 14 4.47l2.52 2.5a1.29 1.29 0 1 1-1.82 1.83l-2.51-2.51A7.71 7.71 0 0 1 1.65 9.36Z"
    clip-rule="evenodd"
  />
</svg>`;var $pe=Object.freeze({__proto__:null,searchSvg:xpe});const _pe=ee`<svg fill="none" viewBox="0 0 21 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M14.3808 4.34812C13.72 4.47798 12.8501 4.7587 11.5748 5.17296L9.00869 6.00646C6.90631 6.68935 5.40679 7.17779 4.38121 7.63178C3.87166 7.85734 3.5351 8.05091 3.32022 8.22035C3.11183 8.38466 3.07011 8.48486 3.05969 8.51817C2.98058 8.77103 2.98009 9.04195 3.05831 9.29509C3.06861 9.32844 3.10998 9.42878 3.31777 9.59384C3.53205 9.76404 3.86792 9.95881 4.37667 10.1862C5.29287 10.5957 6.58844 11.0341 8.35529 11.6164L10.8876 8.59854C11.2426 8.17547 11.8733 8.12028 12.2964 8.47528C12.7195 8.83029 12.7746 9.46104 12.4196 9.88412L9.88738 12.9019C10.7676 14.5408 11.4244 15.7406 11.9867 16.5718C12.299 17.0333 12.5491 17.3303 12.7539 17.5117C12.9526 17.6877 13.0586 17.711 13.0932 17.7154C13.3561 17.7484 13.6228 17.7009 13.8581 17.5791C13.8891 17.563 13.9805 17.5046 14.1061 17.2708C14.2357 17.0298 14.3679 16.6647 14.5015 16.1237C14.7705 15.0349 14.9912 13.4733 15.2986 11.2843L15.6738 8.61249C15.8603 7.28456 15.9857 6.37917 15.9989 5.7059C16.012 5.03702 15.9047 4.8056 15.8145 4.69183C15.7044 4.55297 15.5673 4.43792 15.4114 4.35365C15.2837 4.28459 15.0372 4.2191 14.3808 4.34812ZM7.99373 13.603C6.11919 12.9864 4.6304 12.4902 3.5606 12.0121C2.98683 11.7557 2.4778 11.4808 2.07383 11.1599C1.66337 10.8339 1.31312 10.4217 1.14744 9.88551C0.949667 9.24541 0.950886 8.56035 1.15094 7.92096C1.31852 7.38534 1.67024 6.97442 2.08185 6.64985C2.48697 6.33041 2.99697 6.05734 3.57166 5.80295C4.70309 5.3021 6.30179 4.78283 8.32903 4.12437L11.0196 3.25042C12.2166 2.86159 13.2017 2.54158 13.9951 2.38566C14.8065 2.22618 15.6202 2.19289 16.3627 2.59437C16.7568 2.80747 17.1035 3.09839 17.3818 3.4495C17.9062 4.111 18.0147 4.91815 17.9985 5.74496C17.9827 6.55332 17.8386 7.57903 17.6636 8.82534L17.2701 11.6268C16.9737 13.7376 16.7399 15.4022 16.4432 16.6034C16.2924 17.2135 16.1121 17.7632 15.8678 18.2176C15.6197 18.6794 15.2761 19.0971 14.7777 19.3551C14.1827 19.6632 13.5083 19.7833 12.8436 19.6997C12.2867 19.6297 11.82 19.3563 11.4277 19.0087C11.0415 18.6666 10.6824 18.213 10.3302 17.6925C9.67361 16.722 8.92648 15.342 7.99373 13.603Z"
    clip-rule="evenodd"
  />
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="21"
    height="20"
    viewBox="0 0 21 20"
    fill="none"
  ></svg></svg
>`;var Ipe=Object.freeze({__proto__:null,sendSvg:_pe});const Spe=ee`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M6.76.3a1 1 0 0 1 0 1.4L4.07 4.4h9a1 1 0 1 1 0 2h-9l2.69 2.68a1 1 0 1 1-1.42 1.42L.95 6.09a1 1 0 0 1 0-1.4l4.4-4.4a1 1 0 0 1 1.4 0Zm6.49 9.21a1 1 0 0 1 1.41 0l4.39 4.4a1 1 0 0 1 0 1.4l-4.39 4.4a1 1 0 0 1-1.41-1.42l2.68-2.68h-9a1 1 0 0 1 0-2h9l-2.68-2.68a1 1 0 0 1 0-1.42Z"
    clip-rule="evenodd"
  />
</svg>`;var Ape=Object.freeze({__proto__:null,swapHorizontalSvg:Spe});const Ppe=ee`<svg
  width="14"
  height="14"
  viewBox="0 0 14 14"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M13.7306 3.24213C14.0725 3.58384 14.0725 4.13786 13.7306 4.47957L10.7418 7.46737C10.4 7.80908 9.84581 7.80908 9.50399 7.46737C9.16216 7.12567 9.16216 6.57165 9.50399 6.22994L10.9986 4.73585H5.34082C4.85741 4.73585 4.46553 4.3441 4.46553 3.86085C4.46553 3.3776 4.85741 2.98585 5.34082 2.98585L10.9986 2.98585L9.50399 1.49177C9.16216 1.15006 9.16216 0.596037 9.50399 0.254328C9.84581 -0.0873803 10.4 -0.0873803 10.7418 0.254328L13.7306 3.24213ZM9.52515 10.1352C9.52515 10.6185 9.13327 11.0102 8.64986 11.0102L2.9921 11.0102L4.48669 12.5043C4.82852 12.846 4.82852 13.4001 4.48669 13.7418C4.14487 14.0835 3.59066 14.0835 3.24884 13.7418L0.26003 10.754C0.0958806 10.5899 0.0036621 10.3673 0.00366211 10.1352C0.00366212 9.90318 0.0958806 9.68062 0.26003 9.51652L3.24884 6.52872C3.59066 6.18701 4.14487 6.18701 4.48669 6.52872C4.82851 6.87043 4.82851 7.42445 4.48669 7.76616L2.9921 9.26024L8.64986 9.26024C9.13327 9.26024 9.52515 9.65199 9.52515 10.1352Z"
    fill="currentColor"
  />
</svg>

`;var Ope=Object.freeze({__proto__:null,swapHorizontalMediumSvg:Ppe});const Npe=ee`<svg width="10" height="10" viewBox="0 0 10 10">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.77986 0.566631C4.0589 0.845577 4.0589 1.29784 3.77986 1.57678L3.08261 2.2738H6.34184C6.73647 2.2738 7.05637 2.5936 7.05637 2.98808C7.05637 3.38257 6.73647 3.70237 6.34184 3.70237H3.08261L3.77986 4.39938C4.0589 4.67833 4.0589 5.13059 3.77986 5.40954C3.50082 5.68848 3.04841 5.68848 2.76937 5.40954L0.852346 3.49316C0.573306 3.21421 0.573306 2.76195 0.852346 2.48301L2.76937 0.566631C3.04841 0.287685 3.50082 0.287685 3.77986 0.566631ZM6.22 4.59102C6.49904 4.31208 6.95145 4.31208 7.23049 4.59102L9.14751 6.5074C9.42655 6.78634 9.42655 7.23861 9.14751 7.51755L7.23049 9.43393C6.95145 9.71287 6.49904 9.71287 6.22 9.43393C5.94096 9.15498 5.94096 8.70272 6.22 8.42377L6.91725 7.72676L3.65802 7.72676C3.26339 7.72676 2.94349 7.40696 2.94349 7.01247C2.94349 6.61798 3.26339 6.29819 3.65802 6.29819L6.91725 6.29819L6.22 5.60117C5.94096 5.32223 5.94096 4.86997 6.22 4.59102Z"
    clip-rule="evenodd"
  />
</svg>`;var Tpe=Object.freeze({__proto__:null,swapHorizontalBoldSvg:Npe});const kpe=ee`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
  <path 
    fill="currentColor"
    fill-rule="evenodd" 
    clip-rule="evenodd" 
    d="M8.3071 0.292893C8.69763 0.683417 8.69763 1.31658 8.3071 1.70711L6.41421 3.6H11.3404C13.8368 3.6 16.0533 5.1975 16.8427 7.56588L16.9487 7.88377C17.1233 8.40772 16.8402 8.97404 16.3162 9.14868C15.7923 9.32333 15.226 9.04017 15.0513 8.51623L14.9453 8.19834C14.4281 6.64664 12.976 5.6 11.3404 5.6H6.41421L8.3071 7.49289C8.69763 7.88342 8.69763 8.51658 8.3071 8.90711C7.91658 9.29763 7.28341 9.29763 6.89289 8.90711L3.29289 5.30711C2.90236 4.91658 2.90236 4.28342 3.29289 3.89289L6.89289 0.292893C7.28341 -0.0976311 7.91658 -0.0976311 8.3071 0.292893ZM3.68377 10.8513C4.20771 10.6767 4.77403 10.9598 4.94868 11.4838L5.05464 11.8017C5.57188 13.3534 7.024 14.4 8.65964 14.4L13.5858 14.4L11.6929 12.5071C11.3024 12.1166 11.3024 11.4834 11.6929 11.0929C12.0834 10.7024 12.7166 10.7024 13.1071 11.0929L16.7071 14.6929C17.0976 15.0834 17.0976 15.7166 16.7071 16.1071L13.1071 19.7071C12.7166 20.0976 12.0834 20.0976 11.6929 19.7071C11.3024 19.3166 11.3024 18.6834 11.6929 18.2929L13.5858 16.4L8.65964 16.4C6.16314 16.4 3.94674 14.8025 3.15728 12.4341L3.05131 12.1162C2.87667 11.5923 3.15983 11.026 3.68377 10.8513Z" 
  />
</svg>`;var Rpe=Object.freeze({__proto__:null,swapHorizontalRoundedBoldSvg:kpe});const Dpe=ee`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M3.48 2.18a1 1 0 0 1 1.41 0l2.68 2.68a1 1 0 1 1-1.41 1.42l-.98-.98v4.56a1 1 0 0 1-2 0V5.3l-.97.98A1 1 0 0 1 .79 4.86l2.69-2.68Zm6.34 2.93a1 1 0 0 1 1 1v4.56l.97-.98a1 1 0 1 1 1.42 1.42l-2.69 2.68a1 1 0 0 1-1.41 0l-2.68-2.68a1 1 0 0 1 1.41-1.42l.98.98V6.1a1 1 0 0 1 1-1Z"
    clip-rule="evenodd"
  />
</svg>`;var Bpe=Object.freeze({__proto__:null,swapVerticalSvg:Dpe});const Upe=ee`<svg width="32" height="32" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <g clip-path="url(#a)">
    <path fill="url(#b)" d="M0 0h32v32H0z"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.034 15.252c4.975-2.167 8.293-3.596 9.953-4.287 4.74-1.971 5.725-2.314 6.366-2.325.142-.002.457.033.662.198.172.14.22.33.243.463.022.132.05.435.028.671-.257 2.7-1.368 9.248-1.933 12.27-.24 1.28-.71 1.708-1.167 1.75-.99.091-1.743-.655-2.703-1.284-1.502-.985-2.351-1.598-3.81-2.558-1.684-1.11-.592-1.721.368-2.718.252-.261 4.619-4.233 4.703-4.594.01-.045.02-.213-.08-.301-.1-.09-.246-.059-.353-.035-.15.034-2.55 1.62-7.198 4.758-.682.468-1.298.696-1.851.684-.61-.013-1.782-.344-2.653-.628-1.069-.347-1.918-.53-1.845-1.12.039-.308.462-.623 1.27-.944Z" fill="#fff"/>
  </g>
  <path d="M.5 16C.5 7.44 7.44.5 16 .5 24.56.5 31.5 7.44 31.5 16c0 8.56-6.94 15.5-15.5 15.5C7.44 31.5.5 24.56.5 16Z" stroke="#141414" stroke-opacity=".05"/>
  <defs>
    <linearGradient id="b" x1="1600" y1="0" x2="1600" y2="3176.27" gradientUnits="userSpaceOnUse">
      <stop stop-color="#2AABEE"/>
      <stop offset="1" stop-color="#229ED9"/>
    </linearGradient>
    <clipPath id="a">
      <path d="M0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16S0 24.837 0 16Z" fill="#fff"/>
    </clipPath>
  </defs>
</svg>`;var Lpe=Object.freeze({__proto__:null,telegramSvg:Upe});const Fpe=ee`<svg width="14" height="15" viewBox="0 0 14 15" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M7 3.71875C6.0335 3.71875 5.25 2.93525 5.25 1.96875C5.25 1.00225 6.0335 0.21875 7 0.21875C7.9665 0.21875 8.75 1.00225 8.75 1.96875C8.75 2.93525 7.9665 3.71875 7 3.71875Z" fill="#949E9E"/>
  <path d="M7 8.96875C6.0335 8.96875 5.25 8.18525 5.25 7.21875C5.25 6.25225 6.0335 5.46875 7 5.46875C7.9665 5.46875 8.75 6.25225 8.75 7.21875C8.75 8.18525 7.9665 8.96875 7 8.96875Z" fill="#949E9E"/>
  <path d="M5.25 12.4688C5.25 13.4352 6.0335 14.2187 7 14.2187C7.9665 14.2187 8.75 13.4352 8.75 12.4688C8.75 11.5023 7.9665 10.7188 7 10.7188C6.0335 10.7188 5.25 11.5023 5.25 12.4688Z" fill="#949E9E"/>
</svg>`;var Mpe=Object.freeze({__proto__:null,threeDotsSvg:Fpe});const jpe=ee`<svg fill="none" viewBox="0 0 40 40">
  <g clip-path="url(#a)">
    <g clip-path="url(#b)">
      <circle cx="20" cy="19.89" r="20" fill="#5A3E85" />
      <g clip-path="url(#c)">
        <path
          fill="#fff"
          d="M18.22 25.7 20 23.91h3.34l2.1-2.1v-6.68H15.4v8.78h2.82v1.77Zm3.87-8.16h1.25v3.66H22.1v-3.66Zm-3.34 0H20v3.66h-1.25v-3.66ZM20 7.9a12 12 0 1 0 0 24 12 12 0 0 0 0-24Zm6.69 14.56-3.66 3.66h-2.72l-1.77 1.78h-1.88V26.1H13.3v-9.82l.94-2.4H26.7v8.56Z"
        />
      </g>
    </g>
  </g>
  <defs>
    <clipPath id="a"><rect width="40" height="40" fill="#fff" rx="20" /></clipPath>
    <clipPath id="b"><path fill="#fff" d="M0 0h40v40H0z" /></clipPath>
    <clipPath id="c"><path fill="#fff" d="M8 7.89h24v24H8z" /></clipPath>
  </defs>
</svg>`;var zpe=Object.freeze({__proto__:null,twitchSvg:jpe});const qpe=ee`<svg fill="none" viewBox="0 0 41 40">
  <g clip-path="url(#a)">
    <path fill="#000" d="M.8 0h40v40H.8z" />
    <path
      fill="#fff"
      d="m22.63 18.46 7.14-8.3h-1.69l-6.2 7.2-4.96-7.2H11.2l7.5 10.9-7.5 8.71h1.7l6.55-7.61 5.23 7.61h5.72l-7.77-11.31Zm-9.13-7.03h2.6l11.98 17.13h-2.6L13.5 11.43Z"
    />
  </g>
  <defs>
    <clipPath id="a"><path fill="#fff" d="M.8 20a20 20 0 1 1 40 0 20 20 0 0 1-40 0Z" /></clipPath>
  </defs>
</svg>`;var L_=Object.freeze({__proto__:null,xSvg:qpe});const Hpe=ee`<svg fill="none" viewBox="0 0 16 16">
  <path
    fill="currentColor"
    d="m14.36 4.74.01.42c0 4.34-3.3 9.34-9.34 9.34A9.3 9.3 0 0 1 0 13.03a6.6 6.6 0 0 0 4.86-1.36 3.29 3.29 0 0 1-3.07-2.28c.5.1 1 .07 1.48-.06A3.28 3.28 0 0 1 .64 6.11v-.04c.46.26.97.4 1.49.41A3.29 3.29 0 0 1 1.11 2.1a9.32 9.32 0 0 0 6.77 3.43 3.28 3.28 0 0 1 5.6-3 6.59 6.59 0 0 0 2.08-.8 3.3 3.3 0 0 1-1.45 1.82A6.53 6.53 0 0 0 16 3.04c-.44.66-1 1.23-1.64 1.7Z"
  />
</svg>`;var Wpe=Object.freeze({__proto__:null,twitterIconSvg:Hpe});const Vpe=ee`<svg fill="none" viewBox="0 0 28 28">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M18.1 4.76c-.42-.73-1.33-1.01-2.09-.66l-1.42.66c-.37.18-.8.18-1.18 0l-1.4-.65a1.63 1.63 0 0 0-2.1.66l-.84 1.45c-.2.34-.53.59-.92.67l-1.7.35c-.83.17-1.39.94-1.3 1.78l.19 1.56c.04.39-.08.78-.33 1.07l-1.12 1.3c-.52.6-.52 1.5 0 2.11L5 16.38c.25.3.37.68.33 1.06l-.18 1.57c-.1.83.46 1.6 1.28 1.78l1.7.35c.4.08.73.32.93.66l.84 1.43a1.63 1.63 0 0 0 2.09.66l1.41-.66c.37-.17.8-.17 1.18 0l1.43.67c.76.35 1.66.07 2.08-.65l.86-1.45c.2-.34.54-.58.92-.66l1.68-.35A1.63 1.63 0 0 0 22.84 19l-.18-1.57a1.4 1.4 0 0 1 .33-1.06l1.12-1.32c.52-.6.52-1.5 0-2.11l-1.12-1.3a1.4 1.4 0 0 1-.33-1.07l.18-1.57c.1-.83-.46-1.6-1.28-1.77l-1.68-.35a1.4 1.4 0 0 1-.92-.66l-.86-1.47Zm-3.27-3.2a4.43 4.43 0 0 1 5.69 1.78l.54.93 1.07.22a4.43 4.43 0 0 1 3.5 4.84l-.11.96.7.83a4.43 4.43 0 0 1 .02 5.76l-.72.85.1.96a4.43 4.43 0 0 1-3.5 4.84l-1.06.22-.54.92a4.43 4.43 0 0 1-5.68 1.77l-.84-.4-.82.39a4.43 4.43 0 0 1-5.7-1.79l-.51-.89-1.09-.22a4.43 4.43 0 0 1-3.5-4.84l.1-.96-.72-.85a4.43 4.43 0 0 1 .01-5.76l.71-.83-.1-.95a4.43 4.43 0 0 1 3.5-4.84l1.08-.23.53-.9a4.43 4.43 0 0 1 5.7-1.8l.81.38.83-.39ZM18.2 9.4c.65.42.84 1.28.42 1.93l-4.4 6.87a1.4 1.4 0 0 1-2.26.14L9.5 15.39a1.4 1.4 0 0 1 2.15-1.8l1.23 1.48 3.38-5.26a1.4 1.4 0 0 1 1.93-.42Z"
    clip-rule="evenodd"
  />
</svg>`;var Kpe=Object.freeze({__proto__:null,verifySvg:Vpe});const Gpe=ee`<svg fill="none" viewBox="0 0 14 14">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="m4.1 12.43-.45-.78-.93-.2a1.65 1.65 0 0 1-1.31-1.8l.1-.86-.61-.71a1.65 1.65 0 0 1 0-2.16l.6-.7-.09-.85c-.1-.86.47-1.64 1.3-1.81l.94-.2.45-.78A1.65 1.65 0 0 1 6.23.9l.77.36.78-.36c.77-.36 1.69-.07 2.12.66l.47.8.91.2c.84.17 1.4.95 1.31 1.8l-.1.86.6.7c.54.62.54 1.54.01 2.16l-.6.71.09.86c.1.85-.47 1.63-1.3 1.8l-.92.2-.47.79a1.65 1.65 0 0 1-2.12.66L7 12.74l-.77.36c-.78.35-1.7.07-2.13-.67Zm5.74-6.9a1 1 0 1 0-1.68-1.07L6.32 7.3l-.55-.66a1 1 0 0 0-1.54 1.28l1.43 1.71a1 1 0 0 0 1.61-.1l2.57-4Z"
    clip-rule="evenodd"
  />
</svg>`;var Zpe=Object.freeze({__proto__:null,verifyFilledSvg:Gpe});const Ype=ee`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M0 5.5c0-1.8 1.46-3.25 3.25-3.25H14.5c1.8 0 3.25 1.46 3.25 3.25v.28A3.25 3.25 0 0 1 20 8.88v2.24c0 1.45-.94 2.68-2.25 3.1v.28c0 1.8-1.46 3.25-3.25 3.25H3.25A3.25 3.25 0 0 1 0 14.5v-9Zm15.75 8.88h-2.38a4.38 4.38 0 0 1 0-8.76h2.38V5.5c0-.69-.56-1.25-1.25-1.25H3.25C2.56 4.25 2 4.81 2 5.5v9c0 .69.56 1.25 1.25 1.25H14.5c.69 0 1.25-.56 1.25-1.25v-.13Zm-2.38-6.76a2.37 2.37 0 1 0 0 4.75h3.38c.69 0 1.25-.55 1.25-1.24V8.87c0-.69-.56-1.24-1.25-1.24h-3.38Z"
    clip-rule="evenodd"
  />
</svg>`;var Jpe=Object.freeze({__proto__:null,walletSvg:Ype});const Xpe=ee`<svg fill="none" viewBox="0 0 96 67">
  <path
    fill="currentColor"
    d="M25.32 18.8a32.56 32.56 0 0 1 45.36 0l1.5 1.47c.63.62.63 1.61 0 2.22l-5.15 5.05c-.31.3-.82.3-1.14 0l-2.07-2.03a22.71 22.71 0 0 0-31.64 0l-2.22 2.18c-.31.3-.82.3-1.14 0l-5.15-5.05a1.55 1.55 0 0 1 0-2.22l1.65-1.62Zm56.02 10.44 4.59 4.5c.63.6.63 1.6 0 2.21l-20.7 20.26c-.62.61-1.63.61-2.26 0L48.28 41.83a.4.4 0 0 0-.56 0L33.03 56.21c-.63.61-1.64.61-2.27 0L10.07 35.95a1.55 1.55 0 0 1 0-2.22l4.59-4.5a1.63 1.63 0 0 1 2.27 0L31.6 43.63a.4.4 0 0 0 .57 0l14.69-14.38a1.63 1.63 0 0 1 2.26 0l14.69 14.38a.4.4 0 0 0 .57 0l14.68-14.38a1.63 1.63 0 0 1 2.27 0Z"
  />
  <path
    stroke="#000"
    stroke-opacity=".1"
    d="M25.67 19.15a32.06 32.06 0 0 1 44.66 0l1.5 1.48c.43.42.43 1.09 0 1.5l-5.15 5.05a.31.31 0 0 1-.44 0l-2.07-2.03a23.21 23.21 0 0 0-32.34 0l-2.22 2.18a.31.31 0 0 1-.44 0l-5.15-5.05a1.05 1.05 0 0 1 0-1.5l1.65-1.63ZM81 29.6l4.6 4.5c.42.41.42 1.09 0 1.5l-20.7 20.26c-.43.43-1.14.43-1.57 0L48.63 41.47a.9.9 0 0 0-1.26 0L32.68 55.85c-.43.43-1.14.43-1.57 0L10.42 35.6a1.05 1.05 0 0 1 0-1.5l4.59-4.5a1.13 1.13 0 0 1 1.57 0l14.68 14.38a.9.9 0 0 0 1.27 0l-.35-.35.35.35L47.22 29.6a1.13 1.13 0 0 1 1.56 0l14.7 14.38a.9.9 0 0 0 1.26 0L79.42 29.6a1.13 1.13 0 0 1 1.57 0Z"
  />
</svg>`,Qpe=ee`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_22274_4692)">
<path d="M0 6.64C0 4.17295 0 2.93942 0.525474 2.01817C0.880399 1.39592 1.39592 0.880399 2.01817 0.525474C2.93942 0 4.17295 0 6.64 0H9.36C11.8271 0 13.0606 0 13.9818 0.525474C14.6041 0.880399 15.1196 1.39592 15.4745 2.01817C16 2.93942 16 4.17295 16 6.64V9.36C16 11.8271 16 13.0606 15.4745 13.9818C15.1196 14.6041 14.6041 15.1196 13.9818 15.4745C13.0606 16 11.8271 16 9.36 16H6.64C4.17295 16 2.93942 16 2.01817 15.4745C1.39592 15.1196 0.880399 14.6041 0.525474 13.9818C0 13.0606 0 11.8271 0 9.36V6.64Z" fill="#C7B994"/>
<path d="M4.49038 5.76609C6.42869 3.86833 9.5713 3.86833 11.5096 5.76609L11.7429 5.99449C11.8398 6.08938 11.8398 6.24323 11.7429 6.33811L10.9449 7.11942C10.8964 7.16686 10.8179 7.16686 10.7694 7.11942L10.4484 6.80512C9.09617 5.48119 6.90381 5.48119 5.5516 6.80512L5.20782 7.14171C5.15936 7.18915 5.08079 7.18915 5.03234 7.14171L4.23434 6.3604C4.13742 6.26552 4.13742 6.11167 4.23434 6.01678L4.49038 5.76609ZM13.1599 7.38192L13.8702 8.07729C13.9671 8.17217 13.9671 8.32602 13.8702 8.4209L10.6677 11.5564C10.5708 11.6513 10.4137 11.6513 10.3168 11.5564L8.04388 9.33105C8.01965 9.30733 7.98037 9.30733 7.95614 9.33105L5.6833 11.5564C5.58638 11.6513 5.42925 11.6513 5.33234 11.5564L2.12982 8.42087C2.0329 8.32598 2.0329 8.17213 2.12982 8.07724L2.84004 7.38188C2.93695 7.28699 3.09408 7.28699 3.191 7.38188L5.46392 9.60726C5.48815 9.63098 5.52743 9.63098 5.55166 9.60726L7.82447 7.38188C7.92138 7.28699 8.07851 7.28699 8.17543 7.38187L10.4484 9.60726C10.4726 9.63098 10.5119 9.63098 10.5361 9.60726L12.809 7.38192C12.9059 7.28703 13.063 7.28703 13.1599 7.38192Z" fill="#202020"/>
</g>
<defs>
<clipPath id="clip0_22274_4692">
<path d="M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z" fill="white"/>
</clipPath>
</defs>
</svg>
`,efe=ee`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="11" cy="11" r="11" transform="matrix(-1 0 0 1 23 1)" fill="#202020"/>
<circle cx="11" cy="11" r="11.5" transform="matrix(-1 0 0 1 23 1)" stroke="#C7B994" stroke-opacity="0.7"/>
<path d="M15.4523 11.0686L16.7472 9.78167C13.8205 6.87297 10.1838 6.87297 7.25708 9.78167L8.55201 11.0686C10.7779 8.85645 13.2279 8.85645 15.4538 11.0686H15.4523Z" fill="#C7B994"/>
<path d="M15.0199 14.067L12 11.0656L8.98 14.067L5.96004 11.0656L4.66663 12.3511L8.98 16.6393L12 13.638L15.0199 16.6393L19.3333 12.3511L18.0399 11.0656L15.0199 14.067Z" fill="#C7B994"/>
</svg>
`;var u2=Object.freeze({__proto__:null,walletConnectSvg:Xpe,walletConnectLightBrownSvg:Qpe,walletConnectBrownSvg:efe});const tfe=ee`
  <svg fill="none" viewBox="0 0 48 44">
    <path
      style="fill: var(--wui-color-bg-300);"
      d="M4.56 8.64c-1.23 1.68-1.23 4.08-1.23 8.88v8.96c0 4.8 0 7.2 1.23 8.88.39.55.87 1.02 1.41 1.42C7.65 38 10.05 38 14.85 38h14.3c4.8 0 7.2 0 8.88-1.22a6.4 6.4 0 0 0 1.41-1.42c.83-1.14 1.1-2.6 1.19-4.92a6.4 6.4 0 0 0 5.16-4.65c.21-.81.21-1.8.21-3.79 0-1.98 0-2.98-.22-3.79a6.4 6.4 0 0 0-5.15-4.65c-.1-2.32-.36-3.78-1.19-4.92a6.4 6.4 0 0 0-1.41-1.42C36.35 6 33.95 6 29.15 6h-14.3c-4.8 0-7.2 0-8.88 1.22a6.4 6.4 0 0 0-1.41 1.42Z"
    />
    <path
      style="fill: var(--wui-color-fg-200);"
      fill-rule="evenodd"
      d="M2.27 11.33a6.4 6.4 0 0 1 6.4-6.4h26.66a6.4 6.4 0 0 1 6.4 6.4v1.7a6.4 6.4 0 0 1 5.34 6.3v5.34a6.4 6.4 0 0 1-5.34 6.3v1.7a6.4 6.4 0 0 1-6.4 6.4H8.67a6.4 6.4 0 0 1-6.4-6.4V11.33ZM39.6 31.07h-6.93a9.07 9.07 0 1 1 0-18.14h6.93v-1.6a4.27 4.27 0 0 0-4.27-4.26H8.67a4.27 4.27 0 0 0-4.27 4.26v21.34a4.27 4.27 0 0 0 4.27 4.26h26.66a4.27 4.27 0 0 0 4.27-4.26v-1.6Zm-6.93-16a6.93 6.93 0 0 0 0 13.86h8a4.27 4.27 0 0 0 4.26-4.26v-5.34a4.27 4.27 0 0 0-4.26-4.26h-8Z"
      clip-rule="evenodd"
    />
  </svg>
`;var rfe=Object.freeze({__proto__:null,walletPlaceholderSvg:tfe});const nfe=ee`<svg fill="none" viewBox="0 0 20 20">
  <path
    fill="currentColor"
    d="M11 6.67a1 1 0 1 0-2 0v2.66a1 1 0 0 0 2 0V6.67ZM10 14.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z"
  />
  <path
    fill="currentColor"
    fill-rule="evenodd"
    d="M10 1a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm-7 9a7 7 0 1 1 14 0 7 7 0 0 1-14 0Z"
    clip-rule="evenodd"
  />
</svg>`;var ife=Object.freeze({__proto__:null,warningCircleSvg:nfe});const sfe=ee`<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.125 6.875C9.125 6.57833 9.21298 6.28832 9.3778 6.04165C9.54262 5.79497 9.77689 5.60271 10.051 5.48918C10.3251 5.37565 10.6267 5.34594 10.9176 5.40382C11.2086 5.4617 11.4759 5.60456 11.6857 5.81434C11.8954 6.02412 12.0383 6.29139 12.0962 6.58236C12.1541 6.87334 12.1244 7.17494 12.0108 7.44903C11.8973 7.72311 11.705 7.95738 11.4584 8.1222C11.2117 8.28703 10.9217 8.375 10.625 8.375C10.2272 8.375 9.84565 8.21696 9.56434 7.93566C9.28304 7.65436 9.125 7.27282 9.125 6.875ZM21.125 11C21.125 13.0025 20.5312 14.9601 19.4186 16.6251C18.3061 18.2902 16.7248 19.5879 14.8747 20.3543C13.0246 21.1206 10.9888 21.3211 9.02471 20.9305C7.06066 20.5398 5.25656 19.5755 3.84055 18.1595C2.42454 16.7435 1.46023 14.9393 1.06955 12.9753C0.678878 11.0112 0.879387 8.97543 1.64572 7.12533C2.41206 5.27523 3.70981 3.69392 5.37486 2.58137C7.0399 1.46882 8.99747 0.875 11 0.875C13.6844 0.877978 16.258 1.94567 18.1562 3.84383C20.0543 5.74199 21.122 8.3156 21.125 11ZM18.875 11C18.875 9.44247 18.4131 7.91992 17.5478 6.62488C16.6825 5.32985 15.4526 4.32049 14.0136 3.72445C12.5747 3.12841 10.9913 2.97246 9.46367 3.27632C7.93607 3.58017 6.53288 4.3302 5.43154 5.43153C4.3302 6.53287 3.58018 7.93606 3.27632 9.46366C2.97246 10.9913 3.12841 12.5747 3.72445 14.0136C4.32049 15.4526 5.32985 16.6825 6.62489 17.5478C7.91993 18.4131 9.44248 18.875 11 18.875C13.0879 18.8728 15.0896 18.0424 16.566 16.566C18.0424 15.0896 18.8728 13.0879 18.875 11ZM12.125 14.4387V11.375C12.125 10.8777 11.9275 10.4008 11.5758 10.0492C11.2242 9.69754 10.7473 9.5 10.25 9.5C9.98433 9.4996 9.72708 9.59325 9.52383 9.76435C9.32058 9.93544 9.18444 10.173 9.13952 10.4348C9.09461 10.6967 9.14381 10.966 9.27843 11.195C9.41304 11.4241 9.62438 11.5981 9.875 11.6863V14.75C9.875 15.2473 10.0725 15.7242 10.4242 16.0758C10.7758 16.4275 11.2527 16.625 11.75 16.625C12.0157 16.6254 12.2729 16.5318 12.4762 16.3607C12.6794 16.1896 12.8156 15.952 12.8605 15.6902C12.9054 15.4283 12.8562 15.159 12.7216 14.93C12.587 14.7009 12.3756 14.5269 12.125 14.4387Z" fill="currentColor"/>
</svg>`;var ofe=Object.freeze({__proto__:null,infoSvg:sfe});const afe=ee`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15.0162 11.6312L9.55059 2.13937C9.39228 1.86862 9.16584 1.64405 8.8938 1.48798C8.62176 1.33192 8.3136 1.2498 7.99997 1.2498C7.68634 1.2498 7.37817 1.33192 7.10613 1.48798C6.83409 1.64405 6.60765 1.86862 6.44934 2.13937L0.983716 11.6312C0.830104 11.894 0.749146 12.1928 0.749146 12.4972C0.749146 12.8015 0.830104 13.1004 0.983716 13.3631C1.14027 13.6352 1.3664 13.8608 1.63889 14.0166C1.91139 14.1725 2.22044 14.253 2.53434 14.25H13.4656C13.7793 14.2528 14.0881 14.1721 14.3603 14.0163C14.6326 13.8604 14.8585 13.635 15.015 13.3631C15.1688 13.1005 15.2499 12.8017 15.2502 12.4973C15.2504 12.193 15.1696 11.8941 15.0162 11.6312ZM13.7162 12.6125C13.6908 12.6558 13.6541 12.6914 13.6101 12.7157C13.5661 12.7399 13.5164 12.7517 13.4662 12.75H2.53434C2.48415 12.7517 2.43442 12.7399 2.39042 12.7157C2.34641 12.6914 2.30976 12.6558 2.28434 12.6125C2.26278 12.5774 2.25137 12.5371 2.25137 12.4959C2.25137 12.4548 2.26278 12.4144 2.28434 12.3794L7.74997 2.88749C7.77703 2.84583 7.81408 2.8116 7.85774 2.7879C7.9014 2.7642 7.95029 2.75178 7.99997 2.75178C8.04964 2.75178 8.09854 2.7642 8.1422 2.7879C8.18586 2.8116 8.2229 2.84583 8.24997 2.88749L13.715 12.3794C13.7367 12.4143 13.7483 12.4546 13.7486 12.4958C13.7488 12.5369 13.7376 12.5773 13.7162 12.6125ZM7.24997 8.49999V6.49999C7.24997 6.30108 7.32898 6.11031 7.46964 5.96966C7.61029 5.82901 7.80105 5.74999 7.99997 5.74999C8.19888 5.74999 8.38964 5.82901 8.5303 5.96966C8.67095 6.11031 8.74997 6.30108 8.74997 6.49999V8.49999C8.74997 8.6989 8.67095 8.88967 8.5303 9.03032C8.38964 9.17097 8.19888 9.24999 7.99997 9.24999C7.80105 9.24999 7.61029 9.17097 7.46964 9.03032C7.32898 8.88967 7.24997 8.6989 7.24997 8.49999ZM8.99997 11C8.99997 11.1978 8.94132 11.3911 8.83144 11.5556C8.72155 11.72 8.56538 11.8482 8.38265 11.9239C8.19992 11.9996 7.99886 12.0194 7.80488 11.9808C7.6109 11.9422 7.43271 11.847 7.29286 11.7071C7.15301 11.5672 7.05777 11.3891 7.01918 11.1951C6.9806 11.0011 7.0004 10.8 7.07609 10.6173C7.15177 10.4346 7.27995 10.2784 7.4444 10.1685C7.60885 10.0586 7.80219 9.99999 7.99997 9.99999C8.26518 9.99999 8.51954 10.1053 8.70707 10.2929C8.89461 10.4804 8.99997 10.7348 8.99997 11Z" fill="currentColor"/>
</svg>
`;var cfe=Object.freeze({__proto__:null,exclamationTriangleSvg:afe});const lfe=ee`<svg width="60" height="16" viewBox="0 0 60 16" fill="none"">
  <path d="M9.3335 4.66667C9.3335 2.08934 11.4229 0 14.0002 0H20.6669C23.2442 0 25.3335 2.08934 25.3335 4.66667V11.3333C25.3335 13.9106 23.2442 16 20.6669 16H14.0002C11.4229 16 9.3335 13.9106 9.3335 11.3333V4.66667Z" fill="#363636"/>
  <path d="M15.6055 11.0003L17.9448 4.66699H18.6316L16.2923 11.0003H15.6055Z" fill="#F6F6F6"/>
  <path d="M0 4.33333C0 1.9401 1.9401 0 4.33333 0C6.72657 0 8.66669 1.9401 8.66669 4.33333V11.6667C8.66669 14.0599 6.72657 16 4.33333 16C1.9401 16 0 14.0599 0 11.6667V4.33333Z" fill="#363636"/>
  <path d="M3.9165 9.99934V9.16602H4.74983V9.99934H3.9165Z" fill="#F6F6F6"/>
  <path d="M26 8C26 3.58172 29.3517 0 33.4863 0H52.5137C56.6483 0 60 3.58172 60 8C60 12.4183 56.6483 16 52.5137 16H33.4863C29.3517 16 26 12.4183 26 8Z" fill="#363636"/>
  <path d="M49.3687 9.95834V6.26232H50.0213V6.81966C50.256 6.40899 50.7326 6.16699 51.2606 6.16699C52.0599 6.16699 52.6173 6.67299 52.6173 7.65566V9.95834H51.972V7.69234C51.972 7.04696 51.6053 6.70966 51.07 6.70966C50.4906 6.70966 50.0213 7.17168 50.0213 7.82433V9.95834H49.3687Z" fill="#F6F6F6"/>
  <path d="M45.2538 9.95773L44.5718 6.26172H45.1877L45.6717 9.31242L46.3098 7.30306H46.9184L47.5491 9.29041L48.0404 6.26172H48.6564L47.9744 9.95773H47.2411L46.6178 8.03641L45.9871 9.95773H45.2538Z" fill="#F6F6F6"/>
  <path d="M42.3709 10.0536C41.2489 10.0536 40.5889 9.21765 40.5889 8.1103C40.5889 7.01035 41.2489 6.16699 42.3709 6.16699C43.4929 6.16699 44.1529 7.01035 44.1529 8.1103C44.1529 9.21765 43.4929 10.0536 42.3709 10.0536ZM42.3709 9.51096C43.1775 9.51096 43.4856 8.82164 43.4856 8.10296C43.4856 7.39163 43.1775 6.70966 42.3709 6.70966C41.5642 6.70966 41.2562 7.39163 41.2562 8.10296C41.2562 8.82164 41.5642 9.51096 42.3709 9.51096Z" fill="#F6F6F6"/>
  <path d="M38.2805 10.0536C37.1952 10.0536 36.5132 9.22499 36.5132 8.1103C36.5132 7.00302 37.1952 6.16699 38.2805 6.16699C39.1972 6.16699 40.0038 6.68766 39.9159 8.27896H37.1805C37.2319 8.96103 37.5472 9.5183 38.2805 9.5183C38.7718 9.5183 39.0945 9.21765 39.2045 8.87299H39.8499C39.7472 9.48903 39.1679 10.0536 38.2805 10.0536ZM37.1952 7.78765H39.2852C39.2338 7.04696 38.8892 6.70232 38.2805 6.70232C37.6132 6.70232 37.2832 7.18635 37.1952 7.78765Z" fill="#F6F6F6"/>
  <path d="M33.3828 9.95773V6.26172H34.0501V6.88506C34.2848 6.47439 34.6882 6.26172 35.1061 6.26172H35.9935V6.88506H35.0548C34.4682 6.88506 34.0501 7.26638 34.0501 8.00706V9.95773H33.3828Z" fill="#F6F6F6"/>
</svg>`;var ufe=Object.freeze({__proto__:null,reownSvg:lfe});Vn.EthereumProvider=yW,Vn.OPTIONAL_EVENTS=M8,Vn.OPTIONAL_METHODS=F8,Vn.REQUIRED_EVENTS=Xp,Vn.REQUIRED_METHODS=Jp,Vn.default=tf,Object.defineProperty(Vn,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
