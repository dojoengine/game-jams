<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Treat or Witch â€” Dojo Game Jam</title>
  <link rel="stylesheet" href="./styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
</head>
<body>
  <div id="game-scene">

    <!-- SKY + decorative elements -->
    <div id="sky">
      <div id="stars"></div>
      <div id="twinkle"></div>
      <div id="moon"></div>
      <img id="ghost" src="https://pngimg.com/d/ghost_PNG36.png" alt="ghost" />
      <h1 id="game-title">
  ğŸƒ    <span>Witch or Treat!</span> ğŸ•¸
      </h1>
    </div>

    <div class="game-controls">
      <button id="controller-button">Connect Wallet</button>
      <!-- <button id="play-button" disabled>Play</button> -->
    </div>

    <!-- MAIN SCENE - Single SVG house centered -->
    <div id="village">
      <!-- simple colourful SVG house (scales nicely) -->
      <svg id="haunted-house" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Haunted house">
        <!-- roof -->
        <polygon points="100,10 20,80 180,80" fill="#34221a"/>
        <!-- house body -->
        <rect x="40" y="80" width="120" height="90" rx="8" fill="#5b3b2e"/>
        <!-- door -->
        <rect x="92" y="120" width="16" height="50" fill="#0a0a0a"/>
        <!-- windows -->
        <rect x="58" y="96" width="22" height="22" rx="3" fill="#ffd86b"/>
        <rect x="120" y="96" width="22" height="22" rx="3" fill="#ffd86b"/>
        <!-- highlights / details -->
        <circle cx="140" cy="70" r="4" fill="#ff9f1c" opacity="0.9"/>
        <rect x="68" y="140" width="10" height="3" fill="#2b1d0e"/>
      </svg>

      <!-- Doorbell (centered on house) -->
      <button id="doorbell-button" aria-label="Ring doorbell">ğŸ””</button>
    </div>

    <!-- HUD: treats (right sidebar) -->
    <aside id="treat-sidebar" aria-hidden="false">
      <div class="treat-item">
        <span class="treat-emoji">ğŸ’€</span>
        <span id="choco-skull-display" class="treat-count">0</span>
      </div>
      <div class="treat-item">
        <span class="treat-emoji">ğŸƒ</span>
        <span id="pulpy-pumpkin-display" class="treat-count">0</span>
      </div>
      <div class="treat-item">
        <span class="treat-emoji">ğŸ­</span>
        <span id="vampire-lollipop-display" class="treat-count">0</span>
      </div>
      <div class="treat-item">
        <span class="treat-emoji">ğŸ‘»</span>
        <span id="ghost-candy-display" class="treat-count">0</span>
      </div>

      <!-- View Potions large emoji/button to open potion modal -->
      <button id="view-potions-btn" aria-label="View potions">
        <span class="vp-emoji">ğŸ§ª</span>
        <span class="vp-text">View Potions</span>
      </button>
    </aside>

    <!-- Legacy brew/drink buttons (kept because you listed those IDs) -->
    <div id="legacy-buttons" aria-hidden="true">
      <button id="brew-bribe-potion-button">Brew Bribe</button>
      <button id="brew-witch-slayer-button">Brew Slayer</button>
      <button id="brew-multiplier-button">Brew Multiplier</button>

      <button id="drink-bribe-potion-button">Drink Bribe</button>
      <button id="drink-witch-slayer-button">Drink Slayer</button>
      <button id="drink-treat-multiplier-button">Drink Multiplier</button>

      <div id="latest-brew-display" aria-hidden="true"></div>
      <div id="latest-guzzle-display" aria-hidden="true"></div>
    </div>

    <!-- overlay: potion modal and curse screen appear here -->
    <div id="overlay" class="hidden" aria-hidden="true">
      <!-- potion modal -->
      <div id="potion-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="potion-title">
        <button id="potion-close" class="modal-close" aria-label="Close">âœ•</button>
        <h2 id="potion-title">Brew & Drink Potions</h2>
        <p class="muted">Spend treats to brew. Tap Drink to use a potion.</p>

        <div id="potion-grid">
          <!-- Bribe -->
          <div class="potion-card" data-type="bribe">
            <div class="potion-preview">ğŸ§µ</div>
            <div class="potion-name">Witch Bribe</div>
            <div class="potion-cost">Cost: 2 ğŸƒ</div>
            <div class="potion-actions">
              <button class="potion-action brew" data-type="bribe" id="brew-bribe-potion-button-modal">Brew</button>
              <button class="potion-action guzzle" data-type="bribe" id="drink-bribe-potion-button-modal">Drink</button>
            </div>
            <div class="potion-info">
              <div class="potion-treats">You have 0 ğŸƒ</div>
              <div class="potion-owned">You have 0 potions</div>
              <div class="potion-active hidden">ğŸ§™â€â™€ Active!</div>
            </div>
          </div>

          <!-- Slayer -->
          <div class="potion-card" data-type="slayer">
            <div class="potion-preview">ğŸ—¡</div>
            <div class="potion-name">Witch Slayer</div>
            <div class="potion-cost">Cost: 3 ğŸ­</div>
            <div class="potion-actions">
              <button class="potion-action brew" data-type="slayer" id="brew-witch-slayer-button-modal">Brew</button>
              <button class="potion-action guzzle" data-type="slayer" id="drink-witch-slayer-button-modal">Drink</button>
            </div>
            <div class="potion-info">
              <div class="potion-treats">You have 0 ğŸ­</div>
              <div class="potion-owned">You have 0 potions</div>
              <div class="potion-active hidden">ğŸ§™â€â™€ Active!</div>
            </div>
          </div>

          <!-- Multiplier -->
          <div class="potion-card" data-type="multiplier">
            <div class="potion-preview">âœ¨</div>
            <div class="potion-name">Treat Multiplier</div>
            <div class="potion-cost">Cost: 4 ğŸ‘»</div>
            <div class="potion-actions">
              <button class="potion-action brew" data-type="multiplier" id="brew-multiplier-button-modal">Brew</button>
              <button class="potion-action guzzle" data-type="multiplier" id="drink-treat-multiplier-button-modal">Drink</button>
            </div>
            <div class="potion-info">
              <div class="potion-treats">You have 0 ğŸ‘»</div>
              <div class="potion-owned">You have 0 potions</div>
              <div class="potion-active hidden">ğŸ§™â€â™€ Active!</div>
            </div>
          </div>
        </div>
        
      </div>

      <!-- curse / game over screen -->
      <div id="curse-screen" class="modal hidden" role="alertdialog" aria-modal="true">
        <h1>WITCH'S CURSE!</h1>
        <p id="curse-text">A witch cursed you â€” press Play to continue.</p>
        <button id="play-button-centered" class="big-play">Play</button>
      </div>
    </div>

    <!-- confetti -->
    <div id="confetti-container" aria-hidden="true"></div>

  </div>

  <script type="module" src="./main.js"></script>
</body>
</html>
